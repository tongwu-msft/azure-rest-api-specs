### YamlMime:RESTOperation
uid: management.azure.com.site-recovery.replicationprotecteditems.testfailover
name: Test Failover
service: Recovery Services - Site Recovery
groupName: Replication Protected Items
apiVersion: 2016-08-10
summary: "Execute test failover  \nOperation to perform a test failover of the replication protected item."
consumes:
- application/json
produces:
- application/json
paths:
- content: POST https://management.azure.com/Subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.RecoveryServices/vaults/{resourceName}/replicationFabrics/{fabricName}/replicationProtectionContainers/{protectionContainerName}/replicationProtectedItems/{replicatedProtectedItemName}/testFailover?api-version=2016-08-10
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: The subscription Id.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group where the recovery services vault is present.
  types:
  - uid: string
- name: resourceName
  in: path
  isRequired: true
  description: The name of the recovery services vault.
  types:
  - uid: string
- name: fabricName
  in: path
  isRequired: true
  description: Unique fabric name.
  types:
  - uid: string
- name: protectionContainerName
  in: path
  isRequired: true
  description: Protection container name.
  types:
  - uid: string
- name: replicatedProtectedItemName
  in: path
  isRequired: true
  description: Replication protected item name.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: Client Api Version.
  types:
  - uid: string
responses:
- name: 200 OK
  description: OK
  types:
  - uid: ReplicationProtectedItem
- name: 202 Accepted
  description: Accepted
requestBody:
- name: default
  parameters:
  - name: properties
    in: body
    description: Planned failover input properties
    types:
    - uid: TestFailoverInputProperties
requestHeader: []
definitions:
- name: TestFailoverInputProperties
  description: Input definition for planned failover input properties.
  kind: object
  properties:
  - name: failoverDirection
    description: Failover direction.
    types:
    - uid: string
  - name: networkType
    description: Network type to be used for test failover.
    types:
    - uid: string
  - name: networkId
    description: The id of the network to be used for test failover
    types:
    - uid: string
  - name: skipTestFailoverCleanup
    description: A value indicating whether the test failover cleanup is to be skipped.
    types:
    - uid: string
  - name: providerSpecificDetails
    description: Provider specific settings
    types:
    - uid: HyperVReplicaAzureFailoverProviderInput
    - uid: HyperVReplicaAzureFailbackProviderInput
    - uid: InMageAzureV2FailoverProviderInput
    - uid: InMageFailoverProviderInput
    - uid: A2AFailoverProviderInput
    typesTitle: ProviderSpecificFailoverInput
- name: ReplicationProtectedItem
  description: Replication protected item.
  kind: object
  properties:
  - name: properties
    description: The custom data.
    types:
    - uid: ReplicationProtectedItemProperties
  - name: id
    isReadyOnly: true
    description: Resource Id
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: Resource Name
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: Resource Type
    types:
    - uid: string
  - name: location
    description: Resource Location
    types:
    - uid: string
- name: TestFailoverInput
  description: Input definition for planned failover.
  kind: object
  properties:
  - name: properties
    description: Planned failover input properties
    types:
    - uid: TestFailoverInputProperties
- name: ReplicationProtectedItemProperties
  description: Replication protected item custom data details.
  kind: object
  properties:
  - name: friendlyName
    description: The name.
    types:
    - uid: string
  - name: protectedItemType
    description: The type of protected item type.
    types:
    - uid: string
  - name: protectableItemId
    description: The protected item ARM Id.
    types:
    - uid: string
  - name: recoveryServicesProviderId
    description: The recovery provider ARM Id.
    types:
    - uid: string
  - name: primaryFabricFriendlyName
    description: The friendly name of the primary fabric.
    types:
    - uid: string
  - name: recoveryFabricFriendlyName
    description: The friendly name of recovery fabric.
    types:
    - uid: string
  - name: recoveryFabricId
    description: The Arm Id of recovery fabric.
    types:
    - uid: string
  - name: primaryProtectionContainerFriendlyName
    description: The name of primary protection container friendly name.
    types:
    - uid: string
  - name: recoveryProtectionContainerFriendlyName
    description: The name of recovery container friendly name.
    types:
    - uid: string
  - name: protectionState
    description: The protection status.
    types:
    - uid: string
  - name: protectionStateDescription
    description: The protection state description.
    types:
    - uid: string
  - name: activeLocation
    description: The Current active location of the PE.
    types:
    - uid: string
  - name: testFailoverState
    description: The Test failover state.
    types:
    - uid: string
  - name: testFailoverStateDescription
    description: The Test failover state description.
    types:
    - uid: string
  - name: allowedOperations
    description: The allowed operations on the Replication protected item.
    types:
    - uid: string
      isArray: true
  - name: replicationHealth
    description: The consolidated protection health for the VM taking any issues with SRS as well as all the replication units associated with the VM's replication group into account. This is a string representation of the ProtectionHealth enumeration.
    types:
    - uid: string
  - name: failoverHealth
    description: The consolidated failover health for the VM.
    types:
    - uid: string
  - name: replicationHealthErrors
    description: List of replication health errors.
    types:
    - uid: HealthError
      isArray: true
  - name: failoverHealthErrors
    description: List of failover health errors.
    types:
    - uid: HealthError
      isArray: true
  - name: policyId
    description: The ID of Policy governing this PE.
    types:
    - uid: string
  - name: policyFriendlyName
    description: The name of Policy governing this PE.
    types:
    - uid: string
  - name: lastSuccessfulFailoverTime
    description: The Last successful failover time.
    types:
    - uid: string
  - name: lastSuccessfulTestFailoverTime
    description: The Last successful test failover time.
    types:
    - uid: string
  - name: currentScenario
    description: The current scenario.
    types:
    - uid: CurrentScenarioDetails
  - name: failoverRecoveryPointId
    description: The recovery point ARM Id to which the Vm was failed over.
    types:
    - uid: string
  - name: providerSpecificDetails
    description: The Replication provider custom settings.
    types:
    - uid: HyperVReplicaBaseReplicationDetails
    - uid: HyperVReplicaReplicationDetails
    - uid: HyperVReplicaBlueReplicationDetails
    - uid: HyperVReplicaAzureReplicationDetails
    - uid: InMageAzureV2ReplicationDetails
    - uid: InMageReplicationDetails
    - uid: A2AReplicationDetails
    typesTitle: ReplicationProviderSpecificSettings
  - name: recoveryContainerId
    description: The recovery container Id.
    types:
    - uid: string
- name: HyperVReplicaAzureFailoverProviderInput
  description: HvrA provider specific input for failover.
  kind: object
  properties:
  - name: vaultLocation
    description: Location of the vault.
    types:
    - uid: string
  - name: primaryKekCertificatePfx
    description: Primary kek certificate pfx.
    types:
    - uid: string
  - name: secondaryKekCertificatePfx
    description: Secondary kek certificate pfx.
    types:
    - uid: string
  - name: recoveryPointId
    description: The recovery point id to be passed to failover to a particular recovery point. In case of latest recovery point, null should be passed.
    types:
    - uid: string
  - name: instanceType
    description: The class type.
    types:
    - uid: HyperVReplicaAzure
    typesTitle: string
- name: HyperVReplicaAzureFailbackProviderInput
  description: HvrA provider specific input for failback.
  kind: object
  properties:
  - name: dataSyncOption
    description: Data sync option.
    types:
    - uid: string
  - name: recoveryVmCreationOption
    description: ALR options to create alternate recovery.
    types:
    - uid: string
  - name: providerIdForAlternateRecovery
    description: Provider ID for alternate location
    types:
    - uid: string
  - name: instanceType
    description: The class type.
    types:
    - uid: HyperVReplicaAzureFailback
    typesTitle: string
- name: InMageAzureV2FailoverProviderInput
  description: InMageAzureV2 provider specific input for failover.
  kind: object
  properties:
  - name: vaultLocation
    description: Location of the vault.
    types:
    - uid: string
  - name: recoveryPointId
    description: The recovery point id to be passed to failover to a particular recovery point. In case of latest recovery point, null should be passed.
    types:
    - uid: string
  - name: instanceType
    description: The class type.
    types:
    - uid: InMageAzureV2
    typesTitle: string
- name: InMageFailoverProviderInput
  description: Provider specific input for InMage failover.
  kind: object
  properties:
  - name: recoveryPointType
    description: The recovery point type. Values from LatestTime, LatestTag or Custom. In the case of custom, the recovery point provided by RecoveryPointId will be used. In the other two cases, recovery point id will be ignored.
    types:
    - uid: RecoveryPointType
  - name: recoveryPointId
    description: The recovery point id to be passed to failover to a particular recovery point. In case of latest recovery point, null should be passed.
    types:
    - uid: string
  - name: instanceType
    description: The class type.
    types:
    - uid: InMage
    typesTitle: string
- name: A2AFailoverProviderInput
  description: A2A provider specific input for failover.
  kind: object
  properties:
  - name: recoveryPointId
    description: The recovery point id to be passed to failover to a particular recovery point. In case of latest recovery point, null should be passed.
    types:
    - uid: string
  - name: cloudServiceCreationOption
    description: A value indicating whether to use recovery cloud service for TFO or not.
    types:
    - uid: string
  - name: instanceType
    description: The class type.
    types:
    - uid: A2A
    typesTitle: string
- name: HealthError
  description: Health Error
  kind: object
  properties:
  - name: errorSource
    description: Source of error.
    types:
    - uid: string
  - name: errorType
    description: Type of error.
    types:
    - uid: string
  - name: errorLevel
    description: Level of error.
    types:
    - uid: string
  - name: errorCode
    description: Error code.
    types:
    - uid: string
  - name: errorMessage
    description: Error message.
    types:
    - uid: string
  - name: possibleCauses
    description: Possible causes of error.
    types:
    - uid: string
  - name: recommendedAction
    description: Recommended action to resolve error.
    types:
    - uid: string
  - name: creationTimeUtc
    description: Error creation time (UTC)
    types:
    - uid: string
  - name: recoveryProviderErrorMessage
    description: DRA error message.
    types:
    - uid: string
  - name: entityId
    description: ID of the entity.
    types:
    - uid: string
  - name: childErrors
    description: The child health errors.
    types:
    - uid: HealthError
      isArray: true
- name: CurrentScenarioDetails
  description: Current scenario details of the protected entity.
  kind: object
  properties:
  - name: scenarioName
    description: Scenario name.
    types:
    - uid: string
  - name: jobId
    description: ARM Id of the job being executed.
    types:
    - uid: string
  - name: startTime
    description: Start time of the workflow.
    types:
    - uid: string
- name: RecoveryPointType
  description: The recovery point type. Values from LatestTime, LatestTag or Custom. In the case of custom, the recovery point provided by RecoveryPointId will be used. In the other two cases, recovery point id will be ignored.
  kind: enum
  properties:
  - name: LatestTime
    types:
    - uid: string
  - name: LatestTag
    types:
    - uid: string
  - name: Custom
    types:
    - uid: string
- name: HyperVReplicaBaseReplicationDetails
  description: Hyper V replica provider specific settings base class.
  kind: object
  properties:
  - name: lastReplicatedTime
    description: The Last replication time.
    types:
    - uid: string
  - name: vmNics
    description: The PE Network details.
    types:
    - uid: VMNicDetails
      isArray: true
  - name: vmId
    description: The virtual machine Id.
    types:
    - uid: string
  - name: vmProtectionState
    description: The protection state for the vm.
    types:
    - uid: string
  - name: vmProtectionStateDescription
    description: The protection state description for the vm.
    types:
    - uid: string
  - name: initialReplicationDetails
    description: Initial replication details.
    types:
    - uid: InitialReplicationDetails
  - name: vMDiskDetails
    description: VM disk details.
    types:
    - uid: DiskDetails
      isArray: true
  - name: instanceType
    isReadyOnly: true
    description: Gets the Instance type.
    types:
    - uid: HyperVReplicaBaseReplicationDetails
    typesTitle: string
- name: HyperVReplicaReplicationDetails
  description: HyperV replica 2012 replication details.
  kind: object
  properties:
  - name: lastReplicatedTime
    description: The Last replication time.
    types:
    - uid: string
  - name: vmNics
    description: The PE Network details.
    types:
    - uid: VMNicDetails
      isArray: true
  - name: vmId
    description: The virtual machine Id.
    types:
    - uid: string
  - name: vmProtectionState
    description: The protection state for the vm.
    types:
    - uid: string
  - name: vmProtectionStateDescription
    description: The protection state description for the vm.
    types:
    - uid: string
  - name: initialReplicationDetails
    description: Initial replication details.
    types:
    - uid: InitialReplicationDetails
  - name: vMDiskDetails
    description: VM disk details.
    types:
    - uid: DiskDetails
      isArray: true
  - name: instanceType
    isReadyOnly: true
    description: Gets the Instance type.
    types:
    - uid: HyperVReplica2012
    typesTitle: string
- name: HyperVReplicaBlueReplicationDetails
  description: HyperV replica 2012 R2 (Blue) replication details.
  kind: object
  properties:
  - name: lastReplicatedTime
    description: The Last replication time.
    types:
    - uid: string
  - name: vmNics
    description: The PE Network details.
    types:
    - uid: VMNicDetails
      isArray: true
  - name: vmId
    description: The virtual machine Id.
    types:
    - uid: string
  - name: vmProtectionState
    description: The protection state for the vm.
    types:
    - uid: string
  - name: vmProtectionStateDescription
    description: The protection state description for the vm.
    types:
    - uid: string
  - name: initialReplicationDetails
    description: Initial replication details.
    types:
    - uid: InitialReplicationDetails
  - name: vMDiskDetails
    description: VM disk details.
    types:
    - uid: DiskDetails
      isArray: true
  - name: instanceType
    isReadyOnly: true
    description: Gets the Instance type.
    types:
    - uid: HyperVReplica2012R2
    typesTitle: string
- name: HyperVReplicaAzureReplicationDetails
  description: Hyper V Replica Azure provider specific settings.
  kind: object
  properties:
  - name: azureVMDiskDetails
    description: Azure VM Disk details.
    types:
    - uid: AzureVmDiskDetails
      isArray: true
  - name: recoveryAzureVMName
    description: Recovery Azure given name.
    types:
    - uid: string
  - name: recoveryAzureVMSize
    description: The Recovery Azure VM size.
    types:
    - uid: string
  - name: recoveryAzureStorageAccount
    description: The recovery Azure storage account.
    types:
    - uid: string
  - name: recoveryAzureLogStorageAccountId
    description: The ARM id of the log storage account used for replication. This will be set to null if no log storage account was provided during enable protection.
    types:
    - uid: string
  - name: lastReplicatedTime
    description: The Last replication time.
    types:
    - uid: string
  - name: vmId
    description: The virtual machine Id.
    types:
    - uid: string
  - name: vmProtectionState
    description: The protection state for the vm.
    types:
    - uid: string
  - name: vmProtectionStateDescription
    description: The protection state description for the vm.
    types:
    - uid: string
  - name: initialReplicationDetails
    description: Initial replication details.
    types:
    - uid: InitialReplicationDetails
  - name: vmNics
    description: The PE Network details.
    types:
    - uid: VMNicDetails
      isArray: true
  - name: selectedRecoveryAzureNetworkId
    description: The selected recovery azure network Id.
    types:
    - uid: string
  - name: encryption
    description: The encryption info.
    types:
    - uid: string
  - name: oSDetails
    description: The operating system info.
    types:
    - uid: OSDetails
  - name: sourceVmRAMSizeInMB
    description: The RAM size of the VM on the primary side.
    types:
    - uid: integer
  - name: sourceVmCPUCount
    description: The CPU count of the VM on the primary side.
    types:
    - uid: integer
  - name: enableRDPOnTargetOption
    description: The selected option to enable RDP\SSH on target vm after failover. String value of {SrsDataContract.EnableRDPOnTargetOption} enum.
    types:
    - uid: string
  - name: recoveryAzureResourceGroupId
    description: The target resource group Id.
    types:
    - uid: string
  - name: recoveryAvailabilitySetId
    description: The recovery availability set Id.
    types:
    - uid: string
  - name: useManagedDisks
    description: A value indicating whether managed disks should be used during failover.
    types:
    - uid: string
  - name: licenseType
    description: License Type of the VM to be used.
    types:
    - uid: string
  - name: instanceType
    isReadyOnly: true
    description: Gets the Instance type.
    types:
    - uid: HyperVReplicaAzure
    typesTitle: string
- name: InMageAzureV2ReplicationDetails
  description: InMageAzureV2 provider specific settings
  kind: object
  properties:
  - name: infrastructureVmId
    description: The infrastructure VM Id.
    types:
    - uid: string
  - name: vCenterInfrastructureId
    description: The vCenter infrastructure Id.
    types:
    - uid: string
  - name: protectionStage
    description: The protection stage.
    types:
    - uid: string
  - name: vmId
    description: The virtual machine Id.
    types:
    - uid: string
  - name: vmProtectionState
    description: The protection state for the vm.
    types:
    - uid: string
  - name: vmProtectionStateDescription
    description: The protection state description for the vm.
    types:
    - uid: string
  - name: resyncProgressPercentage
    description: The resync progress percentage.
    types:
    - uid: integer
  - name: rpoInSeconds
    description: The RPO in seconds.
    types:
    - uid: integer
  - name: compressedDataRateInMB
    description: The compressed data change rate in MB.
    types:
    - uid: number
  - name: uncompressedDataRateInMB
    description: The uncompressed data change rate in MB.
    types:
    - uid: number
  - name: ipAddress
    description: The source IP address.
    types:
    - uid: string
  - name: agentVersion
    description: The agent version.
    types:
    - uid: string
  - name: isAgentUpdateRequired
    description: A value indicating whether installed agent needs to be updated.
    types:
    - uid: string
  - name: isRebootAfterUpdateRequired
    description: A value indicating whether the source server requires a restart after update.
    types:
    - uid: string
  - name: lastHeartbeat
    description: The last heartbeat received from the source server.
    types:
    - uid: string
  - name: processServerId
    description: The process server Id.
    types:
    - uid: string
  - name: multiVmGroupId
    description: The multi vm group Id.
    types:
    - uid: string
  - name: multiVmGroupName
    description: The multi vm group name.
    types:
    - uid: string
  - name: multiVmSyncStatus
    description: A value indicating whether multi vm sync is enabled or disabled.
    types:
    - uid: string
  - name: protectedDisks
    description: The list of protected disks.
    types:
    - uid: InMageAzureV2ProtectedDiskDetails
      isArray: true
  - name: diskResized
    description: A value indicating whether any disk is resized for this VM.
    types:
    - uid: string
  - name: masterTargetId
    description: The master target Id.
    types:
    - uid: string
  - name: sourceVmCPUCount
    description: The CPU count of the VM on the primary side.
    types:
    - uid: integer
  - name: sourceVmRAMSizeInMB
    description: The RAM size of the VM on the primary side.
    types:
    - uid: integer
  - name: osType
    description: The type of the OS on the VM.
    types:
    - uid: string
  - name: vhdName
    description: The OS disk VHD name.
    types:
    - uid: string
  - name: osDiskId
    description: The id of the disk containing the OS.
    types:
    - uid: string
  - name: azureVMDiskDetails
    description: Azure VM Disk details.
    types:
    - uid: AzureVmDiskDetails
      isArray: true
  - name: recoveryAzureVMName
    description: Recovery Azure given name.
    types:
    - uid: string
  - name: recoveryAzureVMSize
    description: The Recovery Azure VM size.
    types:
    - uid: string
  - name: recoveryAzureStorageAccount
    description: The recovery Azure storage account.
    types:
    - uid: string
  - name: recoveryAzureLogStorageAccountId
    description: The ARM id of the log storage account used for replication. This will be set to null if no log storage account was provided during enable protection.
    types:
    - uid: string
  - name: vmNics
    description: The PE Network details.
    types:
    - uid: VMNicDetails
      isArray: true
  - name: selectedRecoveryAzureNetworkId
    description: The selected recovery azure network Id.
    types:
    - uid: string
  - name: discoveryType
    description: A value indicating the discovery type of the machine. Value can be vCenter or physical.
    types:
    - uid: string
  - name: enableRDPOnTargetOption
    description: The selected option to enable RDP\SSH on target vm after failover. String value of {SrsDataContract.EnableRDPOnTargetOption} enum.
    types:
    - uid: string
  - name: datastores
    description: The datastores of the on-premise machine. Value can be list of strings that contain datastore names.
    types:
    - uid: string
      isArray: true
  - name: targetVmId
    description: The ARM Id of the target Azure VM. This value will be null until the VM is failed over. Only after failure it will be populated with the ARM Id of the Azure VM.
    types:
    - uid: string
  - name: recoveryAzureResourceGroupId
    description: The target resource group Id.
    types:
    - uid: string
  - name: recoveryAvailabilitySetId
    description: The recovery availability set Id.
    types:
    - uid: string
  - name: useManagedDisks
    description: A value indicating whether managed disks should be used during failover.
    types:
    - uid: string
  - name: licenseType
    description: License Type of the VM to be used.
    types:
    - uid: string
  - name: validationErrors
    description: The validation errors of the on-premise machine Value can be list of validation errors.
    types:
    - uid: HealthError
      isArray: true
  - name: lastRpoCalculatedTime
    description: The last RPO calculated time.
    types:
    - uid: string
  - name: lastUpdateReceivedTime
    description: The last update time received from on-prem components.
    types:
    - uid: string
  - name: replicaId
    description: The replica id of the protected item.
    types:
    - uid: string
  - name: osVersion
    description: The OS Version of the protected item.
    types:
    - uid: string
  - name: instanceType
    isReadyOnly: true
    description: Gets the Instance type.
    types:
    - uid: InMageAzureV2
    typesTitle: string
- name: InMageReplicationDetails
  description: InMage provider specific settings
  kind: object
  properties:
  - name: activeSiteType
    description: The active location of the VM. If the VM is being protected from Azure, this field will take values from { Azure, OnPrem }. If the VM is being protected between two data-centers, this field will be OnPrem always.
    types:
    - uid: string
  - name: sourceVmCPUCount
    description: The CPU count of the VM on the primary side.
    types:
    - uid: integer
  - name: sourceVmRAMSizeInMB
    description: The RAM size of the VM on the primary side.
    types:
    - uid: integer
  - name: osDetails
    description: The OS details.
    types:
    - uid: OSDiskDetails
  - name: protectionStage
    description: The protection stage.
    types:
    - uid: string
  - name: vmId
    description: The virtual machine Id.
    types:
    - uid: string
  - name: vmProtectionState
    description: The protection state for the vm.
    types:
    - uid: string
  - name: vmProtectionStateDescription
    description: The protection state description for the vm.
    types:
    - uid: string
  - name: resyncDetails
    description: The resync details of the machine
    types:
    - uid: InitialReplicationDetails
  - name: retentionWindowStart
    description: The retention window start time.
    types:
    - uid: string
  - name: retentionWindowEnd
    description: The retention window end time.
    types:
    - uid: string
  - name: compressedDataRateInMB
    description: The compressed data change rate in MB.
    types:
    - uid: number
  - name: uncompressedDataRateInMB
    description: The uncompressed data change rate in MB.
    types:
    - uid: number
  - name: rpoInSeconds
    description: The RPO in seconds.
    types:
    - uid: integer
  - name: protectedDisks
    description: The list of protected disks.
    types:
    - uid: InMageProtectedDiskDetails
      isArray: true
  - name: ipAddress
    description: The source IP address.
    types:
    - uid: string
  - name: lastHeartbeat
    description: The last heartbeat received from the source server.
    types:
    - uid: string
  - name: processServerId
    description: The process server Id.
    types:
    - uid: string
  - name: masterTargetId
    description: The master target Id.
    types:
    - uid: string
  - name: consistencyPoints
    description: The collection of Consistency points.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: diskResized
    description: A value indicating whether any disk is resized for this VM.
    types:
    - uid: string
  - name: rebootAfterUpdateStatus
    description: A value indicating whether the source server requires a restart after update.
    types:
    - uid: string
  - name: multiVmGroupId
    description: The multi vm group Id, if any.
    types:
    - uid: string
  - name: multiVmGroupName
    description: The multi vm group name, if any.
    types:
    - uid: string
  - name: multiVmSyncStatus
    description: A value indicating whether the multi vm sync is enabled or disabled.
    types:
    - uid: string
  - name: agentDetails
    description: The agent details.
    types:
    - uid: InMageAgentDetails
  - name: vCenterInfrastructureId
    description: The vCenter infrastructure Id.
    types:
    - uid: string
  - name: infrastructureVmId
    description: The infrastructure VM Id.
    types:
    - uid: string
  - name: vmNics
    description: The PE Network details.
    types:
    - uid: VMNicDetails
      isArray: true
  - name: discoveryType
    description: A value indicating the discovery type of the machine.
    types:
    - uid: string
  - name: azureStorageAccountId
    description: A value indicating the underlying Azure storage account. If the VM is not running in Azure, this value shall be set to null.
    types:
    - uid: string
  - name: datastores
    description: The datastores of the on-premise machine Value can be list of strings that contain datastore names
    types:
    - uid: string
      isArray: true
  - name: validationErrors
    description: The validation errors of the on-premise machine Value can be list of validation errors
    types:
    - uid: HealthError
      isArray: true
  - name: lastRpoCalculatedTime
    description: The last RPO calculated time.
    types:
    - uid: string
  - name: lastUpdateReceivedTime
    description: The last update time received from on-prem components.
    types:
    - uid: string
  - name: replicaId
    description: The replica id of the protected item.
    types:
    - uid: string
  - name: osVersion
    description: The OS Version of the protected item.
    types:
    - uid: string
  - name: instanceType
    isReadyOnly: true
    description: Gets the Instance type.
    types:
    - uid: InMage
    typesTitle: string
- name: A2AReplicationDetails
  description: A2A provider specific settings.
  kind: object
  properties:
  - name: fabricObjectId
    description: The fabric specific object Id of the virtual machine.
    types:
    - uid: string
  - name: multiVmGroupId
    description: The multi vm group Id.
    types:
    - uid: string
  - name: multiVmGroupName
    description: The multi vm group name.
    types:
    - uid: string
  - name: managementId
    description: The management Id.
    types:
    - uid: string
  - name: protectedDisks
    description: The list of protected disks.
    types:
    - uid: A2AProtectedDiskDetails
      isArray: true
  - name: protectedManagedDisks
    description: The list of protected managed disks.
    types:
    - uid: A2AProtectedManagedDiskDetails
      isArray: true
  - name: primaryFabricLocation
    description: Primary fabric location.
    types:
    - uid: string
  - name: recoveryFabricLocation
    description: The recovery fabric location.
    types:
    - uid: string
  - name: osType
    description: The type of operating system.
    types:
    - uid: string
  - name: recoveryAzureVMSize
    description: The size of recovery virtual machine.
    types:
    - uid: string
  - name: recoveryAzureVMName
    description: The name of recovery virtual machine.
    types:
    - uid: string
  - name: recoveryAzureResourceGroupId
    description: The recovery resource group.
    types:
    - uid: string
  - name: recoveryCloudService
    description: The recovery cloud service.
    types:
    - uid: string
  - name: recoveryAvailabilitySet
    description: The recovery availability set.
    types:
    - uid: string
  - name: selectedRecoveryAzureNetworkId
    description: The recovery virtual network.
    types:
    - uid: string
  - name: vmNics
    description: The virtual machine nic details.
    types:
    - uid: VMNicDetails
      isArray: true
  - name: vmSyncedConfigDetails
    description: The synced configuration details.
    types:
    - uid: AzureToAzureVmSyncedConfigDetails
  - name: monitoringPercentageCompletion
    description: The percentage of the monitoring job. The type of the monitoring job is defined by MonitoringJobType property.
    types:
    - uid: integer
  - name: monitoringJobType
    description: The type of the monitoring job. The progress is contained in MonitoringPercentageCompletion property.
    types:
    - uid: string
  - name: lastHeartbeat
    description: The last heartbeat received from the source server.
    types:
    - uid: string
  - name: agentVersion
    description: The agent version.
    types:
    - uid: string
  - name: isReplicationAgentUpdateRequired
    description: A value indicating whether replication agent update is required.
    types:
    - uid: boolean
  - name: recoveryFabricObjectId
    description: The recovery fabric object Id.
    types:
    - uid: string
  - name: vmProtectionState
    description: The protection state for the vm.
    types:
    - uid: string
  - name: vmProtectionStateDescription
    description: The protection state description for the vm.
    types:
    - uid: string
  - name: lifecycleId
    description: An id associated with the PE that survives actions like switch protection which change the backing PE/CPE objects internally.The lifecycle id gets carried forward to have a link/continuity in being able to have an Id that denotes the "same" protected item even though other internal Ids/ARM Id might be changing.
    types:
    - uid: string
  - name: testFailoverRecoveryFabricObjectId
    description: The test failover fabric object Id.
    types:
    - uid: string
  - name: rpoInSeconds
    description: The last RPO value in seconds.
    types:
    - uid: integer
  - name: lastRpoCalculatedTime
    description: The time (in UTC) when the last RPO value was calculated by Protection Service.
    types:
    - uid: string
  - name: instanceType
    isReadyOnly: true
    description: Gets the Instance type.
    types:
    - uid: A2A
    typesTitle: string
- name: VMNicDetails
  description: Hyper V VM network details.
  kind: object
  properties:
  - name: nicId
    description: The nic Id.
    types:
    - uid: string
  - name: replicaNicId
    description: The replica nic Id.
    types:
    - uid: string
  - name: sourceNicArmId
    description: The source nic ARM Id.
    types:
    - uid: string
  - name: vMSubnetName
    description: VM subnet name.
    types:
    - uid: string
  - name: vMNetworkName
    description: VM network name.
    types:
    - uid: string
  - name: recoveryVMNetworkId
    description: Recovery VM network Id.
    types:
    - uid: string
  - name: recoveryVMSubnetName
    description: Recovery VM subnet name.
    types:
    - uid: string
  - name: ipAddressType
    description: Ip address type.
    types:
    - uid: string
  - name: primaryNicStaticIPAddress
    description: Primary nic static IP address.
    types:
    - uid: string
  - name: replicaNicStaticIPAddress
    description: Replica nic static IP address.
    types:
    - uid: string
  - name: selectionType
    description: Selection type for failover.
    types:
    - uid: string
  - name: recoveryNicIpAddressType
    description: IP allocation type for recovery VM.
    types:
    - uid: string
- name: InitialReplicationDetails
  description: Initial replication details.
  kind: object
  properties:
  - name: initialReplicationType
    description: Initial replication type.
    types:
    - uid: string
  - name: initialReplicationProgressPercentage
    description: The initial replication progress percentage.
    types:
    - uid: string
- name: DiskDetails
  description: Onprem disk details data.
  kind: object
  properties:
  - name: maxSizeMB
    description: The hard disk max size in MB.
    types:
    - uid: integer
  - name: vhdType
    description: The type of the volume.
    types:
    - uid: string
  - name: vhdId
    description: The VHD Id.
    types:
    - uid: string
  - name: vhdName
    description: The VHD name.
    types:
    - uid: string
- name: AzureVmDiskDetails
  description: Disk details for E2A provider.
  kind: object
  properties:
  - name: vhdType
    description: VHD type.
    types:
    - uid: string
  - name: vhdId
    description: The VHD id.
    types:
    - uid: string
  - name: vhdName
    description: VHD name.
    types:
    - uid: string
  - name: maxSizeMB
    description: Max side in MB.
    types:
    - uid: string
  - name: targetDiskLocation
    description: Blob uri of the Azure disk.
    types:
    - uid: string
  - name: targetDiskName
    description: The target Azure disk name.
    types:
    - uid: string
  - name: lunId
    description: Ordinal\LunId of the disk for the Azure VM.
    types:
    - uid: string
- name: OSDetails
  description: Disk Details.
  kind: object
  properties:
  - name: osType
    description: VM Disk details.
    types:
    - uid: string
  - name: productType
    description: Product type.
    types:
    - uid: string
  - name: osEdition
    description: The OSEdition.
    types:
    - uid: string
  - name: oSVersion
    description: The OS Version.
    types:
    - uid: string
  - name: oSMajorVersion
    description: The OS Major Version.
    types:
    - uid: string
  - name: oSMinorVersion
    description: The OS Minor Version.
    types:
    - uid: string
- name: InMageAzureV2ProtectedDiskDetails
  description: InMageAzureV2 protected disk details.
  kind: object
  properties:
  - name: diskId
    description: The disk id.
    types:
    - uid: string
  - name: diskName
    description: The disk name.
    types:
    - uid: string
  - name: protectionStage
    description: The protection stage.
    types:
    - uid: string
  - name: healthErrorCode
    description: The health error code for the disk.
    types:
    - uid: string
  - name: rpoInSeconds
    description: The RPO in seconds.
    types:
    - uid: integer
  - name: resyncRequired
    description: A value indicating whether resync is required for this disk.
    types:
    - uid: string
  - name: resyncProgressPercentage
    description: The resync progress percentage.
    types:
    - uid: integer
  - name: resyncDurationInSeconds
    description: The resync duration in seconds.
    types:
    - uid: integer
  - name: diskCapacityInBytes
    description: The disk capacity in bytes.
    types:
    - uid: integer
  - name: fileSystemCapacityInBytes
    description: The disk file system capacity in bytes.
    types:
    - uid: integer
  - name: sourceDataInMegaBytes
    description: The source data transit in MB.
    types:
    - uid: number
  - name: psDataInMegaBytes
    description: The PS data transit in MB.
    types:
    - uid: number
  - name: targetDataInMegaBytes
    description: The target data transit in MB.
    types:
    - uid: number
  - name: diskResized
    description: A value indicating whether disk is resized.
    types:
    - uid: string
  - name: lastRpoCalculatedTime
    description: The last RPO calculated time.
    types:
    - uid: string
- name: OSDiskDetails
  description: Details of the OS Disk.
  kind: object
  properties:
  - name: osVhdId
    description: The id of the disk containing the OS.
    types:
    - uid: string
  - name: osType
    description: The type of the OS on the VM.
    types:
    - uid: string
  - name: vhdName
    description: The OS disk VHD name.
    types:
    - uid: string
- name: InMageProtectedDiskDetails
  description: InMage protected disk details.
  kind: object
  properties:
  - name: diskId
    description: The disk id.
    types:
    - uid: string
  - name: diskName
    description: The disk name.
    types:
    - uid: string
  - name: protectionStage
    description: The protection stage.
    types:
    - uid: string
  - name: healthErrorCode
    description: The health error code for the disk.
    types:
    - uid: string
  - name: rpoInSeconds
    description: The RPO in seconds.
    types:
    - uid: integer
  - name: resyncRequired
    description: A value indicating whether resync is required for this disk.
    types:
    - uid: string
  - name: resyncProgressPercentage
    description: The resync progress percentage.
    types:
    - uid: integer
  - name: resyncDurationInSeconds
    description: The resync duration in seconds.
    types:
    - uid: integer
  - name: diskCapacityInBytes
    description: The disk capacity in bytes.
    types:
    - uid: integer
  - name: fileSystemCapacityInBytes
    description: The file system capacity in bytes.
    types:
    - uid: integer
  - name: sourceDataInMB
    description: The source data transit in MB.
    types:
    - uid: number
  - name: psDataInMB
    description: The PS data transit in MB.
    types:
    - uid: number
  - name: targetDataInMB
    description: The target data transit in MB.
    types:
    - uid: number
  - name: diskResized
    description: A value indicating whether disk is resized.
    types:
    - uid: string
  - name: lastRpoCalculatedTime
    description: The last RPO calculated time.
    types:
    - uid: string
- name: InMageAgentDetails
  description: The details of the InMage agent.
  kind: object
  properties:
  - name: agentVersion
    description: The agent version.
    types:
    - uid: string
  - name: agentUpdateStatus
    description: A value indicating whether installed agent needs to be updated.
    types:
    - uid: string
  - name: postUpdateRebootStatus
    description: A value indicating whether reboot is required after update is applied.
    types:
    - uid: string
- name: A2AProtectedDiskDetails
  description: A2A protected disk details.
  kind: object
  properties:
  - name: diskUri
    description: The disk uri.
    types:
    - uid: string
  - name: recoveryAzureStorageAccountId
    description: The recovery disk storage account.
    types:
    - uid: string
  - name: primaryDiskAzureStorageAccountId
    description: The primary disk storage account.
    types:
    - uid: string
  - name: recoveryDiskUri
    description: Recovery disk uri.
    types:
    - uid: string
  - name: diskName
    description: The disk name.
    types:
    - uid: string
  - name: diskCapacityInBytes
    description: The disk capacity in bytes.
    types:
    - uid: integer
  - name: primaryStagingAzureStorageAccountId
    description: The primary staging storage account.
    types:
    - uid: string
  - name: diskType
    description: The type of disk.
    types:
    - uid: string
  - name: resyncRequired
    description: A value indicating whether resync is required for this disk.
    types:
    - uid: boolean
  - name: monitoringPercentageCompletion
    description: The percentage of the monitoring job. The type of the monitoring job is defined by MonitoringJobType property.
    types:
    - uid: integer
  - name: monitoringJobType
    description: The type of the monitoring job. The progress is contained in MonitoringPercentageCompletion property.
    types:
    - uid: string
  - name: dataPendingInStagingStorageAccountInMB
    description: The data pending for replication in MB at staging account.
    types:
    - uid: number
  - name: dataPendingAtSourceAgentInMB
    description: The data pending at source virtual machine in MB.
    types:
    - uid: number
- name: A2AProtectedManagedDiskDetails
  description: A2A protected managed disk details.
  kind: object
  properties:
  - name: diskId
    description: The managed disk Arm id.
    types:
    - uid: string
  - name: recoveryAzureResourceGroupId
    description: The recovery disk resource group Arm Id.
    types:
    - uid: string
  - name: recoveryDiskId
    description: Recovery disk Arm Id.
    types:
    - uid: string
  - name: diskName
    description: The disk name.
    types:
    - uid: string
  - name: diskCapacityInBytes
    description: The disk capacity in bytes.
    types:
    - uid: integer
  - name: primaryStagingAzureStorageAccountId
    description: The primary staging storage account.
    types:
    - uid: string
  - name: diskType
    description: The type of disk.
    types:
    - uid: string
  - name: resyncRequired
    description: A value indicating whether resync is required for this disk.
    types:
    - uid: boolean
  - name: monitoringPercentageCompletion
    description: The percentage of the monitoring job. The type of the monitoring job is defined by MonitoringJobType property.
    types:
    - uid: integer
  - name: monitoringJobType
    description: The type of the monitoring job. The progress is contained in MonitoringPercentageCompletion property.
    types:
    - uid: string
  - name: dataPendingInStagingStorageAccountInMB
    description: The data pending for replication in MB at staging account.
    types:
    - uid: number
  - name: dataPendingAtSourceAgentInMB
    description: The data pending at source virtual machine in MB.
    types:
    - uid: number
- name: AzureToAzureVmSyncedConfigDetails
  description: Azure to Azure VM synced configuration details.
  kind: object
  properties:
  - name: tags
    description: The Azure VM tags.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: roleAssignments
    description: The Azure role assignments.
    types:
    - uid: RoleAssignment
      isArray: true
  - name: inputEndpoints
    description: The Azure VM input endpoints.
    types:
    - uid: InputEndpoint
      isArray: true
- name: RoleAssignment
  description: Azure role assignment details.
  kind: object
  properties:
  - name: id
    description: The ARM Id of the role assignment.
    types:
    - uid: string
  - name: name
    description: The name of the role assignment.
    types:
    - uid: string
  - name: scope
    description: Role assignment scope.
    types:
    - uid: string
  - name: principalId
    description: Principal Id.
    types:
    - uid: string
  - name: roleDefinitionId
    description: Role definition id.
    types:
    - uid: string
- name: InputEndpoint
  description: Azure VM input endpoint details.
  kind: object
  properties:
  - name: endpointName
    description: The input endpoint name.
    types:
    - uid: string
  - name: privatePort
    description: The input endpoint private port.
    types:
    - uid: integer
  - name: publicPort
    description: The input endpoint public port.
    types:
    - uid: integer
  - name: protocol
    description: The input endpoint protocol.
    types:
    - uid: string
examples:
- name: Execute test failover
  request:
    uri: POST https://management.azure.com/Subscriptions/c183865e-6077-46f2-a3b1-deb0f4f4650a/resourceGroups/resourceGroupPS1/providers/Microsoft.RecoveryServices/vaults/vault1/replicationFabrics/cloud1/replicationProtectionContainers/cloud_6d224fc6-f326-5d35-96de-fbf51efb3179/replicationProtectedItems/f8491e4f-817a-40dd-a90c-af773978c75b/testFailover?api-version=2016-08-10
    body: >-
      {
        "properties": {
          "failoverDirection": "PrimaryToRecovery",
          "networkType": "VmNetworkAsInput",
          "networkId": "/subscriptions/c183865e-6077-46f2-a3b1-deb0f4f4650a/resourceGroups/siterecoveryProd1/providers/Microsoft.Network/virtualNetworks/vnetavrai",
          "skipTestFailoverCleanup": "false",
          "providerSpecificDetails": {
            "instanceType": "HyperVReplicaAzure"
          }
        }
      }
  responses:
  - statusCode: "200"
    body: >-
      {
        "id": "/Subscriptions/c183865e-6077-46f2-a3b1-deb0f4f4650a/resourceGroups/resourceGroupPS1/providers/Microsoft.RecoveryServices/vaults/vault1/replicationFabrics/cloud1/replicationProtectionContainers/cloud_6d224fc6-f326-5d35-96de-fbf51efb3179/replicationProtectedItems/f8491e4f-817a-40dd-a90c-af773978c75b",
        "name": "f8491e4f-817a-40dd-a90c-af773978c75b",
        "type": "Microsoft.RecoveryServices/vaults/replicationFabrics/replicationProtectionContainers/replicationProtectedItems",
        "properties": {
          "friendlyName": "vm1",
          "protectedItemType": "HyperVVirtualMachine",
          "protectableItemId": "/Subscriptions/c183865e-6077-46f2-a3b1-deb0f4f4650a/resourceGroups/resourceGroupPS1/providers/Microsoft.RecoveryServices/vaults/vault1/replicationFabrics/cloud1/replicationProtectionContainers/cloud_6d224fc6-f326-5d35-96de-fbf51efb3179/replicationProtectableItems/f8491e4f-817a-40dd-a90c-af773978c75b",
          "recoveryServicesProviderId": "/Subscriptions/c183865e-6077-46f2-a3b1-deb0f4f4650a/resourceGroups/resourceGroupPS1/providers/Microsoft.RecoveryServices/vaults/vault1/replicationFabrics/cloud1/replicationRecoveryServicesProviders/241641e6-ee7b-4ee4-8141-821fadda43fa",
          "primaryFabricFriendlyName": "cloud1",
          "recoveryFabricFriendlyName": "Microsoft Azure",
          "recoveryFabricId": "Microsoft Azure",
          "primaryProtectionContainerFriendlyName": "cloud1",
          "recoveryProtectionContainerFriendlyName": "Microsoft Azure",
          "protectionState": "Protected",
          "protectionStateDescription": "Cleanup test failover pending",
          "activeLocation": "Primary",
          "testFailoverState": "WaitingForCompletion",
          "testFailoverStateDescription": "Waiting for user input",
          "allowedOperations": [
            "TestFailoverCleanup"
          ],
          "replicationHealth": "Normal",
          "replicationHealthErrors": [],
          "policyId": "/Subscriptions/c183865e-6077-46f2-a3b1-deb0f4f4650a/resourceGroups/resourceGroupPS1/providers/Microsoft.RecoveryServices/vaults/vault1/replicationPolicies/protectionprofile1",
          "policyFriendlyName": "protectionprofile1",
          "currentScenario": {
            "scenarioName": "TestFailover",
            "jobId": "/Subscriptions/c183865e-6077-46f2-a3b1-deb0f4f4650a/resourceGroups/resourceGroupPS1/providers/Microsoft.RecoveryServices/vaults/vault1/replicationJobs/2838f9b4-2609-4f76-a7e9-07e6387c5e98",
            "startTime": "2017-04-25T09:57:57.0357829Z"
          },
          "failoverRecoveryPointId": "/Subscriptions/c183865e-6077-46f2-a3b1-deb0f4f4650a/resourceGroups/resourceGroupPS1/providers/Microsoft.RecoveryServices/vaults/vault1/replicationFabrics/cloud1/replicationProtectionContainers/cloud_6d224fc6-f326-5d35-96de-fbf51efb3179/replicationProtectedItems/f8491e4f-817a-40dd-a90c-af773978c75b/recoveryPoints/0689d0d0-3518-4793-8c98-c26bf94526f6",
          "providerSpecificDetails": {
            "instanceType": "HyperVReplicaAzure"
          },
          "recoveryContainerId": "/Subscriptions/c183865e-6077-46f2-a3b1-deb0f4f4650a/resourceGroups/resourceGroupPS1/providers/Microsoft.RecoveryServices/vaults/vault1/replicationFabrics/d49858f157601230a6ac5862fbbc6e63bf38d23ecd96cf953767945d457fe9d5/replicationProtectionContainers/d38048d4-b460-4791-8ece-108395ee8478"
        }
      }
  - statusCode: "202"
security:
- type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account.
