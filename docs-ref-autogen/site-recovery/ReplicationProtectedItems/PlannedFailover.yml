### YamlMime:RESTOperation
summary: Execute planned failover Operation to initiate a planned failover of the replication protected item.
service: Recovery Services - Site Recovery
apiVersion: 2016-08-10
groupName: Replication Protected Items
consumes:
- application/json
produces:
- application/json
paths:
- content: POST https://management.azure.com/Subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.RecoveryServices/vaults/{resourceName}/replicationFabrics/{fabricName}/replicationProtectionContainers/{protectionContainerName}/replicationProtectedItems/{replicatedProtectedItemName}/plannedFailover?api-version=2016-08-10
uriParameters:
- in: path
  isRequired: true
  description: The subscription Id.
  types:
  - uid: string
  name: subscriptionId
- in: path
  isRequired: true
  description: The name of the resource group where the recovery services vault is present.
  types:
  - uid: string
  name: resourceGroupName
- in: path
  isRequired: true
  description: The name of the recovery services vault.
  types:
  - uid: string
  name: resourceName
- in: path
  isRequired: true
  description: Unique fabric name.
  types:
  - uid: string
  name: fabricName
- in: path
  isRequired: true
  description: Protection container name.
  types:
  - uid: string
  name: protectionContainerName
- in: path
  isRequired: true
  description: Replication protected item name.
  types:
  - uid: string
  name: replicatedProtectedItemName
- in: query
  isRequired: true
  description: Client Api Version.
  types:
  - uid: string
  name: api-version
responses:
- description: OK
  types:
  - uid: ReplicationProtectedItem
  name: 200 OK
- description: Accepted
  name: 202 Accepted
requestBody:
- parameters:
  - in: body
    description: Planned failover input properties
    types:
    - uid: PlannedFailoverInputProperties
    name: properties
requestHeader: []
definitions:
- name: PlannedFailoverInputProperties
  description: Planned failover input properties
  kind: object
  properties:
  - description: Failover direction.
    types:
    - uid: string
    name: failoverDirection
  - description: Provider specific settings
    types:
    - uid: HyperVReplicaAzureFailoverProviderInput
    - uid: HyperVReplicaAzureFailbackProviderInput
    - uid: InMageAzureV2FailoverProviderInput
    - uid: InMageFailoverProviderInput
    - uid: A2AFailoverProviderInput
    typesTitle: ProviderSpecificFailoverInput
    name: providerSpecificDetails
- name: ReplicationProtectedItem
  description: Replication protected item.
  kind: object
  properties:
  - description: The custom data.
    types:
    - uid: ReplicationProtectedItemProperties
    name: properties
  - isReadyOnly: true
    description: Resource Id
    types:
    - uid: string
    name: id
  - isReadyOnly: true
    description: Resource Name
    types:
    - uid: string
    name: name
  - isReadyOnly: true
    description: Resource Type
    types:
    - uid: string
    name: type
  - description: Resource Location
    types:
    - uid: string
    name: location
- name: PlannedFailoverInput
  description: Input definition for planned failover.
  kind: object
  properties:
  - description: Planned failover input properties
    types:
    - uid: PlannedFailoverInputProperties
    name: properties
- name: ReplicationProtectedItemProperties
  description: The custom data.
  kind: object
  properties:
  - description: The name.
    types:
    - uid: string
    name: friendlyName
  - description: The type of protected item type.
    types:
    - uid: string
    name: protectedItemType
  - description: The protected item ARM Id.
    types:
    - uid: string
    name: protectableItemId
  - description: The recovery provider ARM Id.
    types:
    - uid: string
    name: recoveryServicesProviderId
  - description: The friendly name of the primary fabric.
    types:
    - uid: string
    name: primaryFabricFriendlyName
  - description: The friendly name of recovery fabric.
    types:
    - uid: string
    name: recoveryFabricFriendlyName
  - description: The Arm Id of recovery fabric.
    types:
    - uid: string
    name: recoveryFabricId
  - description: The name of primary protection container friendly name.
    types:
    - uid: string
    name: primaryProtectionContainerFriendlyName
  - description: The name of recovery container friendly name.
    types:
    - uid: string
    name: recoveryProtectionContainerFriendlyName
  - description: The protection status.
    types:
    - uid: string
    name: protectionState
  - description: The protection state description.
    types:
    - uid: string
    name: protectionStateDescription
  - description: The Current active location of the PE.
    types:
    - uid: string
    name: activeLocation
  - description: The Test failover state.
    types:
    - uid: string
    name: testFailoverState
  - description: The Test failover state description.
    types:
    - uid: string
    name: testFailoverStateDescription
  - description: The allowed operations on the Replication protected item.
    types:
    - isArray: true
      uid: string
    name: allowedOperations
  - description: The consolidated protection health for the VM taking any issues with SRS as well as all the replication units associated with the VM's replication group into account. This is a string representation of the ProtectionHealth enumeration.
    types:
    - uid: string
    name: replicationHealth
  - description: The consolidated failover health for the VM.
    types:
    - uid: string
    name: failoverHealth
  - description: Health Error
    types:
    - isArray: true
      uid: HealthError
    name: replicationHealthErrors
  - description: Health Error
    types:
    - isArray: true
      uid: HealthError
    name: failoverHealthErrors
  - description: The ID of Policy governing this PE.
    types:
    - uid: string
    name: policyId
  - description: The name of Policy governing this PE.
    types:
    - uid: string
    name: policyFriendlyName
  - description: The Last successful failover time.
    types:
    - uid: string
    name: lastSuccessfulFailoverTime
  - description: The Last successful test failover time.
    types:
    - uid: string
    name: lastSuccessfulTestFailoverTime
  - description: The current scenario.
    types:
    - uid: CurrentScenarioDetails
    name: currentScenario
  - description: The recovery point ARM Id to which the Vm was failed over.
    types:
    - uid: string
    name: failoverRecoveryPointId
  - description: The Replication provider custom settings.
    types:
    - uid: HyperVReplicaBaseReplicationDetails
    - uid: HyperVReplicaReplicationDetails
    - uid: HyperVReplicaBlueReplicationDetails
    - uid: HyperVReplicaAzureReplicationDetails
    - uid: InMageAzureV2ReplicationDetails
    - uid: InMageReplicationDetails
    - uid: A2AReplicationDetails
    typesTitle: ReplicationProviderSpecificSettings
    name: providerSpecificDetails
  - description: The recovery container Id.
    types:
    - uid: string
    name: recoveryContainerId
- name: HyperVReplicaAzureFailoverProviderInput
  description: HvrA provider specific input for failover.
  kind: object
  properties:
  - description: Location of the vault.
    types:
    - uid: string
    name: vaultLocation
  - description: Primary kek certificate pfx.
    types:
    - uid: string
    name: primaryKekCertificatePfx
  - description: Secondary kek certificate pfx.
    types:
    - uid: string
    name: secondaryKekCertificatePfx
  - description: The recovery point id to be passed to failover to a particular recovery point. In case of latest recovery point, null should be passed.
    types:
    - uid: string
    name: recoveryPointId
  - description: The class type.
    types:
    - uid: HyperVReplicaAzure
    typesTitle: string
    name: instanceType
- name: HyperVReplicaAzureFailbackProviderInput
  description: HvrA provider specific input for failback.
  kind: object
  properties:
  - description: Data sync option.
    types:
    - uid: string
    name: dataSyncOption
  - description: ALR options to create alternate recovery.
    types:
    - uid: string
    name: recoveryVmCreationOption
  - description: Provider ID for alternate location
    types:
    - uid: string
    name: providerIdForAlternateRecovery
  - description: The class type.
    types:
    - uid: HyperVReplicaAzureFailback
    typesTitle: string
    name: instanceType
- name: InMageAzureV2FailoverProviderInput
  description: InMageAzureV2 provider specific input for failover.
  kind: object
  properties:
  - description: Location of the vault.
    types:
    - uid: string
    name: vaultLocation
  - description: The recovery point id to be passed to failover to a particular recovery point. In case of latest recovery point, null should be passed.
    types:
    - uid: string
    name: recoveryPointId
  - description: The class type.
    types:
    - uid: InMageAzureV2
    typesTitle: string
    name: instanceType
- name: InMageFailoverProviderInput
  description: Provider specific input for InMage failover.
  kind: object
  properties:
  - description: The recovery point type. Values from LatestTime, LatestTag or Custom. In the case of custom, the recovery point provided by RecoveryPointId will be used. In the other two cases, recovery point id will be ignored.
    types:
    - uid: RecoveryPointType
    name: recoveryPointType
  - description: The recovery point id to be passed to failover to a particular recovery point. In case of latest recovery point, null should be passed.
    types:
    - uid: string
    name: recoveryPointId
  - description: The class type.
    types:
    - uid: InMage
    typesTitle: string
    name: instanceType
- name: A2AFailoverProviderInput
  description: A2A provider specific input for failover.
  kind: object
  properties:
  - description: The recovery point id to be passed to failover to a particular recovery point. In case of latest recovery point, null should be passed.
    types:
    - uid: string
    name: recoveryPointId
  - description: A value indicating whether to use recovery cloud service for TFO or not.
    types:
    - uid: string
    name: cloudServiceCreationOption
  - description: The class type.
    types:
    - uid: A2A
    typesTitle: string
    name: instanceType
- name: HealthError
  description: The list of errors / warnings capturing details associated with the issue(s).
  kind: object
  properties:
  - description: Source of error.
    types:
    - uid: string
    name: errorSource
  - description: Type of error.
    types:
    - uid: string
    name: errorType
  - description: Level of error.
    types:
    - uid: string
    name: errorLevel
  - description: Error code.
    types:
    - uid: string
    name: errorCode
  - description: Error message.
    types:
    - uid: string
    name: errorMessage
  - description: Possible causes of error.
    types:
    - uid: string
    name: possibleCauses
  - description: Recommended action to resolve error.
    types:
    - uid: string
    name: recommendedAction
  - description: Error creation time (UTC)
    types:
    - uid: string
    name: creationTimeUtc
  - description: DRA error message.
    types:
    - uid: string
    name: recoveryProviderErrorMessage
  - description: ID of the entity.
    types:
    - uid: string
    name: entityId
  - description: The child health errors.
    types:
    - isArray: true
      uid: HealthError
    name: childErrors
- name: CurrentScenarioDetails
  description: The current scenario details.
  kind: object
  properties:
  - description: Scenario name.
    types:
    - uid: string
    name: scenarioName
  - description: ARM Id of the job being executed.
    types:
    - uid: string
    name: jobId
  - description: Start time of the workflow.
    types:
    - uid: string
    name: startTime
- name: RecoveryPointType
  description: The recovery point type. Values from LatestTime, LatestTag or Custom. In the case of custom, the recovery point provided by RecoveryPointId will be used. In the other two cases, recovery point id will be ignored.
  kind: enum
  properties:
  - types:
    - uid: string
    name: LatestTime
  - types:
    - uid: string
    name: LatestTag
  - types:
    - uid: string
    name: Custom
- name: HyperVReplicaBaseReplicationDetails
  description: Hyper V replica provider specific settings base class.
  kind: object
  properties:
  - description: The Last replication time.
    types:
    - uid: string
    name: lastReplicatedTime
  - description: Hyper V VM network details.
    types:
    - isArray: true
      uid: VMNicDetails
    name: vmNics
  - description: The virtual machine Id.
    types:
    - uid: string
    name: vmId
  - description: The protection state for the vm.
    types:
    - uid: string
    name: vmProtectionState
  - description: The protection state description for the vm.
    types:
    - uid: string
    name: vmProtectionStateDescription
  - description: Initial replication details.
    types:
    - uid: InitialReplicationDetails
    name: initialReplicationDetails
  - description: Onprem disk details data.
    types:
    - isArray: true
      uid: DiskDetails
    name: vMDiskDetails
  - isReadyOnly: true
    description: Gets the Instance type.
    types:
    - uid: HyperVReplicaBaseReplicationDetails
    typesTitle: string
    name: instanceType
- name: HyperVReplicaReplicationDetails
  description: HyperV replica 2012 replication details.
  kind: object
  properties:
  - description: The Last replication time.
    types:
    - uid: string
    name: lastReplicatedTime
  - description: Hyper V VM network details.
    types:
    - isArray: true
      uid: VMNicDetails
    name: vmNics
  - description: The virtual machine Id.
    types:
    - uid: string
    name: vmId
  - description: The protection state for the vm.
    types:
    - uid: string
    name: vmProtectionState
  - description: The protection state description for the vm.
    types:
    - uid: string
    name: vmProtectionStateDescription
  - description: Initial replication details.
    types:
    - uid: InitialReplicationDetails
    name: initialReplicationDetails
  - description: Onprem disk details data.
    types:
    - isArray: true
      uid: DiskDetails
    name: vMDiskDetails
  - isReadyOnly: true
    description: Gets the Instance type.
    types:
    - uid: HyperVReplica2012
    typesTitle: string
    name: instanceType
- name: HyperVReplicaBlueReplicationDetails
  description: HyperV replica 2012 R2 (Blue) replication details.
  kind: object
  properties:
  - description: The Last replication time.
    types:
    - uid: string
    name: lastReplicatedTime
  - description: Hyper V VM network details.
    types:
    - isArray: true
      uid: VMNicDetails
    name: vmNics
  - description: The virtual machine Id.
    types:
    - uid: string
    name: vmId
  - description: The protection state for the vm.
    types:
    - uid: string
    name: vmProtectionState
  - description: The protection state description for the vm.
    types:
    - uid: string
    name: vmProtectionStateDescription
  - description: Initial replication details.
    types:
    - uid: InitialReplicationDetails
    name: initialReplicationDetails
  - description: Onprem disk details data.
    types:
    - isArray: true
      uid: DiskDetails
    name: vMDiskDetails
  - isReadyOnly: true
    description: Gets the Instance type.
    types:
    - uid: HyperVReplica2012R2
    typesTitle: string
    name: instanceType
- name: HyperVReplicaAzureReplicationDetails
  description: Hyper V Replica Azure provider specific settings.
  kind: object
  properties:
  - description: Disk details for E2A provider.
    types:
    - isArray: true
      uid: AzureVmDiskDetails
    name: azureVMDiskDetails
  - description: Recovery Azure given name.
    types:
    - uid: string
    name: recoveryAzureVMName
  - description: The Recovery Azure VM size.
    types:
    - uid: string
    name: recoveryAzureVMSize
  - description: The recovery Azure storage account.
    types:
    - uid: string
    name: recoveryAzureStorageAccount
  - description: The ARM id of the log storage account used for replication. This will be set to null if no log storage account was provided during enable protection.
    types:
    - uid: string
    name: recoveryAzureLogStorageAccountId
  - description: The Last replication time.
    types:
    - uid: string
    name: lastReplicatedTime
  - description: The virtual machine Id.
    types:
    - uid: string
    name: vmId
  - description: The protection state for the vm.
    types:
    - uid: string
    name: vmProtectionState
  - description: The protection state description for the vm.
    types:
    - uid: string
    name: vmProtectionStateDescription
  - description: Initial replication details.
    types:
    - uid: InitialReplicationDetails
    name: initialReplicationDetails
  - description: Hyper V VM network details.
    types:
    - isArray: true
      uid: VMNicDetails
    name: vmNics
  - description: The selected recovery azure network Id.
    types:
    - uid: string
    name: selectedRecoveryAzureNetworkId
  - description: The encryption info.
    types:
    - uid: string
    name: encryption
  - description: The operating system info.
    types:
    - uid: OSDetails
    name: oSDetails
  - description: The RAM size of the VM on the primary side.
    types:
    - uid: integer
    name: sourceVmRAMSizeInMB
  - description: The CPU count of the VM on the primary side.
    types:
    - uid: integer
    name: sourceVmCPUCount
  - description: The selected option to enable RDP\SSH on target vm after failover. String value of {SrsDataContract.EnableRDPOnTargetOption} enum.
    types:
    - uid: string
    name: enableRDPOnTargetOption
  - description: The target resource group Id.
    types:
    - uid: string
    name: recoveryAzureResourceGroupId
  - description: The recovery availability set Id.
    types:
    - uid: string
    name: recoveryAvailabilitySetId
  - description: A value indicating whether managed disks should be used during failover.
    types:
    - uid: string
    name: useManagedDisks
  - description: License Type of the VM to be used.
    types:
    - uid: string
    name: licenseType
  - isReadyOnly: true
    description: Gets the Instance type.
    types:
    - uid: HyperVReplicaAzure
    typesTitle: string
    name: instanceType
- name: InMageAzureV2ReplicationDetails
  description: InMageAzureV2 provider specific settings
  kind: object
  properties:
  - description: The infrastructure VM Id.
    types:
    - uid: string
    name: infrastructureVmId
  - description: The vCenter infrastructure Id.
    types:
    - uid: string
    name: vCenterInfrastructureId
  - description: The protection stage.
    types:
    - uid: string
    name: protectionStage
  - description: The virtual machine Id.
    types:
    - uid: string
    name: vmId
  - description: The protection state for the vm.
    types:
    - uid: string
    name: vmProtectionState
  - description: The protection state description for the vm.
    types:
    - uid: string
    name: vmProtectionStateDescription
  - description: The resync progress percentage.
    types:
    - uid: integer
    name: resyncProgressPercentage
  - description: The RPO in seconds.
    types:
    - uid: integer
    name: rpoInSeconds
  - description: The compressed data change rate in MB.
    types:
    - uid: number
    name: compressedDataRateInMB
  - description: The uncompressed data change rate in MB.
    types:
    - uid: number
    name: uncompressedDataRateInMB
  - description: The source IP address.
    types:
    - uid: string
    name: ipAddress
  - description: The agent version.
    types:
    - uid: string
    name: agentVersion
  - description: A value indicating whether installed agent needs to be updated.
    types:
    - uid: string
    name: isAgentUpdateRequired
  - description: A value indicating whether the source server requires a restart after update.
    types:
    - uid: string
    name: isRebootAfterUpdateRequired
  - description: The last heartbeat received from the source server.
    types:
    - uid: string
    name: lastHeartbeat
  - description: The process server Id.
    types:
    - uid: string
    name: processServerId
  - description: The multi vm group Id.
    types:
    - uid: string
    name: multiVmGroupId
  - description: The multi vm group name.
    types:
    - uid: string
    name: multiVmGroupName
  - description: A value indicating whether multi vm sync is enabled or disabled.
    types:
    - uid: string
    name: multiVmSyncStatus
  - description: InMageAzureV2 protected disk details.
    types:
    - isArray: true
      uid: InMageAzureV2ProtectedDiskDetails
    name: protectedDisks
  - description: A value indicating whether any disk is resized for this VM.
    types:
    - uid: string
    name: diskResized
  - description: The master target Id.
    types:
    - uid: string
    name: masterTargetId
  - description: The CPU count of the VM on the primary side.
    types:
    - uid: integer
    name: sourceVmCPUCount
  - description: The RAM size of the VM on the primary side.
    types:
    - uid: integer
    name: sourceVmRAMSizeInMB
  - description: The type of the OS on the VM.
    types:
    - uid: string
    name: osType
  - description: The OS disk VHD name.
    types:
    - uid: string
    name: vhdName
  - description: The id of the disk containing the OS.
    types:
    - uid: string
    name: osDiskId
  - description: Disk details for E2A provider.
    types:
    - isArray: true
      uid: AzureVmDiskDetails
    name: azureVMDiskDetails
  - description: Recovery Azure given name.
    types:
    - uid: string
    name: recoveryAzureVMName
  - description: The Recovery Azure VM size.
    types:
    - uid: string
    name: recoveryAzureVMSize
  - description: The recovery Azure storage account.
    types:
    - uid: string
    name: recoveryAzureStorageAccount
  - description: The ARM id of the log storage account used for replication. This will be set to null if no log storage account was provided during enable protection.
    types:
    - uid: string
    name: recoveryAzureLogStorageAccountId
  - description: Hyper V VM network details.
    types:
    - isArray: true
      uid: VMNicDetails
    name: vmNics
  - description: The selected recovery azure network Id.
    types:
    - uid: string
    name: selectedRecoveryAzureNetworkId
  - description: A value indicating the discovery type of the machine. Value can be vCenter or physical.
    types:
    - uid: string
    name: discoveryType
  - description: The selected option to enable RDP\SSH on target vm after failover. String value of {SrsDataContract.EnableRDPOnTargetOption} enum.
    types:
    - uid: string
    name: enableRDPOnTargetOption
  - description: The datastores of the on-premise machine. Value can be list of strings that contain datastore names.
    types:
    - isArray: true
      uid: string
    name: datastores
  - description: The ARM Id of the target Azure VM. This value will be null until the VM is failed over. Only after failure it will be populated with the ARM Id of the Azure VM.
    types:
    - uid: string
    name: targetVmId
  - description: The target resource group Id.
    types:
    - uid: string
    name: recoveryAzureResourceGroupId
  - description: The recovery availability set Id.
    types:
    - uid: string
    name: recoveryAvailabilitySetId
  - description: A value indicating whether managed disks should be used during failover.
    types:
    - uid: string
    name: useManagedDisks
  - description: License Type of the VM to be used.
    types:
    - uid: string
    name: licenseType
  - description: Health Error
    types:
    - isArray: true
      uid: HealthError
    name: validationErrors
  - description: The last RPO calculated time.
    types:
    - uid: string
    name: lastRpoCalculatedTime
  - description: The last update time received from on-prem components.
    types:
    - uid: string
    name: lastUpdateReceivedTime
  - description: The replica id of the protected item.
    types:
    - uid: string
    name: replicaId
  - description: The OS Version of the protected item.
    types:
    - uid: string
    name: osVersion
  - isReadyOnly: true
    description: Gets the Instance type.
    types:
    - uid: InMageAzureV2
    typesTitle: string
    name: instanceType
- name: InMageReplicationDetails
  description: InMage provider specific settings
  kind: object
  properties:
  - description: The active location of the VM. If the VM is being protected from Azure, this field will take values from { Azure, OnPrem }. If the VM is being protected between two data-centers, this field will be OnPrem always.
    types:
    - uid: string
    name: activeSiteType
  - description: The CPU count of the VM on the primary side.
    types:
    - uid: integer
    name: sourceVmCPUCount
  - description: The RAM size of the VM on the primary side.
    types:
    - uid: integer
    name: sourceVmRAMSizeInMB
  - description: The OS details.
    types:
    - uid: OSDiskDetails
    name: osDetails
  - description: The protection stage.
    types:
    - uid: string
    name: protectionStage
  - description: The virtual machine Id.
    types:
    - uid: string
    name: vmId
  - description: The protection state for the vm.
    types:
    - uid: string
    name: vmProtectionState
  - description: The protection state description for the vm.
    types:
    - uid: string
    name: vmProtectionStateDescription
  - description: The resync details of the machine
    types:
    - uid: InitialReplicationDetails
    name: resyncDetails
  - description: The retention window start time.
    types:
    - uid: string
    name: retentionWindowStart
  - description: The retention window end time.
    types:
    - uid: string
    name: retentionWindowEnd
  - description: The compressed data change rate in MB.
    types:
    - uid: number
    name: compressedDataRateInMB
  - description: The uncompressed data change rate in MB.
    types:
    - uid: number
    name: uncompressedDataRateInMB
  - description: The RPO in seconds.
    types:
    - uid: integer
    name: rpoInSeconds
  - description: InMage protected disk details.
    types:
    - isArray: true
      uid: InMageProtectedDiskDetails
    name: protectedDisks
  - description: The source IP address.
    types:
    - uid: string
    name: ipAddress
  - description: The last heartbeat received from the source server.
    types:
    - uid: string
    name: lastHeartbeat
  - description: The process server Id.
    types:
    - uid: string
    name: processServerId
  - description: The master target Id.
    types:
    - uid: string
    name: masterTargetId
  - description: The collection of Consistency points.
    types:
    - isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
      uid: object
    name: consistencyPoints
  - description: A value indicating whether any disk is resized for this VM.
    types:
    - uid: string
    name: diskResized
  - description: A value indicating whether the source server requires a restart after update.
    types:
    - uid: string
    name: rebootAfterUpdateStatus
  - description: The multi vm group Id, if any.
    types:
    - uid: string
    name: multiVmGroupId
  - description: The multi vm group name, if any.
    types:
    - uid: string
    name: multiVmGroupName
  - description: A value indicating whether the multi vm sync is enabled or disabled.
    types:
    - uid: string
    name: multiVmSyncStatus
  - description: The agent details.
    types:
    - uid: InMageAgentDetails
    name: agentDetails
  - description: The vCenter infrastructure Id.
    types:
    - uid: string
    name: vCenterInfrastructureId
  - description: The infrastructure VM Id.
    types:
    - uid: string
    name: infrastructureVmId
  - description: Hyper V VM network details.
    types:
    - isArray: true
      uid: VMNicDetails
    name: vmNics
  - description: A value indicating the discovery type of the machine.
    types:
    - uid: string
    name: discoveryType
  - description: A value indicating the underlying Azure storage account. If the VM is not running in Azure, this value shall be set to null.
    types:
    - uid: string
    name: azureStorageAccountId
  - description: The datastores of the on-premise machine Value can be list of strings that contain datastore names
    types:
    - isArray: true
      uid: string
    name: datastores
  - description: Health Error
    types:
    - isArray: true
      uid: HealthError
    name: validationErrors
  - description: The last RPO calculated time.
    types:
    - uid: string
    name: lastRpoCalculatedTime
  - description: The last update time received from on-prem components.
    types:
    - uid: string
    name: lastUpdateReceivedTime
  - description: The replica id of the protected item.
    types:
    - uid: string
    name: replicaId
  - description: The OS Version of the protected item.
    types:
    - uid: string
    name: osVersion
  - isReadyOnly: true
    description: Gets the Instance type.
    types:
    - uid: InMage
    typesTitle: string
    name: instanceType
- name: A2AReplicationDetails
  description: A2A provider specific settings.
  kind: object
  properties:
  - description: The fabric specific object Id of the virtual machine.
    types:
    - uid: string
    name: fabricObjectId
  - description: The multi vm group Id.
    types:
    - uid: string
    name: multiVmGroupId
  - description: The multi vm group name.
    types:
    - uid: string
    name: multiVmGroupName
  - description: The management Id.
    types:
    - uid: string
    name: managementId
  - description: A2A protected disk details.
    types:
    - isArray: true
      uid: A2AProtectedDiskDetails
    name: protectedDisks
  - description: A2A protected managed disk details.
    types:
    - isArray: true
      uid: A2AProtectedManagedDiskDetails
    name: protectedManagedDisks
  - description: Primary fabric location.
    types:
    - uid: string
    name: primaryFabricLocation
  - description: The recovery fabric location.
    types:
    - uid: string
    name: recoveryFabricLocation
  - description: The type of operating system.
    types:
    - uid: string
    name: osType
  - description: The size of recovery virtual machine.
    types:
    - uid: string
    name: recoveryAzureVMSize
  - description: The name of recovery virtual machine.
    types:
    - uid: string
    name: recoveryAzureVMName
  - description: The recovery resource group.
    types:
    - uid: string
    name: recoveryAzureResourceGroupId
  - description: The recovery cloud service.
    types:
    - uid: string
    name: recoveryCloudService
  - description: The recovery availability set.
    types:
    - uid: string
    name: recoveryAvailabilitySet
  - description: The recovery virtual network.
    types:
    - uid: string
    name: selectedRecoveryAzureNetworkId
  - description: Hyper V VM network details.
    types:
    - isArray: true
      uid: VMNicDetails
    name: vmNics
  - description: The synced configuration details.
    types:
    - uid: AzureToAzureVmSyncedConfigDetails
    name: vmSyncedConfigDetails
  - description: The percentage of the monitoring job. The type of the monitoring job is defined by MonitoringJobType property.
    types:
    - uid: integer
    name: monitoringPercentageCompletion
  - description: The type of the monitoring job. The progress is contained in MonitoringPercentageCompletion property.
    types:
    - uid: string
    name: monitoringJobType
  - description: The last heartbeat received from the source server.
    types:
    - uid: string
    name: lastHeartbeat
  - description: The agent version.
    types:
    - uid: string
    name: agentVersion
  - description: A value indicating whether replication agent update is required.
    types:
    - uid: boolean
    name: isReplicationAgentUpdateRequired
  - description: The recovery fabric object Id.
    types:
    - uid: string
    name: recoveryFabricObjectId
  - description: The protection state for the vm.
    types:
    - uid: string
    name: vmProtectionState
  - description: The protection state description for the vm.
    types:
    - uid: string
    name: vmProtectionStateDescription
  - description: An id associated with the PE that survives actions like switch protection which change the backing PE/CPE objects internally.The lifecycle id gets carried forward to have a link/continuity in being able to have an Id that denotes the "same" protected item even though other internal Ids/ARM Id might be changing.
    types:
    - uid: string
    name: lifecycleId
  - description: The test failover fabric object Id.
    types:
    - uid: string
    name: testFailoverRecoveryFabricObjectId
  - description: The last RPO value in seconds.
    types:
    - uid: integer
    name: rpoInSeconds
  - description: The time (in UTC) when the last RPO value was calculated by Protection Service.
    types:
    - uid: string
    name: lastRpoCalculatedTime
  - isReadyOnly: true
    description: Gets the Instance type.
    types:
    - uid: A2A
    typesTitle: string
    name: instanceType
- name: VMNicDetails
  description: The PE Network details.
  kind: object
  properties:
  - description: The nic Id.
    types:
    - uid: string
    name: nicId
  - description: The replica nic Id.
    types:
    - uid: string
    name: replicaNicId
  - description: The source nic ARM Id.
    types:
    - uid: string
    name: sourceNicArmId
  - description: VM subnet name.
    types:
    - uid: string
    name: vMSubnetName
  - description: VM network name.
    types:
    - uid: string
    name: vMNetworkName
  - description: Recovery VM network Id.
    types:
    - uid: string
    name: recoveryVMNetworkId
  - description: Recovery VM subnet name.
    types:
    - uid: string
    name: recoveryVMSubnetName
  - description: Ip address type.
    types:
    - uid: string
    name: ipAddressType
  - description: Primary nic static IP address.
    types:
    - uid: string
    name: primaryNicStaticIPAddress
  - description: Replica nic static IP address.
    types:
    - uid: string
    name: replicaNicStaticIPAddress
  - description: Selection type for failover.
    types:
    - uid: string
    name: selectionType
  - description: IP allocation type for recovery VM.
    types:
    - uid: string
    name: recoveryNicIpAddressType
- name: InitialReplicationDetails
  description: Initial replication details.
  kind: object
  properties:
  - description: Initial replication type.
    types:
    - uid: string
    name: initialReplicationType
  - description: The initial replication progress percentage.
    types:
    - uid: string
    name: initialReplicationProgressPercentage
- name: DiskDetails
  description: VM disk details.
  kind: object
  properties:
  - description: The hard disk max size in MB.
    types:
    - uid: integer
    name: maxSizeMB
  - description: The type of the volume.
    types:
    - uid: string
    name: vhdType
  - description: The VHD Id.
    types:
    - uid: string
    name: vhdId
  - description: The VHD name.
    types:
    - uid: string
    name: vhdName
- name: AzureVmDiskDetails
  description: Azure VM Disk details.
  kind: object
  properties:
  - description: VHD type.
    types:
    - uid: string
    name: vhdType
  - description: The VHD id.
    types:
    - uid: string
    name: vhdId
  - description: VHD name.
    types:
    - uid: string
    name: vhdName
  - description: Max side in MB.
    types:
    - uid: string
    name: maxSizeMB
  - description: Blob uri of the Azure disk.
    types:
    - uid: string
    name: targetDiskLocation
  - description: The target Azure disk name.
    types:
    - uid: string
    name: targetDiskName
  - description: Ordinal\LunId of the disk for the Azure VM.
    types:
    - uid: string
    name: lunId
- name: OSDetails
  description: The operating system info.
  kind: object
  properties:
  - description: VM Disk details.
    types:
    - uid: string
    name: osType
  - description: Product type.
    types:
    - uid: string
    name: productType
  - description: The OSEdition.
    types:
    - uid: string
    name: osEdition
  - description: The OS Version.
    types:
    - uid: string
    name: oSVersion
  - description: The OS Major Version.
    types:
    - uid: string
    name: oSMajorVersion
  - description: The OS Minor Version.
    types:
    - uid: string
    name: oSMinorVersion
- name: InMageAzureV2ProtectedDiskDetails
  description: The list of protected disks.
  kind: object
  properties:
  - description: The disk id.
    types:
    - uid: string
    name: diskId
  - description: The disk name.
    types:
    - uid: string
    name: diskName
  - description: The protection stage.
    types:
    - uid: string
    name: protectionStage
  - description: The health error code for the disk.
    types:
    - uid: string
    name: healthErrorCode
  - description: The RPO in seconds.
    types:
    - uid: integer
    name: rpoInSeconds
  - description: A value indicating whether resync is required for this disk.
    types:
    - uid: string
    name: resyncRequired
  - description: The resync progress percentage.
    types:
    - uid: integer
    name: resyncProgressPercentage
  - description: The resync duration in seconds.
    types:
    - uid: integer
    name: resyncDurationInSeconds
  - description: The disk capacity in bytes.
    types:
    - uid: integer
    name: diskCapacityInBytes
  - description: The disk file system capacity in bytes.
    types:
    - uid: integer
    name: fileSystemCapacityInBytes
  - description: The source data transit in MB.
    types:
    - uid: number
    name: sourceDataInMegaBytes
  - description: The PS data transit in MB.
    types:
    - uid: number
    name: psDataInMegaBytes
  - description: The target data transit in MB.
    types:
    - uid: number
    name: targetDataInMegaBytes
  - description: A value indicating whether disk is resized.
    types:
    - uid: string
    name: diskResized
  - description: The last RPO calculated time.
    types:
    - uid: string
    name: lastRpoCalculatedTime
- name: OSDiskDetails
  description: The OS details.
  kind: object
  properties:
  - description: The id of the disk containing the OS.
    types:
    - uid: string
    name: osVhdId
  - description: The type of the OS on the VM.
    types:
    - uid: string
    name: osType
  - description: The OS disk VHD name.
    types:
    - uid: string
    name: vhdName
- name: InMageProtectedDiskDetails
  description: The list of protected disks.
  kind: object
  properties:
  - description: The disk id.
    types:
    - uid: string
    name: diskId
  - description: The disk name.
    types:
    - uid: string
    name: diskName
  - description: The protection stage.
    types:
    - uid: string
    name: protectionStage
  - description: The health error code for the disk.
    types:
    - uid: string
    name: healthErrorCode
  - description: The RPO in seconds.
    types:
    - uid: integer
    name: rpoInSeconds
  - description: A value indicating whether resync is required for this disk.
    types:
    - uid: string
    name: resyncRequired
  - description: The resync progress percentage.
    types:
    - uid: integer
    name: resyncProgressPercentage
  - description: The resync duration in seconds.
    types:
    - uid: integer
    name: resyncDurationInSeconds
  - description: The disk capacity in bytes.
    types:
    - uid: integer
    name: diskCapacityInBytes
  - description: The file system capacity in bytes.
    types:
    - uid: integer
    name: fileSystemCapacityInBytes
  - description: The source data transit in MB.
    types:
    - uid: number
    name: sourceDataInMB
  - description: The PS data transit in MB.
    types:
    - uid: number
    name: psDataInMB
  - description: The target data transit in MB.
    types:
    - uid: number
    name: targetDataInMB
  - description: A value indicating whether disk is resized.
    types:
    - uid: string
    name: diskResized
  - description: The last RPO calculated time.
    types:
    - uid: string
    name: lastRpoCalculatedTime
- name: InMageAgentDetails
  description: The agent details.
  kind: object
  properties:
  - description: The agent version.
    types:
    - uid: string
    name: agentVersion
  - description: A value indicating whether installed agent needs to be updated.
    types:
    - uid: string
    name: agentUpdateStatus
  - description: A value indicating whether reboot is required after update is applied.
    types:
    - uid: string
    name: postUpdateRebootStatus
- name: A2AProtectedDiskDetails
  description: The list of protected disks.
  kind: object
  properties:
  - description: The disk uri.
    types:
    - uid: string
    name: diskUri
  - description: The recovery disk storage account.
    types:
    - uid: string
    name: recoveryAzureStorageAccountId
  - description: The primary disk storage account.
    types:
    - uid: string
    name: primaryDiskAzureStorageAccountId
  - description: Recovery disk uri.
    types:
    - uid: string
    name: recoveryDiskUri
  - description: The disk name.
    types:
    - uid: string
    name: diskName
  - description: The disk capacity in bytes.
    types:
    - uid: integer
    name: diskCapacityInBytes
  - description: The primary staging storage account.
    types:
    - uid: string
    name: primaryStagingAzureStorageAccountId
  - description: The type of disk.
    types:
    - uid: string
    name: diskType
  - description: A value indicating whether resync is required for this disk.
    types:
    - uid: boolean
    name: resyncRequired
  - description: The percentage of the monitoring job. The type of the monitoring job is defined by MonitoringJobType property.
    types:
    - uid: integer
    name: monitoringPercentageCompletion
  - description: The type of the monitoring job. The progress is contained in MonitoringPercentageCompletion property.
    types:
    - uid: string
    name: monitoringJobType
  - description: The data pending for replication in MB at staging account.
    types:
    - uid: number
    name: dataPendingInStagingStorageAccountInMB
  - description: The data pending at source virtual machine in MB.
    types:
    - uid: number
    name: dataPendingAtSourceAgentInMB
- name: A2AProtectedManagedDiskDetails
  description: The list of protected managed disks.
  kind: object
  properties:
  - description: The managed disk Arm id.
    types:
    - uid: string
    name: diskId
  - description: The recovery disk resource group Arm Id.
    types:
    - uid: string
    name: recoveryAzureResourceGroupId
  - description: Recovery disk Arm Id.
    types:
    - uid: string
    name: recoveryDiskId
  - description: The disk name.
    types:
    - uid: string
    name: diskName
  - description: The disk capacity in bytes.
    types:
    - uid: integer
    name: diskCapacityInBytes
  - description: The primary staging storage account.
    types:
    - uid: string
    name: primaryStagingAzureStorageAccountId
  - description: The type of disk.
    types:
    - uid: string
    name: diskType
  - description: A value indicating whether resync is required for this disk.
    types:
    - uid: boolean
    name: resyncRequired
  - description: The percentage of the monitoring job. The type of the monitoring job is defined by MonitoringJobType property.
    types:
    - uid: integer
    name: monitoringPercentageCompletion
  - description: The type of the monitoring job. The progress is contained in MonitoringPercentageCompletion property.
    types:
    - uid: string
    name: monitoringJobType
  - description: The data pending for replication in MB at staging account.
    types:
    - uid: number
    name: dataPendingInStagingStorageAccountInMB
  - description: The data pending at source virtual machine in MB.
    types:
    - uid: number
    name: dataPendingAtSourceAgentInMB
- name: AzureToAzureVmSyncedConfigDetails
  description: The synced configuration details.
  kind: object
  properties:
  - description: The Azure VM tags.
    types:
    - isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
      uid: object
    name: tags
  - description: Azure role assignment details.
    types:
    - isArray: true
      uid: RoleAssignment
    name: roleAssignments
  - description: Azure VM input endpoint details.
    types:
    - isArray: true
      uid: InputEndpoint
    name: inputEndpoints
- name: RoleAssignment
  description: The Azure role assignments.
  kind: object
  properties:
  - description: The ARM Id of the role assignment.
    types:
    - uid: string
    name: id
  - description: The name of the role assignment.
    types:
    - uid: string
    name: name
  - description: Role assignment scope.
    types:
    - uid: string
    name: scope
  - description: Principal Id.
    types:
    - uid: string
    name: principalId
  - description: Role definition id.
    types:
    - uid: string
    name: roleDefinitionId
- name: InputEndpoint
  description: The Azure VM input endpoints.
  kind: object
  properties:
  - description: The input endpoint name.
    types:
    - uid: string
    name: endpointName
  - description: The input endpoint private port.
    types:
    - uid: integer
    name: privatePort
  - description: The input endpoint public port.
    types:
    - uid: integer
    name: publicPort
  - description: The input endpoint protocol.
    types:
    - uid: string
    name: protocol
examples:
- request:
    uri: POST https://management.azure.com/Subscriptions/c183865e-6077-46f2-a3b1-deb0f4f4650a/resourceGroups/resourceGroupPS1/providers/Microsoft.RecoveryServices/vaults/vault1/replicationFabrics/cloud1/replicationProtectionContainers/cloud_6d224fc6-f326-5d35-96de-fbf51efb3179/replicationProtectedItems/f8491e4f-817a-40dd-a90c-af773978c75b/plannedFailover?api-version=2016-08-10
    body: >-
      {
        "properties": {
          "failoverDirection": "PrimaryToRecovery",
          "providerSpecificDetails": {
            "instanceType": "HyperVReplicaAzure"
          }
        }
      }
  responses:
  - statusCode: "200"
    body: >-
      {
        "id": "/Subscriptions/c183865e-6077-46f2-a3b1-deb0f4f4650a/resourceGroups/resourceGroupPS1/providers/Microsoft.RecoveryServices/vaults/vault1/replicationFabrics/cloud1/replicationProtectionContainers/cloud_6d224fc6-f326-5d35-96de-fbf51efb3179/replicationProtectedItems/f8491e4f-817a-40dd-a90c-af773978c75b",
        "name": "f8491e4f-817a-40dd-a90c-af773978c75b",
        "type": "Microsoft.RecoveryServices/vaults/replicationFabrics/replicationProtectionContainers/replicationProtectedItems",
        "properties": {
          "friendlyName": "vm1",
          "protectedItemType": "HyperVVirtualMachine",
          "protectableItemId": "/Subscriptions/c183865e-6077-46f2-a3b1-deb0f4f4650a/resourceGroups/resourceGroupPS1/providers/Microsoft.RecoveryServices/vaults/vault1/replicationFabrics/cloud1/replicationProtectionContainers/cloud_6d224fc6-f326-5d35-96de-fbf51efb3179/replicationProtectableItems/f8491e4f-817a-40dd-a90c-af773978c75b",
          "recoveryServicesProviderId": "/Subscriptions/c183865e-6077-46f2-a3b1-deb0f4f4650a/resourceGroups/resourceGroupPS1/providers/Microsoft.RecoveryServices/vaults/vault1/replicationFabrics/cloud1/replicationRecoveryServicesProviders/241641e6-ee7b-4ee4-8141-821fadda43fa",
          "primaryFabricFriendlyName": "cloud1",
          "recoveryFabricFriendlyName": "Microsoft Azure",
          "recoveryFabricId": "Microsoft Azure",
          "primaryProtectionContainerFriendlyName": "cloud1",
          "recoveryProtectionContainerFriendlyName": "Microsoft Azure",
          "protectionState": "PlannedFailoverCommitRequired",
          "protectionStateDescription": "Planned failover finished",
          "activeLocation": "Recovery",
          "testFailoverState": "MarkedForDeletion",
          "testFailoverStateDescription": "Cleaning up test environment",
          "allowedOperations": [
            "CompleteMigration",
            "Commit",
            "DisableProtection",
            "ChangePit"
          ],
          "replicationHealth": "Normal",
          "replicationHealthErrors": [],
          "policyId": "/Subscriptions/c183865e-6077-46f2-a3b1-deb0f4f4650a/resourceGroups/resourceGroupPS1/providers/Microsoft.RecoveryServices/vaults/vault1/replicationPolicies/protectionprofile1",
          "policyFriendlyName": "protectionprofile1",
          "lastSuccessfulFailoverTime": "2017-04-26T06:37:23.1578655Z",
          "lastSuccessfulTestFailoverTime": "2017-04-25T09:57:57.0357829Z",
          "currentScenario": {
            "scenarioName": "None",
            "jobId": "/Subscriptions/c183865e-6077-46f2-a3b1-deb0f4f4650a/resourceGroups/resourceGroupPS1/providers/Microsoft.RecoveryServices/vaults/vault1/replicationJobs/None",
            "startTime": "1753-01-01T01:01:01Z"
          },
          "failoverRecoveryPointId": "/Subscriptions/c183865e-6077-46f2-a3b1-deb0f4f4650a/resourceGroups/resourceGroupPS1/providers/Microsoft.RecoveryServices/vaults/vault1/replicationFabrics/cloud1/replicationProtectionContainers/cloud_6d224fc6-f326-5d35-96de-fbf51efb3179/replicationProtectedItems/f8491e4f-817a-40dd-a90c-af773978c75b/recoveryPoints/b22134ea-620c-474b-9fa5-3c1cb47708e3",
          "providerSpecificDetails": {
            "instanceType": "HyperVReplicaAzure"
          },
          "recoveryContainerId": "/Subscriptions/c183865e-6077-46f2-a3b1-deb0f4f4650a/resourceGroups/resourceGroupPS1/providers/Microsoft.RecoveryServices/vaults/vault1/replicationFabrics/d49858f157601230a6ac5862fbbc6e63bf38d23ecd96cf953767945d457fe9d5/replicationProtectionContainers/d38048d4-b460-4791-8ece-108395ee8478"
        }
      }
  - statusCode: "202"
  name: Execute planned failover
security:
- type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - description: impersonate your user account.
    name: user_impersonation
name: Planned Failover
uid: management.azure.com.recoveryservices-siterecovery.replicationprotecteditems.plannedfailover
