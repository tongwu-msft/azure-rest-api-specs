### YamlMime:RESTOperation
uid: management.azure.com.recoveryservices.vaults.listbysubscriptionid
name: List By Subscription Id
service: Recovery Services
groupName: Vaults
apiVersion: 2022-04-01
summary: Fetches all the resources of the specified type in the subscription.
consumes:
- application/json
produces:
- application/json
paths:
- content: GET https://management.azure.com/subscriptions/{subscriptionId}/providers/Microsoft.RecoveryServices/vaults?api-version=2022-04-01
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: The subscription Id.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: Client Api Version.
  types:
  - uid: string
responses:
- name: 200 OK
  description: OK
  types:
  - uid: VaultList
- name: Other Status Codes
  description: Error response describing why the operation failed.
  types:
  - uid: CloudError
requestHeader: []
definitions:
- name: VaultList
  description: The response model for a list of Vaults.
  kind: object
  properties:
  - name: value
    description: Resource information, as returned by the resource provider.
    types:
    - uid: Vault
      isArray: true
  - name: nextLink
    isReadyOnly: true
    description: ''
    types:
    - uid: string
- name: CloudError
  description: CloudError
  kind: object
  properties:
  - name: error
    description: The resource management error response.
    types:
    - uid: Error
- name: Vault
  description: Resource information, as returned by the resource provider.
  kind: object
  properties:
  - name: identity
    description: Identity for the resource.
    types:
    - uid: IdentityData
  - name: properties
    description: Properties of the vault.
    types:
    - uid: VaultProperties
  - name: sku
    description: Identifies the unique system identifier for each Azure resource.
    types:
    - uid: Sku
  - name: systemData
    isReadyOnly: true
    description: Metadata pertaining to creation and last modification of the resource.
    types:
    - uid: systemData
  - name: location
    description: Resource location.
    types:
    - uid: string
  - name: tags
    description: Resource tags.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: id
    isReadyOnly: true
    description: Resource Id represents the complete path to the resource.
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: Resource name associated with the resource.
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: Resource type represents the complete path of the form Namespace/ResourceType/ResourceType/...
    types:
    - uid: string
  - name: etag
    description: Optional ETag.
    types:
    - uid: string
- name: Error
  description: The resource management error response.
  kind: object
  properties:
  - name: additionalInfo
    isReadyOnly: true
    description: The error additional info.
    types:
    - uid: ErrorAdditionalInfo
      isArray: true
  - name: code
    isReadyOnly: true
    description: The error code.
    types:
    - uid: string
  - name: details
    isReadyOnly: true
    description: The error details.
    types:
    - uid: Error
      isArray: true
  - name: message
    isReadyOnly: true
    description: The error message.
    types:
    - uid: string
  - name: target
    isReadyOnly: true
    description: The error target.
    types:
    - uid: string
- name: IdentityData
  description: Identity for the resource.
  kind: object
  properties:
  - name: principalId
    isReadyOnly: true
    description: The principal ID of resource identity.
    types:
    - uid: string
  - name: tenantId
    isReadyOnly: true
    description: The tenant ID of resource.
    types:
    - uid: string
  - name: type
    description: The type of managed identity used. The type 'SystemAssigned, UserAssigned' includes both an implicitly created identity and a set of user-assigned identities. The type 'None' will remove any identities.
    types:
    - uid: ResourceIdentityType
  - name: userAssignedIdentities
    description: "The list of user-assigned identities associated with the resource. The user-assigned identity dictionary keys will be ARM resource ids in the form: '/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.ManagedIdentity/userAssignedIdentities/{identityName}'."
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: UserIdentity
- name: VaultProperties
  description: Properties of the vault.
  kind: object
  properties:
  - name: provisioningState
    isReadyOnly: true
    description: Provisioning State.
    types:
    - uid: string
  - name: upgradeDetails
    description: Details for upgrading vault.
    types:
    - uid: UpgradeDetails
  - name: privateEndpointConnections
    isReadyOnly: true
    description: List of private endpoint connection.
    types:
    - uid: PrivateEndpointConnectionVaultProperties
      isArray: true
  - name: privateEndpointStateForBackup
    isReadyOnly: true
    description: Private endpoint state for backup.
    types:
    - uid: VaultPrivateEndpointState
  - name: privateEndpointStateForSiteRecovery
    isReadyOnly: true
    description: Private endpoint state for site recovery.
    types:
    - uid: VaultPrivateEndpointState
  - name: encryption
    description: Customer Managed Key details of the resource.
    types:
    - uid: Encryption
  - name: moveDetails
    description: The details of the latest move operation performed on the Azure Resource
    types:
    - uid: MoveDetails
  - name: moveState
    isReadyOnly: true
    description: The State of the Resource after the move operation
    types:
    - uid: ResourceMoveState
  - name: backupStorageVersion
    isReadyOnly: true
    description: Backup storage version
    types:
    - uid: BackupStorageVersion
  - name: monitoringSettings
    description: Monitoring Settings of the vault
    types:
    - uid: MonitoringSettings
  - name: redundancySettings
    description: The redundancy Settings of a Vault
    types:
    - uid: RedundancySettings
- name: Sku
  description: Identifies the unique system identifier for each Azure resource.
  kind: object
  properties:
  - name: name
    description: Name of SKU is RS0 (Recovery Services 0th version) and the tier is standard tier. They do not have affect on backend storage redundancy or any other vault settings. To manage storage redundancy, use the backupstorageconfig
    types:
    - uid: SkuName
  - name: tier
    description: The Sku tier.
    types:
    - uid: string
  - name: family
    description: The sku family
    types:
    - uid: string
  - name: size
    description: The sku size
    types:
    - uid: string
  - name: capacity
    description: The sku capacity
    types:
    - uid: string
- name: systemData
  description: Metadata pertaining to creation and last modification of the resource.
  kind: object
  properties:
  - name: createdBy
    description: The identity that created the resource.
    types:
    - uid: string
  - name: createdByType
    description: The type of identity that created the resource.
    types:
    - uid: createdByType
  - name: createdAt
    description: The timestamp of resource creation (UTC).
    types:
    - uid: string
  - name: lastModifiedBy
    description: The identity that last modified the resource.
    types:
    - uid: string
  - name: lastModifiedByType
    description: The type of identity that last modified the resource.
    types:
    - uid: createdByType
  - name: lastModifiedAt
    description: The type of identity that last modified the resource.
    types:
    - uid: string
- name: ErrorAdditionalInfo
  description: The resource management error additional info.
  kind: object
  properties:
  - name: info
    isReadyOnly: true
    description: The additional info.
    types:
    - uid: object
  - name: type
    isReadyOnly: true
    description: The additional info type.
    types:
    - uid: string
- name: ResourceIdentityType
  description: The type of managed identity used. The type 'SystemAssigned, UserAssigned' includes both an implicitly created identity and a set of user-assigned identities. The type 'None' will remove any identities.
  kind: enum
  properties:
  - name: SystemAssigned
    types:
    - uid: string
  - name: None
    types:
    - uid: string
  - name: UserAssigned
    types:
    - uid: string
  - name: SystemAssigned, UserAssigned
    types:
    - uid: string
- name: UserIdentity
  description: A resource identity that is managed by the user of the service.
  kind: object
  properties:
  - name: principalId
    isReadyOnly: true
    description: The principal ID of the user-assigned identity.
    types:
    - uid: string
  - name: clientId
    isReadyOnly: true
    description: The client ID of the user-assigned identity.
    types:
    - uid: string
- name: UpgradeDetails
  description: Details for upgrading vault.
  kind: object
  properties:
  - name: operationId
    isReadyOnly: true
    description: ID of the vault upgrade operation.
    types:
    - uid: string
  - name: startTimeUtc
    isReadyOnly: true
    description: UTC time at which the upgrade operation has started.
    types:
    - uid: string
  - name: lastUpdatedTimeUtc
    isReadyOnly: true
    description: UTC time at which the upgrade operation status was last updated.
    types:
    - uid: string
  - name: endTimeUtc
    isReadyOnly: true
    description: UTC time at which the upgrade operation has ended.
    types:
    - uid: string
  - name: status
    isReadyOnly: true
    description: Status of the vault upgrade operation.
    types:
    - uid: VaultUpgradeState
  - name: message
    isReadyOnly: true
    description: Message to the user containing information about the upgrade operation.
    types:
    - uid: string
  - name: triggerType
    isReadyOnly: true
    description: The way the vault upgrade was triggered.
    types:
    - uid: TriggerType
  - name: upgradedResourceId
    isReadyOnly: true
    description: Resource ID of the upgraded vault.
    types:
    - uid: string
  - name: previousResourceId
    isReadyOnly: true
    description: Resource ID of the vault before the upgrade.
    types:
    - uid: string
- name: PrivateEndpointConnectionVaultProperties
  description: Information to be stored in Vault properties as an element of privateEndpointConnections List.
  kind: object
  properties:
  - name: id
    isReadyOnly: true
    description: Format of id subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.[Service]/{resource}/{resourceName}/privateEndpointConnections/{connectionName}.
    types:
    - uid: string
  - name: properties
    isReadyOnly: true
    description: Private Endpoint Connection Response Properties.
    types:
    - uid: PrivateEndpointConnection
  - name: name
    isReadyOnly: true
    description: The name of the private Endpoint Connection
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: The type, which will be of the format, Microsoft.RecoveryServices/vaults/privateEndpointConnections
    types:
    - uid: string
  - name: location
    isReadyOnly: true
    description: The location of the private Endpoint connection
    types:
    - uid: string
- name: VaultPrivateEndpointState
  description: Private endpoint state for backup.
  kind: enum
  properties:
  - name: None
    types:
    - uid: string
  - name: Enabled
    types:
    - uid: string
- name: Encryption
  description: Customer Managed Key details of the resource.
  kind: object
  properties:
  - name: keyVaultProperties
    description: The properties of the Key Vault which hosts CMK
    types:
    - uid: CmkKeyVaultProperties
  - name: kekIdentity
    description: The details of the identity used for CMK
    types:
    - uid: CmkKekIdentity
  - name: infrastructureEncryption
    description: Enabling/Disabling the Double Encryption state
    types:
    - uid: InfrastructureEncryptionState
- name: MoveDetails
  description: The details of the latest move operation performed on the Azure Resource
  kind: object
  properties:
  - name: operationId
    isReadyOnly: true
    description: OperationId of the Resource Move Operation
    types:
    - uid: string
  - name: startTimeUtc
    isReadyOnly: true
    description: Start Time of the Resource Move Operation
    types:
    - uid: string
  - name: completionTimeUtc
    isReadyOnly: true
    description: End Time of the Resource Move Operation
    types:
    - uid: string
  - name: sourceResourceId
    isReadyOnly: true
    description: Source Resource of the Resource Move Operation
    types:
    - uid: string
  - name: targetResourceId
    isReadyOnly: true
    description: Target Resource of the Resource Move Operation
    types:
    - uid: string
- name: ResourceMoveState
  description: The State of the Resource after the move operation
  kind: enum
  properties:
  - name: Unknown
    types:
    - uid: string
  - name: InProgress
    types:
    - uid: string
  - name: PrepareFailed
    types:
    - uid: string
  - name: CommitFailed
    types:
    - uid: string
  - name: PrepareTimedout
    types:
    - uid: string
  - name: CommitTimedout
    types:
    - uid: string
  - name: MoveSucceeded
    types:
    - uid: string
  - name: Failure
    types:
    - uid: string
  - name: CriticalFailure
    types:
    - uid: string
  - name: PartialSuccess
    types:
    - uid: string
- name: BackupStorageVersion
  description: Backup storage version
  kind: enum
  properties:
  - name: V1
    types:
    - uid: string
  - name: V2
    types:
    - uid: string
  - name: Unassigned
    types:
    - uid: string
- name: MonitoringSettings
  description: Monitoring Settings of the vault
  kind: object
  properties:
  - name: azureMonitorAlertSettings
    description: Settings for Azure Monitor based alerts
    types:
    - uid: AzureMonitorAlertSettings
  - name: classicAlertSettings
    description: Settings for classic alerts
    types:
    - uid: ClassicAlertSettings
- name: RedundancySettings
  description: The redundancy Settings of a Vault
  kind: object
  properties:
  - name: standardTierStorageRedundancy
    isReadyOnly: true
    description: The storage redundancy setting of a vault
    types:
    - uid: standardTierStorageRedundancy
  - name: crossRegionRestore
    isReadyOnly: true
    description: Flag to show if Cross Region Restore is enabled on the Vault or not
    types:
    - uid: crossRegionRestore
- name: SkuName
  description: Name of SKU is RS0 (Recovery Services 0th version) and the tier is standard tier. They do not have affect on backend storage redundancy or any other vault settings. To manage storage redundancy, use the backupstorageconfig
  kind: enum
  properties:
  - name: Standard
    types:
    - uid: string
  - name: RS0
    types:
    - uid: string
- name: createdByType
  description: The type of identity that created the resource.
  kind: enum
  properties:
  - name: User
    types:
    - uid: string
  - name: Application
    types:
    - uid: string
  - name: ManagedIdentity
    types:
    - uid: string
  - name: Key
    types:
    - uid: string
- name: VaultUpgradeState
  description: Status of the vault upgrade operation.
  kind: enum
  properties:
  - name: Unknown
    types:
    - uid: string
  - name: InProgress
    types:
    - uid: string
  - name: Upgraded
    types:
    - uid: string
  - name: Failed
    types:
    - uid: string
- name: TriggerType
  description: The way the vault upgrade was triggered.
  kind: enum
  properties:
  - name: UserTriggered
    types:
    - uid: string
  - name: ForcedUpgrade
    types:
    - uid: string
- name: PrivateEndpointConnection
  description: Private Endpoint Connection Response Properties.
  kind: object
  properties:
  - name: provisioningState
    isReadyOnly: true
    description: Gets or sets provisioning state of the private endpoint connection.
    types:
    - uid: ProvisioningState
  - name: privateEndpoint
    isReadyOnly: true
    description: The Private Endpoint network resource that is linked to the Private Endpoint connection.
    types:
    - uid: PrivateEndpoint
  - name: privateLinkServiceConnectionState
    isReadyOnly: true
    description: Gets or sets private link service connection state.
    types:
    - uid: PrivateLinkServiceConnectionState
- name: CmkKeyVaultProperties
  description: The properties of the Key Vault which hosts CMK
  kind: object
  properties:
  - name: keyUri
    description: The key uri of the Customer Managed Key
    types:
    - uid: string
- name: CmkKekIdentity
  description: The details of the identity used for CMK
  kind: object
  properties:
  - name: useSystemAssignedIdentity
    description: Indicate that system assigned identity should be used. Mutually exclusive with 'userAssignedIdentity' field
    types:
    - uid: boolean
  - name: userAssignedIdentity
    description: The user assigned identity to be used to grant permissions in case the type of identity used is UserAssigned
    types:
    - uid: string
- name: InfrastructureEncryptionState
  description: Enabling/Disabling the Double Encryption state
  kind: enum
  properties:
  - name: Enabled
    types:
    - uid: string
  - name: Disabled
    types:
    - uid: string
- name: AzureMonitorAlertSettings
  description: Settings for Azure Monitor based alerts
  kind: object
  properties:
  - name: alertsForAllJobFailures
    description: ''
    types:
    - uid: AlertsState
- name: ClassicAlertSettings
  description: Settings for classic alerts
  kind: object
  properties:
  - name: alertsForCriticalOperations
    description: ''
    types:
    - uid: AlertsState
- name: standardTierStorageRedundancy
  description: The storage redundancy setting of a vault
  kind: enum
  properties:
  - name: LocallyRedundant
    types:
    - uid: string
  - name: GeoRedundant
    types:
    - uid: string
  - name: ZoneRedundant
    types:
    - uid: string
- name: crossRegionRestore
  description: Flag to show if Cross Region Restore is enabled on the Vault or not
  kind: enum
  properties:
  - name: Enabled
    types:
    - uid: string
  - name: Disabled
    types:
    - uid: string
- name: ProvisioningState
  description: Gets or sets provisioning state of the private endpoint connection.
  kind: enum
  properties:
  - name: Succeeded
    types:
    - uid: string
  - name: Deleting
    types:
    - uid: string
  - name: Failed
    types:
    - uid: string
  - name: Pending
    types:
    - uid: string
- name: PrivateEndpoint
  description: The Private Endpoint network resource that is linked to the Private Endpoint connection.
  kind: object
  properties:
  - name: id
    isReadyOnly: true
    description: Gets or sets id.
    types:
    - uid: string
- name: PrivateLinkServiceConnectionState
  description: Gets or sets private link service connection state.
  kind: object
  properties:
  - name: status
    isReadyOnly: true
    description: Gets or sets the status.
    types:
    - uid: PrivateEndpointConnectionStatus
  - name: description
    isReadyOnly: true
    description: Gets or sets description.
    types:
    - uid: string
  - name: actionsRequired
    isReadyOnly: true
    description: Gets or sets actions required.
    types:
    - uid: string
- name: AlertsState
  kind: enum
  properties:
  - name: Enabled
    types:
    - uid: string
  - name: Disabled
    types:
    - uid: string
- name: PrivateEndpointConnectionStatus
  description: Gets or sets the status.
  kind: enum
  properties:
  - name: Pending
    types:
    - uid: string
  - name: Approved
    types:
    - uid: string
  - name: Rejected
    types:
    - uid: string
  - name: Disconnected
    types:
    - uid: string
examples:
- name: List of Recovery Services Resources in SubscriptionId
  request:
    uri: GET https://management.azure.com/subscriptions/77777777-b0c6-47a2-b37c-d8e65a629c18/providers/Microsoft.RecoveryServices/vaults?api-version=2022-04-01
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      GET https://management.azure.com/subscriptions/77777777-b0c6-47a2-b37c-d8e65a629c18/providers/Microsoft.RecoveryServices/vaults?api-version=2022-04-01
      ```

  responses:
  - statusCode: "200"
    body: >-
      {
        "value": [
          {
            "location": "westus",
            "name": "patchtest",
            "etag": "W/\"datetime'2017-11-22T11%3A05%3A19.907Z'\"",
            "tags": {
              "Love": "India"
            },
            "properties": {
              "provisioningState": "Succeeded"
            },
            "id": "/subscriptions/77777777-b0c6-47a2-b37c-d8e65a629c18/resourceGroups/Default-RecoveryServices-ResourceGroup/providers/Microsoft.RecoveryServices/vaults/patchtest",
            "type": "Microsoft.RecoveryServices/vaults",
            "sku": {
              "name": "Standard"
            }
          },
          {
            "location": "westus",
            "name": "swaggerExample",
            "etag": "W/\"datetime'2017-12-15T12%3A36%3A51.68Z'\"",
            "tags": {
              "TestUpdatedKey": "TestUpdatedValue"
            },
            "properties": {
              "provisioningState": "Succeeded"
            },
            "id": "/subscriptions/77777777-b0c6-47a2-b37c-d8e65a629c18/resourceGroups/HelloWorld/providers/Microsoft.RecoveryServices/vaults/swaggerExample",
            "type": "Microsoft.RecoveryServices/vaults",
            "sku": {
              "name": "Standard"
            }
          },
          {
            "location": "westus",
            "name": "today1",
            "etag": "W/\"datetime'2017-11-21T10%3A52%3A19.633Z'\"",
            "tags": {
              "TestUpdatedKey": "TestUpdatedValue"
            },
            "properties": {
              "provisioningState": "Succeeded"
            },
            "id": "/subscriptions/77777777-b0c6-47a2-b37c-d8e65a629c18/resourceGroups/HelloWorld/providers/Microsoft.RecoveryServices/vaults/today1",
            "type": "Microsoft.RecoveryServices/vaults",
            "sku": {
              "name": "Standard"
            }
          }
        ]
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account.
metadata:
  description: Learn more about Recovery Services service - Fetches all the resources of the specified type in the subscription.
errorCodes: []
