### YamlMime:RESTOperation
uid: management.azure.com.openshift.openshiftclusters.update
name: Update
service: Red Hat OpenShift
groupName: Open Shift Clusters
apiVersion: 2020-04-30
summary: "Creates or updates a OpenShift cluster with the specified subscription, resource group and resource name.  \nThe operation returns properties of a OpenShift cluster."
consumes:
- application/json
produces:
- application/json
paths:
- content: PATCH https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.RedHatOpenShift/openShiftClusters/{resourceName}?api-version=2020-04-30
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: The ID of the target subscription.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group. The name is case insensitive.
  types:
  - uid: string
- name: resourceName
  in: path
  isRequired: true
  description: The name of the OpenShift cluster resource.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: The API version to use for this operation.
  types:
  - uid: string
responses:
- name: 200 OK
  description: OK
  types:
  - uid: OpenShiftCluster
- name: 201 Created
  description: Created
  types:
  - uid: OpenShiftCluster
- name: Other Status Codes
  description: Error response describing why the operation failed.  If the resource doesn't exist, 404 (Not Found) is returned.  If any of the input parameters is wrong, 400 (Bad Request) is returned.
  types:
  - uid: CloudError
requestBody:
- name: default
  parameters:
  - name: tags
    in: body
    description: The resource tags.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: properties.provisioningState
    in: body
    description: The cluster provisioning state (immutable).
    types:
    - uid: ProvisioningState
  - name: properties.clusterProfile
    in: body
    description: The cluster profile.
    types:
    - uid: ClusterProfile
  - name: properties.consoleProfile
    in: body
    description: The console profile.
    types:
    - uid: ConsoleProfile
  - name: properties.servicePrincipalProfile
    in: body
    description: The cluster service principal profile.
    types:
    - uid: ServicePrincipalProfile
  - name: properties.networkProfile
    in: body
    description: The cluster network profile.
    types:
    - uid: NetworkProfile
  - name: properties.masterProfile
    in: body
    description: The cluster master profile.
    types:
    - uid: MasterProfile
  - name: properties.workerProfiles
    in: body
    description: The cluster worker profiles.
    types:
    - uid: WorkerProfile
      isArray: true
  - name: properties.apiserverProfile
    in: body
    description: The cluster API server profile.
    types:
    - uid: APIServerProfile
  - name: properties.ingressProfiles
    in: body
    description: The cluster ingress profiles.
    types:
    - uid: IngressProfile
      isArray: true
requestHeader: []
definitions:
- name: ClusterProfile
  description: ClusterProfile represents a cluster profile.
  kind: object
  properties:
  - name: pullSecret
    description: The pull secret for the cluster (immutable).
    types:
    - uid: string
  - name: domain
    description: The domain for the cluster (immutable).
    types:
    - uid: string
  - name: version
    description: The version of the cluster (immutable).
    types:
    - uid: string
  - name: resourceGroupId
    description: The ID of the cluster resource group (immutable).
    types:
    - uid: string
- name: ConsoleProfile
  description: ConsoleProfile represents a console profile.
  kind: object
  properties:
  - name: url
    description: The URL to access the cluster console (immutable).
    types:
    - uid: string
- name: ServicePrincipalProfile
  description: ServicePrincipalProfile represents a service principal profile.
  kind: object
  properties:
  - name: clientId
    description: The client ID used for the cluster (immutable).
    types:
    - uid: string
  - name: clientSecret
    description: The client secret used for the cluster (immutable).
    types:
    - uid: string
- name: NetworkProfile
  description: NetworkProfile represents a network profile.
  kind: object
  properties:
  - name: podCidr
    description: The CIDR used for OpenShift/Kubernetes Pods (immutable).
    types:
    - uid: string
  - name: serviceCidr
    description: The CIDR used for OpenShift/Kubernetes Services (immutable).
    types:
    - uid: string
- name: MasterProfile
  description: MasterProfile represents a master profile.
  kind: object
  properties:
  - name: vmSize
    description: The size of the master VMs (immutable).
    types:
    - uid: VMSize
  - name: subnetId
    description: The Azure resource ID of the master subnet (immutable).
    types:
    - uid: string
- name: WorkerProfile
  description: WorkerProfile represents a worker profile.
  kind: object
  properties:
  - name: name
    description: The worker profile name.  Must be "worker" (immutable).
    types:
    - uid: string
  - name: vmSize
    description: The size of the worker VMs (immutable).
    types:
    - uid: VMSize
  - name: diskSizeGB
    description: The disk size of the worker VMs.  Must be 128 or greater (immutable).
    types:
    - uid: integer
  - name: subnetId
    description: The Azure resource ID of the worker subnet (immutable).
    types:
    - uid: string
  - name: count
    description: The number of worker VMs.  Must be between 3 and 20 (immutable).
    types:
    - uid: integer
- name: APIServerProfile
  description: APIServerProfile represents an API server profile.
  kind: object
  properties:
  - name: visibility
    description: API server visibility (immutable).
    types:
    - uid: Visibility
  - name: url
    description: The URL to access the cluster API server (immutable).
    types:
    - uid: string
  - name: ip
    description: The IP of the cluster API server (immutable).
    types:
    - uid: string
- name: IngressProfile
  description: IngressProfile represents an ingress profile.
  kind: object
  properties:
  - name: name
    description: The ingress profile name.  Must be "default" (immutable).
    types:
    - uid: string
  - name: visibility
    description: Ingress visibility (immutable).
    types:
    - uid: Visibility
  - name: ip
    description: The IP of the ingress (immutable).
    types:
    - uid: string
- name: OpenShiftCluster
  description: OpenShiftCluster represents an Azure Red Hat OpenShift cluster.
  kind: object
  properties:
  - name: properties.provisioningState
    description: The cluster provisioning state (immutable).
    types:
    - uid: ProvisioningState
  - name: properties.clusterProfile
    description: The cluster profile.
    types:
    - uid: ClusterProfile
  - name: properties.consoleProfile
    description: The console profile.
    types:
    - uid: ConsoleProfile
  - name: properties.servicePrincipalProfile
    description: The cluster service principal profile.
    types:
    - uid: ServicePrincipalProfile
  - name: properties.networkProfile
    description: The cluster network profile.
    types:
    - uid: NetworkProfile
  - name: properties.masterProfile
    description: The cluster master profile.
    types:
    - uid: MasterProfile
  - name: properties.workerProfiles
    description: The cluster worker profiles.
    types:
    - uid: WorkerProfile
      isArray: true
  - name: properties.apiserverProfile
    description: The cluster API server profile.
    types:
    - uid: APIServerProfile
  - name: properties.ingressProfiles
    description: The cluster ingress profiles.
    types:
    - uid: IngressProfile
      isArray: true
  - name: tags
    description: Resource tags.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: location
    description: The geo-location where the resource lives
    types:
    - uid: string
  - name: id
    isReadyOnly: true
    description: Fully qualified resource ID for the resource. Ex - /subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/{resourceProviderNamespace}/{resourceType}/{resourceName}
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: The name of the resource
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: The type of the resource. E.g. "Microsoft.Compute/virtualMachines" or "Microsoft.Storage/storageAccounts"
    types:
    - uid: string
- name: CloudError
  description: CloudError represents a cloud error.
  kind: object
  properties:
  - name: error
    description: An error response from the service.
    types:
    - uid: CloudErrorBody
- name: OpenShiftClusterUpdate
  description: OpenShiftCluster represents an Azure Red Hat OpenShift cluster.
  kind: object
  properties:
  - name: tags
    description: The resource tags.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: properties.provisioningState
    description: The cluster provisioning state (immutable).
    types:
    - uid: ProvisioningState
  - name: properties.clusterProfile
    description: The cluster profile.
    types:
    - uid: ClusterProfile
  - name: properties.consoleProfile
    description: The console profile.
    types:
    - uid: ConsoleProfile
  - name: properties.servicePrincipalProfile
    description: The cluster service principal profile.
    types:
    - uid: ServicePrincipalProfile
  - name: properties.networkProfile
    description: The cluster network profile.
    types:
    - uid: NetworkProfile
  - name: properties.masterProfile
    description: The cluster master profile.
    types:
    - uid: MasterProfile
  - name: properties.workerProfiles
    description: The cluster worker profiles.
    types:
    - uid: WorkerProfile
      isArray: true
  - name: properties.apiserverProfile
    description: The cluster API server profile.
    types:
    - uid: APIServerProfile
  - name: properties.ingressProfiles
    description: The cluster ingress profiles.
    types:
    - uid: IngressProfile
      isArray: true
- name: VMSize
  description: VMSize represents a VM size.
  kind: enum
  properties:
  - name: Standard_D2s_v3
    types:
    - uid: string
  - name: Standard_D4s_v3
    types:
    - uid: string
  - name: Standard_D8s_v3
    types:
    - uid: string
- name: Visibility
  description: Visibility represents visibility.
  kind: enum
  properties:
  - name: Private
    types:
    - uid: string
  - name: Public
    types:
    - uid: string
- name: ProvisioningState
  description: ProvisioningState represents a provisioning state.
  kind: enum
  properties:
  - name: AdminUpdating
    types:
    - uid: string
  - name: Creating
    types:
    - uid: string
  - name: Deleting
    types:
    - uid: string
  - name: Failed
    types:
    - uid: string
  - name: Succeeded
    types:
    - uid: string
  - name: Updating
    types:
    - uid: string
- name: CloudErrorBody
  description: CloudErrorBody represents the body of a cloud error.
  kind: object
  properties:
  - name: code
    description: An identifier for the error. Codes are invariant and are intended to be consumed programmatically.
    types:
    - uid: string
  - name: message
    description: A message describing the error, intended to be suitable for display in a user interface.
    types:
    - uid: string
  - name: target
    description: The target of the particular error. For example, the name of the property in error.
    types:
    - uid: string
  - name: details
    description: A list of additional details about the error.
    types:
    - uid: CloudErrorBody
      isArray: true
examples:
- name: Creates or updates a OpenShift cluster with the specified subscription, resource group and resource name.
  request:
    uri: PATCH https://management.azure.com/subscriptions/subscriptionId/resourceGroups/resourceGroup/providers/Microsoft.RedHatOpenShift/openShiftClusters/resourceName?api-version=2020-04-30
    body: >-
      {
        "tags": {
          "key": "value"
        },
        "properties": {
          "clusterProfile": {
            "pullSecret": "{\"auths\":{\"registry.connect.redhat.com\":{\"auth\":\"\"},\"registry.redhat.io\":{\"auth\":\"\"}}}",
            "domain": "cluster.location.aroapp.io",
            "resourceGroupId": "/subscriptions/subscriptionId/resourceGroups/clusterResourceGroup"
          },
          "consoleProfile": {},
          "servicePrincipalProfile": {
            "clientId": "clientId",
            "clientSecret": "clientSecret"
          },
          "networkProfile": {
            "podCidr": "10.128.0.0/14",
            "serviceCidr": "172.30.0.0/16"
          },
          "masterProfile": {
            "vmSize": "Standard_D8s_v3",
            "subnetId": "/subscriptions/subscriptionId/resourceGroups/vnetResourceGroup/providers/Microsoft.Network/virtualNetworks/vnet/subnets/master"
          },
          "workerProfiles": [
            {
              "name": "worker",
              "vmSize": "Standard_D2s_v3",
              "diskSizeGB": 128,
              "subnetId": "/subscriptions/subscriptionId/resourceGroups/vnetResourceGroup/providers/Microsoft.Network/virtualNetworks/vnet/subnets/worker",
              "count": 3
            }
          ],
          "apiserverProfile": {
            "visibility": "Public"
          },
          "ingressProfiles": [
            {
              "name": "default",
              "visibility": "Public"
            }
          ]
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PATCH https://management.azure.com/subscriptions/subscriptionId/resourceGroups/resourceGroup/providers/Microsoft.RedHatOpenShift/openShiftClusters/resourceName?api-version=2020-04-30

      {
        "tags": {
          "key": "value"
        },
        "properties": {
          "clusterProfile": {
            "pullSecret": "{\"auths\":{\"registry.connect.redhat.com\":{\"auth\":\"\"},\"registry.redhat.io\":{\"auth\":\"\"}}}",
            "domain": "cluster.location.aroapp.io",
            "resourceGroupId": "/subscriptions/subscriptionId/resourceGroups/clusterResourceGroup"
          },
          "consoleProfile": {},
          "servicePrincipalProfile": {
            "clientId": "clientId",
            "clientSecret": "clientSecret"
          },
          "networkProfile": {
            "podCidr": "10.128.0.0/14",
            "serviceCidr": "172.30.0.0/16"
          },
          "masterProfile": {
            "vmSize": "Standard_D8s_v3",
            "subnetId": "/subscriptions/subscriptionId/resourceGroups/vnetResourceGroup/providers/Microsoft.Network/virtualNetworks/vnet/subnets/master"
          },
          "workerProfiles": [
            {
              "name": "worker",
              "vmSize": "Standard_D2s_v3",
              "diskSizeGB": 128,
              "subnetId": "/subscriptions/subscriptionId/resourceGroups/vnetResourceGroup/providers/Microsoft.Network/virtualNetworks/vnet/subnets/worker",
              "count": 3
            }
          ],
          "apiserverProfile": {
            "visibility": "Public"
          },
          "ingressProfiles": [
            {
              "name": "default",
              "visibility": "Public"
            }
          ]
        }
      }

      ```

      # [Go](#tab/Go)
      ``` go
      package armredhatopenshift_test

      import (
      	"context"
      	"log"

      	"time"

      	"github.com/Azure/azure-sdk-for-go/sdk/azcore/to"
      	"github.com/Azure/azure-sdk-for-go/sdk/azidentity"
      	"github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/redhatopenshift/armredhatopenshift"
      )

      // Generated from example definition: https://github.com/Azure/azure-rest-api-specs/tree/main/specification/redhatopenshift/resource-manager/Microsoft.RedHatOpenShift/stable/2020-04-30/examples/OpenShiftClusters_Update.json
      func ExampleOpenShiftClustersClient_BeginUpdate() {
      	cred, err := azidentity.NewDefaultAzureCredential(nil)
      	if err != nil {
      		log.Fatalf("failed to obtain a credential: %v", err)
      		return
      	}
      	ctx := context.Background()
      	client, err := armredhatopenshift.NewOpenShiftClustersClient("<subscription-id>", cred, nil)
      	if err != nil {
      		log.Fatalf("failed to create client: %v", err)
      		return
      	}
      	poller, err := client.BeginUpdate(ctx,
      		"<resource-group-name>",
      		"<resource-name>",
      		armredhatopenshift.OpenShiftClusterUpdate{
      			Properties: &armredhatopenshift.OpenShiftClusterProperties{
      				ApiserverProfile: &armredhatopenshift.APIServerProfile{
      					Visibility: to.Ptr(armredhatopenshift.VisibilityPublic),
      				},
      				ClusterProfile: &armredhatopenshift.ClusterProfile{
      					Domain:          to.Ptr("<domain>"),
      					PullSecret:      to.Ptr("<pull-secret>"),
      					ResourceGroupID: to.Ptr("<resource-group-id>"),
      				},
      				ConsoleProfile: &armredhatopenshift.ConsoleProfile{},
      				IngressProfiles: []*armredhatopenshift.IngressProfile{
      					{
      						Name:       to.Ptr("<name>"),
      						Visibility: to.Ptr(armredhatopenshift.VisibilityPublic),
      					}},
      				MasterProfile: &armredhatopenshift.MasterProfile{
      					SubnetID: to.Ptr("<subnet-id>"),
      					VMSize:   to.Ptr(armredhatopenshift.VMSizeStandardD8SV3),
      				},
      				NetworkProfile: &armredhatopenshift.NetworkProfile{
      					PodCidr:     to.Ptr("<pod-cidr>"),
      					ServiceCidr: to.Ptr("<service-cidr>"),
      				},
      				ServicePrincipalProfile: &armredhatopenshift.ServicePrincipalProfile{
      					ClientID:     to.Ptr("<client-id>"),
      					ClientSecret: to.Ptr("<client-secret>"),
      				},
      				WorkerProfiles: []*armredhatopenshift.WorkerProfile{
      					{
      						Name:       to.Ptr("<name>"),
      						Count:      to.Ptr[int32](3),
      						DiskSizeGB: to.Ptr[int32](128),
      						SubnetID:   to.Ptr("<subnet-id>"),
      						VMSize:     to.Ptr(armredhatopenshift.VMSizeStandardD2SV3),
      					}},
      			},
      			Tags: map[string]*string{
      				"key": to.Ptr("value"),
      			},
      		},
      		&armredhatopenshift.OpenShiftClustersClientBeginUpdateOptions{ResumeToken: ""})
      	if err != nil {
      		log.Fatalf("failed to finish the request: %v", err)
      		return
      	}
      	res, err := poller.PollUntilDone(ctx, 30*time.Second)
      	if err != nil {
      		log.Fatalf("failed to pull the result: %v", err)
      		return
      	}
      	// TODO: use response item
      	_ = res
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-go/blob/sdk%2Fresourcemanager%2Fredhatopenshift%2Farmredhatopenshift%2Fv0.4.0/sdk/resourcemanager/redhatopenshift/armredhatopenshift/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/subscriptionId/resourceGroups/resourceGroup/providers/Microsoft.RedHatOpenShift/OpenShiftClusters/resourceName",
        "name": "resourceName",
        "type": "Microsoft.RedHatOpenShift/OpenShiftClusters",
        "location": "location",
        "tags": {
          "key": "value"
        },
        "properties": {
          "provisioningState": "Succeeded",
          "clusterProfile": {
            "domain": "cluster.location.aroapp.io",
            "version": "4.3.0",
            "resourceGroupId": "/subscriptions/subscriptionId/resourceGroups/clusterResourceGroup"
          },
          "consoleProfile": {
            "url": "https://console-openshift-console.apps.cluster.location.aroapp.io/"
          },
          "servicePrincipalProfile": {
            "clientId": "clientId"
          },
          "networkProfile": {
            "podCidr": "10.128.0.0/14",
            "serviceCidr": "172.30.0.0/16"
          },
          "masterProfile": {
            "vmSize": "Standard_D8s_v3",
            "subnetId": "/subscriptions/subscriptionId/resourceGroups/vnetResourceGroup/providers/Microsoft.Network/virtualNetworks/vnet/subnets/master"
          },
          "workerProfiles": [
            {
              "name": "worker",
              "vmSize": "Standard_D2s_v3",
              "diskSizeGB": 128,
              "subnetId": "/subscriptions/subscriptionId/resourceGroups/vnetResourceGroup/providers/Microsoft.Network/virtualNetworks/vnet/subnets/worker",
              "count": 3
            }
          ],
          "apiserverProfile": {
            "visibility": "Public",
            "url": "https://api.cluster.location.aroapp.io:6443/",
            "ip": "1.2.3.4"
          },
          "ingressProfiles": [
            {
              "name": "default",
              "visibility": "Public",
              "ip": "1.2.3.4"
            }
          ]
        }
      }
  - statusCode: "201"
    body: >-
      {
        "id": "/subscriptions/subscriptionId/resourceGroups/resourceGroup/providers/Microsoft.RedHatOpenShift/OpenShiftClusters/resourceName",
        "name": "resourceName",
        "type": "Microsoft.RedHatOpenShift/OpenShiftClusters",
        "location": "location",
        "tags": {
          "key": "value"
        },
        "properties": {
          "provisioningState": "Succeeded",
          "clusterProfile": {
            "domain": "cluster.location.aroapp.io",
            "version": "4.3.0",
            "resourceGroupId": "/subscriptions/subscriptionId/resourceGroups/clusterResourceGroup"
          },
          "consoleProfile": {
            "url": "https://console-openshift-console.apps.cluster.location.aroapp.io/"
          },
          "servicePrincipalProfile": {
            "clientId": "clientId"
          },
          "networkProfile": {
            "podCidr": "10.128.0.0/14",
            "serviceCidr": "172.30.0.0/16"
          },
          "masterProfile": {
            "vmSize": "Standard_D8s_v3",
            "subnetId": "/subscriptions/subscriptionId/resourceGroups/vnetResourceGroup/providers/Microsoft.Network/virtualNetworks/vnet/subnets/master"
          },
          "workerProfiles": [
            {
              "name": "worker",
              "vmSize": "Standard_D2s_v3",
              "diskSizeGB": 128,
              "subnetId": "/subscriptions/subscriptionId/resourceGroups/vnetResourceGroup/providers/Microsoft.Network/virtualNetworks/vnet/subnets/worker",
              "count": 3
            }
          ],
          "apiserverProfile": {
            "visibility": "Public",
            "url": "https://api.cluster.location.aroapp.io:6443/",
            "ip": "1.2.3.4"
          },
          "ingressProfiles": [
            {
              "name": "default",
              "visibility": "Public",
              "ip": "1.2.3.4"
            }
          ]
        }
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: >-
    Creates or updates a OpenShift cluster with the specified subscription, resource group and resource name.

    The operation returns properties of a OpenShift cluste
errorCodes: []
