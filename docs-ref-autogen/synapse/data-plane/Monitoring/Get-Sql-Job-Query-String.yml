### YamlMime:RESTOperation
uid: synapse.data-plane.monitoring.getsqljobquerystring
name: Get Sql Job Query String
service: Synapse
groupName: Monitoring
apiVersion: 2020-12-01
summary: Get SQL OD/DW Query for the workspace.
consumes:
- application/json
produces:
- application/json
paths:
- content: GET {endpoint}/monitoring/workloadTypes/sql/querystring?api-version=2020-12-01
- content: GET {endpoint}/monitoring/workloadTypes/sql/querystring?api-version=2020-12-01&filter={filter}&$orderby={$orderby}&skip={skip}
  isOptional: true
uriParameters:
- name: endpoint
  in: path
  isRequired: true
  skipUrlEncoding: true
  description: The workspace development endpoint, for example https://myworkspace.dev.azuresynapse.net.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  types:
  - uid: string
- name: filter
  in: query
  types:
  - uid: string
- name: $orderby
  in: query
  types:
  - uid: string
- name: skip
  in: query
  types:
  - uid: string
responses:
- name: 200 OK
  description: Success
  types:
  - uid: SqlQueryStringDataModel
requestHeader:
- name: x-ms-client-request-id
  in: header
  description: Can provide a guid, which is helpful for debugging and to provide better customer support
  types:
  - uid: string
definitions:
- name: SqlQueryStringDataModel
  kind: object
  properties:
  - name: query
    description: ''
    types:
    - uid: string
examples:
- name: Get SOL job query string
  request:
    uri: GET myWorkspace.dev.azuresynapse.net/monitoring/workloadTypes/sql/querystring?api-version=2020-12-01
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      GET myWorkspace.dev.azuresynapse.net/monitoring/workloadTypes/sql/querystring?api-version=2020-12-01
      ```

  responses:
  - statusCode: "200"
    body: >-
      {
        "query": "select * from ( SELECT COUNT(*) OVER() AS total_count,'Running' as [status],'0' as [request_id],'SQL On-demand' as [SQL Resource],s.login_name as [login_name],s.Session_Id as [session_id],r.start_time as [submit_time],r.start_time as [start_time],'N/A' as [end_time],r.command as [commandClause],sqltext.TEXT as [command],r.total_elapsed_time as [Duration],'N/A' as [Queued Duration],r.total_elapsed_time as [Running Duration],'N/A' as [Data processed in bytes],'N/A' as [group_name],'N/A' as [Source],'N/A' as [Pipeline],'N/A' as [importance],'N/A' as [classifier_name],Row_number() over ( ORDER BY r.start_time desc) as rownum FROM sys.dm_exec_requests r CROSS APPLY sys.dm_exec_sql_text(sql_handle) sqltext JOIN sys.dm_exec_sessions s ON r.session_id = s.session_id where   (r.start_time between CONVERT(datetime,'2020-06-04T17:14:17Z') and CONVERT(datetime,'2020-06-05T17:14:22Z')) and  s.session_id not in (select distinct Session_Id from sys.dm_exec_requests where command like'%@@Azure.Synapse.Monitoring.SQLQuerylist%')) tbl where  rownum between 0 and 100-- @@Azure.Synapse.Monitoring.SQLQuerylist"
      }
security: []
metadata:
  description: Learn more about Synapse service - Get SQL OD/DW Query for the workspace.
errorCodes: []
