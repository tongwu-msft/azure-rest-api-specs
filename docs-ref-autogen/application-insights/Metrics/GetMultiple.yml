### YamlMime:RESTOperation
uid: api.applicationinsights.io.v1.application-insights.metrics.getmultiple
name: Get Multiple
service: Application Insights
groupName: Metrics
apiVersion: v1
summary: "Retrieve metric data  \nGets metric values for multiple metrics"
consumes:
- application/json
produces:
- application/json
paths:
- content: POST https://api.applicationinsights.io/v1/apps/{appId}/metrics
uriParameters:
- name: appId
  in: path
  isRequired: true
  description: ID of the application. This is Application ID from the API Access settings blade in the Azure portal.
  types:
  - uid: string
responses:
- name: 200 OK
  description: Successful response
  types:
  - uid: metricsResults
    isArray: true
- name: Other Status Codes
  description: An error response object.
  types:
  - uid: errorResponse
requestBody:
- name: default
  parameters:
  - name: id
    in: body
    isRequired: true
    description: An identifier for this query.  Must be unique within the post body of the request.  This identifier will be the 'id' property of the response object representing this query.
    types:
    - uid: string
  - name: parameters
    in: body
    isRequired: true
    description: The parameters for a single metrics query
    types:
    - uid: Parameters
requestHeader: []
definitions:
- name: Parameters
  description: The parameters for a single metrics query
  kind: object
  properties:
  - name: metricId
    description: ID of the metric. This is either a standard AI metric, or an application-specific custom metric.
    types:
    - uid: MetricId
  - name: timespan
    description: The timespan over which to retrieve metric values. This is an ISO8601 time period value. If timespan is omitted, a default time range of `PT12H` ("last 12 hours") is used. The actual timespan that is queried may be adjusted by the server based. In all cases, the actual time span used for the query is included in the response.
    types:
    - uid: string
  - name: aggregation
    description: The aggregation to use when computing the metric values. To retrieve more than one aggregation at a time, separate them with a comma. If no aggregation is specified, then the default aggregation for the metric is used.
    types:
    - uid: string
      isArray: true
  - name: interval
    description: The time interval to use when retrieving metric values. This is an ISO8601 duration. If interval is omitted, the metric value is aggregated across the entire timespan. If interval is supplied, the server may adjust the interval to a more appropriate size based on the timespan used for the query. In all cases, the actual interval used for the query is included in the response.
    types:
    - uid: string
  - name: segment
    description: The name of the dimension to segment the metric values by. This dimension must be applicable to the metric you are retrieving. To segment by more than one dimension at a time, separate them with a comma (,). In this case, the metric data will be segmented in the order the dimensions are listed in the parameter.
    types:
    - uid: string
      isArray: true
  - name: top
    description: The number of segments to return.  This value is only valid when segment is specified.
    types:
    - uid: integer
  - name: orderby
    description: The aggregation function and direction to sort the segments by.  This value is only valid when segment is specified.
    types:
    - uid: string
  - name: filter
    description: An expression used to filter the results.  This value should be a valid OData filter expression where the keys of each clause should be applicable dimensions for the metric you are retrieving.
    types:
    - uid: string
- name: metricsResults
  description: A set of metric results.
  kind: object
  properties:
  - name: id
    description: The specified ID for this metric.
    types:
    - uid: string
  - name: status
    description: The HTTP status code of this metric query.
    types:
    - uid: integer
  - name: body
    description: The results of this metric query.
    types:
    - uid: metricsResult
- name: errorResponse
  description: Error details.
  kind: object
  properties:
  - name: error
    description: "The code and message for an error.  \nThe error details."
    types:
    - uid: errorInfo
- name: metricsPostBodySchema
  description: A metric request
  kind: object
  properties:
  - name: id
    description: An identifier for this query.  Must be unique within the post body of the request.  This identifier will be the 'id' property of the response object representing this query.
    types:
    - uid: string
  - name: parameters
    description: The parameters for a single metrics query
    types:
    - uid: Parameters
- name: MetricId
  description: ID of the metric. This is either a standard AI metric, or an application-specific custom metric.
  kind: enum
  properties:
  - name: requests/count
    types:
    - uid: string
  - name: requests/duration
    types:
    - uid: string
  - name: requests/failed
    types:
    - uid: string
  - name: users/count
    types:
    - uid: string
  - name: users/authenticated
    types:
    - uid: string
  - name: pageViews/count
    types:
    - uid: string
  - name: pageViews/duration
    types:
    - uid: string
  - name: client/processingDuration
    types:
    - uid: string
  - name: client/receiveDuration
    types:
    - uid: string
  - name: client/networkDuration
    types:
    - uid: string
  - name: client/sendDuration
    types:
    - uid: string
  - name: client/totalDuration
    types:
    - uid: string
  - name: dependencies/count
    types:
    - uid: string
  - name: dependencies/failed
    types:
    - uid: string
  - name: dependencies/duration
    types:
    - uid: string
  - name: exceptions/count
    types:
    - uid: string
  - name: exceptions/browser
    types:
    - uid: string
  - name: exceptions/server
    types:
    - uid: string
  - name: sessions/count
    types:
    - uid: string
  - name: performanceCounters/requestExecutionTime
    types:
    - uid: string
  - name: performanceCounters/requestsPerSecond
    types:
    - uid: string
  - name: performanceCounters/requestsInQueue
    types:
    - uid: string
  - name: performanceCounters/memoryAvailableBytes
    types:
    - uid: string
  - name: performanceCounters/exceptionsPerSecond
    types:
    - uid: string
  - name: performanceCounters/processCpuPercentage
    types:
    - uid: string
  - name: performanceCounters/processIOBytesPerSecond
    types:
    - uid: string
  - name: performanceCounters/processPrivateBytes
    types:
    - uid: string
  - name: performanceCounters/processorCpuPercentage
    types:
    - uid: string
  - name: availabilityResults/availabilityPercentage
    types:
    - uid: string
  - name: availabilityResults/duration
    types:
    - uid: string
  - name: billing/telemetryCount
    types:
    - uid: string
  - name: customEvents/count
    types:
    - uid: string
- name: metricsResult
  description: A metric result.
  kind: object
  properties:
  - name: value
    description: A metric result data.
    types:
    - uid: metricsResultInfo
- name: errorInfo
  description: The code and message for an error.
  kind: object
  properties:
  - name: code
    description: A machine readable error code.
    types:
    - uid: string
  - name: message
    description: A human readable error message.
    types:
    - uid: string
  - name: details
    description: error details.
    types:
    - uid: errorDetail
      isArray: true
  - name: innererror
    description: "The code and message for an error.  \nInner error details if they exist."
    types:
    - uid: errorInfo
  - name: additionalProperties
    description: ''
    types:
    - uid: object
- name: metricsResultInfo
  description: A metric result data.
  kind: object
  properties:
  - name: start
    description: Start time of the metric.
    types:
    - uid: string
  - name: end
    description: Start time of the metric.
    types:
    - uid: string
  - name: interval
    description: The interval used to segment the metric data.
    types:
    - uid: string
  - name: segments
    description: Segmented metric data (if segmented).
    types:
    - uid: metricsSegmentInfo
      isArray: true
- name: errorDetail
  description: Error details.
  kind: object
  properties:
  - name: code
    description: The error's code.
    types:
    - uid: string
  - name: message
    description: A human readable error message.
    types:
    - uid: string
  - name: target
    description: Indicates which property in the request is responsible for the error.
    types:
    - uid: string
  - name: value
    description: Indicates which value in 'target' is responsible for the error.
    types:
    - uid: string
  - name: resources
    description: Indicates resources which were responsible for the error.
    types:
    - uid: string
      isArray: true
  - name: additionalProperties
    description: ''
    types:
    - uid: object
- name: metricsSegmentInfo
  description: A metric segment
  kind: object
  properties:
  - name: start
    description: Start time of the metric segment (only when an interval was specified).
    types:
    - uid: string
  - name: end
    description: Start time of the metric segment (only when an interval was specified).
    types:
    - uid: string
  - name: segments
    description: Segmented metric data (if further segmented).
    types:
    - uid: metricsSegmentInfo
      isArray: true
examples:
- name: postMetric
  request:
    uri: POST https://api.applicationinsights.io/v1/apps/DEMO_APP/metrics
    body: >-
      [
        {
          "id": "failed",
          "parameters": {
            "metricId": "requests/failed",
            "timespan": "P2D",
            "interval": "P1D"
          }
        },
        {
          "id": "count",
          "parameters": {
            "metricId": "requests/count",
            "timespan": "P2D",
            "interval": "P1D"
          }
        }
      ]
  responses:
  - statusCode: "200"
    body: >-
      [
        {
          "id": "failed",
          "status": 200,
          "body": {
            "value": {
              "start": "2018-01-22T19:59:12.488Z",
              "end": "2018-01-24T19:59:12.488Z",
              "interval": "P1D",
              "segments": [
                {
                  "start": "2018-01-22T19:59:12.488Z",
                  "end": "2018-01-23T00:00:00Z",
                  "requests/failed": {
                    "sum": 277
                  }
                },
                {
                  "start": "2018-01-23T00:00:00Z",
                  "end": "2018-01-24T00:00:00Z",
                  "requests/failed": {
                    "sum": 1599
                  }
                },
                {
                  "start": "2018-01-24T00:00:00Z",
                  "end": "2018-01-24T19:59:12.488Z",
                  "requests/failed": {
                    "sum": 1392
                  }
                }
              ]
            }
          }
        },
        {
          "id": "count",
          "status": 200,
          "body": {
            "value": {
              "start": "2018-01-22T19:59:12.488Z",
              "end": "2018-01-24T19:59:12.488Z",
              "interval": "P1D",
              "segments": [
                {
                  "start": "2018-01-22T19:59:12.488Z",
                  "end": "2018-01-23T00:00:00Z",
                  "requests/count": {
                    "sum": 1225
                  }
                },
                {
                  "start": "2018-01-23T00:00:00Z",
                  "end": "2018-01-24T00:00:00Z",
                  "requests/count": {
                    "sum": 7382
                  }
                },
                {
                  "start": "2018-01-24T00:00:00Z",
                  "end": "2018-01-24T19:59:12.488Z",
                  "requests/count": {
                    "sum": 6674
                  }
                }
              ]
            }
          }
        }
      ]
security:
- type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
