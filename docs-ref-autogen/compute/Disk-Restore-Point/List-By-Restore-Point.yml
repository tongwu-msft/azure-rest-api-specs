### YamlMime:RESTOperation
uid: management.azure.com.compute.diskrestorepoint.listbyrestorepoint
name: List By Restore Point
service: Compute
groupName: Disk Restore Point
apiVersion: 2021-12-01
summary: Lists diskRestorePoints under a vmRestorePoint.
consumes:
- application/json
produces:
- application/json
paths:
- content: GET https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Compute/restorePointCollections/{restorePointCollectionName}/restorePoints/{vmRestorePointName}/diskRestorePoints?api-version=2021-12-01
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: Subscription credentials which uniquely identify Microsoft Azure subscription. The subscription ID forms part of the URI for every service call.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group.
  types:
  - uid: string
- name: restorePointCollectionName
  in: path
  isRequired: true
  description: The name of the restore point collection that the disk restore point belongs.
  types:
  - uid: string
- name: vmRestorePointName
  in: path
  isRequired: true
  description: The name of the vm restore point that the disk disk restore point belongs.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: Client Api Version.
  types:
  - uid: string
responses:
- name: 200 OK
  description: OK
  types:
  - uid: DiskRestorePointList
- name: Other Status Codes
  description: Error response describing why the operation failed.
  types:
  - uid: CloudError
requestHeader: []
definitions:
- name: DiskRestorePointList
  description: The List Disk Restore Points operation response.
  kind: object
  properties:
  - name: value
    description: A list of disk restore points.
    types:
    - uid: DiskRestorePoint
      isArray: true
  - name: nextLink
    description: The uri to fetch the next page of disk restore points. Call ListNext() with this to fetch the next page of disk restore points.
    types:
    - uid: string
- name: CloudError
  description: An error response from the Compute service.
  kind: object
  properties:
  - name: error
    description: Api error.
    types:
    - uid: ApiError
- name: DiskRestorePoint
  description: Properties of disk restore point
  kind: object
  properties:
  - name: properties.timeCreated
    isReadyOnly: true
    description: The timestamp of restorePoint creation
    types:
    - uid: string
  - name: properties.sourceResourceId
    isReadyOnly: true
    description: arm id of source disk or source disk restore point.
    types:
    - uid: string
  - name: properties.osType
    isReadyOnly: true
    description: The Operating System type.
    types:
    - uid: OperatingSystemTypes
  - name: properties.hyperVGeneration
    description: The hypervisor generation of the Virtual Machine. Applicable to OS disks only.
    types:
    - uid: HyperVGeneration
  - name: properties.purchasePlan
    description: Purchase plan information for the the image from which the OS disk was created.
    types:
    - uid: PurchasePlan
  - name: properties.supportedCapabilities
    description: List of supported capabilities for the image from which the OS disk was created.
    types:
    - uid: SupportedCapabilities
  - name: properties.familyId
    isReadyOnly: true
    description: id of the backing snapshot's MIS family
    types:
    - uid: string
  - name: properties.sourceUniqueId
    isReadyOnly: true
    description: unique incarnation id of the source disk
    types:
    - uid: string
  - name: properties.encryption
    isReadyOnly: true
    description: Encryption property can be used to encrypt data at rest with customer managed keys or platform managed keys.
    types:
    - uid: Encryption
  - name: properties.supportsHibernation
    description: Indicates the OS on a disk supports hibernation.
    types:
    - uid: boolean
  - name: properties.networkAccessPolicy
    description: Policy for accessing the disk via network.
    types:
    - uid: NetworkAccessPolicy
  - name: properties.publicNetworkAccess
    description: Policy for controlling export on the disk.
    types:
    - uid: PublicNetworkAccess
  - name: properties.diskAccessId
    description: ARM id of the DiskAccess resource for using private endpoints on disks.
    types:
    - uid: string
  - name: properties.completionPercent
    description: Percentage complete for the background copy of disk restore point when source resource is from a different region.
    types:
    - uid: number
  - name: properties.replicationState
    isReadyOnly: true
    description: Replication state of disk restore point when source resource is from a different region.
    types:
    - uid: string
  - name: properties.sourceResourceLocation
    isReadyOnly: true
    description: Location of source disk or source disk restore point when source resource is from a different region.
    types:
    - uid: string
  - name: id
    isReadyOnly: true
    description: Resource Id
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: Resource name
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: Resource type
    types:
    - uid: string
- name: ApiError
  description: Api error.
  kind: object
  properties:
  - name: details
    description: The Api error details
    types:
    - uid: ApiErrorBase
      isArray: true
  - name: innererror
    description: The Api inner error
    types:
    - uid: InnerError
  - name: code
    description: The error code.
    types:
    - uid: string
  - name: target
    description: The target of the particular error.
    types:
    - uid: string
  - name: message
    description: The error message.
    types:
    - uid: string
- name: OperatingSystemTypes
  description: The Operating System type.
  kind: enum
  properties:
  - name: Windows
    types:
    - uid: string
  - name: Linux
    types:
    - uid: string
- name: HyperVGeneration
  description: The hypervisor generation of the Virtual Machine. Applicable to OS disks only.
  kind: enum
  properties:
  - name: V1
    types:
    - uid: string
  - name: V2
    types:
    - uid: string
- name: PurchasePlan
  description: Used for establishing the purchase context of any 3rd Party artifact through MarketPlace.
  kind: object
  properties:
  - name: name
    description: The plan ID.
    types:
    - uid: string
  - name: publisher
    description: The publisher ID.
    types:
    - uid: string
  - name: product
    description: Specifies the product of the image from the marketplace. This is the same value as Offer under the imageReference element.
    types:
    - uid: string
  - name: promotionCode
    description: The Offer Promotion Code.
    types:
    - uid: string
- name: SupportedCapabilities
  description: List of supported capabilities persisted on the disk resource for VM use.
  kind: object
  properties:
  - name: acceleratedNetwork
    description: True if the image from which the OS disk is created supports accelerated networking.
    types:
    - uid: boolean
  - name: architecture
    description: CPU architecture supported by an OS disk.
    types:
    - uid: Architecture
- name: Encryption
  description: Encryption at rest settings for disk or snapshot
  kind: object
  properties:
  - name: diskEncryptionSetId
    description: ResourceId of the disk encryption set to use for enabling encryption at rest.
    types:
    - uid: string
  - name: type
    description: The type of key used to encrypt the data of the disk.
    types:
    - uid: EncryptionType
- name: NetworkAccessPolicy
  description: Policy for accessing the disk via network.
  kind: enum
  properties:
  - name: AllowAll
    description: The disk can be exported or uploaded to from any network.
    types:
    - uid: string
  - name: AllowPrivate
    description: The disk can be exported or uploaded to using a DiskAccess resource's private endpoints.
    types:
    - uid: string
  - name: DenyAll
    description: The disk cannot be exported.
    types:
    - uid: string
- name: PublicNetworkAccess
  description: Policy for controlling export on the disk.
  kind: enum
  properties:
  - name: Enabled
    description: You can generate a SAS URI to access the underlying data of the disk publicly on the internet when NetworkAccessPolicy is set to AllowAll. You can access the data via the SAS URI only from your trusted Azure VNET when NetworkAccessPolicy is set to AllowPrivate.
    types:
    - uid: string
  - name: Disabled
    description: You cannot access the underlying data of the disk publicly on the internet even when NetworkAccessPolicy is set to AllowAll. You can access the data via the SAS URI only from your trusted Azure VNET when NetworkAccessPolicy is set to AllowPrivate.
    types:
    - uid: string
- name: ApiErrorBase
  description: Api error base.
  kind: object
  properties:
  - name: code
    description: The error code.
    types:
    - uid: string
  - name: target
    description: The target of the particular error.
    types:
    - uid: string
  - name: message
    description: The error message.
    types:
    - uid: string
- name: InnerError
  description: Inner error details.
  kind: object
  properties:
  - name: exceptiontype
    description: The exception type.
    types:
    - uid: string
  - name: errordetail
    description: The internal error message or exception dump.
    types:
    - uid: string
- name: Architecture
  description: CPU architecture supported by an OS disk.
  kind: enum
  properties:
  - name: x64
    types:
    - uid: string
  - name: Arm64
    types:
    - uid: string
- name: EncryptionType
  description: The type of key used to encrypt the data of the disk.
  kind: enum
  properties:
  - name: EncryptionAtRestWithPlatformKey
    description: Disk is encrypted at rest with Platform managed key. It is the default encryption type. This is not a valid encryption type for disk encryption sets.
    types:
    - uid: string
  - name: EncryptionAtRestWithCustomerKey
    description: Disk is encrypted at rest with Customer managed key that can be changed and revoked by a customer.
    types:
    - uid: string
  - name: EncryptionAtRestWithPlatformAndCustomerKeys
    description: Disk is encrypted at rest with 2 layers of encryption. One of the keys is Customer managed and the other key is Platform managed.
    types:
    - uid: string
examples:
- name: Get an incremental disk restorePoint resource.
  request:
    uri: GET https://management.azure.com/subscriptions/{subscription-id}/resourceGroups/myResourceGroup/providers/Microsoft.Compute/restorePointCollections/rpc/restorePoints/vmrp/diskRestorePoints?api-version=2021-12-01
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      GET https://management.azure.com/subscriptions/{subscription-id}/resourceGroups/myResourceGroup/providers/Microsoft.Compute/restorePointCollections/rpc/restorePoints/vmrp/diskRestorePoints?api-version=2021-12-01
      ```

      # [Java](#tab/Java)
      ``` java
      import com.azure.core.util.Context;

      /** Samples for DiskRestorePoint ListByRestorePoint. */
      public final class Main {
          /*
           * x-ms-original-file: specification/compute/resource-manager/Microsoft.Compute/stable/2021-12-01/examples/ListDiskRestorePointsInVmRestorePoint.json
           */
          /**
           * Sample code: Get an incremental disk restorePoint resource.
           *
           * @param azure The entry point for accessing resource management APIs in Azure.
           */
          public static void getAnIncrementalDiskRestorePointResource(com.azure.resourcemanager.AzureResourceManager azure) {
              azure
                  .virtualMachines()
                  .manager()
                  .serviceClient()
                  .getDiskRestorePoints()
                  .listByRestorePoint("myResourceGroup", "rpc", "vmrp", Context.NONE);
          }
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-java/blob/azure-resourcemanager_2.15.0/sdk/resourcemanager/azure-resourcemanager/README.md) on how to add the SDK to your project and authenticate.
      # [Go](#tab/Go)
      ``` go
      package armcompute_test

      import (
      	"context"
      	"log"

      	"github.com/Azure/azure-sdk-for-go/sdk/azidentity"
      	"github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/compute/armcompute"
      )

      // Generated from example definition: https://github.com/Azure/azure-rest-api-specs/tree/main/specification/compute/resource-manager/Microsoft.Compute/stable/2021-12-01/examples/ListDiskRestorePointsInVmRestorePoint.json
      func ExampleDiskRestorePointClient_NewListByRestorePointPager() {
      	cred, err := azidentity.NewDefaultAzureCredential(nil)
      	if err != nil {
      		log.Fatalf("failed to obtain a credential: %v", err)
      	}
      	ctx := context.Background()
      	client, err := armcompute.NewDiskRestorePointClient("{subscription-id}", cred, nil)
      	if err != nil {
      		log.Fatalf("failed to create client: %v", err)
      	}
      	pager := client.NewListByRestorePointPager("myResourceGroup",
      		"rpc",
      		"vmrp",
      		nil)
      	for pager.More() {
      		nextResult, err := pager.NextPage(ctx)
      		if err != nil {
      			log.Fatalf("failed to advance page: %v", err)
      		}
      		for _, v := range nextResult.Value {
      			// TODO: use page item
      			_ = v
      		}
      	}
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-go/blob/sdk%2Fresourcemanager%2Fcompute%2Farmcompute%2Fv1.0.0/sdk/resourcemanager/compute/armcompute/README.md) on how to add the SDK to your project and authenticate.
      # [JavsScirpt](#tab/JavsScirpt)
      ``` js
      const { ComputeManagementClient } = require("@azure/arm-compute");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to Lists diskRestorePoints under a vmRestorePoint.
       *
       * @summary Lists diskRestorePoints under a vmRestorePoint.
       * x-ms-original-file: specification/compute/resource-manager/Microsoft.Compute/stable/2021-12-01/examples/ListDiskRestorePointsInVmRestorePoint.json
       */
      async function getAnIncrementalDiskRestorePointResource() {
        const subscriptionId = "{subscription-id}";
        const resourceGroupName = "myResourceGroup";
        const restorePointCollectionName = "rpc";
        const vmRestorePointName = "vmrp";
        const credential = new DefaultAzureCredential();
        const client = new ComputeManagementClient(credential, subscriptionId);
        const resArray = new Array();
        for await (let item of client.diskRestorePointOperations.listByRestorePoint(
          resourceGroupName,
          restorePointCollectionName,
          vmRestorePointName
        )) {
          resArray.push(item);
        }
        console.log(resArray);
      }

      getAnIncrementalDiskRestorePointResource().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-compute_18.0.0/sdk/compute/arm-compute/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "value": [
          {
            "id": "/subscriptions/{subscription-id}/resourceGroups/myResourceGroup/providers/Microsoft.Compute/restorePointCollections/rpc/restorePoints/vmrp/diskRestorePoints/TestDisk45ceb03433006d1baee0_b70cd924-3362-4a80-93c2-9415eaa12745",
            "name": "TestDisk45ceb03433006d1baee0_b70cd924-3362-4a80-93c2-9415eaa12745",
            "properties": {
              "timeCreated": "2020-09-16T04:41:35.079872+00:00",
              "sourceResourceId": "/subscriptions/d2260d06-e00d-422f-8b63-93df551a59ae/resourceGroups/rg0680fb0c-89f1-41b4-96c0-35733a181558/providers/Microsoft.Compute/disks/TestDisk45ceb03433006d1baee0",
              "osType": "Windows",
              "hyperVGeneration": "V1",
              "familyId": "996bf3ce-b6ff-4e86-9db6-dc27ea06cea5",
              "sourceUniqueId": "48e058b1-7eea-4968-b532-10a8a1130c13",
              "networkAccessPolicy": "AllowAll",
              "publicNetworkAccess": "Disabled"
            }
          }
        ]
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: Learn more about Compute service - Lists diskRestorePoints under a vmRestorePoint.
errorCodes: []
