### YamlMime:RESTOperation
uid: management.azure.com.managedservices.registrationassignments.createorupdate
name: Create Or Update
service: Managed Services
groupName: Registration Assignments
apiVersion: 2022-01-01-preview
summary: Creates or updates a registration assignment.
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://management.azure.com/{scope}/providers/Microsoft.ManagedServices/registrationAssignments/{registrationAssignmentId}?api-version=2022-01-01-preview
uriParameters:
- name: scope
  in: path
  isRequired: true
  skipUrlEncoding: true
  description: The scope of the resource.
  types:
  - uid: string
- name: registrationAssignmentId
  in: path
  isRequired: true
  description: The GUID of the registration assignment.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: The API version to use for this operation.
  types:
  - uid: string
responses:
- name: 200 OK
  description: Ok - Returns information about the updated registration assignment.
  types:
  - uid: RegistrationAssignment
- name: 201 Created
  description: Created - Returns information about the created registration assignment.
  types:
  - uid: RegistrationAssignment
- name: Other Status Codes
  description: The error response describing why the operation failed.
  types:
  - uid: ErrorResponse
requestBody:
- name: default
  parameters:
  - name: properties
    in: body
    description: The properties of a registration assignment.
    types:
    - uid: RegistrationAssignmentProperties
requestHeader: []
definitions:
- name: RegistrationAssignmentProperties
  description: The properties of the registration assignment.
  kind: object
  properties:
  - name: registrationDefinitionId
    description: The fully qualified path of the registration definition.
    types:
    - uid: string
  - name: provisioningState
    isReadyOnly: true
    description: The current provisioning state of the registration assignment.
    types:
    - uid: ProvisioningState
  - name: registrationDefinition
    isReadyOnly: true
    description: The registration definition associated with the registration assignment.
    types:
    - uid: RegistrationDefinition
- name: systemData
  description: Metadata pertaining to creation and last modification of the resource.
  kind: object
  properties:
  - name: createdBy
    description: The identity that created the resource.
    types:
    - uid: string
  - name: createdByType
    description: The type of identity that created the resource.
    types:
    - uid: createdByType
  - name: createdAt
    description: The timestamp of resource creation (UTC).
    types:
    - uid: string
  - name: lastModifiedBy
    description: The identity that last modified the resource.
    types:
    - uid: string
  - name: lastModifiedByType
    description: The type of identity that last modified the resource.
    types:
    - uid: createdByType
  - name: lastModifiedAt
    description: The timestamp of resource last modification (UTC)
    types:
    - uid: string
- name: RegistrationAssignment
  description: The registration assignment.
  kind: object
  properties:
  - name: properties
    description: The properties of a registration assignment.
    types:
    - uid: RegistrationAssignmentProperties
  - name: id
    isReadyOnly: true
    description: The fully qualified path of the registration assignment.
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: The type of the Azure resource (Microsoft.ManagedServices/registrationAssignments).
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: The name of the registration assignment.
    types:
    - uid: string
  - name: systemData
    isReadyOnly: true
    description: The metadata for the registration assignment resource.
    types:
    - uid: systemData
- name: ErrorResponse
  description: Error response.
  kind: object
  properties:
  - name: error
    description: The error details.
    types:
    - uid: ErrorDefinition
- name: ProvisioningState
  description: The current provisioning state of the registration definition.
  kind: enum
  properties:
  - name: NotSpecified
    types:
    - uid: string
  - name: Accepted
    types:
    - uid: string
  - name: Running
    types:
    - uid: string
  - name: Ready
    types:
    - uid: string
  - name: Creating
    types:
    - uid: string
  - name: Created
    types:
    - uid: string
  - name: Deleting
    types:
    - uid: string
  - name: Deleted
    types:
    - uid: string
  - name: Canceled
    types:
    - uid: string
  - name: Failed
    types:
    - uid: string
  - name: Succeeded
    types:
    - uid: string
  - name: Updating
    types:
    - uid: string
- name: RegistrationDefinition
  description: The registration definition.
  kind: object
  properties:
  - name: properties
    description: The properties of a registration definition.
    types:
    - uid: RegistrationDefinitionProperties
  - name: plan
    description: The details for the Managed Services offer’s plan in Azure Marketplace.
    types:
    - uid: Plan
  - name: id
    isReadyOnly: true
    description: The fully qualified path of the registration definition.
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: The type of the Azure resource (Microsoft.ManagedServices/registrationDefinitions).
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: The name of the registration definition.
    types:
    - uid: string
  - name: systemData
    isReadyOnly: true
    description: The metadata for the registration assignment resource.
    types:
    - uid: systemData
- name: createdByType
  description: The type of identity that created the resource.
  kind: enum
  properties:
  - name: User
    types:
    - uid: string
  - name: Application
    types:
    - uid: string
  - name: ManagedIdentity
    types:
    - uid: string
  - name: Key
    types:
    - uid: string
- name: ErrorDefinition
  description: The error response indicating why the incoming request wasn’t able to be processed
  kind: object
  properties:
  - name: code
    description: The error code.
    types:
    - uid: string
  - name: message
    description: The error message indicating why the operation failed.
    types:
    - uid: string
  - name: details
    description: The internal error details.
    types:
    - uid: ErrorDefinition
      isArray: true
- name: RegistrationDefinitionProperties
  description: The properties of a registration definition.
  kind: object
  properties:
  - name: description
    description: The description of the registration definition.
    types:
    - uid: string
  - name: authorizations
    description: The collection of authorization objects describing the access Azure Active Directory principals in the managedBy tenant will receive on the delegated resource in the managed tenant.
    types:
    - uid: Authorization
      isArray: true
  - name: eligibleAuthorizations
    description: The collection of eligible authorization objects describing the just-in-time access Azure Active Directory principals in the managedBy tenant will receive on the delegated resource in the managed tenant.
    types:
    - uid: EligibleAuthorization
      isArray: true
  - name: registrationDefinitionName
    description: The name of the registration definition.
    types:
    - uid: string
  - name: managedByTenantId
    description: The identifier of the managedBy tenant.
    types:
    - uid: string
  - name: provisioningState
    isReadyOnly: true
    description: The current provisioning state of the registration definition.
    types:
    - uid: ProvisioningState
  - name: manageeTenantId
    isReadyOnly: true
    description: The identifier of the managed tenant.
    types:
    - uid: string
  - name: manageeTenantName
    isReadyOnly: true
    description: The name of the managed tenant.
    types:
    - uid: string
  - name: managedByTenantName
    isReadyOnly: true
    description: The name of the managedBy tenant.
    types:
    - uid: string
- name: Plan
  description: The details for the Managed Services offer’s plan in Azure Marketplace.
  kind: object
  properties:
  - name: name
    description: Azure Marketplace plan name.
    types:
    - uid: string
  - name: publisher
    description: Azure Marketplace publisher ID.
    types:
    - uid: string
  - name: product
    description: Azure Marketplace product code.
    types:
    - uid: string
  - name: version
    description: Azure Marketplace plan's version.
    types:
    - uid: string
- name: Authorization
  description: The Azure Active Directory principal identifier and Azure built-in role that describes the access the principal will receive on the delegated resource in the managed tenant.
  kind: object
  properties:
  - name: principalId
    description: The identifier of the Azure Active Directory principal.
    types:
    - uid: string
  - name: principalIdDisplayName
    description: The display name of the Azure Active Directory principal.
    types:
    - uid: string
  - name: roleDefinitionId
    description: The identifier of the Azure built-in role that defines the permissions that the Azure Active Directory principal will have on the projected scope.
    types:
    - uid: string
  - name: delegatedRoleDefinitionIds
    description: The delegatedRoleDefinitionIds field is required when the roleDefinitionId refers to the User Access Administrator Role. It is the list of role definition ids which define all the permissions that the user in the authorization can assign to other principals.
    types:
    - uid: string
      isArray: true
- name: EligibleAuthorization
  description: The Azure Active Directory principal identifier, Azure built-in role, and just-in-time access policy that describes the just-in-time access the principal will receive on the delegated resource in the managed tenant.
  kind: object
  properties:
  - name: principalId
    description: The identifier of the Azure Active Directory principal.
    types:
    - uid: string
  - name: principalIdDisplayName
    description: The display name of the Azure Active Directory principal.
    types:
    - uid: string
  - name: roleDefinitionId
    description: The identifier of the Azure built-in role that defines the permissions that the Azure Active Directory principal will have on the projected scope.
    types:
    - uid: string
  - name: justInTimeAccessPolicy
    description: The just-in-time access policy setting.
    types:
    - uid: JustInTimeAccessPolicy
- name: JustInTimeAccessPolicy
  description: Just-in-time access policy setting.
  kind: object
  properties:
  - name: multiFactorAuthProvider
    description: The multi-factor authorization provider to be used for just-in-time access requests.
    types:
    - uid: MultiFactorAuthProvider
    defaultValue: None
  - name: maximumActivationDuration
    description: The maximum access duration in ISO 8601 format for just-in-time access requests.
    types:
    - uid: string
    defaultValue: PT8H
  - name: managedByTenantApprovers
    description: The list of managedByTenant approvers for the eligible authorization.
    types:
    - uid: EligibleApprover
      isArray: true
- name: MultiFactorAuthProvider
  description: The multi-factor authorization provider to be used for just-in-time access requests.
  kind: enum
  properties:
  - name: Azure
    types:
    - uid: string
  - name: None
    types:
    - uid: string
- name: EligibleApprover
  description: Defines the Azure Active Directory principal that can approve any just-in-time access requests by the principal defined in the EligibleAuthorization.
  kind: object
  properties:
  - name: principalId
    description: The identifier of the Azure Active Directory principal.
    types:
    - uid: string
  - name: principalIdDisplayName
    description: The display name of the Azure Active Directory principal.
    types:
    - uid: string
examples:
- name: Put Registration Assignment
  request:
    uri: PUT https://management.azure.com/subscription/0afefe50-734e-4610-8a82-a144ahf49dea/providers/Microsoft.ManagedServices/registrationAssignments/26c128c2-fefa-4340-9bb1-6e081c90ada2?api-version=2022-01-01-preview
    body: >-
      {
        "properties": {
          "registrationDefinitionId": "/subscriptions/0afefe50-734e-4610-8a82-a144ahf49dea/providers/Microsoft.ManagedServices/registrationDefinitions/26c128c2-fefa-4340-9bb1-6e081c90ada2"
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscription/0afefe50-734e-4610-8a82-a144ahf49dea/providers/Microsoft.ManagedServices/registrationAssignments/26c128c2-fefa-4340-9bb1-6e081c90ada2?api-version=2022-01-01-preview

      {
        "properties": {
          "registrationDefinitionId": "/subscriptions/0afefe50-734e-4610-8a82-a144ahf49dea/providers/Microsoft.ManagedServices/registrationDefinitions/26c128c2-fefa-4340-9bb1-6e081c90ada2"
        }
      }

      ```

      # [Go](#tab/Go)
      ``` go
      package armmanagedservices_test

      import (
      	"context"
      	"log"

      	"github.com/Azure/azure-sdk-for-go/sdk/azcore/to"
      	"github.com/Azure/azure-sdk-for-go/sdk/azidentity"
      	"github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/managedservices/armmanagedservices"
      )

      // Generated from example definition: https://github.com/Azure/azure-rest-api-specs/tree/main/specification/managedservices/resource-manager/Microsoft.ManagedServices/preview/2022-01-01-preview/examples/PutRegistrationAssignment.json
      func ExampleRegistrationAssignmentsClient_BeginCreateOrUpdate() {
      	cred, err := azidentity.NewDefaultAzureCredential(nil)
      	if err != nil {
      		log.Fatalf("failed to obtain a credential: %v", err)
      	}
      	ctx := context.Background()
      	client, err := armmanagedservices.NewRegistrationAssignmentsClient(cred, nil)
      	if err != nil {
      		log.Fatalf("failed to create client: %v", err)
      	}
      	poller, err := client.BeginCreateOrUpdate(ctx,
      		"subscription/0afefe50-734e-4610-8a82-a144ahf49dea",
      		"26c128c2-fefa-4340-9bb1-6e081c90ada2",
      		armmanagedservices.RegistrationAssignment{
      			Properties: &armmanagedservices.RegistrationAssignmentProperties{
      				RegistrationDefinitionID: to.Ptr("/subscriptions/0afefe50-734e-4610-8a82-a144ahf49dea/providers/Microsoft.ManagedServices/registrationDefinitions/26c128c2-fefa-4340-9bb1-6e081c90ada2"),
      			},
      		},
      		nil)
      	if err != nil {
      		log.Fatalf("failed to finish the request: %v", err)
      	}
      	res, err := poller.PollUntilDone(ctx, nil)
      	if err != nil {
      		log.Fatalf("failed to pull the result: %v", err)
      	}
      	// TODO: use response item
      	_ = res
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-go/blob/sdk%2Fresourcemanager%2Fmanagedservices%2Farmmanagedservices%2Fv0.5.0/sdk/resourcemanager/managedservices/armmanagedservices/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "properties": {
          "registrationDefinitionId": "/subscriptions/0afefe50-734e-4610-8c82-a144aff49dea/providers/Microsoft.ManagedServices/registrationDefinitions/26c128c2-fefa-4340-9bb1-8e081c90ada2",
          "provisioningState": "Succeeded"
        },
        "id": "/subscriptions/0afefe50-734e-4610-8c82-a144aff49dea/providers/Microsoft.ManagedServices/registrationAssignments/484a7d5f-9729-4b87-bc9b-26610985a013",
        "type": "Microsoft.ManagedServices/registrationAssignments",
        "name": "484a7d5f-9729-4b87-bc9b-26610985a013"
      }
  - statusCode: "201"
    body: >-
      {
        "properties": {
          "registrationDefinitionId": "/subscriptions/0afefe50-734e-4610-8c82-a144aff49dea/providers/Microsoft.ManagedServices/registrationDefinitions/26c128c2-fefa-4340-9bb1-8e081c90ada2",
          "provisioningState": "Succeeded"
        },
        "id": "/subscriptions/0afefe50-734e-4610-8c82-a144aff49dea/providers/Microsoft.ManagedServices/registrationAssignments/484a7d5f-9729-4b87-bc9b-26610985a013",
        "type": "Microsoft.ManagedServices/registrationAssignments",
        "name": "484a7d5f-9729-4b87-bc9b-26610985a013"
      }
security:
- name: azure_auth
  type: oauth2
  description: The Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: Learn more about Managed Services service - Creates or updates a registration assignment.
errorCodes: []
