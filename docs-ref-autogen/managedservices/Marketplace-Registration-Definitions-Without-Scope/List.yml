### YamlMime:RESTOperation
uid: management.azure.com.managedservices.marketplaceregistrationdefinitionswithoutscope.list
name: List
service: Managed Services
groupName: Marketplace Registration Definitions Without Scope
apiVersion: 2022-01-01-preview
summary: Gets a list of the marketplace registration definitions for the marketplace identifier.
consumes:
- application/json
produces:
- application/json
paths:
- content: GET https://management.azure.com/providers/Microsoft.ManagedServices/marketplaceRegistrationDefinitions?api-version=2022-01-01-preview
- content: GET https://management.azure.com/providers/Microsoft.ManagedServices/marketplaceRegistrationDefinitions?$filter={$filter}&api-version=2022-01-01-preview
  isOptional: true
uriParameters:
- name: $filter
  in: query
  description: The filter query parameter to filter managed services resources by.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: The API version to use for this operation.
  types:
  - uid: string
responses:
- name: 200 OK
  description: OK - Returns a list of the marketplace registration definitions.
  types:
  - uid: MarketplaceRegistrationDefinitionList
- name: Other Status Codes
  description: The error response describing why the operation failed.
  types:
  - uid: ErrorResponse
requestHeader: []
definitions:
- name: MarketplaceRegistrationDefinitionList
  description: The list of marketplace registration definitions.
  kind: object
  properties:
  - name: value
    isReadyOnly: true
    description: The list of marketplace registration definitions.
    types:
    - uid: MarketplaceRegistrationDefinition
      isArray: true
  - name: nextLink
    isReadyOnly: true
    description: The link to the next page of marketplace registration definitions.
    types:
    - uid: string
- name: ErrorResponse
  description: Error response.
  kind: object
  properties:
  - name: error
    description: The error details.
    types:
    - uid: ErrorDefinition
- name: MarketplaceRegistrationDefinition
  kind: object
  properties:
  - name: properties
    description: The properties of the marketplace registration definition.
    types:
    - uid: MarketplaceRegistrationDefinitionProperties
  - name: plan
    description: The details for the Managed Services offer’s plan in Azure Marketplace.
    types:
    - uid: Plan
  - name: id
    isReadyOnly: true
    description: The fully qualified path of the marketplace registration definition.
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: The type of the Azure resource (Microsoft.ManagedServices/marketplaceRegistrationDefinitions).
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: The name of the marketplace registration definition.
    types:
    - uid: string
- name: ErrorDefinition
  description: The error response indicating why the incoming request wasn’t able to be processed
  kind: object
  properties:
  - name: code
    description: The error code.
    types:
    - uid: string
  - name: message
    description: The error message indicating why the operation failed.
    types:
    - uid: string
  - name: details
    description: The internal error details.
    types:
    - uid: ErrorDefinition
      isArray: true
- name: MarketplaceRegistrationDefinitionProperties
  description: The properties of the marketplace registration definition.
  kind: object
  properties:
  - name: managedByTenantId
    description: The identifier of the managedBy tenant.
    types:
    - uid: string
  - name: authorizations
    description: The collection of authorization objects describing the access Azure Active Directory principals in the managedBy tenant will receive on the delegated resource in the managed tenant.
    types:
    - uid: Authorization
      isArray: true
  - name: eligibleAuthorizations
    description: The collection of eligible authorization objects describing the just-in-time access Azure Active Directory principals in the managedBy tenant will receive on the delegated resource in the managed tenant.
    types:
    - uid: EligibleAuthorization
      isArray: true
  - name: offerDisplayName
    description: The marketplace offer display name.
    types:
    - uid: string
  - name: publisherDisplayName
    description: The marketplace publisher display name.
    types:
    - uid: string
  - name: planDisplayName
    description: The marketplace plan display name.
    types:
    - uid: string
- name: Plan
  description: The details for the Managed Services offer’s plan in Azure Marketplace.
  kind: object
  properties:
  - name: name
    description: Azure Marketplace plan name.
    types:
    - uid: string
  - name: publisher
    description: Azure Marketplace publisher ID.
    types:
    - uid: string
  - name: product
    description: Azure Marketplace product code.
    types:
    - uid: string
  - name: version
    description: Azure Marketplace plan's version.
    types:
    - uid: string
- name: Authorization
  description: The Azure Active Directory principal identifier and Azure built-in role that describes the access the principal will receive on the delegated resource in the managed tenant.
  kind: object
  properties:
  - name: principalId
    description: The identifier of the Azure Active Directory principal.
    types:
    - uid: string
  - name: principalIdDisplayName
    description: The display name of the Azure Active Directory principal.
    types:
    - uid: string
  - name: roleDefinitionId
    description: The identifier of the Azure built-in role that defines the permissions that the Azure Active Directory principal will have on the projected scope.
    types:
    - uid: string
  - name: delegatedRoleDefinitionIds
    description: The delegatedRoleDefinitionIds field is required when the roleDefinitionId refers to the User Access Administrator Role. It is the list of role definition ids which define all the permissions that the user in the authorization can assign to other principals.
    types:
    - uid: string
      isArray: true
- name: EligibleAuthorization
  description: The Azure Active Directory principal identifier, Azure built-in role, and just-in-time access policy that describes the just-in-time access the principal will receive on the delegated resource in the managed tenant.
  kind: object
  properties:
  - name: principalId
    description: The identifier of the Azure Active Directory principal.
    types:
    - uid: string
  - name: principalIdDisplayName
    description: The display name of the Azure Active Directory principal.
    types:
    - uid: string
  - name: roleDefinitionId
    description: The identifier of the Azure built-in role that defines the permissions that the Azure Active Directory principal will have on the projected scope.
    types:
    - uid: string
  - name: justInTimeAccessPolicy
    description: The just-in-time access policy setting.
    types:
    - uid: JustInTimeAccessPolicy
- name: JustInTimeAccessPolicy
  description: Just-in-time access policy setting.
  kind: object
  properties:
  - name: multiFactorAuthProvider
    description: The multi-factor authorization provider to be used for just-in-time access requests.
    types:
    - uid: MultiFactorAuthProvider
    defaultValue: None
  - name: maximumActivationDuration
    description: The maximum access duration in ISO 8601 format for just-in-time access requests.
    types:
    - uid: string
    defaultValue: PT8H
  - name: managedByTenantApprovers
    description: The list of managedByTenant approvers for the eligible authorization.
    types:
    - uid: EligibleApprover
      isArray: true
- name: MultiFactorAuthProvider
  description: The multi-factor authorization provider to be used for just-in-time access requests.
  kind: enum
  properties:
  - name: Azure
    types:
    - uid: string
  - name: None
    types:
    - uid: string
- name: EligibleApprover
  description: Defines the Azure Active Directory principal that can approve any just-in-time access requests by the principal defined in the EligibleAuthorization.
  kind: object
  properties:
  - name: principalId
    description: The identifier of the Azure Active Directory principal.
    types:
    - uid: string
  - name: principalIdDisplayName
    description: The display name of the Azure Active Directory principal.
    types:
    - uid: string
examples:
- name: Get Marketplace Registration Definitions At Tenant Scope
  request:
    uri: GET https://management.azure.com/providers/Microsoft.ManagedServices/marketplaceRegistrationDefinitions?$filter=planIdentifier eq 'publisher.offerIdentifier.planName.version'&api-version=2022-01-01-preview
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      GET https://management.azure.com/providers/Microsoft.ManagedServices/marketplaceRegistrationDefinitions?$filter=planIdentifier eq 'publisher.offerIdentifier.planName.version'&api-version=2022-01-01-preview
      ```

      # [Go](#tab/Go)
      ``` go
      package armmanagedservices_test

      import (
      	"context"
      	"log"

      	"github.com/Azure/azure-sdk-for-go/sdk/azcore/to"
      	"github.com/Azure/azure-sdk-for-go/sdk/azidentity"
      	"github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/managedservices/armmanagedservices"
      )

      // Generated from example definition: https://github.com/Azure/azure-rest-api-specs/tree/main/specification/managedservices/resource-manager/Microsoft.ManagedServices/preview/2022-01-01-preview/examples/GetMarketplaceRegistrationDefinitionsAtTenantScope.json
      func ExampleMarketplaceRegistrationDefinitionsWithoutScopeClient_NewListPager() {
      	cred, err := azidentity.NewDefaultAzureCredential(nil)
      	if err != nil {
      		log.Fatalf("failed to obtain a credential: %v", err)
      	}
      	ctx := context.Background()
      	client, err := armmanagedservices.NewMarketplaceRegistrationDefinitionsWithoutScopeClient(cred, nil)
      	if err != nil {
      		log.Fatalf("failed to create client: %v", err)
      	}
      	pager := client.NewListPager(&armmanagedservices.MarketplaceRegistrationDefinitionsWithoutScopeClientListOptions{Filter: to.Ptr("planIdentifier eq 'publisher.offerIdentifier.planName.version'")})
      	for pager.More() {
      		nextResult, err := pager.NextPage(ctx)
      		if err != nil {
      			log.Fatalf("failed to advance page: %v", err)
      		}
      		for _, v := range nextResult.Value {
      			// TODO: use page item
      			_ = v
      		}
      	}
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-go/blob/sdk%2Fresourcemanager%2Fmanagedservices%2Farmmanagedservices%2Fv0.5.0/sdk/resourcemanager/managedservices/armmanagedservices/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "value": [
          {
            "properties": {
              "managedByTenantId": "83ace5cd-bcc3-441a-hd86-e6a75360cecc",
              "authorizations": [
                {
                  "principalId": "f98g86a2-4cc4-4e6d-ad47-b3e80a1bcdfc",
                  "principalIdDisplayName": "Support User",
                  "roleDefinitionId": "acdd72a7-3385-48ef-bd42-f606fba81ae7"
                },
                {
                  "principalId": "f98d86a2-4cc4-4e9d-ad47-b3e80a1bcdfc",
                  "principalIdDisplayName": "User Access Administrator",
                  "roleDefinitionId": "18d7d88d-d35e-4fb5-a5c3-7773c20a72d9",
                  "delegatedRoleDefinitionIds": [
                    "b24988ac-6180-42a0-ab88-20f7382dd24c"
                  ]
                }
              ],
              "eligibleAuthorizations": [],
              "offerDisplayName": "Marketplace Test Offer",
              "publisherDisplayName": "Marketplace Test Publisher",
              "planDisplayName": "Test Plan"
            },
            "plan": {
              "name": "test-plan",
              "product": "test",
              "publisher": "marketplace-test",
              "version": "1.0.0"
            },
            "id": "/providers/Microsoft.ManagedServices/marketplaceRegistrationDefinitions/marketplace-test.test.test-plan.1.0.0",
            "type": "Microsoft.ManagedServices/marketplaceRegistrationDefinitions",
            "name": "marketplace-test.test.test-plan.1.0.0"
          }
        ]
      }
security:
- name: azure_auth
  type: oauth2
  description: The Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: Learn more about Managed Services service - Gets a list of the marketplace registration definitions for the marketplace identifier.
errorCodes: []
