### YamlMime:RESTOperation
uid: management.azure.com.maintenance.maintenanceconfigurations.update
name: Update
service: Maintenance
groupName: Maintenance Configurations
apiVersion: 2021-05-01
summary: Patch configuration record
consumes:
- application/json
produces:
- application/json
paths:
- content: PATCH https://management.azure.com/subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/Microsoft.Maintenance/maintenanceConfigurations/{resourceName}?api-version=2021-05-01
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: Subscription credentials that uniquely identify a Microsoft Azure subscription. The subscription ID forms part of the URI for every service call.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: Resource Group Name
  types:
  - uid: string
- name: resourceName
  in: path
  isRequired: true
  description: Maintenance Configuration Name
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: Version of the API to be used with the client request.
  types:
  - uid: string
responses:
- name: 200 OK
  description: OK
  types:
  - uid: MaintenanceConfiguration
- name: Other Status Codes
  description: BadRequest
  types:
  - uid: MaintenanceError
requestBody:
- name: default
  parameters:
  - name: location
    in: body
    description: Gets or sets location of the resource
    types:
    - uid: string
  - name: tags
    in: body
    description: Gets or sets tags of the resource
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: properties.namespace
    in: body
    description: Gets or sets namespace of the resource
    types:
    - uid: string
  - name: properties.extensionProperties
    in: body
    description: Gets or sets extensionProperties of the maintenanceConfiguration
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: properties.maintenanceScope
    in: body
    description: Gets or sets maintenanceScope of the configuration
    types:
    - uid: MaintenanceScope
  - name: properties.visibility
    in: body
    description: Gets or sets the visibility of the configuration. The default value is 'Custom'
    types:
    - uid: Visibility
  - name: properties.maintenanceWindow.startDateTime
    in: body
    description: Effective start date of the maintenance window in YYYY-MM-DD hh:mm format. The start date can be set to either the current date or future date. The window will be created in the time zone provided and adjusted to daylight savings according to that time zone.
    types:
    - uid: string
  - name: properties.maintenanceWindow.expirationDateTime
    in: body
    description: Effective expiration date of the maintenance window in YYYY-MM-DD hh:mm format. The window will be created in the time zone provided and adjusted to daylight savings according to that time zone. Expiration date must be set to a future date. If not provided, it will be set to the maximum datetime 9999-12-31 23:59:59.
    types:
    - uid: string
  - name: properties.maintenanceWindow.duration
    in: body
    description: 'Duration of the maintenance window in HH:mm format. If not provided, default value will be used based on maintenance scope provided. Example: 05:00.'
    types:
    - uid: string
  - name: properties.maintenanceWindow.timeZone
    in: body
    description: 'Name of the timezone. List of timezones can be obtained by executing [System.TimeZoneInfo]::GetSystemTimeZones() in PowerShell. Example: Pacific Standard Time, UTC, W. Europe Standard Time, Korea Standard Time, Cen. Australia Standard Time.'
    types:
    - uid: string
  - name: properties.maintenanceWindow.recurEvery
    in: body
    description: "Rate at which a Maintenance window is expected to recur. The rate can be expressed as daily, weekly, or monthly schedules. Daily schedule are formatted as recurEvery: [Frequency as integer]['Day(s)']. If no frequency is provided, the default frequency is 1. Daily schedule examples are recurEvery: Day, recurEvery: 3Days.  Weekly schedule are formatted as recurEvery: [Frequency as integer]['Week(s)'] [Optional comma separated list of weekdays Monday-Sunday]. Weekly schedule examples are recurEvery: 3Weeks, recurEvery: Week Saturday,Sunday. Monthly schedules are formatted as [Frequency as integer]['Month(s)'] [Comma separated list of month days] or [Frequency as integer]['Month(s)'] [Week of Month (First, Second, Third, Fourth, Last)] [Weekday Monday-Sunday]. Monthly schedule examples are recurEvery: Month, recurEvery: 2Months, recurEvery: Month day23,day24, recurEvery: Month Last Sunday, recurEvery: Month Fourth Monday."
    types:
    - uid: string
requestHeader: []
definitions:
- name: systemData
  description: Metadata pertaining to creation and last modification of the resource.
  kind: object
  properties:
  - name: createdBy
    description: The identity that created the resource.
    types:
    - uid: string
  - name: createdByType
    description: The type of identity that created the resource.
    types:
    - uid: createdByType
  - name: createdAt
    description: The timestamp of resource creation (UTC).
    types:
    - uid: string
  - name: lastModifiedBy
    description: The identity that last modified the resource.
    types:
    - uid: string
  - name: lastModifiedByType
    description: The type of identity that last modified the resource.
    types:
    - uid: createdByType
  - name: lastModifiedAt
    description: The timestamp of resource last modification (UTC)
    types:
    - uid: string
- name: MaintenanceConfiguration
  description: Maintenance configuration record type
  kind: object
  properties:
  - name: location
    description: Gets or sets location of the resource
    types:
    - uid: string
  - name: tags
    description: Gets or sets tags of the resource
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: properties.namespace
    description: Gets or sets namespace of the resource
    types:
    - uid: string
  - name: properties.extensionProperties
    description: Gets or sets extensionProperties of the maintenanceConfiguration
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: properties.maintenanceScope
    description: Gets or sets maintenanceScope of the configuration
    types:
    - uid: MaintenanceScope
  - name: properties.visibility
    description: Gets or sets the visibility of the configuration. The default value is 'Custom'
    types:
    - uid: Visibility
  - name: properties.maintenanceWindow.startDateTime
    description: Effective start date of the maintenance window in YYYY-MM-DD hh:mm format. The start date can be set to either the current date or future date. The window will be created in the time zone provided and adjusted to daylight savings according to that time zone.
    types:
    - uid: string
  - name: properties.maintenanceWindow.expirationDateTime
    description: Effective expiration date of the maintenance window in YYYY-MM-DD hh:mm format. The window will be created in the time zone provided and adjusted to daylight savings according to that time zone. Expiration date must be set to a future date. If not provided, it will be set to the maximum datetime 9999-12-31 23:59:59.
    types:
    - uid: string
  - name: properties.maintenanceWindow.duration
    description: 'Duration of the maintenance window in HH:mm format. If not provided, default value will be used based on maintenance scope provided. Example: 05:00.'
    types:
    - uid: string
  - name: properties.maintenanceWindow.timeZone
    description: 'Name of the timezone. List of timezones can be obtained by executing [System.TimeZoneInfo]::GetSystemTimeZones() in PowerShell. Example: Pacific Standard Time, UTC, W. Europe Standard Time, Korea Standard Time, Cen. Australia Standard Time.'
    types:
    - uid: string
  - name: properties.maintenanceWindow.recurEvery
    description: "Rate at which a Maintenance window is expected to recur. The rate can be expressed as daily, weekly, or monthly schedules. Daily schedule are formatted as recurEvery: [Frequency as integer]['Day(s)']. If no frequency is provided, the default frequency is 1. Daily schedule examples are recurEvery: Day, recurEvery: 3Days.  Weekly schedule are formatted as recurEvery: [Frequency as integer]['Week(s)'] [Optional comma separated list of weekdays Monday-Sunday]. Weekly schedule examples are recurEvery: 3Weeks, recurEvery: Week Saturday,Sunday. Monthly schedules are formatted as [Frequency as integer]['Month(s)'] [Comma separated list of month days] or [Frequency as integer]['Month(s)'] [Week of Month (First, Second, Third, Fourth, Last)] [Weekday Monday-Sunday]. Monthly schedule examples are recurEvery: Month, recurEvery: 2Months, recurEvery: Month day23,day24, recurEvery: Month Last Sunday, recurEvery: Month Fourth Monday."
    types:
    - uid: string
  - name: id
    isReadyOnly: true
    description: Fully qualified identifier of the resource
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: Name of the resource
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: Type of the resource
    types:
    - uid: string
  - name: systemData
    isReadyOnly: true
    description: Azure Resource Manager metadata containing createdBy and modifiedBy information.
    types:
    - uid: systemData
- name: MaintenanceError
  description: An error response received from the Azure Maintenance service.
  kind: object
  properties:
  - name: error
    description: Details of the error
    types:
    - uid: ErrorDetails
- name: createdByType
  description: The type of identity that created the resource.
  kind: enum
  properties:
  - name: User
    types:
    - uid: string
  - name: Application
    types:
    - uid: string
  - name: ManagedIdentity
    types:
    - uid: string
  - name: Key
    types:
    - uid: string
- name: MaintenanceScope
  description: Gets or sets maintenanceScope of the configuration
  kind: enum
  properties:
  - name: Host
    description: This maintenance scope controls installation of azure platform updates i.e. services on physical nodes hosting customer VMs.
    types:
    - uid: string
  - name: OSImage
    description: This maintenance scope controls os image installation on VM/VMSS
    types:
    - uid: string
  - name: Extension
    description: This maintenance scope controls extension installation on VM/VMSS
    types:
    - uid: string
  - name: InGuestPatch
    description: This maintenance scope controls installation of windows and linux packages on VM/VMSS
    types:
    - uid: string
  - name: SQLDB
    description: This maintenance scope controls installation of SQL server platform updates.
    types:
    - uid: string
  - name: SQLManagedInstance
    description: This maintenance scope controls installation of SQL managed instance platform update.
    types:
    - uid: string
- name: Visibility
  description: Gets or sets the visibility of the configuration. The default value is 'Custom'
  kind: enum
  properties:
  - name: Custom
    description: Only visible to users with permissions.
    types:
    - uid: string
  - name: Public
    description: Visible to all users.
    types:
    - uid: string
- name: ErrorDetails
  description: An error response details received from the Azure Maintenance service.
  kind: object
  properties:
  - name: code
    description: Service-defined error code. This code serves as a sub-status for the HTTP error code specified in the response.
    types:
    - uid: string
  - name: message
    description: Human-readable representation of the error.
    types:
    - uid: string
examples:
- name: MaintenanceConfigurations_UpdateForResource
  request:
    uri: PATCH https://management.azure.com/subscriptions/5b4b650e-28b9-4790-b3ab-ddbd88d727c4/resourcegroups/examplerg/providers/Microsoft.Maintenance/maintenanceConfigurations/configuration1?api-version=2021-05-01
    body: >-
      {
        "location": "westus2",
        "properties": {
          "namespace": "Microsoft.Maintenance",
          "visibility": "Custom",
          "maintenanceScope": "Host",
          "maintenanceWindow": {
            "startDateTime": "2020-04-30 08:00",
            "expirationDateTime": "9999-12-31 00:00",
            "duration": "05:00",
            "timeZone": "Pacific Standard Time",
            "recurEvery": "Month Third Sunday"
          }
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PATCH https://management.azure.com/subscriptions/5b4b650e-28b9-4790-b3ab-ddbd88d727c4/resourcegroups/examplerg/providers/Microsoft.Maintenance/maintenanceConfigurations/configuration1?api-version=2021-05-01

      {
        "location": "westus2",
        "properties": {
          "namespace": "Microsoft.Maintenance",
          "visibility": "Custom",
          "maintenanceScope": "Host",
          "maintenanceWindow": {
            "startDateTime": "2020-04-30 08:00",
            "expirationDateTime": "9999-12-31 00:00",
            "duration": "05:00",
            "timeZone": "Pacific Standard Time",
            "recurEvery": "Month Third Sunday"
          }
        }
      }

      ```

      # [Go](#tab/Go)
      ``` go
      package armmaintenance_test

      import (
      	"context"
      	"log"

      	"github.com/Azure/azure-sdk-for-go/sdk/azcore/to"
      	"github.com/Azure/azure-sdk-for-go/sdk/azidentity"
      	"github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/maintenance/armmaintenance"
      )

      // Generated from example definition: https://github.com/Azure/azure-rest-api-specs/tree/main/specification/maintenance/resource-manager/Microsoft.Maintenance/stable/2021-05-01/examples/MaintenanceConfigurations_UpdateForResource.json
      func ExampleConfigurationsClient_Update() {
      	cred, err := azidentity.NewDefaultAzureCredential(nil)
      	if err != nil {
      		log.Fatalf("failed to obtain a credential: %v", err)
      	}
      	ctx := context.Background()
      	client, err := armmaintenance.NewConfigurationsClient("5b4b650e-28b9-4790-b3ab-ddbd88d727c4", cred, nil)
      	if err != nil {
      		log.Fatalf("failed to create client: %v", err)
      	}
      	res, err := client.Update(ctx,
      		"examplerg",
      		"configuration1",
      		armmaintenance.Configuration{
      			Location: to.Ptr("westus2"),
      			Properties: &armmaintenance.ConfigurationProperties{
      				MaintenanceScope: to.Ptr(armmaintenance.MaintenanceScopeHost),
      				MaintenanceWindow: &armmaintenance.Window{
      					Duration:           to.Ptr("05:00"),
      					ExpirationDateTime: to.Ptr("9999-12-31 00:00"),
      					RecurEvery:         to.Ptr("Month Third Sunday"),
      					StartDateTime:      to.Ptr("2020-04-30 08:00"),
      					TimeZone:           to.Ptr("Pacific Standard Time"),
      				},
      				Namespace:  to.Ptr("Microsoft.Maintenance"),
      				Visibility: to.Ptr(armmaintenance.VisibilityCustom),
      			},
      		},
      		nil)
      	if err != nil {
      		log.Fatalf("failed to finish the request: %v", err)
      	}
      	// TODO: use response item
      	_ = res
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-go/blob/sdk%2Fresourcemanager%2Fmaintenance%2Farmmaintenance%2Fv1.0.0/sdk/resourcemanager/maintenance/armmaintenance/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/5b4b650e-28b9-4790-b3ab-ddbd88d727c4/resourcegroups/examplerg/providers/Microsoft.Maintenance/maintenanceConfigurations/configuration1",
        "name": "configuration1",
        "location": "westus2",
        "properties": {
          "namespace": "Microsoft.Maintenance",
          "maintenanceScope": "Host",
          "visibility": "Custom",
          "maintenanceWindow": {
            "startDateTime": "2020-04-30 08:00",
            "expirationDateTime": "9999-12-31 00:00",
            "duration": "05:00",
            "timeZone": "Pacific Standard Time",
            "recurEvery": "Month Third Sunday"
          }
        }
      }
security: []
metadata:
  description: >
    Learn more about Maintenance service - Patch configuration record
errorCodes: []
