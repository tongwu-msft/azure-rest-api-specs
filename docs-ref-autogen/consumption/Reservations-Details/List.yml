### YamlMime:RESTOperation
uid: management.azure.com.consumption.reservationsdetails.list
name: List
service: Consumption
groupName: Reservations Details
apiVersion: 2021-10-01
summary: 'Lists the reservations details for the defined scope and provided date range. Note: ARM has a payload size limit of 12MB, so currently callers get 502 when the response size exceeds the ARM limit. In such cases, API call should be made with smaller date ranges.'
consumes:
- application/json
produces:
- application/json
paths:
- content: GET https://management.azure.com/{resourceScope}/providers/Microsoft.Consumption/reservationDetails?api-version=2021-10-01
- content: GET https://management.azure.com/{resourceScope}/providers/Microsoft.Consumption/reservationDetails?startDate={startDate}&endDate={endDate}&$filter={$filter}&reservationId={reservationId}&reservationOrderId={reservationOrderId}&api-version=2021-10-01
  isOptional: true
uriParameters:
- name: resourceScope
  in: path
  isRequired: true
  skipUrlEncoding: true
  description: "The scope associated with reservations details operations. This includes '/providers/Microsoft.Billing/billingAccounts/{billingAccountId}' for BillingAccount scope (legacy), and '/providers/Microsoft.Billing/billingAccounts/{billingAccountId}/billingProfiles/{billingProfileId}' for BillingProfile scope (modern). "
  types:
  - uid: string
- name: startDate
  in: query
  description: Start date. Only applicable when querying with billing profile
  types:
  - uid: string
- name: endDate
  in: query
  description: End date. Only applicable when querying with billing profile
  types:
  - uid: string
- name: $filter
  in: query
  description: Filter reservation details by date range. The properties/UsageDate for start date and end date. The filter supports 'le' and  'ge'. Not applicable when querying with billing profile
  types:
  - uid: string
- name: reservationId
  in: query
  description: Reservation Id GUID. Only valid if reservationOrderId is also provided. Filter to a specific reservation
  types:
  - uid: string
- name: reservationOrderId
  in: query
  description: Reservation Order Id GUID. Required if reservationId is provided. Filter to a specific reservation order
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: Version of the API to be used with the client request. The current version is 2021-10-01.
  types:
  - uid: string
responses:
- name: 200 OK
  description: OK. The request has succeeded.
  types:
  - uid: ReservationDetailsListResult
- name: Other Status Codes
  description: Error response describing why the operation failed.
  types:
  - uid: ErrorResponse
requestHeader: []
definitions:
- name: ReservationDetailsListResult
  description: Result of listing reservation details.
  kind: object
  properties:
  - name: value
    isReadyOnly: true
    description: The list of reservation details.
    types:
    - uid: ReservationDetail
      isArray: true
  - name: nextLink
    isReadyOnly: true
    description: The link (url) to the next page of results.
    types:
    - uid: string
- name: ErrorResponse
  description: "Error response indicates that the service is not able to process the incoming request. The reason is provided in the error message. \n\nSome Error responses: \n\n * 429 TooManyRequests - Request is throttled. Retry after waiting for the time specified in the \"x-ms-ratelimit-microsoft.consumption-retry-after\" header. \n\n * 503 ServiceUnavailable - Service is temporarily unavailable. Retry after waiting for the time specified in the \"Retry-After\" header."
  kind: object
  properties:
  - name: error
    description: The details of the error.
    types:
    - uid: ErrorDetails
- name: ReservationDetail
  description: reservation detail resource.
  kind: object
  properties:
  - name: properties.reservationOrderId
    isReadyOnly: true
    description: The reservation order ID is the identifier for a reservation purchase. Each reservation order ID represents a single purchase transaction. A reservation order contains reservations. The reservation order specifies the VM size and region for the reservations.
    types:
    - uid: string
  - name: properties.instanceFlexibilityRatio
    isReadyOnly: true
    description: The instance Flexibility Ratio.
    types:
    - uid: string
  - name: properties.instanceFlexibilityGroup
    isReadyOnly: true
    description: The instance Flexibility Group.
    types:
    - uid: string
  - name: properties.reservationId
    isReadyOnly: true
    description: The reservation ID is the identifier of a reservation within a reservation order. Each reservation is the grouping for applying the benefit scope and also specifies the number of instances to which the reservation benefit can be applied to.
    types:
    - uid: string
  - name: properties.skuName
    isReadyOnly: true
    description: This is the ARM Sku name. It can be used to join with the serviceType field in additional info in usage records.
    types:
    - uid: string
  - name: properties.reservedHours
    isReadyOnly: true
    description: This is the total hours reserved for the day. E.g. if reservation for 1 instance was made on 1 PM, this will be 11 hours for that day and 24 hours from subsequent days.
    types:
    - uid: number
  - name: properties.usageDate
    isReadyOnly: true
    description: The date on which consumption occurred.
    types:
    - uid: string
  - name: properties.usedHours
    isReadyOnly: true
    description: This is the total hours used by the instance.
    types:
    - uid: number
  - name: properties.instanceId
    isReadyOnly: true
    description: This identifier is the name of the resource or the fully qualified Resource ID.
    types:
    - uid: string
  - name: properties.totalReservedQuantity
    isReadyOnly: true
    description: This is the total count of instances that are reserved for the reservationId.
    types:
    - uid: number
  - name: properties.kind
    isReadyOnly: true
    description: The reservation kind.
    types:
    - uid: string
  - name: id
    isReadyOnly: true
    description: The full qualified ARM ID of an event.
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: 'The ID that uniquely identifies an event. '
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: Resource type.
    types:
    - uid: string
  - name: etag
    isReadyOnly: true
    description: The etag for the resource.
    types:
    - uid: string
  - name: tags
    isReadyOnly: true
    description: Resource tags.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
- name: ErrorDetails
  description: The details of the error.
  kind: object
  properties:
  - name: code
    isReadyOnly: true
    description: Error code.
    types:
    - uid: string
  - name: message
    isReadyOnly: true
    description: Error message indicating why the operation failed.
    types:
    - uid: string
examples:
- name: ReservationDetailsByBillingAccountId
  request:
    uri: GET https://management.azure.com/providers/Microsoft.Billing/billingAccounts/12345/providers/Microsoft.Consumption/reservationDetails?$filter=properties/usageDate ge 2017-10-01 AND properties/usageDate le 2017-12-05&api-version=2021-10-01
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      GET https://management.azure.com/providers/Microsoft.Billing/billingAccounts/12345/providers/Microsoft.Consumption/reservationDetails?$filter=properties/usageDate ge 2017-10-01 AND properties/usageDate le 2017-12-05&api-version=2021-10-01
      ```

      # [Java](#tab/Java)
      ``` java
      import com.azure.core.util.Context;

      /** Samples for ReservationsDetails List. */
      public final class Main {
          /*
           * x-ms-original-file: specification/consumption/resource-manager/Microsoft.Consumption/stable/2021-10-01/examples/ReservationDetailsByBillingAccountId.json
           */
          /**
           * Sample code: ReservationDetailsByBillingAccountId.
           *
           * @param manager Entry point to ConsumptionManager.
           */
          public static void reservationDetailsByBillingAccountId(
              com.azure.resourcemanager.consumption.ConsumptionManager manager) {
              manager
                  .reservationsDetails()
                  .list(
                      "providers/Microsoft.Billing/billingAccounts/12345",
                      null,
                      null,
                      "properties/usageDate ge 2017-10-01 AND properties/usageDate le 2017-12-05",
                      null,
                      null,
                      Context.NONE);
          }
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-java/blob/azure-resourcemanager-consumption_1.0.0-beta.3/sdk/consumption/azure-resourcemanager-consumption/README.md) on how to add the SDK to your project and authenticate.
      # [Go](#tab/Go)
      ``` go
      package armconsumption_test

      import (
      	"context"
      	"log"

      	"github.com/Azure/azure-sdk-for-go/sdk/azcore/to"
      	"github.com/Azure/azure-sdk-for-go/sdk/azidentity"
      	"github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/consumption/armconsumption"
      )

      // Generated from example definition: https://github.com/Azure/azure-rest-api-specs/tree/main/specification/consumption/resource-manager/Microsoft.Consumption/stable/2021-10-01/examples/ReservationDetailsByBillingAccountId.json
      func ExampleReservationsDetailsClient_NewListPager() {
      	cred, err := azidentity.NewDefaultAzureCredential(nil)
      	if err != nil {
      		log.Fatalf("failed to obtain a credential: %v", err)
      	}
      	ctx := context.Background()
      	client, err := armconsumption.NewReservationsDetailsClient(cred, nil)
      	if err != nil {
      		log.Fatalf("failed to create client: %v", err)
      	}
      	pager := client.NewListPager("providers/Microsoft.Billing/billingAccounts/12345",
      		&armconsumption.ReservationsDetailsClientListOptions{StartDate: nil,
      			EndDate:            nil,
      			Filter:             to.Ptr("properties/usageDate ge 2017-10-01 AND properties/usageDate le 2017-12-05"),
      			ReservationID:      nil,
      			ReservationOrderID: nil,
      		})
      	for pager.More() {
      		nextResult, err := pager.NextPage(ctx)
      		if err != nil {
      			log.Fatalf("failed to advance page: %v", err)
      		}
      		for _, v := range nextResult.Value {
      			// TODO: use page item
      			_ = v
      		}
      	}
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-go/blob/sdk%2Fresourcemanager%2Fconsumption%2Farmconsumption%2Fv1.0.0/sdk/resourcemanager/consumption/armconsumption/README.md) on how to add the SDK to your project and authenticate.
      # [JavaScript](#tab/JavaScript)
      ``` js
      const { ConsumptionManagementClient } = require("@azure/arm-consumption");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to Lists the reservations details for the defined scope and provided date range.
       *
       * @summary Lists the reservations details for the defined scope and provided date range.
       * x-ms-original-file: specification/consumption/resource-manager/Microsoft.Consumption/stable/2021-10-01/examples/ReservationDetailsByBillingAccountId.json
       */
      async function reservationDetailsByBillingAccountId() {
        const subscriptionId = "00000000-0000-0000-0000-000000000000";
        const scope = "providers/Microsoft.Billing/billingAccounts/12345";
        const filter = "properties/usageDate ge 2017-10-01 AND properties/usageDate le 2017-12-05";
        const options = { filter };
        const credential = new DefaultAzureCredential();
        const client = new ConsumptionManagementClient(credential, subscriptionId);
        const resArray = new Array();
        for await (let item of client.reservationsDetails.list(scope, options)) {
          resArray.push(item);
        }
        console.log(resArray);
      }

      reservationDetailsByBillingAccountId().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-consumption_9.1.0/sdk/consumption/arm-consumption/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "value": [
          {
            "id": "/providers/Microsoft.Billing/billingAccounts/12345/providers/Microsoft.Consumption/reservationDetails/reservationDetails_Id1",
            "name": "reservationDetails_Id1",
            "type": "Microsoft.Consumption/reservationDetails",
            "tags": null,
            "properties": {
              "reservationOrderId": "00000000-0000-0000-0000-000000000000",
              "reservationId": "00000000-0000-0000-0000-000000000000",
              "usageDate": "2017-11-30T00:00:00-08:00",
              "skuName": "Standard_D2s_v3",
              "instanceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/sqlh1/providers/microsoft.compute/virtualmachines/sqlh1",
              "totalReservedQuantity": 0,
              "reservedHours": 48,
              "usedHours": 0.6,
              "instanceFlexibilityGroup": "DSv3 Series",
              "instanceFlexibilityRatio": "1"
            }
          }
        ]
      }
- name: ReservationDetailsByBillingProfileId
  request:
    uri: GET https://management.azure.com/providers/Microsoft.Billing/billingAccounts/12345:2468/billingProfiles/13579/providers/Microsoft.Consumption/reservationDetails?startDate=2019-09-01&endDate=2019-10-31&api-version=2021-10-01
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      GET https://management.azure.com/providers/Microsoft.Billing/billingAccounts/12345:2468/billingProfiles/13579/providers/Microsoft.Consumption/reservationDetails?startDate=2019-09-01&endDate=2019-10-31&api-version=2021-10-01
      ```

      # [Java](#tab/Java)
      ``` java
      import com.azure.core.util.Context;

      /** Samples for ReservationsDetails List. */
      public final class Main {
          /*
           * x-ms-original-file: specification/consumption/resource-manager/Microsoft.Consumption/stable/2021-10-01/examples/ReservationDetailsByBillingProfileId.json
           */
          /**
           * Sample code: ReservationDetailsByBillingProfileId.
           *
           * @param manager Entry point to ConsumptionManager.
           */
          public static void reservationDetailsByBillingProfileId(
              com.azure.resourcemanager.consumption.ConsumptionManager manager) {
              manager
                  .reservationsDetails()
                  .list(
                      "providers/Microsoft.Billing/billingAccounts/12345:2468/billingProfiles/13579",
                      "2019-09-01",
                      "2019-10-31",
                      null,
                      null,
                      null,
                      Context.NONE);
          }
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-java/blob/azure-resourcemanager-consumption_1.0.0-beta.3/sdk/consumption/azure-resourcemanager-consumption/README.md) on how to add the SDK to your project and authenticate.
      # [JavaScript](#tab/JavaScript)
      ``` js
      const { ConsumptionManagementClient } = require("@azure/arm-consumption");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to Lists the reservations details for the defined scope and provided date range.
       *
       * @summary Lists the reservations details for the defined scope and provided date range.
       * x-ms-original-file: specification/consumption/resource-manager/Microsoft.Consumption/stable/2021-10-01/examples/ReservationDetailsByBillingProfileId.json
       */
      async function reservationDetailsByBillingProfileId() {
        const subscriptionId = "00000000-0000-0000-0000-000000000000";
        const scope = "providers/Microsoft.Billing/billingAccounts/12345:2468/billingProfiles/13579";
        const startDate = "2019-09-01";
        const endDate = "2019-10-31";
        const options = { startDate, endDate };
        const credential = new DefaultAzureCredential();
        const client = new ConsumptionManagementClient(credential, subscriptionId);
        const resArray = new Array();
        for await (let item of client.reservationsDetails.list(scope, options)) {
          resArray.push(item);
        }
        console.log(resArray);
      }

      reservationDetailsByBillingProfileId().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-consumption_9.1.0/sdk/consumption/arm-consumption/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "value": [
          {
            "id": "/providers/Microsoft.Billing/billingAccounts/12345:2468/billingProfiles/13579/providers/Microsoft.Consumption/reservationDetails/reservationDetails_Id1",
            "name": "reservationDetails_Id1",
            "type": "Microsoft.Consumption/reservationDetails",
            "tags": null,
            "properties": {
              "reservationOrderId": "00000000-0000-0000-0000-000000000000",
              "reservationId": "00000000-0000-0000-0000-000000000000",
              "usageDate": "2019-09-30T00:00:00-08:00",
              "skuName": "Standard_D2s_v3",
              "instanceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/sqlh1/providers/microsoft.compute/virtualmachines/sqlh1",
              "totalReservedQuantity": 0,
              "reservedHours": 48,
              "usedHours": 0.6,
              "instanceFlexibilityGroup": "DSv3 Series",
              "instanceFlexibilityRatio": "1"
            }
          }
        ]
      }
- name: ReservationDetailsByBillingProfileIdReservationId
  request:
    uri: GET https://management.azure.com/providers/Microsoft.Billing/billingAccounts/12345:2468/billingProfiles/13579/providers/Microsoft.Consumption/reservationDetails?startDate=2019-09-01&endDate=2019-10-31&reservationId=1c6b6358-709f-484c-85f1-72e862a0cf3b&reservationOrderId=9f39ba10-794f-4dcb-8f4b-8d0cb47c27dc&api-version=2021-10-01
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      GET https://management.azure.com/providers/Microsoft.Billing/billingAccounts/12345:2468/billingProfiles/13579/providers/Microsoft.Consumption/reservationDetails?startDate=2019-09-01&endDate=2019-10-31&reservationId=1c6b6358-709f-484c-85f1-72e862a0cf3b&reservationOrderId=9f39ba10-794f-4dcb-8f4b-8d0cb47c27dc&api-version=2021-10-01
      ```

      # [Java](#tab/Java)
      ``` java
      import com.azure.core.util.Context;

      /** Samples for ReservationsDetails List. */
      public final class Main {
          /*
           * x-ms-original-file: specification/consumption/resource-manager/Microsoft.Consumption/stable/2021-10-01/examples/ReservationDetailsByBillingProfileIdReservationId.json
           */
          /**
           * Sample code: ReservationDetailsByBillingProfileIdReservationId.
           *
           * @param manager Entry point to ConsumptionManager.
           */
          public static void reservationDetailsByBillingProfileIdReservationId(
              com.azure.resourcemanager.consumption.ConsumptionManager manager) {
              manager
                  .reservationsDetails()
                  .list(
                      "providers/Microsoft.Billing/billingAccounts/12345:2468/billingProfiles/13579",
                      "2019-09-01",
                      "2019-10-31",
                      null,
                      "1c6b6358-709f-484c-85f1-72e862a0cf3b",
                      "9f39ba10-794f-4dcb-8f4b-8d0cb47c27dc",
                      Context.NONE);
          }
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-java/blob/azure-resourcemanager-consumption_1.0.0-beta.3/sdk/consumption/azure-resourcemanager-consumption/README.md) on how to add the SDK to your project and authenticate.
      # [JavaScript](#tab/JavaScript)
      ``` js
      const { ConsumptionManagementClient } = require("@azure/arm-consumption");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to Lists the reservations details for the defined scope and provided date range.
       *
       * @summary Lists the reservations details for the defined scope and provided date range.
       * x-ms-original-file: specification/consumption/resource-manager/Microsoft.Consumption/stable/2021-10-01/examples/ReservationDetailsByBillingProfileIdReservationId.json
       */
      async function reservationDetailsByBillingProfileIdReservationId() {
        const subscriptionId = "00000000-0000-0000-0000-000000000000";
        const scope = "providers/Microsoft.Billing/billingAccounts/12345:2468/billingProfiles/13579";
        const startDate = "2019-09-01";
        const endDate = "2019-10-31";
        const reservationId = "1c6b6358-709f-484c-85f1-72e862a0cf3b";
        const reservationOrderId = "9f39ba10-794f-4dcb-8f4b-8d0cb47c27dc";
        const options = {
          startDate,
          endDate,
          reservationId,
          reservationOrderId,
        };
        const credential = new DefaultAzureCredential();
        const client = new ConsumptionManagementClient(credential, subscriptionId);
        const resArray = new Array();
        for await (let item of client.reservationsDetails.list(scope, options)) {
          resArray.push(item);
        }
        console.log(resArray);
      }

      reservationDetailsByBillingProfileIdReservationId().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-consumption_9.1.0/sdk/consumption/arm-consumption/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "value": [
          {
            "id": "/providers/Microsoft.Billing/billingAccounts/12345:2468/billingProfiles/13579/providers/Microsoft.Consumption/reservationDetails/reservationDetails_Id1",
            "name": "reservationDetails_Id1",
            "type": "Microsoft.Consumption/reservationDetails",
            "tags": null,
            "properties": {
              "reservationOrderId": "9f39ba10-794f-4dcb-8f4b-8d0cb47c27dc",
              "reservationId": "1c6b6358-709f-484c-85f1-72e862a0cf3b",
              "usageDate": "2019-09-30T00:00:00-08:00",
              "skuName": "Standard_D2s_v3",
              "instanceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/sqlh1/providers/microsoft.compute/virtualmachines/sqlh1",
              "totalReservedQuantity": 0,
              "reservedHours": 48,
              "usedHours": 0.6,
              "instanceFlexibilityGroup": "DSv3 Series",
              "instanceFlexibilityRatio": "1"
            }
          }
        ]
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow.
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: 'Lists the reservations details for the defined scope and provided date range. Note: ARM has a payload size limit of 12MB, so currently callers get 502 when the '
errorCodes: []
