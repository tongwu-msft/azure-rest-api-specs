### YamlMime:RESTOperation
uid: management.azure.com.consumption.events.listbybillingaccount
name: List By Billing Account
service: Consumption
groupName: Events
apiVersion: 2021-10-01
summary: Lists the events that decrements Azure credits or Microsoft Azure consumption commitment for a billing account or a billing profile for a given start and end date.
consumes:
- application/json
produces:
- application/json
paths:
- content: GET https://management.azure.com/providers/Microsoft.Billing/billingAccounts/{billingAccountId}/providers/Microsoft.Consumption/events?api-version=2021-10-01
- content: GET https://management.azure.com/providers/Microsoft.Billing/billingAccounts/{billingAccountId}/providers/Microsoft.Consumption/events?api-version=2021-10-01&$filter={$filter}
  isOptional: true
uriParameters:
- name: billingAccountId
  in: path
  isRequired: true
  description: BillingAccount ID
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: Version of the API to be used with the client request. The current version is 2021-10-01.
  types:
  - uid: string
- name: $filter
  in: query
  description: May be used to filter the events by lotId, lotSource etc. The filter supports 'eq', 'lt', 'gt', 'le', 'ge', and 'and'. It does not currently support 'ne', 'or', or 'not'. Tag filter is a key value pair string where key and value is separated by a colon (:).
  types:
  - uid: string
responses:
- name: 200 OK
  description: OK. The request has succeeded.
  types:
  - uid: Events
- name: Other Status Codes
  description: Error response describing why the operation failed.
  types:
  - uid: ErrorResponse
requestHeader: []
definitions:
- name: Events
  description: Result of listing event summary.
  kind: object
  properties:
  - name: value
    isReadyOnly: true
    description: The list of event summary.
    types:
    - uid: EventSummary
      isArray: true
  - name: nextLink
    isReadyOnly: true
    description: The link (url) to the next page of results.
    types:
    - uid: string
- name: ErrorResponse
  description: "Error response indicates that the service is not able to process the incoming request. The reason is provided in the error message. \n\nSome Error responses: \n\n * 429 TooManyRequests - Request is throttled. Retry after waiting for the time specified in the \"x-ms-ratelimit-microsoft.consumption-retry-after\" header. \n\n * 503 ServiceUnavailable - Service is temporarily unavailable. Retry after waiting for the time specified in the \"Retry-After\" header."
  kind: object
  properties:
  - name: error
    description: The details of the error.
    types:
    - uid: ErrorDetails
- name: EventSummary
  description: An event summary resource.
  kind: object
  properties:
  - name: properties.transactionDate
    isReadyOnly: true
    description: The date of the event.
    types:
    - uid: string
  - name: properties.description
    isReadyOnly: true
    description: The description of the event.
    types:
    - uid: string
  - name: properties.newCredit
    isReadyOnly: true
    description: The amount of new credit or commitment for NewCredit or SettleCharges event.
    types:
    - uid: amount
  - name: properties.adjustments
    isReadyOnly: true
    description: The amount of balance adjustment. The property is not available for ConsumptionCommitment lots.
    types:
    - uid: amount
  - name: properties.creditExpired
    isReadyOnly: true
    description: The amount of expired credit or commitment for NewCredit or SettleCharges event.
    types:
    - uid: amount
  - name: properties.charges
    isReadyOnly: true
    description: 'The amount of charges for events of type SettleCharges and PendingEligibleCharges. '
    types:
    - uid: amount
  - name: properties.closedBalance
    isReadyOnly: true
    description: 'The balance after the event. '
    types:
    - uid: amount
  - name: properties.eventType
    description: Identifies the type of the event.
    types:
    - uid: EventType
  - name: properties.invoiceNumber
    isReadyOnly: true
    description: The number which uniquely identifies the invoice on which the event was billed. This will be empty for unbilled events.
    types:
    - uid: string
  - name: properties.billingProfileId
    isReadyOnly: true
    description: 'The ID that uniquely identifies the billing profile for which the event happened. The property is only available for billing account of type MicrosoftCustomerAgreement. '
    types:
    - uid: string
  - name: properties.billingProfileDisplayName
    isReadyOnly: true
    description: The display name of the billing profile for which the event happened. The property is only available for billing account of type MicrosoftCustomerAgreement.
    types:
    - uid: string
  - name: properties.lotId
    isReadyOnly: true
    description: The ID that uniquely identifies the lot for which the event happened.
    types:
    - uid: string
  - name: properties.lotSource
    isReadyOnly: true
    description: 'Identifies the source of the lot for which the event happened. '
    types:
    - uid: string
  - name: properties.canceledCredit
    isReadyOnly: true
    description: Amount of canceled credit.
    types:
    - uid: amount
  - name: properties.creditCurrency
    isReadyOnly: true
    description: The credit currency of the event.
    types:
    - uid: string
  - name: properties.billingCurrency
    isReadyOnly: true
    description: The billing currency of the event.
    types:
    - uid: string
  - name: properties.reseller
    isReadyOnly: true
    description: The reseller of the event.
    types:
    - uid: Reseller
  - name: properties.creditExpiredInBillingCurrency
    isReadyOnly: true
    description: The amount of expired credit or commitment for NewCredit or SettleCharges event in billing currency.
    types:
    - uid: AmountWithExchangeRate
  - name: properties.newCreditInBillingCurrency
    isReadyOnly: true
    description: The amount of new credit or commitment for NewCredit or SettleCharges event in billing currency.
    types:
    - uid: AmountWithExchangeRate
  - name: properties.adjustmentsInBillingCurrency
    isReadyOnly: true
    description: The amount of balance adjustment in billing currency.
    types:
    - uid: AmountWithExchangeRate
  - name: properties.chargesInBillingCurrency
    isReadyOnly: true
    description: The amount of charges for events of type SettleCharges and PendingEligibleCharges in billing currency.
    types:
    - uid: AmountWithExchangeRate
  - name: properties.closedBalanceInBillingCurrency
    isReadyOnly: true
    description: The balance in billing currency after the event.
    types:
    - uid: AmountWithExchangeRate
  - name: properties.eTag
    isReadyOnly: true
    description: The eTag for the resource.
    types:
    - uid: string
  - name: id
    isReadyOnly: true
    description: Resource Id.
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: Resource name.
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: Resource type.
    types:
    - uid: string
  - name: eTag
    description: eTag of the resource. To handle concurrent update scenario, this field will be used to determine whether the user is updating the latest version or not.
    types:
    - uid: string
- name: ErrorDetails
  description: The details of the error.
  kind: object
  properties:
  - name: code
    isReadyOnly: true
    description: Error code.
    types:
    - uid: string
  - name: message
    isReadyOnly: true
    description: Error message indicating why the operation failed.
    types:
    - uid: string
- name: amount
  description: The amount plus currency .
  kind: object
  properties:
  - name: currency
    isReadyOnly: true
    description: Amount currency.
    types:
    - uid: string
  - name: value
    isReadyOnly: true
    description: Amount.
    types:
    - uid: number
- name: EventType
  description: Identifies the type of the event.
  kind: enum
  properties:
  - name: SettledCharges
    types:
    - uid: string
  - name: PendingCharges
    types:
    - uid: string
  - name: PendingAdjustments
    types:
    - uid: string
  - name: PendingNewCredit
    types:
    - uid: string
  - name: PendingExpiredCredit
    types:
    - uid: string
  - name: UnKnown
    types:
    - uid: string
  - name: NewCredit
    types:
    - uid: string
  - name: CreditExpired
    types:
    - uid: string
- name: Reseller
  description: The reseller properties.
  kind: object
  properties:
  - name: resellerId
    isReadyOnly: true
    description: The reseller property ID.
    types:
    - uid: string
  - name: resellerDescription
    isReadyOnly: true
    description: The reseller property description.
    types:
    - uid: string
- name: AmountWithExchangeRate
  description: The amount with exchange rate.
  kind: object
  properties:
  - name: exchangeRate
    isReadyOnly: true
    description: The exchange rate.
    types:
    - uid: number
  - name: exchangeRateMonth
    isReadyOnly: true
    description: The exchange rate month.
    types:
    - uid: integer
  - name: currency
    isReadyOnly: true
    description: Amount currency.
    types:
    - uid: string
  - name: value
    isReadyOnly: true
    description: Amount.
    types:
    - uid: number
examples:
- name: EventsGetByBillingAccount
  request:
    uri: GET https://management.azure.com/providers/Microsoft.Billing/billingAccounts/1234:5678/providers/Microsoft.Consumption/events?api-version=2021-10-01
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      GET https://management.azure.com/providers/Microsoft.Billing/billingAccounts/1234:5678/providers/Microsoft.Consumption/events?api-version=2021-10-01
      ```

      # [Java](#tab/Java)
      ``` java
      import com.azure.core.util.Context;

      /** Samples for EventsOperation ListByBillingAccount. */
      public final class Main {
          /*
           * x-ms-original-file: specification/consumption/resource-manager/Microsoft.Consumption/stable/2021-10-01/examples/EventsGetByBillingAccount.json
           */
          /**
           * Sample code: EventsGetByBillingAccount.
           *
           * @param manager Entry point to ConsumptionManager.
           */
          public static void eventsGetByBillingAccount(com.azure.resourcemanager.consumption.ConsumptionManager manager) {
              manager.eventsOperations().listByBillingAccount("1234:5678", null, Context.NONE);
          }
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-java/blob/azure-resourcemanager-consumption_1.0.0-beta.3/sdk/consumption/azure-resourcemanager-consumption/README.md) on how to add the SDK to your project and authenticate.
      # [Go](#tab/Go)
      ``` go
      package armconsumption_test

      import (
      	"context"
      	"log"

      	"github.com/Azure/azure-sdk-for-go/sdk/azidentity"
      	"github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/consumption/armconsumption"
      )

      // Generated from example definition: https://github.com/Azure/azure-rest-api-specs/tree/main/specification/consumption/resource-manager/Microsoft.Consumption/stable/2021-10-01/examples/EventsGetByBillingAccount.json
      func ExampleEventsClient_NewListByBillingAccountPager() {
      	cred, err := azidentity.NewDefaultAzureCredential(nil)
      	if err != nil {
      		log.Fatalf("failed to obtain a credential: %v", err)
      	}
      	ctx := context.Background()
      	client, err := armconsumption.NewEventsClient(cred, nil)
      	if err != nil {
      		log.Fatalf("failed to create client: %v", err)
      	}
      	pager := client.NewListByBillingAccountPager("1234:5678",
      		&armconsumption.EventsClientListByBillingAccountOptions{Filter: nil})
      	for pager.More() {
      		nextResult, err := pager.NextPage(ctx)
      		if err != nil {
      			log.Fatalf("failed to advance page: %v", err)
      		}
      		for _, v := range nextResult.Value {
      			// TODO: use page item
      			_ = v
      		}
      	}
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-go/blob/sdk%2Fresourcemanager%2Fconsumption%2Farmconsumption%2Fv1.0.0/sdk/resourcemanager/consumption/armconsumption/README.md) on how to add the SDK to your project and authenticate.
      # [JavsScirpt](#tab/JavsScirpt)
      ``` js
      const { ConsumptionManagementClient } = require("@azure/arm-consumption");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to Lists the events that decrements Azure credits or Microsoft Azure consumption commitment for a billing account or a billing profile for a given start and end date.
       *
       * @summary Lists the events that decrements Azure credits or Microsoft Azure consumption commitment for a billing account or a billing profile for a given start and end date.
       * x-ms-original-file: specification/consumption/resource-manager/Microsoft.Consumption/stable/2021-10-01/examples/EventsGetByBillingAccount.json
       */
      async function eventsGetByBillingAccount() {
        const subscriptionId = "00000000-0000-0000-0000-000000000000";
        const billingAccountId = "1234:5678";
        const credential = new DefaultAzureCredential();
        const client = new ConsumptionManagementClient(credential, subscriptionId);
        const resArray = new Array();
        for await (let item of client.eventsOperations.listByBillingAccount(billingAccountId)) {
          resArray.push(item);
        }
        console.log(resArray);
      }

      eventsGetByBillingAccount().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-consumption_9.0.1/sdk/consumption/arm-consumption/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "value": [
          {
            "id": "/providers/Microsoft.Billing/billingAccounts/1234:56789/providers/Microsoft.Consumption/events/eventId1",
            "name": "eventId1",
            "type": "Microsoft.Consumption/events",
            "properties": {
              "lotSource": "ConsumptionCommitment",
              "lotId": "/providers/Microsoft.Billing/billingAccounts/1234:5678/Microsoft.Consumption/lots/G202001083926600XXXXX",
              "billingProfileId": "/providers/Microsoft.Billing/billingAccounts/{billingAccountName}/billingProfiles/X3TD-KVTT-BG7-TGB",
              "billingProfileDisplayName": "Contoso Operations Billing",
              "transactionDate": "2019-07-01T00:00:00Z",
              "description": "New MACC Added",
              "charges": {
                "currency": "USD",
                "value": 500
              },
              "newCredit": {
                "currency": "USD",
                "value": 500
              },
              "closedBalance": {
                "currency": "USD",
                "value": 500
              },
              "invoiceNumber": "3304",
              "eventType": "NewCredit"
            }
          },
          {
            "id": "/providers/Microsoft.Billing/billingAccounts/1234:56789/providers/Microsoft.Consumption/events/eventId2",
            "name": "eventId2",
            "type": "Microsoft.Consumption/events",
            "properties": {
              "lotSource": "AzurePrepayment",
              "lotId": "/providers/Microsoft.Billing/billingAccounts/1234:5678/Microsoft.Consumption/lots/7004bc39-974d-482e-8e45-caf91dba0870",
              "billingProfileId": "/providers/Microsoft.Billing/billingAccounts/{billingAccountName}/billingProfiles/X3TD-KVTT-BG7-TGB",
              "billingProfileDisplayName": "Contoso Operations Billing",
              "transactionDate": "2019-07-01T00:00:00Z",
              "description": "Balance after invoice 3304",
              "charges": {
                "currency": "USD",
                "value": 500
              },
              "closedBalance": {
                "currency": "USD",
                "value": 500
              },
              "invoiceNumber": "3304",
              "eventType": "SettledCharges"
            }
          }
        ]
      }
- name: EventsGetByBillingAccountWithFilters
  request:
    uri: GET https://management.azure.com/providers/Microsoft.Billing/billingAccounts/1234:5678/providers/Microsoft.Consumption/events?api-version=2021-10-01&$filter=lotid eq 'G202001083926600XXXXX' AND lotsource eq 'consumptioncommitment'
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      GET https://management.azure.com/providers/Microsoft.Billing/billingAccounts/1234:5678/providers/Microsoft.Consumption/events?api-version=2021-10-01&$filter=lotid eq 'G202001083926600XXXXX' AND lotsource eq 'consumptioncommitment'
      ```

      # [Java](#tab/Java)
      ``` java
      import com.azure.core.util.Context;

      /** Samples for EventsOperation ListByBillingAccount. */
      public final class Main {
          /*
           * x-ms-original-file: specification/consumption/resource-manager/Microsoft.Consumption/stable/2021-10-01/examples/EventsGetByBillingAccountWithFilters.json
           */
          /**
           * Sample code: EventsGetByBillingAccountWithFilters.
           *
           * @param manager Entry point to ConsumptionManager.
           */
          public static void eventsGetByBillingAccountWithFilters(
              com.azure.resourcemanager.consumption.ConsumptionManager manager) {
              manager
                  .eventsOperations()
                  .listByBillingAccount(
                      "1234:5678", "lotid eq 'G202001083926600XXXXX' AND lotsource eq 'consumptioncommitment'", Context.NONE);
          }
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-java/blob/azure-resourcemanager-consumption_1.0.0-beta.3/sdk/consumption/azure-resourcemanager-consumption/README.md) on how to add the SDK to your project and authenticate.
      # [JavsScirpt](#tab/JavsScirpt)
      ``` js
      const { ConsumptionManagementClient } = require("@azure/arm-consumption");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to Lists the events that decrements Azure credits or Microsoft Azure consumption commitment for a billing account or a billing profile for a given start and end date.
       *
       * @summary Lists the events that decrements Azure credits or Microsoft Azure consumption commitment for a billing account or a billing profile for a given start and end date.
       * x-ms-original-file: specification/consumption/resource-manager/Microsoft.Consumption/stable/2021-10-01/examples/EventsGetByBillingAccountWithFilters.json
       */
      async function eventsGetByBillingAccountWithFilters() {
        const subscriptionId = "00000000-0000-0000-0000-000000000000";
        const billingAccountId = "1234:5678";
        const filter = "lotid eq 'G202001083926600XXXXX' AND lotsource eq 'consumptioncommitment'";
        const options = { filter };
        const credential = new DefaultAzureCredential();
        const client = new ConsumptionManagementClient(credential, subscriptionId);
        const resArray = new Array();
        for await (let item of client.eventsOperations.listByBillingAccount(billingAccountId, options)) {
          resArray.push(item);
        }
        console.log(resArray);
      }

      eventsGetByBillingAccountWithFilters().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-consumption_9.0.1/sdk/consumption/arm-consumption/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "value": [
          {
            "id": "/providers/Microsoft.Billing/billingAccounts/1234:56789/providers/Microsoft.Consumption/events/eventId1",
            "name": "eventId1",
            "type": "Microsoft.Consumption/events",
            "properties": {
              "lotSource": "ConsumptionCommitment",
              "lotId": "/providers/Microsoft.Billing/billingAccounts/1234:5678/Microsoft.Consumption/lots/G202001083926600XXXXX",
              "billingProfileId": "/providers/Microsoft.Billing/billingAccounts/{billingAccountName}/billingProfiles/X3TD-KVTT-BG7-TGB",
              "billingProfileDisplayName": "Contoso Operations Billing",
              "transactionDate": "2019-07-01T00:00:00Z",
              "description": "MACC Canceled",
              "canceledCredit": {
                "currency": "USD",
                "value": 200
              },
              "closedBalance": {
                "currency": "USD",
                "value": 500
              },
              "invoiceNumber": "3304",
              "eventType": "CanceledCredit"
            }
          }
        ]
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow.
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: Lists the events that decrements Azure credits or Microsoft Azure consumption commitment for a billing account or a billing profile for a given start and end da
errorCodes: []
