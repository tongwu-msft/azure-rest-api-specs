### YamlMime:RESTOperation
uid: keyvault.restorecertificate.restorecertificate
name: Restore Certificate
service: Key Vault
groupName: Restore Certificate
apiVersion: "7.0"
summary: "Restores a backed up certificate to a vault.  \nRestores a backed up certificate, and all its versions, to a vault. This operation requires the certificates/restore permission."
consumes:
- application/json
produces:
- application/json
paths:
- content: POST {vaultBaseUrl}/certificates/restore?api-version=7.0
uriParameters:
- name: vaultBaseUrl
  in: path
  isRequired: true
  skipUrlEncoding: true
  description: The vault name, for example https://myvault.vault.azure.net.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: Client API version.
  types:
  - uid: string
responses:
- name: 200 OK
  description: Restored certificate bundle in the vault.
  types:
  - uid: CertificateBundle
- name: Other Status Codes
  description: Key Vault error response describing why the operation failed.
  types:
  - uid: KeyVaultError
requestBody:
- name: default
  parameters:
  - name: value
    in: body
    isRequired: true
    description: The backup blob associated with a certificate bundle.
    types:
    - uid: string
requestHeader: []
definitions:
- name: CertificateBundle
  description: A certificate bundle consists of a certificate (X509) plus its attributes.
  kind: object
  properties:
  - name: id
    isReadyOnly: true
    description: The certificate id.
    types:
    - uid: string
  - name: kid
    isReadyOnly: true
    description: The key id.
    types:
    - uid: string
  - name: sid
    isReadyOnly: true
    description: The secret id.
    types:
    - uid: string
  - name: x5t
    isReadyOnly: true
    description: Thumbprint of the certificate.
    types:
    - uid: string
  - name: policy
    isReadyOnly: true
    description: The management policy.
    types:
    - uid: CertificatePolicy
  - name: cer
    description: CER contents of x509 certificate.
    types:
    - uid: string
  - name: contentType
    description: The content type of the secret.
    types:
    - uid: string
  - name: attributes
    description: The certificate attributes.
    types:
    - uid: CertificateAttributes
  - name: tags
    description: Application specific metadata in the form of key-value pairs
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
- name: KeyVaultError
  description: The key vault error exception.
  kind: object
  properties:
  - name: error
    isReadyOnly: true
    description: The key vault server error.
    types:
    - uid: Error
- name: CertificateRestoreParameters
  description: The certificate restore parameters.
  kind: object
  properties:
  - name: value
    description: The backup blob associated with a certificate bundle.
    types:
    - uid: string
- name: CertificatePolicy
  description: Management policy for a certificate.
  kind: object
  properties:
  - name: id
    isReadyOnly: true
    description: The certificate id.
    types:
    - uid: string
  - name: key_props
    description: Properties of the key backing a certificate.
    types:
    - uid: KeyProperties
  - name: secret_props
    description: Properties of the secret backing a certificate.
    types:
    - uid: SecretProperties
  - name: x509_props
    description: Properties of the X509 component of a certificate.
    types:
    - uid: X509CertificateProperties
  - name: lifetime_actions
    description: Actions that will be performed by Key Vault over the lifetime of a certificate.
    types:
    - uid: LifetimeAction
      isArray: true
  - name: issuer
    description: Parameters for the issuer of the X509 component of a certificate.
    types:
    - uid: IssuerParameters
  - name: attributes
    description: The certificate attributes.
    types:
    - uid: CertificateAttributes
- name: CertificateAttributes
  description: The certificate management attributes.
  kind: object
  properties:
  - name: recoveryLevel
    isReadyOnly: true
    description: Reflects the deletion recovery level currently in effect for certificates in the current vault. If it contains 'Purgeable', the certificate can be permanently deleted by a privileged user; otherwise, only the system can purge the certificate, at the end of the retention interval.
    types:
    - uid: DeletionRecoveryLevel
  - name: enabled
    description: Determines whether the object is enabled.
    types:
    - uid: boolean
  - name: nbf
    description: Not before date in UTC.
    types:
    - uid: integer
  - name: exp
    description: Expiry date in UTC.
    types:
    - uid: integer
  - name: created
    isReadyOnly: true
    description: Creation time in UTC.
    types:
    - uid: integer
  - name: updated
    isReadyOnly: true
    description: Last updated time in UTC.
    types:
    - uid: integer
- name: Error
  description: The key vault server error.
  kind: object
  properties:
  - name: code
    isReadyOnly: true
    description: The error code.
    types:
    - uid: string
  - name: message
    isReadyOnly: true
    description: The error message.
    types:
    - uid: string
  - name: innererror
    isReadyOnly: true
    description: The key vault server error.
    types:
    - uid: Error
- name: KeyProperties
  description: Properties of the key pair backing a certificate.
  kind: object
  properties:
  - name: exportable
    description: Indicates if the private key can be exported.
    types:
    - uid: boolean
  - name: kty
    description: The type of key pair to be used for the certificate.
    types:
    - uid: JsonWebKeyType
  - name: key_size
    description: 'The key size in bits. For example: 2048, 3072, or 4096 for RSA.'
    types:
    - uid: integer
  - name: reuse_key
    description: Indicates if the same key pair will be used on certificate renewal.
    types:
    - uid: boolean
  - name: crv
    description: Elliptic curve name. For valid values, see JsonWebKeyCurveName.
    types:
    - uid: JsonWebKeyCurveName
- name: SecretProperties
  description: Properties of the key backing a certificate.
  kind: object
  properties:
  - name: contentType
    description: The media type (MIME type).
    types:
    - uid: string
- name: X509CertificateProperties
  description: Properties of the X509 component of a certificate.
  kind: object
  properties:
  - name: subject
    description: The subject name. Should be a valid X509 distinguished Name.
    types:
    - uid: string
  - name: ekus
    description: The enhanced key usage.
    types:
    - uid: string
      isArray: true
  - name: sans
    description: The subject alternative names.
    types:
    - uid: SubjectAlternativeNames
  - name: key_usage
    description: List of key usages.
    types:
    - uid: string
      isArray: true
  - name: validity_months
    description: The duration that the certificate is valid in months.
    types:
    - uid: integer
- name: LifetimeAction
  description: Action and its trigger that will be performed by Key Vault over the lifetime of a certificate.
  kind: object
  properties:
  - name: trigger
    description: The condition that will execute the action.
    types:
    - uid: Trigger
  - name: action
    description: The action that will be executed.
    types:
    - uid: Action
- name: IssuerParameters
  description: Parameters for the issuer of the X509 component of a certificate.
  kind: object
  properties:
  - name: name
    description: Name of the referenced issuer object or reserved names; for example, 'Self' or 'Unknown'.
    types:
    - uid: string
  - name: cty
    description: Certificate type as supported by the provider (optional); for example 'OV-SSL', 'EV-SSL'
    types:
    - uid: string
  - name: cert_transparency
    description: Indicates if the certificates generated under this policy should be published to certificate transparency logs.
    types:
    - uid: boolean
- name: DeletionRecoveryLevel
  description: Reflects the deletion recovery level currently in effect for keys in the current vault. If it contains 'Purgeable' the key can be permanently deleted by a privileged user; otherwise, only the system can purge the key, at the end of the retention interval.
  kind: enum
  properties:
  - name: Purgeable
    description: Denotes a vault state in which deletion is an irreversible operation, without the possibility for recovery. This level corresponds to no protection being available against a Delete operation; the data is irretrievably lost upon accepting a Delete operation at the entity level or higher (vault, resource group, subscription etc.)
    types:
    - uid: string
  - name: Recoverable+Purgeable
    description: Denotes a vault state in which deletion is recoverable, and which also permits immediate and permanent deletion (i.e. purge). This level guarantees the recoverability of the deleted entity during the retention interval (90 days), unless a Purge operation is requested, or the subscription is cancelled. System wil permanently delete it after 90 days, if not recovered
    types:
    - uid: string
  - name: Recoverable
    description: Denotes a vault state in which deletion is recoverable without the possibility for immediate and permanent deletion (i.e. purge). This level guarantees the recoverability of the deleted entity during the retention interval(90 days) and while the subscription is still available. System wil permanently delete it after 90 days, if not recovered
    types:
    - uid: string
  - name: Recoverable+ProtectedSubscription
    description: Denotes a vault and subscription state in which deletion is recoverable within retention interval (90 days), immediate and permanent deletion (i.e. purge) is not permitted, and in which the subscription itself  cannot be permanently canceled. System wil permanently delete it after 90 days, if not recovered
    types:
    - uid: string
  - name: CustomizedRecoverable+Purgeable
    description: Denotes a vault state in which deletion is recoverable, and which also permits immediate and permanent deletion (i.e. purge when 7<= SoftDeleteRetentionInDays < 90). This level guarantees the recoverability of the deleted entity during the retention interval, unless a Purge operation is requested, or the subscription is cancelled.
    types:
    - uid: string
  - name: CustomizedRecoverable
    description: Denotes a vault state in which deletion is recoverable without the possibility for immediate and permanent deletion (i.e. purge when 7<= SoftDeleteRetentionInDays < 90).This level guarantees the recoverability of the deleted entity during the retention interval and while the subscription is still available.
    types:
    - uid: string
  - name: CustomizedRecoverable+ProtectedSubscription
    description: Denotes a vault and subscription state in which deletion is recoverable, immediate and permanent deletion (i.e. purge) is not permitted, and in which the subscription itself cannot be permanently canceled when 7<= SoftDeleteRetentionInDays < 90. This level guarantees the recoverability of the deleted entity during the retention interval, and also reflects the fact that the subscription itself cannot be cancelled.
    types:
    - uid: string
- name: JsonWebKeyType
  description: JsonWebKey Key Type (kty), as defined in https://tools.ietf.org/html/draft-ietf-jose-json-web-algorithms-40.
  kind: enum
  properties:
  - name: EC
    description: Elliptic Curve.
    types:
    - uid: string
  - name: EC-HSM
    description: Elliptic Curve with a private key which is not exportable from the HSM.
    types:
    - uid: string
  - name: RSA
    description: RSA (https://tools.ietf.org/html/rfc3447)
    types:
    - uid: string
  - name: RSA-HSM
    description: RSA with a private key which is not exportable from the HSM.
    types:
    - uid: string
  - name: oct
    description: Octet sequence (used to represent symmetric keys)
    types:
    - uid: string
- name: JsonWebKeyCurveName
  description: Elliptic curve name. For valid values, see JsonWebKeyCurveName.
  kind: enum
  properties:
  - name: P-256
    description: The NIST P-256 elliptic curve, AKA SECG curve SECP256R1.
    types:
    - uid: string
  - name: P-384
    description: The NIST P-384 elliptic curve, AKA SECG curve SECP384R1.
    types:
    - uid: string
  - name: P-521
    description: The NIST P-521 elliptic curve, AKA SECG curve SECP521R1.
    types:
    - uid: string
  - name: P-256K
    description: The SECG SECP256K1 elliptic curve.
    types:
    - uid: string
- name: SubjectAlternativeNames
  description: The subject alternate names of a X509 object.
  kind: object
  properties:
  - name: emails
    description: Email addresses.
    types:
    - uid: string
      isArray: true
  - name: dns_names
    description: Domain names.
    types:
    - uid: string
      isArray: true
  - name: upns
    description: User principal names.
    types:
    - uid: string
      isArray: true
- name: Trigger
  description: A condition to be satisfied for an action to be executed.
  kind: object
  properties:
  - name: lifetime_percentage
    description: Percentage of lifetime at which to trigger. Value should be between 1 and 99.
    types:
    - uid: integer
  - name: days_before_expiry
    description: Days before expiry to attempt renewal. Value should be between 1 and validity_in_months multiplied by 27. If validity_in_months is 36, then value should be between 1 and 972 (36 * 27).
    types:
    - uid: integer
- name: Action
  description: The action that will be executed.
  kind: object
  properties:
  - name: action_type
    description: The type of the action.
    types:
    - uid: ActionType
- name: ActionType
  description: The type of the action.
  kind: enum
  properties:
  - name: EmailContacts
    types:
    - uid: string
  - name: AutoRenew
    types:
    - uid: string
examples:
- name: RestoreCertificate
  request:
    uri: POST {vaultBaseUrl}/certificates/restore?api-version=7.0
  responses:
  - statusCode: "200"
    body: >-
      {
        "id": "https://demovault-rude-junior-95.vault.azure.net/certificates/testcert/21983500952149bbb3129b0c60e367a6",
        "kid": "https://demovault-rude-junior-95.vault.azure.net/keys/testcert/21983500952149bbb3129b0c60e367a6",
        "sid": "https://demovault-rude-junior-95.vault.azure.net/secrets/testcert/21983500952149bbb3129b0c60e367a6",
        "x5t": "Z-n6Mydb08bmyOgk7bmx5HT8tyo",
        "cer": "MIIDMjCCAhqgAwIBAgIQGn/FrGQZT/Cd9kgXIsytEjANBgkqhkiG9w0BAQsFADAWMRQwEgYDVQQDEwtleGFtcGxlLmNvbTAeFw0xODA0MTcxODI2MjZaFw0xOTA0MTcxODM2MjZaMBYxFDASBgNVBAMTC2V4YW1wbGUuY29tMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAsODIu9EJhfnn57k4++j6dC1M6Egi9aZucFQ9Jc29vFG9L9BkzllPGluKKdH1ypsrAUif7yGaq5d1nDyLhZUncU8dV/YIA7oll/fC+d0H4A37kVbM/60zXhXnKRx+DRZ2hJQzNBOodCaZpyZZEuYvtWdSCSILpa0R7yXYevjLaG5LfckOzuurXqeos7WB+l2q1c+6zx1KbNXbBl7QOz2nzk9oJU7CdhPOc+LOLppmsXRwwluKtmCDyKdrKAF/dANp5zGXFsognQcRctLSGQp8FbgBVQyZ+v81n9bPpSaBoUQMcH4uG9jPO6CWwbDSWE+FVYAm5kgjuW/1hqRSnOEV8QIDAQABo3wwejAOBgNVHQ8BAf8EBAMCBaAwCQYDVR0TBAIwADAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwHwYDVR0jBBgwFoAUaYJoBFokrORdsxOTA8sgrosMOmgwHQYDVR0OBBYEFGmCaARaJKzkXbMTkwPLIK6LDDpoMA0GCSqGSIb3DQEBCwUAA4IBAQAxL3t0kV1dq/PGUztjW+qK6Nh4sx7jsU59JtjON6zcibJ4hM+Q3Z+cEvW9zuGkuTbLz6fKNL9VnkF1LnlWTsyRmS7bF15/7iOgfdrr0vkJKVM1Zv/tqKEpBJ7Cbc0vW/VJQxZN+OlqGNc9bcx3cnqkRwpkgM25T0dVpoWtCgMwayUtbPFbTZWHHbpzHLF2BzYf5HyW1BoKXcVPM3r/rS7RETasRRsz2GqXXdfhjCd+HKVyv5kD9N3WcFNUsaq3TqAUZyOx9bO0Cn3gkmgz05JpfhPEylXwVpVAccOoXsNoFdxEKGO0w7pk7PwOhsW8sFprdXWp6OxtL0rrCNFF/llT",
        "attributes": {
          "enabled": true,
          "nbf": 1523989586,
          "exp": 1555526186,
          "created": 1523990186,
          "updated": 1523990186,
          "recoveryLevel": "Purgeable"
        },
        "policy": {
          "id": "https://rude-junior-95.vault.azure.net/certificates/testcert/policy",
          "key_props": {
            "exportable": true,
            "kty": "RSA",
            "key_size": 2048,
            "reuse_key": false
          },
          "secret_props": {
            "contentType": "application/x-pkcs12"
          },
          "x509_props": {
            "subject": "CN=example.com",
            "ekus": [
              "1.3.6.1.5.5.7.3.1",
              "1.3.6.1.5.5.7.3.2"
            ],
            "key_usage": [
              "digitalSignature",
              "keyEncipherment"
            ],
            "validity_months": 12,
            "basic_constraints": {
              "ca": false
            }
          },
          "lifetime_actions": [
            {
              "trigger": {
                "lifetime_percentage": 80
              },
              "action": {
                "action_type": "AutoRenew"
              }
            }
          ],
          "issuer": {
            "name": "Self"
          },
          "attributes": {
            "enabled": true,
            "created": 1523990175,
            "updated": 1523990175
          }
        }
      }
security: []
errorCodes: []
