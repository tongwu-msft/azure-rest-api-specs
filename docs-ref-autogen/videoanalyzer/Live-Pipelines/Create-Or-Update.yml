### YamlMime:RESTOperation
uid: management.azure.com.videoanalyzer.livepipelines.createorupdate
name: Create Or Update
service: Azure Video Analyzer
groupName: Live Pipelines
apiVersion: 2021-11-01-preview
summary: "Creates or updates a live pipeline.  \nCreates a new live pipeline or updates an existing one, with the given name."
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Media/videoAnalyzers/{accountName}/livePipelines/{livePipelineName}?api-version=2021-11-01-preview
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: The ID of the target subscription.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group. The name is case insensitive.
  types:
  - uid: string
- name: accountName
  in: path
  isRequired: true
  description: The Azure Video Analyzer account name.
  types:
  - uid: string
- name: livePipelineName
  in: path
  isRequired: true
  description: Live pipeline unique identifier.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: The API version to use for this operation.
  types:
  - uid: string
responses:
- name: 200 OK
  description: The existing live pipeline was updated.
  types:
  - uid: LivePipeline
- name: 201 Created
  description: A new live pipeline was created.
  types:
  - uid: LivePipeline
- name: Other Status Codes
  description: Detailed error information.
  types:
  - uid: ErrorResponse
requestBody:
- name: default
  parameters:
  - name: properties.topologyName
    in: body
    isRequired: true
    description: The reference to an existing pipeline topology defined for real-time content processing. When activated, this live pipeline will process content according to the pipeline topology definition.
    types:
    - uid: string
  - name: properties.description
    in: body
    description: An optional description for the pipeline.
    types:
    - uid: string
  - name: properties.bitrateKbps
    in: body
    isRequired: true
    description: Maximum bitrate capacity in Kbps reserved for the live pipeline. The allowed range is from 500 to 3000 Kbps in increments of 100 Kbps. If the RTSP camera exceeds this capacity, then the service will disconnect temporarily from the camera. It will retry to re-establish connection (with exponential backoff), checking to see if the camera bitrate is now below the reserved capacity. Doing so will ensure that one 'noisy neighbor' does not affect other live pipelines in your account.
    types:
    - uid: integer
  - name: properties.parameters
    in: body
    description: List of the instance level parameter values for the user-defined topology parameters. A pipeline can only define or override parameters values for parameters which have been declared in the referenced topology. Topology parameters without a default value must be defined. Topology parameters with a default value can be optionally be overridden.
    types:
    - uid: ParameterDefinition
      isArray: true
requestHeader: []
definitions:
- name: ParameterDefinition
  description: Defines the parameter value of an specific pipeline topology parameter. See pipeline topology parameters for more information.
  kind: object
  properties:
  - name: name
    description: Name of the parameter declared in the pipeline topology.
    types:
    - uid: string
  - name: value
    description: Parameter value to be applied on this specific pipeline.
    types:
    - uid: string
- name: systemData
  description: Metadata pertaining to creation and last modification of the resource.
  kind: object
  properties:
  - name: createdBy
    description: The identity that created the resource.
    types:
    - uid: string
  - name: createdByType
    description: The type of identity that created the resource.
    types:
    - uid: createdByType
  - name: createdAt
    description: The timestamp of resource creation (UTC).
    types:
    - uid: string
  - name: lastModifiedBy
    description: The identity that last modified the resource.
    types:
    - uid: string
  - name: lastModifiedByType
    description: The type of identity that last modified the resource.
    types:
    - uid: createdByType
  - name: lastModifiedAt
    description: The timestamp of resource last modification (UTC)
    types:
    - uid: string
- name: LivePipeline
  description: Live pipeline represents a unique instance of a live topology, used for real-time ingestion, archiving and publishing of content for a unique RTSP camera.
  kind: object
  properties:
  - name: properties.topologyName
    description: The reference to an existing pipeline topology defined for real-time content processing. When activated, this live pipeline will process content according to the pipeline topology definition.
    types:
    - uid: string
  - name: properties.description
    description: An optional description for the pipeline.
    types:
    - uid: string
  - name: properties.bitrateKbps
    description: Maximum bitrate capacity in Kbps reserved for the live pipeline. The allowed range is from 500 to 3000 Kbps in increments of 100 Kbps. If the RTSP camera exceeds this capacity, then the service will disconnect temporarily from the camera. It will retry to re-establish connection (with exponential backoff), checking to see if the camera bitrate is now below the reserved capacity. Doing so will ensure that one 'noisy neighbor' does not affect other live pipelines in your account.
    types:
    - uid: integer
  - name: properties.state
    isReadyOnly: true
    description: Current state of the pipeline (read-only).
    types:
    - uid: LivePipelineState
  - name: properties.parameters
    description: List of the instance level parameter values for the user-defined topology parameters. A pipeline can only define or override parameters values for parameters which have been declared in the referenced topology. Topology parameters without a default value must be defined. Topology parameters with a default value can be optionally be overridden.
    types:
    - uid: ParameterDefinition
      isArray: true
  - name: id
    isReadyOnly: true
    description: Fully qualified resource ID for the resource. Ex - /subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/{resourceProviderNamespace}/{resourceType}/{resourceName}
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: The name of the resource
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: The type of the resource. E.g. "Microsoft.Compute/virtualMachines" or "Microsoft.Storage/storageAccounts"
    types:
    - uid: string
  - name: systemData
    isReadyOnly: true
    description: Azure Resource Manager metadata containing createdBy and modifiedBy information.
    types:
    - uid: systemData
- name: ErrorResponse
  description: Error response
  kind: object
  properties:
  - name: error
    description: The error object.
    types:
    - uid: ErrorDetail
- name: createdByType
  description: The type of identity that created the resource.
  kind: enum
  properties:
  - name: User
    types:
    - uid: string
  - name: Application
    types:
    - uid: string
  - name: ManagedIdentity
    types:
    - uid: string
  - name: Key
    types:
    - uid: string
- name: LivePipelineState
  description: Current state of the pipeline (read-only).
  kind: enum
  properties:
  - name: Inactive
    description: The live pipeline is idle and not processing media.
    types:
    - uid: string
  - name: Activating
    description: The live pipeline is transitioning into the active state.
    types:
    - uid: string
  - name: Active
    description: The live pipeline is active and able to process media. If your data source is not available, for instance, if your RTSP camera is powered off or unreachable, the pipeline will still be active and periodically retrying the connection. Your Azure subscription will be billed for the duration in which the live pipeline is in the active state.
    types:
    - uid: string
  - name: Deactivating
    description: The live pipeline is transitioning into the inactive state.
    types:
    - uid: string
- name: ErrorDetail
  description: The error detail.
  kind: object
  properties:
  - name: code
    isReadyOnly: true
    description: The error code.
    types:
    - uid: string
  - name: message
    isReadyOnly: true
    description: The error message.
    types:
    - uid: string
  - name: target
    isReadyOnly: true
    description: The error target.
    types:
    - uid: string
  - name: details
    isReadyOnly: true
    description: The error details.
    types:
    - uid: ErrorDetail
      isArray: true
  - name: additionalInfo
    isReadyOnly: true
    description: The error additional info.
    types:
    - uid: ErrorAdditionalInfo
      isArray: true
- name: ErrorAdditionalInfo
  description: The resource management error additional info.
  kind: object
  properties:
  - name: type
    isReadyOnly: true
    description: The additional info type.
    types:
    - uid: string
  - name: info
    isReadyOnly: true
    description: The additional info.
    types:
    - uid: object
examples:
- name: Create or update a live pipeline
  request:
    uri: PUT https://management.azure.com/subscriptions/591e76c3-3e97-44db-879c-3e2b12961b62/resourceGroups/testrg/providers/Microsoft.Media/videoAnalyzers/testaccount2/livePipelines/livePipeline1?api-version=2021-11-01-preview
    body: >-
      {
        "properties": {
          "topologyName": "pipelinetopology1",
          "description": "Live Pipeline 1 Description",
          "bitrateKbps": 500,
          "parameters": [
            {
              "name": "rtspUrlParameter",
              "value": "rtsp://contoso.com/stream"
            }
          ]
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/591e76c3-3e97-44db-879c-3e2b12961b62/resourceGroups/testrg/providers/Microsoft.Media/videoAnalyzers/testaccount2/livePipelines/livePipeline1?api-version=2021-11-01-preview

      {
        "properties": {
          "topologyName": "pipelinetopology1",
          "description": "Live Pipeline 1 Description",
          "bitrateKbps": 500,
          "parameters": [
            {
              "name": "rtspUrlParameter",
              "value": "rtsp://contoso.com/stream"
            }
          ]
        }
      }

      ```

      # [Java](#tab/Java)
      ``` java
      import com.azure.resourcemanager.videoanalyzer.models.ParameterDefinition;
      import java.util.Arrays;

      /** Samples for LivePipelines CreateOrUpdate. */
      public final class Main {
          /*
           * x-ms-original-file: specification/videoanalyzer/resource-manager/Microsoft.Media/preview/2021-11-01-preview/examples/live-pipeline-create.json
           */
          /**
           * Sample code: Create or update a live pipeline.
           *
           * @param manager Entry point to VideoAnalyzerManager.
           */
          public static void createOrUpdateALivePipeline(
              com.azure.resourcemanager.videoanalyzer.VideoAnalyzerManager manager) {
              manager
                  .livePipelines()
                  .define("livePipeline1")
                  .withExistingVideoAnalyzer("testrg", "testaccount2")
                  .withTopologyName("pipelinetopology1")
                  .withDescription("Live Pipeline 1 Description")
                  .withBitrateKbps(500)
                  .withParameters(
                      Arrays
                          .asList(
                              new ParameterDefinition().withName("rtspUrlParameter").withValue("rtsp://contoso.com/stream")))
                  .create();
          }
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-java/blob/azure-resourcemanager-videoanalyzer_1.0.0-beta.5/sdk/videoanalyzer/azure-resourcemanager-videoanalyzer/README.md) on how to add the SDK to your project and authenticate.
      # [Go](#tab/Go)
      ``` go
      package armvideoanalyzer_test

      import (
      	"context"
      	"log"

      	"github.com/Azure/azure-sdk-for-go/sdk/azcore/to"
      	"github.com/Azure/azure-sdk-for-go/sdk/azidentity"
      	"github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/videoanalyzer/armvideoanalyzer"
      )

      // Generated from example definition: https://github.com/Azure/azure-rest-api-specs/tree/main/specification/videoanalyzer/resource-manager/Microsoft.Media/preview/2021-11-01-preview/examples/live-pipeline-create.json
      func ExampleLivePipelinesClient_CreateOrUpdate() {
      	cred, err := azidentity.NewDefaultAzureCredential(nil)
      	if err != nil {
      		log.Fatalf("failed to obtain a credential: %v", err)
      	}
      	ctx := context.Background()
      	client, err := armvideoanalyzer.NewLivePipelinesClient("<subscription-id>", cred, nil)
      	if err != nil {
      		log.Fatalf("failed to create client: %v", err)
      	}
      	res, err := client.CreateOrUpdate(ctx,
      		"<resource-group-name>",
      		"<account-name>",
      		"<live-pipeline-name>",
      		armvideoanalyzer.LivePipeline{
      			Properties: &armvideoanalyzer.LivePipelineProperties{
      				Description: to.Ptr("<description>"),
      				BitrateKbps: to.Ptr[int32](500),
      				Parameters: []*armvideoanalyzer.ParameterDefinition{
      					{
      						Name:  to.Ptr("<name>"),
      						Value: to.Ptr("<value>"),
      					}},
      				TopologyName: to.Ptr("<topology-name>"),
      			},
      		},
      		nil)
      	if err != nil {
      		log.Fatalf("failed to finish the request: %v", err)
      	}
      	// TODO: use response item
      	_ = res
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-go/blob/sdk%2Fresourcemanager%2Fvideoanalyzer%2Farmvideoanalyzer%2Fv0.4.2/sdk/resourcemanager/videoanalyzer/armvideoanalyzer/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "201"
    body: >-
      {
        "name": "livePipeline1",
        "id": "/subscriptions/591e76c3-3e97-44db-879c-3e2b12961b62/resourceGroups/testrg/providers/Microsoft.Media/videoAnalyzers/testaccount2/livePipelines/livePipeline1",
        "type": "Microsoft.Media/videoAnalyzers/livePipelines",
        "properties": {
          "topologyName": "pipelineTopology1",
          "description": "Live Pipeline 1 Description",
          "bitrateKbps": 500,
          "state": "Activating",
          "parameters": [
            {
              "name": "rtspUrlParameter",
              "value": "rtsp://contoso.com/stream"
            }
          ]
        },
        "systemData": {
          "createdBy": "user@microsoft.com",
          "createdByType": "User",
          "createdAt": "0001-01-01T00:00:00Z",
          "lastModifiedBy": "user@microsoft.com",
          "lastModifiedByType": "User",
          "lastModifiedAt": "0001-01-01T00:00:00Z"
        }
      }
  - statusCode: "200"
    body: >-
      {
        "name": "livePipeline1",
        "id": "/subscriptions/591e76c3-3e97-44db-879c-3e2b12961b62/resourceGroups/testrg/providers/Microsoft.Media/videoAnalyzers/testaccount2/livePipelines/livePipeline1",
        "type": "Microsoft.Media/videoAnalyzers/livePipelines",
        "properties": {
          "topologyName": "pipelineTopology1",
          "description": "Live Pipeline 1 Description",
          "bitrateKbps": 500,
          "state": "Inactive",
          "parameters": [
            {
              "name": "rtspUrlParameter",
              "value": "rtsp://contoso.com/stream"
            }
          ]
        },
        "systemData": {
          "createdBy": "user@microsoft.com",
          "createdByType": "User",
          "createdAt": "0001-01-01T00:00:00Z",
          "lastModifiedBy": "user@microsoft.com",
          "lastModifiedByType": "User",
          "lastModifiedAt": "0001-01-01T00:00:00Z"
        }
      }
security: []
metadata:
  description: "Creates or updates a live pipeline.  \nCreates a new live pipeline or updates an existing one, with the given name."
errorCodes: []
