### YamlMime:RESTOperation
uid: management.azure.com.cost-management.2022-02-01-preview.pricesheet.downloadbybillingprofile
name: Download By Billing Profile
service: Cost Management
groupName: Price Sheet
apiVersion: 2022-02-01-preview
summary: Gets a URL to download the current month's pricesheet for a billing profile. The operation is supported for billing accounts with agreement type Microsoft Partner Agreement or Microsoft Customer Agreement.Due to Azure product growth, the Azure price sheet download experience in this preview version will be updated from a single csv file to a Zip file containing multiple csv files, each with max 200k records.
consumes:
- application/json
produces:
- application/json
paths:
- content: POST https://management.azure.com/providers/Microsoft.Billing/billingAccounts/{billingAccountName}/billingProfiles/{billingProfileName}/providers/Microsoft.CostManagement/pricesheets/default/download?api-version=2022-02-01-preview
uriParameters:
- name: billingAccountName
  in: path
  isRequired: true
  description: The ID that uniquely identifies a billing account.
  types:
  - uid: string
- name: billingProfileName
  in: path
  isRequired: true
  description: The ID that uniquely identifies a billing profile.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: Version of the API to be used with the client request.
  types:
  - uid: string
responses:
- name: 202 Accepted
  headers:
  - name: Location
    value: string
  - name: Retry-After
    value: string
  - name: OData-EntityId
    value: string
  description: Accepted.
- name: 200 OK
  description: OK. The request has succeeded.
  types:
  - uid: DownloadUrl
- name: Other Status Codes
  description: Error response describing why the operation failed.
  types:
  - uid: ErrorResponse
requestHeader: []
definitions:
- name: DownloadUrl
  description: A secure URL that can be used to download a an entity until the URL expires.
  kind: object
  properties:
  - name: expiryTime
    isReadyOnly: true
    description: The time in UTC when the download URL will expire.
    types:
    - uid: string
  - name: url
    isReadyOnly: true
    description: The URL to the ZIP file. This Zip file will consists of multiple CSV files
    types:
    - uid: string
- name: ErrorResponse
  description: "Error response indicates that the service is not able to process the incoming request. The reason is provided in the error message. \n\nSome Error responses: \n\n * 429 TooManyRequests - Request is throttled. Retry after waiting for the time specified in the \"x-ms-ratelimit-microsoft.consumption-retry-after\" header. \n\n * 503 ServiceUnavailable - Service is temporarily unavailable. Retry after waiting for the time specified in the \"Retry-After\" header."
  kind: object
  properties:
  - name: error
    description: The details of the error.
    types:
    - uid: ErrorDetails
- name: ErrorDetails
  description: The details of the error.
  kind: object
  properties:
  - name: code
    isReadyOnly: true
    description: Error code.
    types:
    - uid: string
  - name: message
    isReadyOnly: true
    description: Error message indicating why the operation failed.
    types:
    - uid: string
examples:
- name: PricesheetDownloadByBillingProfile
  request:
    uri: POST https://management.azure.com/providers/Microsoft.Billing/billingAccounts/{billingAccountName}/billingProfiles/{billingProfileName}/providers/Microsoft.CostManagement/pricesheets/default/download?api-version=2022-02-01-preview
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      POST https://management.azure.com/providers/Microsoft.Billing/billingAccounts/{billingAccountName}/billingProfiles/{billingProfileName}/providers/Microsoft.CostManagement/pricesheets/default/download?api-version=2022-02-01-preview
      ```

  responses:
  - statusCode: "202"
    headers:
    - name: Location
      value: https://management.azure.com/providers/Microsoft.Billing/operationResults/45000000-0000-0000-0000-000000000000?api-version=2018-07-31
    - name: Retry-After
      value: "60"
    - name: OData-EntityId
      value: 45000000-0000-0000-0000-000000000000
  - statusCode: "200"
    body: >-
      {
        "url": "https://myaccount.blob.core.windows.net/?restype=service&comp=properties&sv=2015-04-05&ss=bf&srt=s&st=2015-04-29T22%3A18%3A26Z&se=2015-04-30T02%3A23%3A26Z&sr=b&sp=rw&spr=https&sig=G%2TEST%4B",
        "expiryTime": "2018-07-21T17:32:28Z"
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow.
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: Gets a URL to download the current month's pricesheet for a billing profile. The operation is supported for billing accounts with agreement type Microsoft Partn
errorCodes: []
