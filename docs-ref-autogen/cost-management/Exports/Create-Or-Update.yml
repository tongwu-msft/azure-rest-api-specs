### YamlMime:RESTOperation
uid: management.azure.com.cost-management.exports.createorupdate
name: Create Or Update
service: Cost Management
groupName: Exports
apiVersion: 2021-10-01
summary: The operation to create or update a export. Update operation requires latest eTag to be set in the request. You may obtain the latest eTag by performing a get operation. Create operation does not require eTag.
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://management.azure.com/{scope}/providers/Microsoft.CostManagement/exports/{exportName}?api-version=2021-10-01
uriParameters:
- name: scope
  in: path
  isRequired: true
  skipUrlEncoding: true
  description: The scope associated with export operations. This includes '/subscriptions/{subscriptionId}/' for subscription scope, '/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}' for resourceGroup scope, '/providers/Microsoft.Billing/billingAccounts/{billingAccountId}' for Billing Account scope and '/providers/Microsoft.Billing/billingAccounts/{billingAccountId}/departments/{departmentId}' for Department scope, '/providers/Microsoft.Billing/billingAccounts/{billingAccountId}/enrollmentAccounts/{enrollmentAccountId}' for EnrollmentAccount scope, '/providers/Microsoft.Management/managementGroups/{managementGroupId} for Management Group scope, '/providers/Microsoft.Billing/billingAccounts/{billingAccountId}/billingProfiles/{billingProfileId}' for billingProfile scope, '/providers/Microsoft.Billing/billingAccounts/{billingAccountId}/billingProfiles/{billingProfileId}/invoiceSections/{invoiceSectionId}' for invoiceSection scope, and '/providers/Microsoft.Billing/billingAccounts/{billingAccountId}/customers/{customerId}' specific for partners.
  types:
  - uid: string
- name: exportName
  in: path
  isRequired: true
  description: Export Name.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: Version of the API to be used with the client request.
  types:
  - uid: string
responses:
- name: 200 OK
  description: OK. The request has succeeded.
  types:
  - uid: Export
- name: 201 Created
  description: Created.
  types:
  - uid: Export
- name: Other Status Codes
  description: Error response describing why the operation failed.
  types:
  - uid: ErrorResponse
requestBody:
- name: default
  parameters:
  - name: properties.schedule
    in: body
    description: Has schedule information for the export.
    types:
    - uid: ExportSchedule
  - name: eTag
    in: body
    description: eTag of the resource. To handle concurrent update scenario, this field will be used to determine whether the user is updating the latest version or not.
    types:
    - uid: string
  - name: properties.format
    in: body
    description: The format of the export being delivered. Currently only 'Csv' is supported.
    types:
    - uid: FormatType
  - name: properties.deliveryInfo
    in: body
    isRequired: true
    description: Has delivery information for the export.
    types:
    - uid: ExportDeliveryInfo
  - name: properties.definition
    in: body
    isRequired: true
    description: Has the definition for the export.
    types:
    - uid: ExportDefinition
  - name: properties.runHistory
    in: body
    description: If requested, has the most recent execution history for the export.
    types:
    - uid: ExportExecutionListResult
  - name: properties.partitionData
    in: body
    description: 'If set to true, exported data will be partitioned by size and placed in a blob directory together with a manifest file. Note: this option is currently available only for modern commerce scopes.'
    types:
    - uid: boolean
requestHeader: []
definitions:
- name: ExportSchedule
  description: The schedule associated with the export.
  kind: object
  properties:
  - name: status
    description: The status of the export's schedule. If 'Inactive', the export's schedule is paused.
    types:
    - uid: StatusType
  - name: recurrence
    description: The schedule recurrence.
    types:
    - uid: RecurrenceType
  - name: recurrencePeriod
    description: Has start and end date of the recurrence. The start date must be in future. If present, the end date must be greater than start date.
    types:
    - uid: ExportRecurrencePeriod
- name: ExportDeliveryInfo
  description: The delivery information associated with a export.
  kind: object
  properties:
  - name: destination
    description: Has destination for the export being delivered.
    types:
    - uid: ExportDeliveryDestination
- name: ExportDefinition
  description: The definition of an export.
  kind: object
  properties:
  - name: type
    description: The type of the export. Note that 'Usage' is equivalent to 'ActualCost' and is applicable to exports that do not yet provide data for charges or amortization for service reservations.
    types:
    - uid: ExportType
  - name: timeframe
    description: The time frame for pulling data for the export. If custom, then a specific time period must be provided.
    types:
    - uid: TimeframeType
  - name: timePeriod
    description: Has time period for pulling data for the export.
    types:
    - uid: ExportTimePeriod
  - name: dataSet
    description: The definition for data in the export.
    types:
    - uid: ExportDataset
- name: ExportExecutionListResult
  description: Result of listing the execution history of an export.
  kind: object
  properties:
  - name: value
    isReadyOnly: true
    description: A list of export executions.
    types:
    - uid: ExportExecution
      isArray: true
- name: Export
  description: An export resource.
  kind: object
  properties:
  - name: properties.schedule
    description: Has schedule information for the export.
    types:
    - uid: ExportSchedule
  - name: id
    isReadyOnly: true
    description: Resource Id.
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: Resource name.
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: Resource type.
    types:
    - uid: string
  - name: eTag
    description: eTag of the resource. To handle concurrent update scenario, this field will be used to determine whether the user is updating the latest version or not.
    types:
    - uid: string
  - name: properties.format
    description: The format of the export being delivered. Currently only 'Csv' is supported.
    types:
    - uid: FormatType
  - name: properties.deliveryInfo
    description: Has delivery information for the export.
    types:
    - uid: ExportDeliveryInfo
  - name: properties.definition
    description: Has the definition for the export.
    types:
    - uid: ExportDefinition
  - name: properties.runHistory
    description: If requested, has the most recent execution history for the export.
    types:
    - uid: ExportExecutionListResult
  - name: properties.partitionData
    description: 'If set to true, exported data will be partitioned by size and placed in a blob directory together with a manifest file. Note: this option is currently available only for modern commerce scopes.'
    types:
    - uid: boolean
  - name: properties.nextRunTimeEstimate
    isReadyOnly: true
    description: If the export has an active schedule, provides an estimate of the next execution time.
    types:
    - uid: string
- name: ErrorResponse
  description: "Error response indicates that the service is not able to process the incoming request. The reason is provided in the error message. \n\nSome Error responses: \n\n * 429 TooManyRequests - Request is throttled. Retry after waiting for the time specified in the \"x-ms-ratelimit-microsoft.consumption-retry-after\" header. \n\n * 503 ServiceUnavailable - Service is temporarily unavailable. Retry after waiting for the time specified in the \"Retry-After\" header."
  kind: object
  properties:
  - name: error
    description: The details of the error.
    types:
    - uid: ErrorDetails
- name: StatusType
  description: The status of the export's schedule. If 'Inactive', the export's schedule is paused.
  kind: enum
  properties:
  - name: Active
    types:
    - uid: string
  - name: Inactive
    types:
    - uid: string
- name: RecurrenceType
  description: The schedule recurrence.
  kind: enum
  properties:
  - name: Daily
    types:
    - uid: string
  - name: Weekly
    types:
    - uid: string
  - name: Monthly
    types:
    - uid: string
  - name: Annually
    types:
    - uid: string
- name: ExportRecurrencePeriod
  description: The start and end date for recurrence schedule.
  kind: object
  properties:
  - name: from
    description: The start date of recurrence.
    types:
    - uid: string
  - name: to
    description: The end date of recurrence.
    types:
    - uid: string
- name: ExportDeliveryDestination
  description: This represents the blob storage account location where exports of costs will be delivered. There are two ways to configure the destination. The approach recommended for most customers is to specify the resourceId of the storage account. This requires a one-time registration of the account's subscription with the Microsoft.CostManagementExports resource provider in order to give Cost Management services access to the storage. When creating an export in the Azure portal this registration is performed automatically but API users may need to register the subscription explicitly (for more information see https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-manager-supported-services ). Another way to configure the destination is available ONLY to Partners with a Microsoft Partner Agreement plan who are global admins of their billing account. These Partners, instead of specifying the resourceId of a storage account, can specify the storage account name along with a SAS token for the account. This allows exports of costs to a storage account in any tenant. The SAS token should be created for the blob service with Service/Container/Object resource types and with Read/Write/Delete/List/Add/Create permissions (for more information see https://docs.microsoft.com/en-us/azure/cost-management-billing/costs/export-cost-data-storage-account-sas-key ).
  kind: object
  properties:
  - name: resourceId
    description: The resource id of the storage account where exports will be delivered. This is not required if a sasToken and storageAccount are specified.
    types:
    - uid: string
  - name: container
    description: The name of the container where exports will be uploaded. If the container does not exist it will be created.
    types:
    - uid: string
  - name: rootFolderPath
    description: The name of the directory where exports will be uploaded.
    types:
    - uid: string
  - name: sasToken
    description: 'A SAS token for the storage account. For a restricted set of Azure customers this together with storageAccount can be specified instead of resourceId. Note: the value returned by the API for this property will always be obfuscated. Returning this same obfuscated value will not result in the SAS token being updated. To update this value a new SAS token must be specified.'
    types:
    - uid: string
  - name: storageAccount
    description: The storage account where exports will be uploaded. For a restricted set of Azure customers this together with sasToken can be specified instead of resourceId.
    types:
    - uid: string
- name: ExportType
  description: The type of the export. Note that 'Usage' is equivalent to 'ActualCost' and is applicable to exports that do not yet provide data for charges or amortization for service reservations.
  kind: enum
  properties:
  - name: Usage
    types:
    - uid: string
  - name: ActualCost
    types:
    - uid: string
  - name: AmortizedCost
    types:
    - uid: string
- name: TimeframeType
  description: The time frame for pulling data for the export. If custom, then a specific time period must be provided.
  kind: enum
  properties:
  - name: MonthToDate
    types:
    - uid: string
  - name: BillingMonthToDate
    types:
    - uid: string
  - name: TheLastMonth
    types:
    - uid: string
  - name: TheLastBillingMonth
    types:
    - uid: string
  - name: WeekToDate
    types:
    - uid: string
  - name: Custom
    types:
    - uid: string
- name: ExportTimePeriod
  description: The date range for data in the export. This should only be specified with timeFrame set to 'Custom'. The maximum date range is 3 months.
  kind: object
  properties:
  - name: from
    description: The start date for export data.
    types:
    - uid: string
  - name: to
    description: The end date for export data.
    types:
    - uid: string
- name: ExportDataset
  description: The definition for data in the export.
  kind: object
  properties:
  - name: granularity
    description: The granularity of rows in the export. Currently only 'Daily' is supported.
    types:
    - uid: GranularityType
  - name: configuration
    description: The export dataset configuration.
    types:
    - uid: ExportDatasetConfiguration
- name: ExportExecution
  description: An export execution.
  kind: object
  properties:
  - name: properties.executionType
    description: The type of the export execution.
    types:
    - uid: ExecutionType
  - name: properties.status
    description: The last known status of the export execution.
    types:
    - uid: ExecutionStatus
  - name: properties.submittedBy
    description: The identifier for the entity that executed the export. For OnDemand executions it is the user email. For scheduled executions it is 'System'.
    types:
    - uid: string
  - name: properties.submittedTime
    description: The time when export was queued to be executed.
    types:
    - uid: string
  - name: properties.processingStartTime
    description: The time when export was picked up to be executed.
    types:
    - uid: string
  - name: properties.processingEndTime
    description: The time when the export execution finished.
    types:
    - uid: string
  - name: properties.fileName
    description: The name of the exported file.
    types:
    - uid: string
  - name: properties.runSettings
    description: The export settings that were in effect for this execution.
    types:
    - uid: CommonExportProperties
  - name: properties.error
    description: The details of any error.
    types:
    - uid: ErrorDetails
  - name: id
    isReadyOnly: true
    description: Resource Id.
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: Resource name.
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: Resource type.
    types:
    - uid: string
  - name: eTag
    description: eTag of the resource. To handle concurrent update scenario, this field will be used to determine whether the user is updating the latest version or not.
    types:
    - uid: string
- name: FormatType
  description: The format of the export being delivered. Currently only 'Csv' is supported.
  kind: enum
  properties:
  - name: Csv
    types:
    - uid: string
- name: ErrorDetails
  description: The details of the error.
  kind: object
  properties:
  - name: code
    isReadyOnly: true
    description: Error code.
    types:
    - uid: string
  - name: message
    isReadyOnly: true
    description: Error message indicating why the operation failed.
    types:
    - uid: string
- name: GranularityType
  description: The granularity of rows in the export. Currently only 'Daily' is supported.
  kind: enum
  properties:
  - name: Daily
    types:
    - uid: string
- name: ExportDatasetConfiguration
  description: The export dataset configuration. Allows columns to be selected for the export. If not provided then the export will include all available columns.
  kind: object
  properties:
  - name: columns
    description: Array of column names to be included in the export. If not provided then the export will include all available columns. The available columns can vary by customer channel (see examples).
    types:
    - uid: string
      isArray: true
- name: ExecutionType
  description: The type of the export execution.
  kind: enum
  properties:
  - name: OnDemand
    types:
    - uid: string
  - name: Scheduled
    types:
    - uid: string
- name: ExecutionStatus
  description: The last known status of the export execution.
  kind: enum
  properties:
  - name: Queued
    types:
    - uid: string
  - name: InProgress
    types:
    - uid: string
  - name: Completed
    types:
    - uid: string
  - name: Failed
    types:
    - uid: string
  - name: Timeout
    types:
    - uid: string
  - name: NewDataNotAvailable
    types:
    - uid: string
  - name: DataNotAvailable
    types:
    - uid: string
- name: CommonExportProperties
  description: The common properties of the export.
  kind: object
  properties:
  - name: format
    description: The format of the export being delivered. Currently only 'Csv' is supported.
    types:
    - uid: FormatType
  - name: deliveryInfo
    description: Has delivery information for the export.
    types:
    - uid: ExportDeliveryInfo
  - name: definition
    description: Has the definition for the export.
    types:
    - uid: ExportDefinition
  - name: runHistory
    description: If requested, has the most recent execution history for the export.
    types:
    - uid: ExportExecutionListResult
  - name: partitionData
    description: 'If set to true, exported data will be partitioned by size and placed in a blob directory together with a manifest file. Note: this option is currently available only for modern commerce scopes.'
    types:
    - uid: boolean
  - name: nextRunTimeEstimate
    isReadyOnly: true
    description: If the export has an active schedule, provides an estimate of the next execution time.
    types:
    - uid: string
examples:
- name: ExportCreateOrUpdateBySubscription
  request:
    uri: PUT https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.CostManagement/exports/TestExport?api-version=2021-10-01
    body: >-
      {
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2020-06-01T00:00:00Z",
              "to": "2020-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "ActualCost",
            "timeframe": "MonthToDate",
            "dataSet": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "ResourceId",
                  "ResourceLocation",
                  "Quantity"
                ]
              }
            }
          }
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.CostManagement/exports/TestExport?api-version=2021-10-01

      {
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2020-06-01T00:00:00Z",
              "to": "2020-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "ActualCost",
            "timeframe": "MonthToDate",
            "dataSet": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "ResourceId",
                  "ResourceLocation",
                  "Quantity"
                ]
              }
            }
          }
        }
      }

      ```

  responses:
  - statusCode: "201"
    body: >-
      {
        "id": "subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.CostManagement/exports/TestExport",
        "name": "TestExport",
        "type": "Microsoft.CostManagement/exports",
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2020-06-01T00:00:00Z",
              "to": "2020-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "ActualCost",
            "timeframe": "MonthToDate",
            "dataSet": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "ResourceId",
                  "ResourceLocation",
                  "Quantity"
                ]
              }
            }
          }
        }
      }
  - statusCode: "200"
    body: >-
      {
        "id": "subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.CostManagement/exports/TestExport",
        "name": "TestExport",
        "type": "Microsoft.CostManagement/exports",
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2020-06-01T00:00:00Z",
              "to": "2020-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "ActualCost",
            "timeframe": "MonthToDate",
            "dataSet": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "ResourceId",
                  "ResourceLocation",
                  "Quantity"
                ]
              }
            }
          }
        }
      }
- name: ExportCreateOrUpdateByResourceGroup
  request:
    uri: PUT https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.CostManagement/exports/TestExport?api-version=2021-10-01
    body: >-
      {
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2020-06-01T00:00:00Z",
              "to": "2020-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "ActualCost",
            "timeframe": "MonthToDate",
            "dataSet": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "ResourceId",
                  "ResourceLocation",
                  "Quantity"
                ]
              }
            }
          }
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.CostManagement/exports/TestExport?api-version=2021-10-01

      {
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2020-06-01T00:00:00Z",
              "to": "2020-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "ActualCost",
            "timeframe": "MonthToDate",
            "dataSet": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "ResourceId",
                  "ResourceLocation",
                  "Quantity"
                ]
              }
            }
          }
        }
      }

      ```

  responses:
  - statusCode: "201"
    body: >-
      {
        "id": "subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.CostManagement/exports/TestExport",
        "name": "TestExport",
        "type": "Microsoft.CostManagement/exports",
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2020-06-01T00:00:00Z",
              "to": "2020-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "ActualCost",
            "timeframe": "MonthToDate",
            "dataSet": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "ResourceId",
                  "ResourceLocation",
                  "Quantity"
                ]
              }
            }
          }
        }
      }
  - statusCode: "200"
    body: >-
      {
        "id": "subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.CostManagement/exports/TestExport",
        "name": "TestExport",
        "type": "Microsoft.CostManagement/exports",
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2020-06-01T00:00:00Z",
              "to": "2020-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "ActualCost",
            "timeframe": "MonthToDate",
            "dataSet": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "ResourceId",
                  "ResourceLocation",
                  "Quantity"
                ]
              }
            }
          }
        }
      }
- name: ExportCreateOrUpdateByBillingAccount
  request:
    uri: PUT https://management.azure.com/providers/Microsoft.Billing/billingAccounts/123456/providers/Microsoft.CostManagement/exports/TestExport?api-version=2021-10-01
    body: >-
      {
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2020-06-01T00:00:00Z",
              "to": "2020-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "ActualCost",
            "timeframe": "MonthToDate",
            "dataSet": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "ResourceId",
                  "ResourceLocation",
                  "Quantity"
                ]
              }
            }
          }
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/providers/Microsoft.Billing/billingAccounts/123456/providers/Microsoft.CostManagement/exports/TestExport?api-version=2021-10-01

      {
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2020-06-01T00:00:00Z",
              "to": "2020-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "ActualCost",
            "timeframe": "MonthToDate",
            "dataSet": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "ResourceId",
                  "ResourceLocation",
                  "Quantity"
                ]
              }
            }
          }
        }
      }

      ```

      # [Go](#tab/Go)
      ``` go
      package armcostmanagement_test

      import (
      	"context"
      	"log"

      	"time"

      	"github.com/Azure/azure-sdk-for-go/sdk/azcore/to"
      	"github.com/Azure/azure-sdk-for-go/sdk/azidentity"
      	"github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/costmanagement/armcostmanagement"
      )

      // Generated from example definition: https://github.com/Azure/azure-rest-api-specs/tree/main/specification/cost-management/resource-manager/Microsoft.CostManagement/stable/2021-10-01/examples/ExportCreateOrUpdateByBillingAccount.json
      func ExampleExportsClient_CreateOrUpdate() {
      	cred, err := azidentity.NewDefaultAzureCredential(nil)
      	if err != nil {
      		log.Fatalf("failed to obtain a credential: %v", err)
      	}
      	ctx := context.Background()
      	client, err := armcostmanagement.NewExportsClient(cred, nil)
      	if err != nil {
      		log.Fatalf("failed to create client: %v", err)
      	}
      	res, err := client.CreateOrUpdate(ctx,
      		"providers/Microsoft.Billing/billingAccounts/123456",
      		"TestExport",
      		armcostmanagement.Export{
      			Properties: &armcostmanagement.ExportProperties{
      				Format: to.Ptr(armcostmanagement.FormatTypeCSV),
      				Definition: &armcostmanagement.ExportDefinition{
      					Type: to.Ptr(armcostmanagement.ExportTypeActualCost),
      					DataSet: &armcostmanagement.ExportDataset{
      						Configuration: &armcostmanagement.ExportDatasetConfiguration{
      							Columns: []*string{
      								to.Ptr("Date"),
      								to.Ptr("MeterId"),
      								to.Ptr("ResourceId"),
      								to.Ptr("ResourceLocation"),
      								to.Ptr("Quantity")},
      						},
      						Granularity: to.Ptr(armcostmanagement.GranularityTypeDaily),
      					},
      					Timeframe: to.Ptr(armcostmanagement.TimeframeTypeMonthToDate),
      				},
      				DeliveryInfo: &armcostmanagement.ExportDeliveryInfo{
      					Destination: &armcostmanagement.ExportDeliveryDestination{
      						Container:      to.Ptr("exports"),
      						ResourceID:     to.Ptr("/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182"),
      						RootFolderPath: to.Ptr("ad-hoc"),
      					},
      				},
      				Schedule: &armcostmanagement.ExportSchedule{
      					Recurrence: to.Ptr(armcostmanagement.RecurrenceTypeWeekly),
      					RecurrencePeriod: &armcostmanagement.ExportRecurrencePeriod{
      						From: to.Ptr(func() time.Time { t, _ := time.Parse(time.RFC3339Nano, "2020-06-01T00:00:00Z"); return t }()),
      						To:   to.Ptr(func() time.Time { t, _ := time.Parse(time.RFC3339Nano, "2020-10-31T00:00:00Z"); return t }()),
      					},
      					Status: to.Ptr(armcostmanagement.StatusTypeActive),
      				},
      			},
      		},
      		nil)
      	if err != nil {
      		log.Fatalf("failed to finish the request: %v", err)
      	}
      	// TODO: use response item
      	_ = res
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-go/blob/sdk%2Fresourcemanager%2Fcostmanagement%2Farmcostmanagement%2Fv1.0.0/sdk/resourcemanager/costmanagement/armcostmanagement/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "201"
    body: >-
      {
        "id": "providers/Microsoft.Billing/billingAccounts/123456/providers/Microsoft.CostManagement/exports/TestExport",
        "name": "TestExport",
        "type": "Microsoft.CostManagement/exports",
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2020-06-01T00:00:00Z",
              "to": "2020-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "ActualCost",
            "timeframe": "MonthToDate",
            "dataSet": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "ResourceId",
                  "ResourceLocation",
                  "Quantity"
                ]
              }
            }
          }
        }
      }
  - statusCode: "200"
    body: >-
      {
        "id": "providers/Microsoft.Billing/billingAccounts/123456/providers/Microsoft.CostManagement/exports/TestExport",
        "name": "TestExport",
        "type": "Microsoft.CostManagement/exports",
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2020-06-01T00:00:00Z",
              "to": "2020-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "ActualCost",
            "timeframe": "MonthToDate",
            "dataSet": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "ResourceId",
                  "ResourceLocation",
                  "Quantity"
                ]
              }
            }
          }
        }
      }
- name: ExportCreateOrUpdateByDepartment
  request:
    uri: PUT https://management.azure.com/providers/Microsoft.Billing/billingAccounts/12/departments/1234/providers/Microsoft.CostManagement/exports/TestExport?api-version=2021-10-01
    body: >-
      {
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2020-06-01T00:00:00Z",
              "to": "2020-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "ActualCost",
            "timeframe": "MonthToDate",
            "dataSet": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "ResourceId",
                  "ResourceLocation",
                  "Quantity"
                ]
              }
            }
          }
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/providers/Microsoft.Billing/billingAccounts/12/departments/1234/providers/Microsoft.CostManagement/exports/TestExport?api-version=2021-10-01

      {
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2020-06-01T00:00:00Z",
              "to": "2020-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "ActualCost",
            "timeframe": "MonthToDate",
            "dataSet": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "ResourceId",
                  "ResourceLocation",
                  "Quantity"
                ]
              }
            }
          }
        }
      }

      ```

  responses:
  - statusCode: "201"
    body: >-
      {
        "id": "providers/Microsoft.Billing/billingAccounts/12/departments/1234/providers/Microsoft.CostManagement/exports/TestExport",
        "name": "TestExport",
        "type": "Microsoft.CostManagement/exports",
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2020-06-01T00:00:00Z",
              "to": "2020-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "ActualCost",
            "timeframe": "MonthToDate",
            "dataSet": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "ResourceId",
                  "ResourceLocation",
                  "Quantity"
                ]
              }
            }
          }
        }
      }
  - statusCode: "200"
    body: >-
      {
        "id": "providers/Microsoft.Billing/billingAccounts/12/departments/1234/providers/Microsoft.CostManagement/exports/TestExport",
        "name": "TestExport",
        "type": "Microsoft.CostManagement/exports",
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2020-06-01T00:00:00Z",
              "to": "2020-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "ActualCost",
            "timeframe": "MonthToDate",
            "dataSet": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "ResourceId",
                  "ResourceLocation",
                  "Quantity"
                ]
              }
            }
          }
        }
      }
- name: ExportCreateOrUpdateByEnrollmentAccount
  request:
    uri: PUT https://management.azure.com/providers/Microsoft.Billing/billingAccounts/100/enrollmentAccounts/456/providers/Microsoft.CostManagement/exports/TestExport?api-version=2021-10-01
    body: >-
      {
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2020-06-01T00:00:00Z",
              "to": "2020-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "ActualCost",
            "timeframe": "MonthToDate",
            "dataSet": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "ResourceId",
                  "ResourceLocation",
                  "Quantity"
                ]
              }
            }
          }
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/providers/Microsoft.Billing/billingAccounts/100/enrollmentAccounts/456/providers/Microsoft.CostManagement/exports/TestExport?api-version=2021-10-01

      {
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2020-06-01T00:00:00Z",
              "to": "2020-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "ActualCost",
            "timeframe": "MonthToDate",
            "dataSet": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "ResourceId",
                  "ResourceLocation",
                  "Quantity"
                ]
              }
            }
          }
        }
      }

      ```

  responses:
  - statusCode: "201"
    body: >-
      {
        "id": "providers/Microsoft.Billing/billingAccounts/100/enrollmentAccounts/456/providers/Microsoft.CostManagement/exports/TestExport",
        "name": "TestExport",
        "type": "Microsoft.CostManagement/exports",
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2020-06-01T00:00:00Z",
              "to": "2020-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "ActualCost",
            "timeframe": "MonthToDate",
            "dataSet": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "ResourceId",
                  "ResourceLocation",
                  "Quantity"
                ]
              }
            }
          }
        }
      }
  - statusCode: "200"
    body: >-
      {
        "id": "providers/Microsoft.Billing/billingAccounts/100/enrollmentAccounts/456/providers/Microsoft.CostManagement/exports/TestExport",
        "name": "TestExport",
        "type": "Microsoft.CostManagement/exports",
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2020-06-01T00:00:00Z",
              "to": "2020-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "ActualCost",
            "timeframe": "MonthToDate",
            "dataSet": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "ResourceId",
                  "ResourceLocation",
                  "Quantity"
                ]
              }
            }
          }
        }
      }
- name: ExportCreateOrUpdateByManagementGroup
  request:
    uri: PUT https://management.azure.com/providers/Microsoft.Management/managementGroups/TestMG/providers/Microsoft.CostManagement/exports/TestExport?api-version=2021-10-01
    body: >-
      {
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2020-06-01T00:00:00Z",
              "to": "2020-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "ActualCost",
            "timeframe": "MonthToDate",
            "dataSet": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "ResourceId",
                  "ResourceLocation",
                  "Quantity"
                ]
              }
            }
          }
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/providers/Microsoft.Management/managementGroups/TestMG/providers/Microsoft.CostManagement/exports/TestExport?api-version=2021-10-01

      {
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2020-06-01T00:00:00Z",
              "to": "2020-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "ActualCost",
            "timeframe": "MonthToDate",
            "dataSet": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "ResourceId",
                  "ResourceLocation",
                  "Quantity"
                ]
              }
            }
          }
        }
      }

      ```

  responses:
  - statusCode: "201"
    body: >-
      {
        "id": "providers/Microsoft.Management/managementGroups/TestMG/providers/Microsoft.CostManagement/exports/TestExport",
        "name": "TestExport",
        "type": "Microsoft.CostManagement/exports",
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2020-06-01T00:00:00Z",
              "to": "2020-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "ActualCost",
            "timeframe": "MonthToDate",
            "dataSet": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "ResourceId",
                  "ResourceLocation",
                  "Quantity"
                ]
              }
            }
          }
        }
      }
  - statusCode: "200"
    body: >-
      {
        "id": "providers/Microsoft.Management/managementGroups/TestMG/providers/Microsoft.CostManagement/exports/TestExport",
        "name": "TestExport",
        "type": "Microsoft.CostManagement/exports",
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2020-06-01T00:00:00Z",
              "to": "2020-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "ActualCost",
            "timeframe": "MonthToDate",
            "dataSet": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "ResourceId",
                  "ResourceLocation",
                  "Quantity"
                ]
              }
            }
          }
        }
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow.
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: The operation to create or update a export. Update operation requires latest eTag to be set in the request.
errorCodes: []
