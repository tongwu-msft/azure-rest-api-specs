### YamlMime:RESTOperation
uid: management.azure.com.cost-management.exports.createorupdate
name: Create Or Update
service: Cost Management
groupName: Exports
apiVersion: 2019-11-01
summary: The operation to create or update a export. Update operation requires latest eTag to be set in the request. You may obtain the latest eTag by performing a get operation. Create operation does not require eTag.
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://management.azure.com/{scope}/providers/Microsoft.CostManagement/exports/{exportName}?api-version=2019-11-01
uriParameters:
- name: scope
  in: path
  isRequired: true
  skipUrlEncoding: true
  description: The scope associated with query and export operations. This includes '/subscriptions/{subscriptionId}/' for subscription scope, '/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}' for resourceGroup scope, '/providers/Microsoft.Billing/billingAccounts/{billingAccountId}' for Billing Account scope and '/providers/Microsoft.Billing/billingAccounts/{billingAccountId}/departments/{departmentId}' for Department scope, '/providers/Microsoft.Billing/billingAccounts/{billingAccountId}/enrollmentAccounts/{enrollmentAccountId}' for EnrollmentAccount scope, '/providers/Microsoft.Management/managementGroups/{managementGroupId} for Management Group scope, '/providers/Microsoft.Billing/billingAccounts/{billingAccountId}/billingProfiles/{billingProfileId}' for billingProfile scope, '/providers/Microsoft.Billing/billingAccounts/{billingAccountId}/billingProfiles/{billingProfileId}/invoiceSections/{invoiceSectionId}' for invoiceSection scope, and '/providers/Microsoft.Billing/billingAccounts/{billingAccountId}/customers/{customerId}' specific for partners.
  types:
  - uid: string
- name: exportName
  in: path
  isRequired: true
  description: Export Name.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: Version of the API to be used with the client request. The current version is 2019-11-01.
  types:
  - uid: string
responses:
- name: 200 OK
  description: OK. The request has succeeded.
  types:
  - uid: Export
- name: 201 Created
  description: Created.
  types:
  - uid: Export
- name: Other Status Codes
  description: Error response describing why the operation failed.
  types:
  - uid: ErrorResponse
requestBody:
- name: default
  parameters:
  - name: properties.schedule
    in: body
    description: Has schedule information for the export.
    types:
    - uid: ExportSchedule
  - name: properties.format
    in: body
    description: The format of the export being delivered.
    types:
    - uid: FormatType
  - name: properties.deliveryInfo
    in: body
    isRequired: true
    description: Has delivery information for the export.
    types:
    - uid: ExportDeliveryInfo
  - name: properties.definition
    in: body
    isRequired: true
    description: Has definition for the export.
    types:
    - uid: QueryDefinition
requestHeader: []
definitions:
- name: ExportSchedule
  description: The schedule associated with a export.
  kind: object
  properties:
  - name: status
    description: The status of the schedule. Whether active or not. If inactive, the export's scheduled execution is paused.
    types:
    - uid: StatusType
  - name: recurrence
    description: The schedule recurrence.
    types:
    - uid: RecurrenceType
  - name: recurrencePeriod
    description: Has start and end date of the recurrence. The start date must be in future. If present, the end date must be greater than start date.
    types:
    - uid: ExportRecurrencePeriod
- name: ExportDeliveryInfo
  description: The delivery information associated with a export.
  kind: object
  properties:
  - name: destination
    description: Has destination for the export being delivered.
    types:
    - uid: ExportDeliveryDestination
- name: QueryDefinition
  description: The definition of a query.
  kind: object
  properties:
  - name: type
    description: The type of the query.
    types:
    - uid: ExportType
  - name: timeframe
    description: The time frame for pulling data for the query. If custom, then a specific time period must be provided.
    types:
    - uid: TimeframeType
  - name: timePeriod
    description: Has time period for pulling data for the query.
    types:
    - uid: QueryTimePeriod
  - name: dataset
    description: Has definition for data in this query.
    types:
    - uid: QueryDataset
- name: Export
  description: A export resource.
  kind: object
  properties:
  - name: properties.schedule
    description: Has schedule information for the export.
    types:
    - uid: ExportSchedule
  - name: id
    isReadyOnly: true
    description: Resource Id.
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: Resource name.
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: Resource type.
    types:
    - uid: string
  - name: tags
    isReadyOnly: true
    description: Resource tags.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: properties.format
    description: The format of the export being delivered.
    types:
    - uid: FormatType
  - name: properties.deliveryInfo
    description: Has delivery information for the export.
    types:
    - uid: ExportDeliveryInfo
  - name: properties.definition
    description: Has definition for the export.
    types:
    - uid: QueryDefinition
- name: ErrorResponse
  description: "Error response indicates that the service is not able to process the incoming request. The reason is provided in the error message. \n\nSome Error responses: \n\n * 429 TooManyRequests - Request is throttled. Retry after waiting for the time specified in the \"x-ms-ratelimit-microsoft.consumption-retry-after\" header. \n\n * 503 ServiceUnavailable - Service is temporarily unavailable. Retry after waiting for the time specified in the \"Retry-After\" header."
  kind: object
  properties:
  - name: error
    description: The details of the error.
    types:
    - uid: ErrorDetails
- name: StatusType
  description: The status of the schedule. Whether active or not. If inactive, the export's scheduled execution is paused.
  kind: enum
  properties:
  - name: Active
    types:
    - uid: string
  - name: Inactive
    types:
    - uid: string
- name: RecurrenceType
  description: The schedule recurrence.
  kind: enum
  properties:
  - name: Daily
    types:
    - uid: string
  - name: Weekly
    types:
    - uid: string
  - name: Monthly
    types:
    - uid: string
  - name: Annually
    types:
    - uid: string
- name: ExportRecurrencePeriod
  description: The start and end date for recurrence schedule.
  kind: object
  properties:
  - name: from
    description: The start date of recurrence.
    types:
    - uid: string
  - name: to
    description: The end date of recurrence.
    types:
    - uid: string
- name: ExportDeliveryDestination
  description: The destination information for the delivery of the export. To allow access to a storage account, you must register the account's subscription with the Microsoft.CostManagementExports resource provider. This is required once per subscription. When creating an export in the Azure portal, it is done automatically, however API users need to register the subscription. For more information see https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-manager-supported-services .
  kind: object
  properties:
  - name: resourceId
    description: The resource id of the storage account where exports will be delivered.
    types:
    - uid: string
  - name: container
    description: The name of the container where exports will be uploaded.
    types:
    - uid: string
  - name: rootFolderPath
    description: The name of the directory where exports will be uploaded.
    types:
    - uid: string
- name: ExportType
  description: The type of the query.
  kind: enum
  properties:
  - name: Usage
    types:
    - uid: string
  - name: ActualCost
    types:
    - uid: string
  - name: AmortizedCost
    types:
    - uid: string
- name: TimeframeType
  description: The time frame for pulling data for the query. If custom, then a specific time period must be provided.
  kind: enum
  properties:
  - name: MonthToDate
    types:
    - uid: string
  - name: BillingMonthToDate
    types:
    - uid: string
  - name: TheLastMonth
    types:
    - uid: string
  - name: TheLastBillingMonth
    types:
    - uid: string
  - name: WeekToDate
    types:
    - uid: string
  - name: Custom
    types:
    - uid: string
- name: QueryTimePeriod
  description: The start and end date for pulling data for the query.
  kind: object
  properties:
  - name: from
    description: The start date to pull data from.
    types:
    - uid: string
  - name: to
    description: The end date to pull data to.
    types:
    - uid: string
- name: QueryDataset
  description: The definition of data present in the query.
  kind: object
  properties:
  - name: granularity
    description: The granularity of rows in the query.
    types:
    - uid: GranularityType
  - name: configuration
    description: Has configuration information for the data in the export. The configuration will be ignored if aggregation and grouping are provided.
    types:
    - uid: QueryDatasetConfiguration
  - name: aggregation
    description: Dictionary of aggregation expression to use in the query. The key of each item in the dictionary is the alias for the aggregated column. Query can have up to 2 aggregation clauses.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: QueryAggregation
  - name: grouping
    description: Array of group by expression to use in the query. Query can have up to 2 group by clauses.
    types:
    - uid: QueryGrouping
      isArray: true
  - name: filter
    description: Has filter expression to use in the query.
    types:
    - uid: QueryFilter
- name: FormatType
  description: The format of the export being delivered.
  kind: enum
  properties:
  - name: Csv
    types:
    - uid: string
- name: ErrorDetails
  description: The details of the error.
  kind: object
  properties:
  - name: code
    isReadyOnly: true
    description: Error code.
    types:
    - uid: string
  - name: message
    isReadyOnly: true
    description: Error message indicating why the operation failed.
    types:
    - uid: string
- name: GranularityType
  description: The granularity of rows in the query.
  kind: enum
  properties:
  - name: Daily
    types:
    - uid: string
- name: QueryDatasetConfiguration
  description: The configuration of dataset in the query.
  kind: object
  properties:
  - name: columns
    description: Array of column names to be included in the query. Any valid query column name is allowed. If not provided, then query includes all columns.
    types:
    - uid: string
      isArray: true
- name: QueryAggregation
  description: The aggregation expression to be used in the query.
  kind: object
  properties:
  - name: name
    description: The name of the column to aggregate.
    types:
    - uid: string
  - name: function
    description: The name of the aggregation function to use.
    types:
    - uid: FunctionType
- name: QueryGrouping
  description: The group by expression to be used in the query.
  kind: object
  properties:
  - name: type
    description: Has type of the column to group.
    types:
    - uid: QueryColumnType
  - name: name
    description: The name of the column to group.
    types:
    - uid: string
- name: QueryFilter
  description: The filter expression to be used in the export.
  kind: object
  properties:
  - name: and
    description: The logical "AND" expression. Must have at least 2 items.
    types:
    - uid: QueryFilter
      isArray: true
  - name: or
    description: The logical "OR" expression. Must have at least 2 items.
    types:
    - uid: QueryFilter
      isArray: true
  - name: not
    description: The logical "NOT" expression.
    types:
    - uid: QueryFilter
  - name: dimension
    description: Has comparison expression for a dimension
    types:
    - uid: QueryComparisonExpression
  - name: tag
    description: Has comparison expression for a tag
    types:
    - uid: QueryComparisonExpression
- name: FunctionType
  description: The name of the aggregation function to use.
  kind: enum
  properties:
  - name: Sum
    types:
    - uid: string
- name: QueryColumnType
  description: The type of the column in the export.
  kind: enum
  properties:
  - name: Tag
    types:
    - uid: string
  - name: Dimension
    types:
    - uid: string
- name: QueryComparisonExpression
  description: The comparison expression to be used in the query.
  kind: object
  properties:
  - name: name
    description: The name of the column to use in comparison.
    types:
    - uid: string
  - name: operator
    description: The operator to use for comparison.
    types:
    - uid: OperatorType
  - name: values
    description: Array of values to use for comparison
    types:
    - uid: string
      isArray: true
- name: OperatorType
  description: The operator to use for comparison.
  kind: enum
  properties:
  - name: In
    types:
    - uid: string
examples:
- name: SubscriptionCreateOrUpdateExport
  request:
    uri: PUT https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.CostManagement/exports/TestExport?api-version=2019-11-01
    body: >-
      {
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2018-06-01T00:00:00Z",
              "to": "2018-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "Usage",
            "timeframe": "MonthToDate",
            "dataset": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "InstanceId",
                  "ResourceLocation",
                  "PreTaxCost"
                ]
              },
              "aggregation": {
                "costSum": {
                  "name": "PreTaxCost",
                  "function": "Sum"
                }
              },
              "grouping": [
                {
                  "type": "Dimension",
                  "name": "SubscriptionName"
                },
                {
                  "type": "Tag",
                  "name": "Environment"
                }
              ],
              "filter": {
                "and": [
                  {
                    "or": [
                      {
                        "dimension": {
                          "name": "ResourceLocation",
                          "operator": "In",
                          "values": [
                            "East US",
                            "West Europe"
                          ]
                        }
                      },
                      {
                        "tag": {
                          "name": "Environment",
                          "operator": "In",
                          "values": [
                            "UAT",
                            "Prod"
                          ]
                        }
                      }
                    ]
                  },
                  {
                    "dimension": {
                      "name": "ResourceGroup",
                      "operator": "In",
                      "values": [
                        "API"
                      ]
                    }
                  }
                ]
              }
            }
          }
        }
      }
  responses:
  - statusCode: "201"
    body: >-
      {
        "id": "subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.CostManagement/exports/TestExport",
        "name": "TestExport",
        "type": "Microsoft.CostManagement/exports",
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2018-06-01T00:00:00Z",
              "to": "2018-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "Usage",
            "timeframe": "MonthToDate",
            "dataset": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "InstanceId",
                  "ResourceLocation",
                  "PreTaxCost"
                ]
              },
              "aggregation": {
                "costSum": {
                  "name": "PreTaxCost",
                  "function": "Sum"
                }
              },
              "grouping": [
                {
                  "type": "Dimension",
                  "name": "SubscriptionName"
                },
                {
                  "type": "Tag",
                  "name": "Environment"
                }
              ],
              "filter": {
                "and": [
                  {
                    "or": [
                      {
                        "dimension": {
                          "name": "ResourceLocation",
                          "operator": "In",
                          "values": [
                            "East US",
                            "West Europe"
                          ]
                        }
                      },
                      {
                        "tag": {
                          "name": "Environment",
                          "operator": "In",
                          "values": [
                            "UAT",
                            "Prod"
                          ]
                        }
                      }
                    ]
                  },
                  {
                    "dimension": {
                      "name": "ResourceGroup",
                      "operator": "In",
                      "values": [
                        "API"
                      ]
                    }
                  }
                ]
              }
            }
          }
        }
      }
  - statusCode: "200"
    body: >-
      {
        "id": "subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.CostManagement/exports/TestExport",
        "name": "TestExport",
        "type": "Microsoft.CostManagement/exports",
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2018-06-01T00:00:00Z",
              "to": "2018-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "Usage",
            "timeframe": "MonthToDate",
            "dataset": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "InstanceId",
                  "ResourceLocation",
                  "PreTaxCost"
                ]
              },
              "aggregation": {
                "costSum": {
                  "name": "PreTaxCost",
                  "function": "Sum"
                }
              },
              "grouping": [
                {
                  "type": "Dimension",
                  "name": "SubscriptionName"
                },
                {
                  "type": "Tag",
                  "name": "Environment"
                }
              ],
              "filter": {
                "and": [
                  {
                    "or": [
                      {
                        "dimension": {
                          "name": "ResourceLocation",
                          "operator": "In",
                          "values": [
                            "East US",
                            "West Europe"
                          ]
                        }
                      },
                      {
                        "tag": {
                          "name": "Environment",
                          "operator": "In",
                          "values": [
                            "UAT",
                            "Prod"
                          ]
                        }
                      }
                    ]
                  },
                  {
                    "dimension": {
                      "name": "ResourceGroup",
                      "operator": "In",
                      "values": [
                        "API"
                      ]
                    }
                  }
                ]
              }
            }
          }
        }
      }
- name: ResourceGroupCreateOrUpdateExport
  request:
    uri: PUT https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.CostManagement/exports/TestExport?api-version=2019-11-01
    body: >-
      {
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2018-06-01T00:00:00Z",
              "to": "2018-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "Usage",
            "timeframe": "MonthToDate",
            "dataset": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "InstanceId",
                  "ResourceLocation",
                  "PreTaxCost"
                ]
              },
              "aggregation": {
                "costSum": {
                  "name": "PreTaxCost",
                  "function": "Sum"
                }
              },
              "grouping": [
                {
                  "type": "Dimension",
                  "name": "SubscriptionName"
                },
                {
                  "type": "Tag",
                  "name": "Environment"
                }
              ],
              "filter": {
                "and": [
                  {
                    "or": [
                      {
                        "dimension": {
                          "name": "ResourceLocation",
                          "operator": "In",
                          "values": [
                            "East US",
                            "West Europe"
                          ]
                        }
                      },
                      {
                        "tag": {
                          "name": "Environment",
                          "operator": "In",
                          "values": [
                            "UAT",
                            "Prod"
                          ]
                        }
                      }
                    ]
                  },
                  {
                    "dimension": {
                      "name": "ResourceGroup",
                      "operator": "In",
                      "values": [
                        "API"
                      ]
                    }
                  }
                ]
              }
            }
          }
        }
      }
  responses:
  - statusCode: "201"
    body: >-
      {
        "id": "subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.CostManagement/exports/TestExport",
        "name": "TestExport",
        "type": "Microsoft.CostManagement/exports",
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2018-06-01T00:00:00Z",
              "to": "2018-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "Usage",
            "timeframe": "MonthToDate",
            "dataset": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "InstanceId",
                  "ResourceLocation",
                  "PreTaxCost"
                ]
              },
              "aggregation": {
                "costSum": {
                  "name": "PreTaxCost",
                  "function": "Sum"
                }
              },
              "grouping": [
                {
                  "type": "Dimension",
                  "name": "SubscriptionName"
                },
                {
                  "type": "Tag",
                  "name": "Environment"
                }
              ],
              "filter": {
                "and": [
                  {
                    "or": [
                      {
                        "dimension": {
                          "name": "ResourceLocation",
                          "operator": "In",
                          "values": [
                            "East US",
                            "West Europe"
                          ]
                        }
                      },
                      {
                        "tag": {
                          "name": "Environment",
                          "operator": "In",
                          "values": [
                            "UAT",
                            "Prod"
                          ]
                        }
                      }
                    ]
                  },
                  {
                    "dimension": {
                      "name": "ResourceGroup",
                      "operator": "In",
                      "values": [
                        "API"
                      ]
                    }
                  }
                ]
              }
            }
          }
        }
      }
  - statusCode: "200"
    body: >-
      {
        "id": "subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.CostManagement/exports/TestExport",
        "name": "TestExport",
        "type": "Microsoft.CostManagement/exports",
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2018-06-01T00:00:00Z",
              "to": "2018-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "Usage",
            "timeframe": "MonthToDate",
            "dataset": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "InstanceId",
                  "ResourceLocation",
                  "PreTaxCost"
                ]
              },
              "aggregation": {
                "costSum": {
                  "name": "PreTaxCost",
                  "function": "Sum"
                }
              },
              "grouping": [
                {
                  "type": "Dimension",
                  "name": "SubscriptionName"
                },
                {
                  "type": "Tag",
                  "name": "Environment"
                }
              ],
              "filter": {
                "and": [
                  {
                    "or": [
                      {
                        "dimension": {
                          "name": "ResourceLocation",
                          "operator": "In",
                          "values": [
                            "East US",
                            "West Europe"
                          ]
                        }
                      },
                      {
                        "tag": {
                          "name": "Environment",
                          "operator": "In",
                          "values": [
                            "UAT",
                            "Prod"
                          ]
                        }
                      }
                    ]
                  },
                  {
                    "dimension": {
                      "name": "ResourceGroup",
                      "operator": "In",
                      "values": [
                        "API"
                      ]
                    }
                  }
                ]
              }
            }
          }
        }
      }
- name: BillingAccountCreateOrUpdateExport
  request:
    uri: PUT https://management.azure.com/providers/Microsoft.Billing/billingAccounts/123456/providers/Microsoft.CostManagement/exports/TestExport?api-version=2019-11-01
    body: >-
      {
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2018-06-01T00:00:00Z",
              "to": "2018-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "Usage",
            "timeframe": "MonthToDate",
            "dataset": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "InstanceId",
                  "ResourceLocation",
                  "PreTaxCost"
                ]
              },
              "aggregation": {
                "costSum": {
                  "name": "PreTaxCost",
                  "function": "Sum"
                }
              },
              "grouping": [
                {
                  "type": "Dimension",
                  "name": "SubscriptionName"
                },
                {
                  "type": "Tag",
                  "name": "Environment"
                }
              ],
              "filter": {
                "and": [
                  {
                    "or": [
                      {
                        "dimension": {
                          "name": "ResourceLocation",
                          "operator": "In",
                          "values": [
                            "East US",
                            "West Europe"
                          ]
                        }
                      },
                      {
                        "tag": {
                          "name": "Environment",
                          "operator": "In",
                          "values": [
                            "UAT",
                            "Prod"
                          ]
                        }
                      }
                    ]
                  },
                  {
                    "dimension": {
                      "name": "ResourceGroup",
                      "operator": "In",
                      "values": [
                        "API"
                      ]
                    }
                  }
                ]
              }
            }
          }
        }
      }
  responses:
  - statusCode: "201"
    body: >-
      {
        "id": "providers/Microsoft.Billing/billingAccounts/123456/providers/Microsoft.CostManagement/exports/TestExport",
        "name": "TestExport",
        "type": "Microsoft.CostManagement/exports",
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2018-06-01T00:00:00Z",
              "to": "2018-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "Usage",
            "timeframe": "MonthToDate",
            "dataset": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "InstanceId",
                  "ResourceLocation",
                  "PreTaxCost"
                ]
              },
              "aggregation": {
                "costSum": {
                  "name": "PreTaxCost",
                  "function": "Sum"
                }
              },
              "grouping": [
                {
                  "type": "Dimension",
                  "name": "SubscriptionName"
                },
                {
                  "type": "Tag",
                  "name": "Environment"
                }
              ],
              "filter": {
                "and": [
                  {
                    "or": [
                      {
                        "dimension": {
                          "name": "ResourceLocation",
                          "operator": "In",
                          "values": [
                            "East US",
                            "West Europe"
                          ]
                        }
                      },
                      {
                        "tag": {
                          "name": "Environment",
                          "operator": "In",
                          "values": [
                            "UAT",
                            "Prod"
                          ]
                        }
                      }
                    ]
                  },
                  {
                    "dimension": {
                      "name": "ResourceGroup",
                      "operator": "In",
                      "values": [
                        "API"
                      ]
                    }
                  }
                ]
              }
            }
          }
        }
      }
  - statusCode: "200"
    body: >-
      {
        "id": "providers/Microsoft.Billing/billingAccounts/123456/providers/Microsoft.CostManagement/exports/TestExport",
        "name": "TestExport",
        "type": "Microsoft.CostManagement/exports",
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2018-06-01T00:00:00Z",
              "to": "2018-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "Usage",
            "timeframe": "MonthToDate",
            "dataset": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "InstanceId",
                  "ResourceLocation",
                  "PreTaxCost"
                ]
              },
              "aggregation": {
                "costSum": {
                  "name": "PreTaxCost",
                  "function": "Sum"
                }
              },
              "grouping": [
                {
                  "type": "Dimension",
                  "name": "SubscriptionName"
                },
                {
                  "type": "Tag",
                  "name": "Environment"
                }
              ],
              "filter": {
                "and": [
                  {
                    "or": [
                      {
                        "dimension": {
                          "name": "ResourceLocation",
                          "operator": "In",
                          "values": [
                            "East US",
                            "West Europe"
                          ]
                        }
                      },
                      {
                        "tag": {
                          "name": "Environment",
                          "operator": "In",
                          "values": [
                            "UAT",
                            "Prod"
                          ]
                        }
                      }
                    ]
                  },
                  {
                    "dimension": {
                      "name": "ResourceGroup",
                      "operator": "In",
                      "values": [
                        "API"
                      ]
                    }
                  }
                ]
              }
            }
          }
        }
      }
- name: DepartmentCreateOrUpdateExport
  request:
    uri: PUT https://management.azure.com/providers/Microsoft.Billing/billingAccounts/12/departments/1234/providers/Microsoft.CostManagement/exports/TestExport?api-version=2019-11-01
    body: >-
      {
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2018-06-01T00:00:00Z",
              "to": "2018-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "Usage",
            "timeframe": "MonthToDate",
            "dataset": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "InstanceId",
                  "ResourceLocation",
                  "PreTaxCost"
                ]
              },
              "aggregation": {
                "costSum": {
                  "name": "PreTaxCost",
                  "function": "Sum"
                }
              },
              "grouping": [
                {
                  "type": "Dimension",
                  "name": "SubscriptionName"
                },
                {
                  "type": "Tag",
                  "name": "Environment"
                }
              ],
              "filter": {
                "and": [
                  {
                    "or": [
                      {
                        "dimension": {
                          "name": "ResourceLocation",
                          "operator": "In",
                          "values": [
                            "East US",
                            "West Europe"
                          ]
                        }
                      },
                      {
                        "tag": {
                          "name": "Environment",
                          "operator": "In",
                          "values": [
                            "UAT",
                            "Prod"
                          ]
                        }
                      }
                    ]
                  },
                  {
                    "dimension": {
                      "name": "ResourceGroup",
                      "operator": "In",
                      "values": [
                        "API"
                      ]
                    }
                  }
                ]
              }
            }
          }
        }
      }
  responses:
  - statusCode: "201"
    body: >-
      {
        "id": "providers/Microsoft.Billing/billingAccounts/12/departments/1234/providers/Microsoft.CostManagement/exports/TestExport",
        "name": "TestExport",
        "type": "Microsoft.CostManagement/exports",
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2018-06-01T00:00:00Z",
              "to": "2018-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "Usage",
            "timeframe": "MonthToDate",
            "dataset": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "InstanceId",
                  "ResourceLocation",
                  "PreTaxCost"
                ]
              },
              "aggregation": {
                "costSum": {
                  "name": "PreTaxCost",
                  "function": "Sum"
                }
              },
              "grouping": [
                {
                  "type": "Dimension",
                  "name": "SubscriptionName"
                },
                {
                  "type": "Tag",
                  "name": "Environment"
                }
              ],
              "filter": {
                "and": [
                  {
                    "or": [
                      {
                        "dimension": {
                          "name": "ResourceLocation",
                          "operator": "In",
                          "values": [
                            "East US",
                            "West Europe"
                          ]
                        }
                      },
                      {
                        "tag": {
                          "name": "Environment",
                          "operator": "In",
                          "values": [
                            "UAT",
                            "Prod"
                          ]
                        }
                      }
                    ]
                  },
                  {
                    "dimension": {
                      "name": "ResourceGroup",
                      "operator": "In",
                      "values": [
                        "API"
                      ]
                    }
                  }
                ]
              }
            }
          }
        }
      }
  - statusCode: "200"
    body: >-
      {
        "id": "providers/Microsoft.Billing/billingAccounts/12/departments/1234/providers/Microsoft.CostManagement/exports/TestExport",
        "name": "TestExport",
        "type": "Microsoft.CostManagement/exports",
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2018-06-01T00:00:00Z",
              "to": "2018-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "Usage",
            "timeframe": "MonthToDate",
            "dataset": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "InstanceId",
                  "ResourceLocation",
                  "PreTaxCost"
                ]
              },
              "aggregation": {
                "costSum": {
                  "name": "PreTaxCost",
                  "function": "Sum"
                }
              },
              "grouping": [
                {
                  "type": "Dimension",
                  "name": "SubscriptionName"
                },
                {
                  "type": "Tag",
                  "name": "Environment"
                }
              ],
              "filter": {
                "and": [
                  {
                    "or": [
                      {
                        "dimension": {
                          "name": "ResourceLocation",
                          "operator": "In",
                          "values": [
                            "East US",
                            "West Europe"
                          ]
                        }
                      },
                      {
                        "tag": {
                          "name": "Environment",
                          "operator": "In",
                          "values": [
                            "UAT",
                            "Prod"
                          ]
                        }
                      }
                    ]
                  },
                  {
                    "dimension": {
                      "name": "ResourceGroup",
                      "operator": "In",
                      "values": [
                        "API"
                      ]
                    }
                  }
                ]
              }
            }
          }
        }
      }
- name: EnrollmentAccountCreateOrUpdateExport
  request:
    uri: PUT https://management.azure.com/providers/Microsoft.Billing/billingAccounts/100/enrollmentAccounts/456/providers/Microsoft.CostManagement/exports/TestExport?api-version=2019-11-01
    body: >-
      {
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2018-06-01T00:00:00Z",
              "to": "2018-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "Usage",
            "timeframe": "MonthToDate",
            "dataset": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "InstanceId",
                  "ResourceLocation",
                  "PreTaxCost"
                ]
              },
              "aggregation": {
                "costSum": {
                  "name": "PreTaxCost",
                  "function": "Sum"
                }
              },
              "grouping": [
                {
                  "type": "Dimension",
                  "name": "SubscriptionName"
                },
                {
                  "type": "Tag",
                  "name": "Environment"
                }
              ],
              "filter": {
                "and": [
                  {
                    "or": [
                      {
                        "dimension": {
                          "name": "ResourceLocation",
                          "operator": "In",
                          "values": [
                            "East US",
                            "West Europe"
                          ]
                        }
                      },
                      {
                        "tag": {
                          "name": "Environment",
                          "operator": "In",
                          "values": [
                            "UAT",
                            "Prod"
                          ]
                        }
                      }
                    ]
                  },
                  {
                    "dimension": {
                      "name": "ResourceGroup",
                      "operator": "In",
                      "values": [
                        "API"
                      ]
                    }
                  }
                ]
              }
            }
          }
        }
      }
  responses:
  - statusCode: "201"
    body: >-
      {
        "id": "providers/Microsoft.Billing/billingAccounts/100/enrollmentAccounts/456/providers/Microsoft.CostManagement/exports/TestExport",
        "name": "TestExport",
        "type": "Microsoft.CostManagement/exports",
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2018-06-01T00:00:00Z",
              "to": "2018-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "Usage",
            "timeframe": "MonthToDate",
            "dataset": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "InstanceId",
                  "ResourceLocation",
                  "PreTaxCost"
                ]
              },
              "aggregation": {
                "costSum": {
                  "name": "PreTaxCost",
                  "function": "Sum"
                }
              },
              "grouping": [
                {
                  "type": "Dimension",
                  "name": "SubscriptionName"
                },
                {
                  "type": "Tag",
                  "name": "Environment"
                }
              ],
              "filter": {
                "and": [
                  {
                    "or": [
                      {
                        "dimension": {
                          "name": "ResourceLocation",
                          "operator": "In",
                          "values": [
                            "East US",
                            "West Europe"
                          ]
                        }
                      },
                      {
                        "tag": {
                          "name": "Environment",
                          "operator": "In",
                          "values": [
                            "UAT",
                            "Prod"
                          ]
                        }
                      }
                    ]
                  },
                  {
                    "dimension": {
                      "name": "ResourceGroup",
                      "operator": "In",
                      "values": [
                        "API"
                      ]
                    }
                  }
                ]
              }
            }
          }
        }
      }
  - statusCode: "200"
    body: >-
      {
        "id": "providers/Microsoft.Billing/billingAccounts/100/enrollmentAccounts/456/providers/Microsoft.CostManagement/exports/TestExport",
        "name": "TestExport",
        "type": "Microsoft.CostManagement/exports",
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2018-06-01T00:00:00Z",
              "to": "2018-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "Usage",
            "timeframe": "MonthToDate",
            "dataset": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "InstanceId",
                  "ResourceLocation",
                  "PreTaxCost"
                ]
              },
              "aggregation": {
                "costSum": {
                  "name": "PreTaxCost",
                  "function": "Sum"
                }
              },
              "grouping": [
                {
                  "type": "Dimension",
                  "name": "SubscriptionName"
                },
                {
                  "type": "Tag",
                  "name": "Environment"
                }
              ],
              "filter": {
                "and": [
                  {
                    "or": [
                      {
                        "dimension": {
                          "name": "ResourceLocation",
                          "operator": "In",
                          "values": [
                            "East US",
                            "West Europe"
                          ]
                        }
                      },
                      {
                        "tag": {
                          "name": "Environment",
                          "operator": "In",
                          "values": [
                            "UAT",
                            "Prod"
                          ]
                        }
                      }
                    ]
                  },
                  {
                    "dimension": {
                      "name": "ResourceGroup",
                      "operator": "In",
                      "values": [
                        "API"
                      ]
                    }
                  }
                ]
              }
            }
          }
        }
      }
- name: ManagementGroupCreateOrUpdateExport
  request:
    uri: PUT https://management.azure.com/providers/Microsoft.Management/managementGroups/TestMG/providers/Microsoft.CostManagement/exports/TestExport?api-version=2019-11-01
    body: >-
      {
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2018-06-01T00:00:00Z",
              "to": "2018-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "Usage",
            "timeframe": "MonthToDate",
            "dataset": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "InstanceId",
                  "ResourceLocation",
                  "PreTaxCost"
                ]
              },
              "aggregation": {
                "costSum": {
                  "name": "PreTaxCost",
                  "function": "Sum"
                }
              },
              "grouping": [
                {
                  "type": "Dimension",
                  "name": "SubscriptionName"
                },
                {
                  "type": "Tag",
                  "name": "Environment"
                }
              ],
              "filter": {
                "and": [
                  {
                    "or": [
                      {
                        "dimension": {
                          "name": "ResourceLocation",
                          "operator": "In",
                          "values": [
                            "East US",
                            "West Europe"
                          ]
                        }
                      },
                      {
                        "tag": {
                          "name": "Environment",
                          "operator": "In",
                          "values": [
                            "UAT",
                            "Prod"
                          ]
                        }
                      }
                    ]
                  },
                  {
                    "dimension": {
                      "name": "ResourceGroup",
                      "operator": "In",
                      "values": [
                        "API"
                      ]
                    }
                  }
                ]
              }
            }
          }
        }
      }
  responses:
  - statusCode: "201"
    body: >-
      {
        "id": "providers/Microsoft.Management/managementGroups/TestMG/providers/Microsoft.CostManagement/exports/TestExport",
        "name": "TestExport",
        "type": "Microsoft.CostManagement/exports",
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2018-06-01T00:00:00Z",
              "to": "2018-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "Usage",
            "timeframe": "MonthToDate",
            "dataset": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "InstanceId",
                  "ResourceLocation",
                  "PreTaxCost"
                ]
              },
              "aggregation": {
                "costSum": {
                  "name": "PreTaxCost",
                  "function": "Sum"
                }
              },
              "grouping": [
                {
                  "type": "Dimension",
                  "name": "SubscriptionName"
                },
                {
                  "type": "Tag",
                  "name": "Environment"
                }
              ],
              "filter": {
                "and": [
                  {
                    "or": [
                      {
                        "dimension": {
                          "name": "ResourceLocation",
                          "operator": "In",
                          "values": [
                            "East US",
                            "West Europe"
                          ]
                        }
                      },
                      {
                        "tag": {
                          "name": "Environment",
                          "operator": "In",
                          "values": [
                            "UAT",
                            "Prod"
                          ]
                        }
                      }
                    ]
                  },
                  {
                    "dimension": {
                      "name": "ResourceGroup",
                      "operator": "In",
                      "values": [
                        "API"
                      ]
                    }
                  }
                ]
              }
            }
          }
        }
      }
  - statusCode: "200"
    body: >-
      {
        "id": "providers/Microsoft.Management/managementGroups/TestMG/providers/Microsoft.CostManagement/exports/TestExport",
        "name": "TestExport",
        "type": "Microsoft.CostManagement/exports",
        "properties": {
          "schedule": {
            "status": "Active",
            "recurrence": "Weekly",
            "recurrencePeriod": {
              "from": "2018-06-01T00:00:00Z",
              "to": "2018-10-31T00:00:00Z"
            }
          },
          "format": "Csv",
          "deliveryInfo": {
            "destination": {
              "resourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MYDEVTESTRG/providers/Microsoft.Storage/storageAccounts/ccmeastusdiag182",
              "container": "exports",
              "rootFolderPath": "ad-hoc"
            }
          },
          "definition": {
            "type": "Usage",
            "timeframe": "MonthToDate",
            "dataset": {
              "granularity": "Daily",
              "configuration": {
                "columns": [
                  "Date",
                  "MeterId",
                  "InstanceId",
                  "ResourceLocation",
                  "PreTaxCost"
                ]
              },
              "aggregation": {
                "costSum": {
                  "name": "PreTaxCost",
                  "function": "Sum"
                }
              },
              "grouping": [
                {
                  "type": "Dimension",
                  "name": "SubscriptionName"
                },
                {
                  "type": "Tag",
                  "name": "Environment"
                }
              ],
              "filter": {
                "and": [
                  {
                    "or": [
                      {
                        "dimension": {
                          "name": "ResourceLocation",
                          "operator": "In",
                          "values": [
                            "East US",
                            "West Europe"
                          ]
                        }
                      },
                      {
                        "tag": {
                          "name": "Environment",
                          "operator": "In",
                          "values": [
                            "UAT",
                            "Prod"
                          ]
                        }
                      }
                    ]
                  },
                  {
                    "dimension": {
                      "name": "ResourceGroup",
                      "operator": "In",
                      "values": [
                        "API"
                      ]
                    }
                  }
                ]
              }
            }
          }
        }
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow.
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
errorCodes: []
