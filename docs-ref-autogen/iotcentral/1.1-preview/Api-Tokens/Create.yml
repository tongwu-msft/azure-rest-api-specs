### YamlMime:RESTOperation
uid: api.iotcentral.1.1-preview.apitokens.create
name: Create
service: IoT Central
groupName: Api Tokens
apiVersion: 1.1-preview
summary: Create a new API token in the application to use in the IoT Central public API. The token value will be returned in the response, and won't be returned again in subsequent requests.
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://{subdomain}.{baseDomain}/api/apiTokens/{tokenId}?api-version=1.1-preview
uriParameters:
- name: subdomain
  in: path
  isRequired: true
  description: The application subdomain.
  types:
  - uid: string
- name: baseDomain
  in: path
  isRequired: true
  skipUrlEncoding: true
  description: The base domain for all Azure IoT Central service requests.
  types:
  - uid: string
- name: tokenId
  in: path
  isRequired: true
  description: Unique ID for the API token.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: The version of the API being called.
  types:
  - uid: string
responses:
- name: 200 OK
  description: Success
  types:
  - uid: ApiToken
requestBody:
- name: default
  parameters:
  - name: expiry
    in: body
    description: String-formatted date representing the time when the token expires.
    types:
    - uid: string
  - name: roles
    in: body
    isRequired: true
    description: List of role assignments that specify the permissions to access the application.
    types:
    - uid: RoleAssignment
      isArray: true
requestHeader: []
definitions:
- name: RoleAssignment
  kind: object
  properties:
  - name: role
    description: ID of the role for this role assignment.
    types:
    - uid: string
  - name: organization
    description: ID of the organization for this role assignment.
    types:
    - uid: string
- name: ApiToken
  kind: object
  properties:
  - name: id
    isReadyOnly: true
    description: Unique ID of the API token.
    types:
    - uid: string
  - name: token
    isReadyOnly: true
    description: Value of the API token.
    types:
    - uid: string
  - name: expiry
    description: String-formatted date representing the time when the token expires.
    types:
    - uid: string
  - name: roles
    description: List of role assignments that specify the permissions to access the application.
    types:
    - uid: RoleAssignment
      isArray: true
examples:
- name: Create API token
  request:
    uri: PUT https://appsubdomain.azureiotcentral.com/api/apiTokens/testtoken?api-version=1.1-preview
    body: >-
      {
        "roles": [
          {
            "role": "ca310b8d-2f4a-44e0-a36e-957c202cd8d4"
          },
          {
            "role": "c495eb57-eb18-489e-9802-62c474e5645c",
            "organization": "seattle"
          }
        ]
      }
  responses:
  - statusCode: "200"
    body: >-
      {
        "id": "testtoken",
        "roles": [
          {
            "role": "ca310b8d-2f4a-44e0-a36e-957c202cd8d4"
          },
          {
            "role": "c495eb57-eb18-489e-9802-62c474e5645c",
            "organization": "seattle"
          }
        ],
        "expiry": "2020-10-18T18:30:40.227Z",
        "token": "SharedAccessSignature sr=..."
      }
security: []
metadata:
  description: Create a new API token in the application to use in the IoT Central public API. The token value will be returned in the response, and won't be returned again in subsequent requests.
errorCodes: []
