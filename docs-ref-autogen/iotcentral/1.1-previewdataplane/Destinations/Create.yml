### YamlMime:RESTOperation
uid: api.iotcentral.1.1-previewdataplane.destinations.create
name: Create
service: IoT Central
groupName: Destinations
apiVersion: 1.1-preview
summary: "Create or update a destination  \nCreate or update a definition for where to send data."
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://{subdomain}.{baseDomain}/api/dataExport/destinations/{destinationId}?api-version=1.1-preview
uriParameters:
- name: subdomain
  in: path
  isRequired: true
  description: The application subdomain.
  types:
  - uid: string
- name: baseDomain
  in: path
  isRequired: true
  skipUrlEncoding: true
  description: The base domain for all Azure IoT Central service requests.
  types:
  - uid: string
- name: destinationId
  in: path
  isRequired: true
  description: Unique ID for the destination.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: The version of the API being called.
  types:
  - uid: string
responses:
- name: 200 OK
  description: Success
  types:
  - uid: BlobStorageV1Destination
  - uid: DataExplorerV1Destination
  - uid: EventHubsV1Destination
  - uid: ServiceBusQueueV1Destination
  - uid: ServiceBusTopicV1Destination
  - uid: WebhookV1Destination
  typesTitle: Destination
requestBody:
- name: BlobStorageV1Destination
  parameters:
  - name: authorization
    in: body
    isRequired: true
    description: ''
    types:
    - uid: BlobStorageV1DestinationConnectionStringAuth
    - uid: BlobStorageV1DestinationSystemAssignedManagedIdentityAuth
    typesTitle: BlobStorageV1DestinationAuth
  - name: displayName
    in: body
    isRequired: true
    description: Display name of the destination.
    types:
    - uid: string
  - name: type
    in: body
    isRequired: true
    description: The type of destination configuration.
    types:
    - uid: blobstorage@v1
    typesTitle: string
- name: DataExplorerV1Destination
  parameters:
  - name: clusterUrl
    in: body
    isRequired: true
    description: The resource URI of the Data Explorer instance.
    types:
    - uid: string
  - name: database
    in: body
    isRequired: true
    description: Name Data Explorer database where data should be written.
    types:
    - uid: string
  - name: table
    in: body
    isRequired: true
    description: The table within the Data Explorer database that will receive the data.
    types:
    - uid: string
  - name: authorization
    in: body
    isRequired: true
    description: ''
    types:
    - uid: DataExplorerV1DestinationServicePrincipalAuth
    typesTitle: DataExplorerV1DestinationAuth
  - name: displayName
    in: body
    isRequired: true
    description: Display name of the destination.
    types:
    - uid: string
  - name: type
    in: body
    isRequired: true
    description: The type of destination configuration.
    types:
    - uid: dataexplorer@v1
    typesTitle: string
- name: EventHubsV1Destination
  parameters:
  - name: authorization
    in: body
    isRequired: true
    description: ''
    types:
    - uid: EventHubsV1DestinationConnectionStringAuth
    - uid: EventHubsV1DestinationSystemAssignedManagedIdentityAuth
    typesTitle: EventHubsV1DestinationAuth
  - name: displayName
    in: body
    isRequired: true
    description: Display name of the destination.
    types:
    - uid: string
  - name: type
    in: body
    isRequired: true
    description: The type of destination configuration.
    types:
    - uid: eventhubs@v1
    typesTitle: string
- name: ServiceBusQueueV1Destination
  parameters:
  - name: authorization
    in: body
    isRequired: true
    description: ''
    types:
    - uid: ServiceBusQueueV1DestinationConnectionStringAuth
    - uid: ServiceBusQueueV1DestinationSystemAssignedManagedIdentityAuth
    typesTitle: ServiceBusQueueV1DestinationAuth
  - name: displayName
    in: body
    isRequired: true
    description: Display name of the destination.
    types:
    - uid: string
  - name: type
    in: body
    isRequired: true
    description: The type of destination configuration.
    types:
    - uid: servicebusqueue@v1
    typesTitle: string
- name: ServiceBusTopicV1Destination
  parameters:
  - name: authorization
    in: body
    isRequired: true
    description: ''
    types:
    - uid: ServiceBusTopicV1DestinationConnectionStringAuth
    - uid: ServiceBusTopicV1DestinationSystemAssignedManagedIdentityAuth
    typesTitle: ServiceBusTopicV1DestinationAuth
  - name: displayName
    in: body
    isRequired: true
    description: Display name of the destination.
    types:
    - uid: string
  - name: type
    in: body
    isRequired: true
    description: The type of destination configuration.
    types:
    - uid: servicebustopic@v1
    typesTitle: string
- name: WebhookV1Destination
  parameters:
  - name: url
    in: body
    isRequired: true
    description: The URL to invoke when exporting data.
    types:
    - uid: string
  - name: queryCustomizations
    in: body
    description: Additional query parameters that should be added to each request.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: WebhookV1DestinationCustomization
  - name: headerCustomizations
    in: body
    description: Additional headers that should be added to each request.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: WebhookV1DestinationCustomization
  - name: authorization
    in: body
    description: ''
    types:
    - uid: WebhookV1DestinationHeaderAuth
    - uid: WebhookV1DestinationOAuthAuth
    typesTitle: WebhookV1DestinationAuth
  - name: displayName
    in: body
    isRequired: true
    description: Display name of the destination.
    types:
    - uid: string
  - name: type
    in: body
    isRequired: true
    description: The type of destination configuration.
    types:
    - uid: webhook@v1
    typesTitle: string
requestHeader: []
definitions:
- name: BlobStorageV1Destination
  kind: object
  properties:
  - name: authorization
    description: ''
    types:
    - uid: BlobStorageV1DestinationConnectionStringAuth
    - uid: BlobStorageV1DestinationSystemAssignedManagedIdentityAuth
    typesTitle: BlobStorageV1DestinationAuth
  - name: id
    isReadyOnly: true
    description: Unique ID of the destination.
    types:
    - uid: string
  - name: displayName
    description: Display name of the destination.
    types:
    - uid: string
  - name: type
    description: The type of destination configuration.
    types:
    - uid: blobstorage@v1
    typesTitle: string
  - name: status
    isReadyOnly: true
    description: Indication of the current health and operation of the export or destination.
    types:
    - uid: string
  - name: errors
    isReadyOnly: true
    description: Errors encountered by the export or destination.
    types:
    - uid: DataExportError
      isArray: true
  - name: lastExportTime
    isReadyOnly: true
    description: The timestamp of the last message that was sent to the export or destination.
    types:
    - uid: string
- name: DataExplorerV1Destination
  kind: object
  properties:
  - name: clusterUrl
    description: The resource URI of the Data Explorer instance.
    types:
    - uid: string
  - name: database
    description: Name Data Explorer database where data should be written.
    types:
    - uid: string
  - name: table
    description: The table within the Data Explorer database that will receive the data.
    types:
    - uid: string
  - name: authorization
    description: ''
    types:
    - uid: DataExplorerV1DestinationServicePrincipalAuth
    typesTitle: DataExplorerV1DestinationAuth
  - name: id
    isReadyOnly: true
    description: Unique ID of the destination.
    types:
    - uid: string
  - name: displayName
    description: Display name of the destination.
    types:
    - uid: string
  - name: type
    description: The type of destination configuration.
    types:
    - uid: dataexplorer@v1
    typesTitle: string
  - name: status
    isReadyOnly: true
    description: Indication of the current health and operation of the export or destination.
    types:
    - uid: string
  - name: errors
    isReadyOnly: true
    description: Errors encountered by the export or destination.
    types:
    - uid: DataExportError
      isArray: true
  - name: lastExportTime
    isReadyOnly: true
    description: The timestamp of the last message that was sent to the export or destination.
    types:
    - uid: string
- name: EventHubsV1Destination
  kind: object
  properties:
  - name: authorization
    description: ''
    types:
    - uid: EventHubsV1DestinationConnectionStringAuth
    - uid: EventHubsV1DestinationSystemAssignedManagedIdentityAuth
    typesTitle: EventHubsV1DestinationAuth
  - name: id
    isReadyOnly: true
    description: Unique ID of the destination.
    types:
    - uid: string
  - name: displayName
    description: Display name of the destination.
    types:
    - uid: string
  - name: type
    description: The type of destination configuration.
    types:
    - uid: eventhubs@v1
    typesTitle: string
  - name: status
    isReadyOnly: true
    description: Indication of the current health and operation of the export or destination.
    types:
    - uid: string
  - name: errors
    isReadyOnly: true
    description: Errors encountered by the export or destination.
    types:
    - uid: DataExportError
      isArray: true
  - name: lastExportTime
    isReadyOnly: true
    description: The timestamp of the last message that was sent to the export or destination.
    types:
    - uid: string
- name: ServiceBusQueueV1Destination
  kind: object
  properties:
  - name: authorization
    description: ''
    types:
    - uid: ServiceBusQueueV1DestinationConnectionStringAuth
    - uid: ServiceBusQueueV1DestinationSystemAssignedManagedIdentityAuth
    typesTitle: ServiceBusQueueV1DestinationAuth
  - name: id
    isReadyOnly: true
    description: Unique ID of the destination.
    types:
    - uid: string
  - name: displayName
    description: Display name of the destination.
    types:
    - uid: string
  - name: type
    description: The type of destination configuration.
    types:
    - uid: servicebusqueue@v1
    typesTitle: string
  - name: status
    isReadyOnly: true
    description: Indication of the current health and operation of the export or destination.
    types:
    - uid: string
  - name: errors
    isReadyOnly: true
    description: Errors encountered by the export or destination.
    types:
    - uid: DataExportError
      isArray: true
  - name: lastExportTime
    isReadyOnly: true
    description: The timestamp of the last message that was sent to the export or destination.
    types:
    - uid: string
- name: ServiceBusTopicV1Destination
  kind: object
  properties:
  - name: authorization
    description: ''
    types:
    - uid: ServiceBusTopicV1DestinationConnectionStringAuth
    - uid: ServiceBusTopicV1DestinationSystemAssignedManagedIdentityAuth
    typesTitle: ServiceBusTopicV1DestinationAuth
  - name: id
    isReadyOnly: true
    description: Unique ID of the destination.
    types:
    - uid: string
  - name: displayName
    description: Display name of the destination.
    types:
    - uid: string
  - name: type
    description: The type of destination configuration.
    types:
    - uid: servicebustopic@v1
    typesTitle: string
  - name: status
    isReadyOnly: true
    description: Indication of the current health and operation of the export or destination.
    types:
    - uid: string
  - name: errors
    isReadyOnly: true
    description: Errors encountered by the export or destination.
    types:
    - uid: DataExportError
      isArray: true
  - name: lastExportTime
    isReadyOnly: true
    description: The timestamp of the last message that was sent to the export or destination.
    types:
    - uid: string
- name: WebhookV1Destination
  kind: object
  properties:
  - name: url
    description: The URL to invoke when exporting data.
    types:
    - uid: string
  - name: queryCustomizations
    description: Additional query parameters that should be added to each request.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: WebhookV1DestinationCustomization
  - name: headerCustomizations
    description: Additional headers that should be added to each request.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: WebhookV1DestinationCustomization
  - name: authorization
    description: ''
    types:
    - uid: WebhookV1DestinationHeaderAuth
    - uid: WebhookV1DestinationOAuthAuth
    typesTitle: WebhookV1DestinationAuth
  - name: id
    isReadyOnly: true
    description: Unique ID of the destination.
    types:
    - uid: string
  - name: displayName
    description: Display name of the destination.
    types:
    - uid: string
  - name: type
    description: The type of destination configuration.
    types:
    - uid: webhook@v1
    typesTitle: string
  - name: status
    isReadyOnly: true
    description: Indication of the current health and operation of the export or destination.
    types:
    - uid: string
  - name: errors
    isReadyOnly: true
    description: Errors encountered by the export or destination.
    types:
    - uid: DataExportError
      isArray: true
  - name: lastExportTime
    isReadyOnly: true
    description: The timestamp of the last message that was sent to the export or destination.
    types:
    - uid: string
- name: DataExportError
  kind: object
  properties:
  - name: code
    isReadyOnly: true
    description: The code for the error that occurred.
    types:
    - uid: string
  - name: message
    isReadyOnly: true
    description: The description of the error that occurred.
    types:
    - uid: string
- name: WebhookV1DestinationCustomization
  kind: object
  properties:
  - name: value
    description: The value to use for this webhook customization.
    types:
    - uid: string
  - name: secret
    description: Whether to consider the value to be a secret and hide it when retrieving the destination configuration.
    types:
    - uid: boolean
- name: BlobStorageV1DestinationConnectionStringAuth
  kind: object
  properties:
  - name: connectionString
    description: The connection string for accessing the blob storage account.
    types:
    - uid: string
  - name: containerName
    description: Name of the container where data should be written in the storage account.
    types:
    - uid: string
  - name: type
    description: The kind of authentication to use.
    types:
    - uid: connectionString
    typesTitle: string
- name: BlobStorageV1DestinationSystemAssignedManagedIdentityAuth
  kind: object
  properties:
  - name: endpointUri
    description: The storage account's blob service endpoint URL.
    types:
    - uid: string
  - name: containerName
    description: Name of the container where data should be written in the storage account.
    types:
    - uid: string
  - name: type
    description: The kind of authentication to use.
    types:
    - uid: systemAssignedManagedIdentity
    typesTitle: string
- name: DataExplorerV1DestinationServicePrincipalAuth
  kind: object
  properties:
  - name: clientId
    description: Service Principal client ID.
    types:
    - uid: string
  - name: tenantId
    description: Service Principal tenant ID.
    types:
    - uid: string
  - name: clientSecret
    description: Service Principal client secret.
    types:
    - uid: string
  - name: type
    description: The kind of authentication to use.
    types:
    - uid: servicePrincipal
    typesTitle: string
- name: EventHubsV1DestinationConnectionStringAuth
  kind: object
  properties:
  - name: connectionString
    description: The connection string for accessing the Event Hubs namespace, including the `EntityPath` of the event hub.
    types:
    - uid: string
  - name: type
    description: The kind of authentication to use.
    types:
    - uid: connectionString
    typesTitle: string
- name: EventHubsV1DestinationSystemAssignedManagedIdentityAuth
  kind: object
  properties:
  - name: hostName
    description: The host name of the Event Hubs namespace.
    types:
    - uid: string
  - name: eventHubName
    description: The Event Hubs instance name.
    types:
    - uid: string
  - name: type
    description: The kind of authentication to use.
    types:
    - uid: systemAssignedManagedIdentity
    typesTitle: string
- name: ServiceBusQueueV1DestinationConnectionStringAuth
  kind: object
  properties:
  - name: connectionString
    description: The connection string for accessing the Service Bus namespace, including the `EntityPath` of the queue.
    types:
    - uid: string
  - name: type
    description: The kind of authentication to use.
    types:
    - uid: connectionString
    typesTitle: string
- name: ServiceBusQueueV1DestinationSystemAssignedManagedIdentityAuth
  kind: object
  properties:
  - name: hostName
    description: The host name of the Service Bus namespace.
    types:
    - uid: string
  - name: queueName
    description: The Service Bus queue name.
    types:
    - uid: string
  - name: type
    description: The kind of authentication to use.
    types:
    - uid: systemAssignedManagedIdentity
    typesTitle: string
- name: ServiceBusTopicV1DestinationConnectionStringAuth
  kind: object
  properties:
  - name: connectionString
    description: The connection string for accessing the Service Bus namespace, including the `EntityPath` of the topic.
    types:
    - uid: string
  - name: type
    description: The kind of authentication to use.
    types:
    - uid: connectionString
    typesTitle: string
- name: ServiceBusTopicV1DestinationSystemAssignedManagedIdentityAuth
  kind: object
  properties:
  - name: hostName
    description: The host name of the Service Bus namespace.
    types:
    - uid: string
  - name: topicName
    description: The Service Bus topic name.
    types:
    - uid: string
  - name: type
    description: The kind of authentication to use.
    types:
    - uid: systemAssignedManagedIdentity
    typesTitle: string
- name: WebhookV1DestinationHeaderAuth
  kind: object
  properties:
  - name: value
    description: Value to use for the Authorization header when making requests.
    types:
    - uid: string
  - name: type
    description: The kind of authentication to use.
    types:
    - uid: header
    typesTitle: string
- name: WebhookV1DestinationOAuthAuth
  kind: object
  properties:
  - name: tokenUrl
    description: URL where an access token can be retrieved.
    types:
    - uid: string
  - name: clientId
    description: OAuth2 client ID used when retrieving the token.
    types:
    - uid: string
  - name: clientSecret
    description: OAuth2 client secret used to retrieve the token.
    types:
    - uid: string
  - name: audience
    description: OAuth2 audience.
    types:
    - uid: string
  - name: scope
    description: OAuth2 scope.
    types:
    - uid: string
  - name: requestType
    description: Content-Type for the token request.
    types:
    - uid: OAuthRequestType
  - name: type
    description: The kind of authentication to use.
    types:
    - uid: oauth
    typesTitle: string
- name: OAuthRequestType
  description: Content-Type for the token request.
  kind: enum
  properties:
  - name: auto
    description: Use automatic Content-Type for token request
    types:
    - uid: string
  - name: json
    description: Content-Type as JSON for token request
    types:
    - uid: string
  - name: urlencoded
    description: Content-Type as UrlEncoded for token request
    types:
    - uid: string
examples:
- name: Create a webhook destination
  request:
    uri: PUT https://appsubdomain.azureiotcentral.com/api/dataExport/destinations/destination1?api-version=1.1-preview
    body: >-
      {
        "displayName": "Webhook No Auth",
        "type": "webhook@v1",
        "url": "https://webhook.site/9bda8769-d540-4d92-946b-48c5a01e59bd",
        "headerCustomizations": {
          "x-custom-region": {
            "value": "westcentralus",
            "secret": false
          }
        }
      }
  responses:
  - statusCode: "200"
    body: >-
      {
        "id": "destination1",
        "displayName": "Webhook No Auth",
        "type": "webhook@v1",
        "url": "https://webhook.site/9bda8769-d540-4d92-946b-48c5a01e59bd",
        "headerCustomizations": {
          "x-custom-region": {
            "value": "westcentralus",
            "secret": false
          }
        },
        "status": "waiting"
      }
- name: Create an azure blob storage destination
  request:
    uri: PUT https://appsubdomain.azureiotcentral.com/api/dataExport/destinations/destination1?api-version=1.1-preview
    body: >-
      {
        "displayName": "Blob Storage",
        "type": "blobstorage@v1",
        "authorization": {
          "type": "connectionString",
          "connectionString": "DefaultEndpointsProtocol=https;AccountName=[accountName];AccountKey=[key];EndpointSuffix=core.windows.net",
          "containerName": "test"
        }
      }
  responses:
  - statusCode: "200"
    body: >-
      {
        "id": "destination1",
        "displayName": "Blob Storage",
        "type": "blobstorage@v1",
        "authorization": {
          "type": "connectionString",
          "connectionString": "DefaultEndpointsProtocol=https;AccountName=[accountName];AccountKey=*****;EndpointSuffix=core.windows.net",
          "containerName": "test"
        },
        "status": "waiting"
      }
- name: Create an azure data explorer destination
  request:
    uri: PUT https://appsubdomain.azureiotcentral.com/api/dataExport/destinations/destination1?api-version=1.1-preview
    body: >-
      {
        "displayName": "Azure Data Explorer",
        "type": "dataexplorer@v1",
        "clusterUrl": "https://[clusterName].westus2.kusto.windows.net",
        "database": "database1",
        "table": "table1",
        "authorization": {
          "type": "servicePrincipal",
          "clientId": "3b420743-2020-44c6-9b70-cc42f945db0x",
          "tenantId": "72f988bf-86f1-41af-91ab-2d7cd011db47",
          "clientSecret": "[Secret]"
        }
      }
  responses:
  - statusCode: "200"
    body: >-
      {
        "id": "destination1",
        "displayName": "Azure Data Explorer",
        "type": "dataexplorer@v1",
        "clusterUrl": "https://[clusterName].westus2.kusto.windows.net",
        "database": "database1",
        "table": "table1",
        "authorization": {
          "type": "servicePrincipal",
          "clientId": "3b420743-2020-44c6-9b70-cc42f945db0x",
          "tenantId": "72f988bf-86f1-41af-91ab-2d7cd011db47",
          "clientSecret": "*****"
        },
        "status": "waiting"
      }
- name: Create an azure event hub destination
  request:
    uri: PUT https://appsubdomain.azureiotcentral.com/api/dataExport/destinations/destination1?api-version=1.1-preview
    body: >-
      {
        "displayName": "Event Hub",
        "type": "eventhubs@v1",
        "authorization": {
          "type": "connectionString",
          "connectionString": "Endpoint=sb://[hubName].servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=[Key];EntityPath=entityPath1"
        }
      }
  responses:
  - statusCode: "200"
    body: >-
      {
        "id": "destination1",
        "displayName": "Event Hub",
        "type": "eventhubs@v1",
        "authorization": {
          "type": "connectionString",
          "connectionString": "Endpoint=sb://[hubName].servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=*****;EntityPath=entityPath1"
        },
        "status": "waiting"
      }
- name: Create an azure service bus queue destination
  request:
    uri: PUT https://appsubdomain.azureiotcentral.com/api/dataExport/destinations/destination1?api-version=1.1-preview
    body: >-
      {
        "displayName": "Service Bus Queue",
        "type": "servicebusqueue@v1",
        "authorization": {
          "type": "connectionString",
          "connectionString": "Endpoint=sb://[namespance].servicebus.windows.net/;SharedAccessKeyName=xxx;SharedAccessKey=[key];EntityPath=[name]"
        }
      }
  responses:
  - statusCode: "200"
    body: >-
      {
        "id": "destination1",
        "displayName": "Service Bus Queue",
        "type": "servicebusqueue@v1",
        "authorization": {
          "type": "connectionString",
          "connectionString": "Endpoint=sb://[namespace].servicebus.windows.net/;SharedAccessKeyName=xxx;SharedAccessKey=*****;EntityPath=[name]"
        },
        "status": "waiting"
      }
- name: Create an azure service bus topic destination
  request:
    uri: PUT https://appsubdomain.azureiotcentral.com/api/dataExport/destinations/destination1?api-version=1.1-preview
    body: >-
      {
        "displayName": "Service Bus Topic",
        "type": "servicebustopic@v1",
        "authorization": {
          "type": "connectionString",
          "connectionString": "Endpoint=sb://[namespace].servicebus.windows.net/;SharedAccessKeyName=xxx;SharedAccessKey=[key];EntityPath=[name]"
        }
      }
  responses:
  - statusCode: "200"
    body: >-
      {
        "id": "destination1",
        "displayName": "Service Bus Topic",
        "type": "servicebustopic@v1",
        "authorization": {
          "type": "connectionString",
          "connectionString": "Endpoint=sb://[namespace].servicebus.windows.net/;SharedAccessKeyName=xxx;SharedAccessKey=*****;EntityPath=[name]"
        },
        "status": "waiting"
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: "Learn more about IoT Central service - Create or update a destination  \nCreate or update a definition for where to send data."
errorCodes: []
