### YamlMime:RESTOperation
uid: management.azure.com.batchmanagement.batchaccount.regeneratekey
name: Regenerate Key
service: Batch Management
groupName: Batch Account
apiVersion: 2022-06-01
summary: "Regenerates the specified account key for the Batch account.  \nThis operation applies only to Batch accounts with allowedAuthenticationModes containing 'SharedKey'. If the Batch account doesn't contain 'SharedKey' in its allowedAuthenticationMode, clients cannot use shared keys to authenticate, and must use another allowedAuthenticationModes instead. In this case, regenerating the keys will fail."
consumes:
- application/json
produces:
- application/json
paths:
- content: POST https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Batch/batchAccounts/{accountName}/regenerateKeys?api-version=2022-06-01
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: The Azure subscription ID. This is a GUID-formatted string (e.g. 00000000-0000-0000-0000-000000000000)
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group that contains the Batch account.
  types:
  - uid: string
- name: accountName
  in: path
  isRequired: true
  description: The name of the Batch account.
  types:
  - uid: string
  pattern: ^[a-zA-Z0-9]+$
- name: api-version
  in: query
  isRequired: true
  description: The API version to be used with the HTTP request.
  types:
  - uid: string
responses:
- name: 200 OK
  description: The operation was successful. The response contains the Batch account keys.
  types:
  - uid: BatchAccountKeys
- name: Other Status Codes
  description: Error response describing why the operation failed.
  types:
  - uid: CloudError
requestBody:
- name: default
  parameters:
  - name: keyName
    in: body
    isRequired: true
    description: The type of account key to regenerate.
    types:
    - uid: AccountKeyType
requestHeader: []
definitions:
- name: BatchAccountKeys
  description: A set of Azure Batch account keys.
  kind: object
  properties:
  - name: accountName
    isReadyOnly: true
    description: The Batch account name.
    types:
    - uid: string
  - name: primary
    isReadyOnly: true
    description: The primary key associated with the account.
    types:
    - uid: string
  - name: secondary
    isReadyOnly: true
    description: The secondary key associated with the account.
    types:
    - uid: string
- name: CloudError
  description: An error response from the Batch service.
  kind: object
  properties:
  - name: error
    description: The body of the error response.
    types:
    - uid: CloudErrorBody
- name: BatchAccountRegenerateKeyParameters
  description: Parameters supplied to the RegenerateKey operation.
  kind: object
  properties:
  - name: keyName
    description: The type of account key to regenerate.
    types:
    - uid: AccountKeyType
- name: CloudErrorBody
  description: An error response from the Batch service.
  kind: object
  properties:
  - name: code
    description: An identifier for the error. Codes are invariant and are intended to be consumed programmatically.
    types:
    - uid: string
  - name: message
    description: A message describing the error, intended to be suitable for display in a user interface.
    types:
    - uid: string
  - name: target
    description: The target of the particular error. For example, the name of the property in error.
    types:
    - uid: string
  - name: details
    description: A list of additional details about the error.
    types:
    - uid: CloudErrorBody
      isArray: true
- name: AccountKeyType
  description: The type of account key to regenerate.
  kind: enum
  properties:
  - name: Primary
    description: The primary account key.
    types:
    - uid: string
  - name: Secondary
    description: The secondary account key.
    types:
    - uid: string
examples:
- name: BatchAccountRegenerateKey
  request:
    uri: POST https://management.azure.com/subscriptions/subid/resourceGroups/default-azurebatch-japaneast/providers/Microsoft.Batch/batchAccounts/sampleacct/regenerateKeys?api-version=2022-06-01
    body: >-
      {
        "keyName": "Primary"
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      POST https://management.azure.com/subscriptions/subid/resourceGroups/default-azurebatch-japaneast/providers/Microsoft.Batch/batchAccounts/sampleacct/regenerateKeys?api-version=2022-06-01

      {
        "keyName": "Primary"
      }

      ```

      # [JavaScript](#tab/JavaScript)
      ``` js
      const { BatchManagementClient } = require("@azure/arm-batch");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to This operation applies only to Batch accounts with allowedAuthenticationModes containing 'SharedKey'. If the Batch account doesn't contain 'SharedKey' in its allowedAuthenticationMode, clients cannot use shared keys to authenticate, and must use another allowedAuthenticationModes instead. In this case, regenerating the keys will fail.
       *
       * @summary This operation applies only to Batch accounts with allowedAuthenticationModes containing 'SharedKey'. If the Batch account doesn't contain 'SharedKey' in its allowedAuthenticationMode, clients cannot use shared keys to authenticate, and must use another allowedAuthenticationModes instead. In this case, regenerating the keys will fail.
       * x-ms-original-file: specification/batch/resource-manager/Microsoft.Batch/stable/2022-06-01/examples/BatchAccountRegenerateKey.json
       */
      async function batchAccountRegenerateKey() {
        const subscriptionId = "subid";
        const resourceGroupName = "default-azurebatch-japaneast";
        const accountName = "sampleacct";
        const parameters = {
          keyName: "Primary",
        };
        const credential = new DefaultAzureCredential();
        const client = new BatchManagementClient(credential, subscriptionId);
        const result = await client.batchAccountOperations.regenerateKey(
          resourceGroupName,
          accountName,
          parameters
        );
        console.log(result);
      }

      batchAccountRegenerateKey().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-batch_7.2.0/sdk/batch/arm-batch/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "accountName": "sampleacct",
        "primary": "AAAA==",
        "secondary": "BBBB=="
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: "Regenerates the specified account key for the Batch account.  \nThis operation applies only to Batch accounts with allowedAuthenticationModes containing 'SharedK"
errorCodes: []
