### YamlMime:RESTOperation
uid: management.azure.com.batchmanagement.certificate.create
name: Create
service: Batch Management
groupName: Certificate
apiVersion: 2022-06-01
summary: Creates a new certificate inside the specified account.
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Batch/batchAccounts/{accountName}/certificates/{certificateName}?api-version=2022-06-01
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: The Azure subscription ID. This is a GUID-formatted string (e.g. 00000000-0000-0000-0000-000000000000)
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group that contains the Batch account.
  types:
  - uid: string
- name: accountName
  in: path
  isRequired: true
  description: The name of the Batch account.
  types:
  - uid: string
  pattern: ^[a-zA-Z0-9]+$
- name: certificateName
  in: path
  isRequired: true
  description: The identifier for the certificate. This must be made up of algorithm and thumbprint separated by a dash, and must match the certificate data in the request. For example SHA1-a3d1c5.
  types:
  - uid: string
  pattern: ^[\w]+-[\w]+$
- name: api-version
  in: query
  isRequired: true
  description: The API version to be used with the HTTP request.
  types:
  - uid: string
responses:
- name: 200 OK
  headers:
  - name: ETag
    value: string
  description: The operation was successful. The response contains the certificate entity.
  types:
  - uid: Certificate
- name: Other Status Codes
  description: Error response describing why the operation failed.
  types:
  - uid: CloudError
requestBody:
- name: default
  parameters:
  - name: properties.data
    in: body
    isRequired: true
    description: "The base64-encoded contents of the certificate.  \nThe maximum size is 10KB."
    types:
    - uid: string
  - name: properties.password
    in: body
    description: "The password to access the certificate's private key.  \nThis must not be specified if the certificate format is Cer."
    types:
    - uid: string
  - name: properties.thumbprintAlgorithm
    in: body
    description: "The algorithm of the certificate thumbprint.  \nThis must match the first portion of the certificate name. Currently required to be 'SHA1'."
    types:
    - uid: string
  - name: properties.thumbprint
    in: body
    description: "The thumbprint of the certificate.  \nThis must match the thumbprint from the name."
    types:
    - uid: string
  - name: properties.format
    in: body
    description: The format of the certificate - either Pfx or Cer. If omitted, the default is Pfx.
    types:
    - uid: CertificateFormat
requestHeader:
- name: If-Match
  in: header
  description: The entity state (ETag) version of the certificate to update. A value of "*" can be used to apply the operation only if the certificate already exists. If omitted, this operation will always be applied.
  types:
  - uid: string
- name: If-None-Match
  in: header
  description: Set to '*' to allow a new certificate to be created, but to prevent updating an existing certificate. Other values will be ignored.
  types:
  - uid: string
definitions:
- name: Certificate
  description: Contains information about a certificate.
  kind: object
  properties:
  - name: properties.provisioningState
    isReadyOnly: true
    description: The provisioned state of the resource
    types:
    - uid: CertificateProvisioningState
  - name: properties.provisioningStateTransitionTime
    isReadyOnly: true
    description: The time at which the certificate entered its current state.
    types:
    - uid: string
  - name: properties.previousProvisioningState
    isReadyOnly: true
    description: The previous provisioned state of the resource
    types:
    - uid: CertificateProvisioningState
  - name: properties.previousProvisioningStateTransitionTime
    isReadyOnly: true
    description: The time at which the certificate entered its previous state.
    types:
    - uid: string
  - name: properties.publicData
    isReadyOnly: true
    description: The public key of the certificate.
    types:
    - uid: string
  - name: properties.deleteCertificateError
    isReadyOnly: true
    description: "The error which occurred while deleting the certificate  \nThis is only returned when the certificate provisioningState is 'Failed'."
    types:
    - uid: DeleteCertificateError
  - name: id
    isReadyOnly: true
    description: The ID of the resource.
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: The name of the resource.
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: The type of the resource.
    types:
    - uid: string
  - name: etag
    isReadyOnly: true
    description: The ETag of the resource, used for concurrency statements.
    types:
    - uid: string
  - name: properties.thumbprintAlgorithm
    description: "The algorithm of the certificate thumbprint.  \nThis must match the first portion of the certificate name. Currently required to be 'SHA1'."
    types:
    - uid: string
  - name: properties.thumbprint
    description: "The thumbprint of the certificate.  \nThis must match the thumbprint from the name."
    types:
    - uid: string
  - name: properties.format
    description: The format of the certificate - either Pfx or Cer. If omitted, the default is Pfx.
    types:
    - uid: CertificateFormat
- name: CloudError
  description: An error response from the Batch service.
  kind: object
  properties:
  - name: error
    description: The body of the error response.
    types:
    - uid: CloudErrorBody
- name: CertificateCreateOrUpdateParameters
  description: Contains information about a certificate.
  kind: object
  properties:
  - name: properties.data
    description: "The base64-encoded contents of the certificate.  \nThe maximum size is 10KB."
    types:
    - uid: string
  - name: properties.password
    description: "The password to access the certificate's private key.  \nThis must not be specified if the certificate format is Cer."
    types:
    - uid: string
  - name: id
    isReadyOnly: true
    description: The ID of the resource.
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: The name of the resource.
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: The type of the resource.
    types:
    - uid: string
  - name: etag
    isReadyOnly: true
    description: The ETag of the resource, used for concurrency statements.
    types:
    - uid: string
  - name: properties.thumbprintAlgorithm
    description: "The algorithm of the certificate thumbprint.  \nThis must match the first portion of the certificate name. Currently required to be 'SHA1'."
    types:
    - uid: string
  - name: properties.thumbprint
    description: "The thumbprint of the certificate.  \nThis must match the thumbprint from the name."
    types:
    - uid: string
  - name: properties.format
    description: The format of the certificate - either Pfx or Cer. If omitted, the default is Pfx.
    types:
    - uid: CertificateFormat
- name: CertificateProvisioningState
  description: The provisioned state of the resource
  kind: enum
  properties:
  - name: Succeeded
    description: The certificate is available for use in pools.
    types:
    - uid: string
  - name: Deleting
    description: The user has requested that the certificate be deleted, but the delete operation has not yet completed. You may not reference the certificate when creating or updating pools.
    types:
    - uid: string
  - name: Failed
    description: The user requested that the certificate be deleted, but there are pools that still have references to the certificate, or it is still installed on one or more compute nodes. (The latter can occur if the certificate has been removed from the pool, but the node has not yet restarted. Nodes refresh their certificates only when they restart.) You may use the cancel certificate delete operation to cancel the delete, or the delete certificate operation to retry the delete.
    types:
    - uid: string
- name: DeleteCertificateError
  description: An error response from the Batch service.
  kind: object
  properties:
  - name: code
    description: An identifier for the error. Codes are invariant and are intended to be consumed programmatically.
    types:
    - uid: string
  - name: message
    description: A message describing the error, intended to be suitable for display in a user interface.
    types:
    - uid: string
  - name: target
    description: The target of the particular error. For example, the name of the property in error.
    types:
    - uid: string
  - name: details
    description: A list of additional details about the error.
    types:
    - uid: DeleteCertificateError
      isArray: true
- name: CertificateFormat
  description: The format of the certificate - either Pfx or Cer. If omitted, the default is Pfx.
  kind: enum
  properties:
  - name: Pfx
    description: The certificate is a PFX (PKCS#12) formatted certificate or certificate chain.
    types:
    - uid: string
  - name: Cer
    description: The certificate is a base64-encoded X.509 certificate.
    types:
    - uid: string
- name: CloudErrorBody
  description: An error response from the Batch service.
  kind: object
  properties:
  - name: code
    description: An identifier for the error. Codes are invariant and are intended to be consumed programmatically.
    types:
    - uid: string
  - name: message
    description: A message describing the error, intended to be suitable for display in a user interface.
    types:
    - uid: string
  - name: target
    description: The target of the particular error. For example, the name of the property in error.
    types:
    - uid: string
  - name: details
    description: A list of additional details about the error.
    types:
    - uid: CloudErrorBody
      isArray: true
examples:
- name: CreateCertificate - Minimal Pfx
  request:
    uri: PUT https://management.azure.com/subscriptions/subid/resourceGroups/default-azurebatch-japaneast/providers/Microsoft.Batch/batchAccounts/sampleacct/certificates/sha1-0a0e4f50d51beadeac1d35afc5116098e7902e6e?api-version=2022-06-01
    body: >-
      {
        "properties": {
          "data": "MIIJsgIBAzCCCW4GCSqGSIb3DQE...",
          "password": "<ExamplePassword>"
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/subid/resourceGroups/default-azurebatch-japaneast/providers/Microsoft.Batch/batchAccounts/sampleacct/certificates/sha1-0a0e4f50d51beadeac1d35afc5116098e7902e6e?api-version=2022-06-01

      {
        "properties": {
          "data": "MIIJsgIBAzCCCW4GCSqGSIb3DQE...",
          "password": "<ExamplePassword>"
        }
      }

      ```

      # [JavaScript](#tab/JavaScript)
      ``` js
      const { BatchManagementClient } = require("@azure/arm-batch");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to Creates a new certificate inside the specified account.
       *
       * @summary Creates a new certificate inside the specified account.
       * x-ms-original-file: specification/batch/resource-manager/Microsoft.Batch/stable/2022-06-01/examples/CertificateCreate_Minimal.json
       */
      async function createCertificateMinimalPfx() {
        const subscriptionId = "subid";
        const resourceGroupName = "default-azurebatch-japaneast";
        const accountName = "sampleacct";
        const certificateName = "sha1-0a0e4f50d51beadeac1d35afc5116098e7902e6e";
        const parameters = {
          data: "MIIJsgIBAzCCCW4GCSqGSIb3DQE...",
          password: "<ExamplePassword>",
        };
        const credential = new DefaultAzureCredential();
        const client = new BatchManagementClient(credential, subscriptionId);
        const result = await client.certificateOperations.create(
          resourceGroupName,
          accountName,
          certificateName,
          parameters
        );
        console.log(result);
      }

      createCertificateMinimalPfx().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-batch_7.2.0/sdk/batch/arm-batch/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    headers:
    - name: ETag
      value: W/"0x8D4EDD5118668F7"
    body: >-
      {
        "id": "/subscriptions/subid/resourceGroups/default-azurebatch-japaneast/providers/Microsoft.Batch/batchAccounts/samplecct/certificates/sha1-0a0e4f50d51beadeac1d35afc5116098e7902e6e",
        "name": "sha1-0a0e4f50d51beadeac1d35afc5116098e7902e6e",
        "type": "Microsoft.Batch/batchAccounts/certificates",
        "etag": "W/\"0x8D4EDD5118668F7\"",
        "properties": {
          "thumbprintAlgorithm": "sha1",
          "thumbprint": "0a0e4f50d51beadeac1d35afc5116098e7902e6e",
          "provisioningState": "Succeeded",
          "provisioningStateTransitionTime": "2017-07-21T01:47:38.4420202Z",
          "format": "Pfx",
          "publicData": "MIICrjCCAZagAwI..."
        }
      }
- name: CreateCertificate - Minimal Cer
  request:
    uri: PUT https://management.azure.com/subscriptions/subid/resourceGroups/default-azurebatch-japaneast/providers/Microsoft.Batch/batchAccounts/sampleacct/certificates/sha1-0a0e4f50d51beadeac1d35afc5116098e7902e6e?api-version=2022-06-01
    body: >-
      {
        "properties": {
          "data": "MIICrjCCAZagAwI...",
          "format": "Cer"
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/subid/resourceGroups/default-azurebatch-japaneast/providers/Microsoft.Batch/batchAccounts/sampleacct/certificates/sha1-0a0e4f50d51beadeac1d35afc5116098e7902e6e?api-version=2022-06-01

      {
        "properties": {
          "data": "MIICrjCCAZagAwI...",
          "format": "Cer"
        }
      }

      ```

      # [JavaScript](#tab/JavaScript)
      ``` js
      const { BatchManagementClient } = require("@azure/arm-batch");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to Creates a new certificate inside the specified account.
       *
       * @summary Creates a new certificate inside the specified account.
       * x-ms-original-file: specification/batch/resource-manager/Microsoft.Batch/stable/2022-06-01/examples/CertificateCreate_MinimalCer.json
       */
      async function createCertificateMinimalCer() {
        const subscriptionId = "subid";
        const resourceGroupName = "default-azurebatch-japaneast";
        const accountName = "sampleacct";
        const certificateName = "sha1-0a0e4f50d51beadeac1d35afc5116098e7902e6e";
        const parameters = {
          format: "Cer",
          data: "MIICrjCCAZagAwI...",
        };
        const credential = new DefaultAzureCredential();
        const client = new BatchManagementClient(credential, subscriptionId);
        const result = await client.certificateOperations.create(
          resourceGroupName,
          accountName,
          certificateName,
          parameters
        );
        console.log(result);
      }

      createCertificateMinimalCer().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-batch_7.2.0/sdk/batch/arm-batch/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    headers:
    - name: ETag
      value: W/"0x8D4EDD5118668F7"
    body: >-
      {
        "id": "/subscriptions/subid/resourceGroups/default-azurebatch-japaneast/providers/Microsoft.Batch/batchAccounts/samplecct/certificates/sha1-0a0e4f50d51beadeac1d35afc5116098e7902e6e",
        "name": "sha1-0a0e4f50d51beadeac1d35afc5116098e7902e6e",
        "type": "Microsoft.Batch/batchAccounts/certificates",
        "etag": "W/\"0x8D4EDD5118668F7\"",
        "properties": {
          "thumbprintAlgorithm": "sha1",
          "thumbprint": "0a0e4f50d51beadeac1d35afc5116098e7902e6e",
          "provisioningState": "Succeeded",
          "provisioningStateTransitionTime": "2017-07-21T01:47:38.4420202Z",
          "format": "Cer",
          "publicData": "MIICrjCCAZagAwI..."
        }
      }
- name: CreateCertificate - Full
  request:
    uri: PUT https://management.azure.com/subscriptions/subid/resourceGroups/default-azurebatch-japaneast/providers/Microsoft.Batch/batchAccounts/sampleacct/certificates/sha1-0a0e4f50d51beadeac1d35afc5116098e7902e6e?api-version=2022-06-01
    body: >-
      {
        "properties": {
          "thumbprintAlgorithm": "sha1",
          "thumbprint": "0a0e4f50d51beadeac1d35afc5116098e7902e6e",
          "data": "MIIJsgIBAzCCCW4GCSqGSIb3DQE...",
          "password": "<ExamplePassword>",
          "format": "Pfx"
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/subid/resourceGroups/default-azurebatch-japaneast/providers/Microsoft.Batch/batchAccounts/sampleacct/certificates/sha1-0a0e4f50d51beadeac1d35afc5116098e7902e6e?api-version=2022-06-01

      {
        "properties": {
          "thumbprintAlgorithm": "sha1",
          "thumbprint": "0a0e4f50d51beadeac1d35afc5116098e7902e6e",
          "data": "MIIJsgIBAzCCCW4GCSqGSIb3DQE...",
          "password": "<ExamplePassword>",
          "format": "Pfx"
        }
      }

      ```

      # [JavaScript](#tab/JavaScript)
      ``` js
      const { BatchManagementClient } = require("@azure/arm-batch");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to Creates a new certificate inside the specified account.
       *
       * @summary Creates a new certificate inside the specified account.
       * x-ms-original-file: specification/batch/resource-manager/Microsoft.Batch/stable/2022-06-01/examples/CertificateCreate_Full.json
       */
      async function createCertificateFull() {
        const subscriptionId = "subid";
        const resourceGroupName = "default-azurebatch-japaneast";
        const accountName = "sampleacct";
        const certificateName = "sha1-0a0e4f50d51beadeac1d35afc5116098e7902e6e";
        const parameters = {
          format: "Pfx",
          data: "MIIJsgIBAzCCCW4GCSqGSIb3DQE...",
          password: "<ExamplePassword>",
          thumbprint: "0a0e4f50d51beadeac1d35afc5116098e7902e6e",
          thumbprintAlgorithm: "sha1",
        };
        const credential = new DefaultAzureCredential();
        const client = new BatchManagementClient(credential, subscriptionId);
        const result = await client.certificateOperations.create(
          resourceGroupName,
          accountName,
          certificateName,
          parameters
        );
        console.log(result);
      }

      createCertificateFull().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-batch_7.2.0/sdk/batch/arm-batch/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    headers:
    - name: ETag
      value: W/"0x8D4EDD5118668F7"
    body: >-
      {
        "id": "/subscriptions/subid/resourceGroups/default-azurebatch-japaneast/providers/Microsoft.Batch/batchAccounts/samplecct/certificates/sha1-0a0e4f50d51beadeac1d35afc5116098e7902e6e",
        "name": "sha1-0a0e4f50d51beadeac1d35afc5116098e7902e6e",
        "type": "Microsoft.Batch/batchAccounts/certificates",
        "etag": "W/\"0x8D4EDD5118668F7\"",
        "properties": {
          "thumbprintAlgorithm": "sha1",
          "thumbprint": "0a0e4f50d51beadeac1d35afc5116098e7902e6e",
          "provisioningState": "Succeeded",
          "provisioningStateTransitionTime": "2017-07-21T01:47:38.4420202Z",
          "format": "Pfx",
          "publicData": "MIICrjCCAZagAwI..."
        }
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: >
    Learn more about Batch Management service - Creates a new certificate inside the specified account.
errorCodes: []
