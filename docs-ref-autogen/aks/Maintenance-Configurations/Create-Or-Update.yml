### YamlMime:RESTOperation
uid: management.azure.com.aks.maintenanceconfigurations.createorupdate
name: Create Or Update
service: AKS
groupName: Maintenance Configurations
apiVersion: 2021-05-01
summary: Creates or updates a maintenance configuration in the specified managed cluster.
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.ContainerService/managedClusters/{resourceName}/maintenanceConfigurations/{configName}?api-version=2021-05-01
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: Subscription credentials which uniquely identify Microsoft Azure subscription. The subscription ID forms part of the URI for every service call.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group.
  types:
  - uid: string
- name: resourceName
  in: path
  isRequired: true
  description: The name of the managed cluster resource.
  types:
  - uid: string
  pattern: ^[a-zA-Z0-9]$|^[a-zA-Z0-9][-_a-zA-Z0-9]{0,61}[a-zA-Z0-9]$
- name: configName
  in: path
  isRequired: true
  description: The name of the maintenance configuration.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: Client Api Version.
  types:
  - uid: string
responses:
- name: 200 OK
  description: OK
  types:
  - uid: MaintenanceConfiguration
- name: Other Status Codes
  description: Error response describing why the operation failed.
  types:
  - uid: CloudError
requestBody:
- name: default
  parameters:
  - name: properties.timeInWeek
    in: body
    description: "Time slots during the week when planned maintenance is allowed to proceed.  \nIf two array entries specify the same day of the week, the applied configuration is the union of times in both entries."
    types:
    - uid: TimeInWeek
      isArray: true
  - name: properties.notAllowedTime
    in: body
    description: Time slots on which upgrade is not allowed.
    types:
    - uid: TimeSpan
      isArray: true
requestHeader: []
definitions:
- name: SystemData
  description: Metadata pertaining to creation and last modification of the resource.
  kind: object
  properties:
  - name: createdBy
    description: The identity that created the resource.
    types:
    - uid: string
  - name: createdByType
    description: The type of identity that created the resource.
    types:
    - uid: createdByType
  - name: createdAt
    description: The UTC timestamp of resource creation.
    types:
    - uid: string
  - name: lastModifiedBy
    description: The identity that last modified the resource.
    types:
    - uid: string
  - name: lastModifiedByType
    description: The type of identity that last modified the resource.
    types:
    - uid: createdByType
  - name: lastModifiedAt
    description: The type of identity that last modified the resource.
    types:
    - uid: string
- name: TimeInWeek
  description: Time in a week.
  kind: object
  properties:
  - name: day
    description: The day of the week.
    types:
    - uid: WeekDay
  - name: hourSlots
    description: "A list of hours in the day used to identify a time range.  \nEach integer hour represents a time range beginning at 0m after the hour ending at the next hour (non-inclusive). 0 corresponds to 00:00 UTC, 23 corresponds to 23:00 UTC. Specifying [0, 1] means the 00:00 - 02:00 UTC time range."
    types:
    - uid: integer
      isArray: true
- name: TimeSpan
  description: A time range.
  kind: object
  properties:
  - name: start
    description: The start of a time span
    types:
    - uid: string
  - name: end
    description: The end of a time span
    types:
    - uid: string
- name: MaintenanceConfiguration
  description: Planned maintenance configuration, used to configure when updates can be deployed to a Managed Cluster.
  kind: object
  properties:
  - name: systemData
    isReadyOnly: true
    description: The system metadata relating to this resource.
    types:
    - uid: SystemData
  - name: properties.timeInWeek
    description: "Time slots during the week when planned maintenance is allowed to proceed.  \nIf two array entries specify the same day of the week, the applied configuration is the union of times in both entries."
    types:
    - uid: TimeInWeek
      isArray: true
  - name: properties.notAllowedTime
    description: Time slots on which upgrade is not allowed.
    types:
    - uid: TimeSpan
      isArray: true
  - name: id
    isReadyOnly: true
    description: Resource ID.
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: The name of the resource that is unique within a resource group. This name can be used to access the resource.
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: Resource type
    types:
    - uid: string
- name: CloudError
  description: An error response from the Container service.
  kind: object
  properties:
  - name: error
    description: Details about the error.
    types:
    - uid: CloudErrorBody
- name: createdByType
  description: The type of identity that created the resource.
  kind: enum
  properties:
  - name: User
    types:
    - uid: string
  - name: Application
    types:
    - uid: string
  - name: ManagedIdentity
    types:
    - uid: string
  - name: Key
    types:
    - uid: string
- name: WeekDay
  description: The weekday enum.
  kind: enum
  properties:
  - name: Sunday
    types:
    - uid: string
  - name: Monday
    types:
    - uid: string
  - name: Tuesday
    types:
    - uid: string
  - name: Wednesday
    types:
    - uid: string
  - name: Thursday
    types:
    - uid: string
  - name: Friday
    types:
    - uid: string
  - name: Saturday
    types:
    - uid: string
- name: CloudErrorBody
  description: An error response from the Container service.
  kind: object
  properties:
  - name: code
    description: An identifier for the error. Codes are invariant and are intended to be consumed programmatically.
    types:
    - uid: string
  - name: message
    description: A message describing the error, intended to be suitable for display in a user interface.
    types:
    - uid: string
  - name: target
    description: The target of the particular error. For example, the name of the property in error.
    types:
    - uid: string
  - name: details
    description: A list of additional details about the error.
    types:
    - uid: CloudErrorBody
      isArray: true
examples:
- name: Create/Update Maintenance Configuration
  request:
    uri: PUT https://management.azure.com/subscriptions/subid1/resourceGroups/rg1/providers/Microsoft.ContainerService/managedClusters/clustername1/maintenanceConfigurations/default?api-version=2021-05-01
    body: >-
      {
        "properties": {
          "timeInWeek": [
            {
              "day": "Monday",
              "hourSlots": [
                1,
                2
              ]
            }
          ],
          "notAllowedTime": [
            {
              "start": "2020-11-26T03:00:00Z",
              "end": "2020-11-30T12:00:00Z"
            }
          ]
        }
      }
  responses:
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/subid1/resourcegroups/rg1/providers/Microsoft.ContainerService/managedClusters/clustername1/maintenanceConfigurations/default",
        "type": "Microsoft.ContainerService/managedClusters/maintenanceConfigurations",
        "name": "default",
        "systemData": {
          "createdBy": "user1",
          "createdByType": "User",
          "createdAt": "2020-01-01T17:18:19.1234567Z",
          "lastModifiedBy": "user2",
          "lastModifiedByType": "User",
          "lastModifiedAt": "2020-01-02T17:18:19.1234567Z"
        },
        "properties": {
          "timeInWeek": [
            {
              "day": "Monday",
              "hourSlots": [
                1,
                2
              ]
            }
          ],
          "notAllowedTime": [
            {
              "start": "2020-11-26T03:00:00Z",
              "end": "2020-11-30T12:00:00Z"
            }
          ]
        }
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: Learn more about AKS service - Creates or updates a maintenance configuration in the specified managed cluster.
errorCodes: []
