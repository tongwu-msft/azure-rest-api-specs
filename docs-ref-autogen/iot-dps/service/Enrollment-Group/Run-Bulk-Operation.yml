### YamlMime:RESTOperation
uid: your-dps.azure-devices-provisioning.net.iot-dps.service.enrollmentgroup.runbulkoperation
name: Run Bulk Operation
service: IoT Hub Device Provisioning Service
groupName: Enrollment Group
apiVersion: 2021-06-01
summary: Bulk device enrollment group operation with maximum of 10 groups.
consumes:
- application/json
produces:
- application/json
paths:
- content: POST https://your-dps.azure-devices-provisioning.net/enrollmentGroups?api-version=2021-06-01
uriParameters:
- name: api-version
  in: query
  isRequired: true
  description: 'The API version to use for the request. Supported versions include: 2021-06-01'
  types:
  - uid: string
responses:
- name: 200 OK
  description: Success
  types:
  - uid: BulkEnrollmentGroupOperationResult
- name: Other Status Codes
  description: Error response
  types:
  - uid: ProvisioningServiceErrorDetails
requestBody:
- name: default
  parameters:
  - name: enrollmentGroups
    in: body
    isRequired: true
    description: Enrollment items
    types:
    - uid: EnrollmentGroup
      isArray: true
  - name: mode
    in: body
    isRequired: true
    description: Operation mode.
    types:
    - uid: create
    - uid: update
    - uid: updateIfMatchETag
    - uid: delete
    typesTitle: enum
requestHeader: []
definitions:
- name: EnrollmentGroup
  description: Enrollment group record.
  kind: object
  properties:
  - name: enrollmentGroupId
    description: Enrollment Group ID.
    types:
    - uid: string
  - name: attestation
    description: Attestation method used by the device.
    types:
    - uid: AttestationMechanism
  - name: capabilities
    description: Capabilities of the device.
    types:
    - uid: DeviceCapabilities
  - name: iotHubHostName
    description: The Iot Hub host name.
    types:
    - uid: string
  - name: initialTwin
    description: Initial device twin.
    types:
    - uid: InitialTwin
  - name: etag
    description: The entity tag associated with the resource.
    types:
    - uid: string
  - name: provisioningStatus
    description: The provisioning status.
    types:
    - uid: enabled
    - uid: disabled
    typesTitle: enum
    defaultValue: enabled
  - name: reprovisionPolicy
    description: The behavior when a device is re-provisioned to an IoT hub.
    types:
    - uid: ReprovisionPolicy
  - name: createdDateTimeUtc
    isReadyOnly: true
    description: The DateTime this resource was created.
    types:
    - uid: string
  - name: lastUpdatedDateTimeUtc
    isReadyOnly: true
    description: The DateTime this resource was last updated.
    types:
    - uid: string
  - name: allocationPolicy
    description: "The allocation policy of this resource. This policy overrides the tenant level allocation policy for this individual enrollment or enrollment group. Possible values include 'hashed': Linked IoT hubs are equally likely to have devices provisioned to them, 'geoLatency':  Devices are provisioned to an IoT hub with the lowest latency to the device.If multiple linked IoT hubs would provide the same lowest latency, the provisioning service hashes devices across those hubs, 'static' : Specification of the desired IoT hub in the enrollment list takes priority over the service-level allocation policy, 'custom': Devices are provisioned to an IoT hub based on your own custom logic. The provisioning service passes information about the device to the logic, and the logic returns the desired IoT hub as well as the desired initial configuration. We recommend using Azure Functions to host your logic."
    types:
    - uid: hashed
    - uid: geoLatency
    - uid: static
    - uid: custom
    typesTitle: enum
  - name: iotHubs
    description: The list of IoT Hub hostnames the device(s) in this resource can be allocated to. Must be a subset of tenant level list of IoT hubs.
    types:
    - uid: string
      isArray: true
  - name: customAllocationDefinition
    description: This tells DPS which webhook to call when using custom allocation.
    types:
    - uid: CustomAllocationDefinition
- name: BulkEnrollmentGroupOperationResult
  description: Results of a bulk enrollment group operation.
  kind: object
  properties:
  - name: errors
    description: Registration errors
    types:
    - uid: BulkEnrollmentGroupOperationError
      isArray: true
  - name: isSuccessful
    description: Indicates if the operation was successful in its entirety.
    types:
    - uid: boolean
- name: ProvisioningServiceErrorDetails
  description: Contains the properties of an error returned by the Azure IoT Hub Provisioning Service.
  kind: object
  properties:
  - name: errorCode
    description: ''
    types:
    - uid: integer
  - name: trackingId
    description: ''
    types:
    - uid: string
  - name: message
    description: ''
    types:
    - uid: string
  - name: info
    description: ''
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: timestampUtc
    description: ''
    types:
    - uid: string
- name: BulkEnrollmentGroupOperation
  description: Bulk enrollment operation.
  kind: object
  properties:
  - name: enrollmentGroups
    description: Enrollment items
    types:
    - uid: EnrollmentGroup
      isArray: true
  - name: mode
    description: Operation mode.
    types:
    - uid: create
    - uid: update
    - uid: updateIfMatchETag
    - uid: delete
    typesTitle: enum
- name: AttestationMechanism
  description: Attestation mechanism for individualEnrollment as well as enrollmentGroup.
  kind: object
  properties:
  - name: type
    description: Attestation Type.
    types:
    - uid: none
    - uid: tpm
    - uid: x509
    - uid: symmetricKey
    typesTitle: enum
  - name: tpm
    description: TPM attestation method.
    types:
    - uid: TpmAttestation
  - name: x509
    description: X509 attestation method.
    types:
    - uid: X509Attestation
  - name: symmetricKey
    description: Symmetric Key attestation method.
    types:
    - uid: SymmetricKeyAttestation
- name: DeviceCapabilities
  description: Device capabilities.
  kind: object
  properties:
  - name: iotEdge
    description: If set to true, this device is an IoTEdge device.
    types:
    - uid: boolean
    defaultValue: "false"
- name: InitialTwin
  description: Initial device twin. Contains a subset of the properties of Twin.
  kind: object
  properties:
  - name: tags
    description: Twin tags.
    types:
    - uid: TwinCollection
  - name: properties
    description: Twin desired properties.
    types:
    - uid: InitialTwinProperties
- name: ReprovisionPolicy
  description: The behavior of the service when a device is re-provisioned to an IoT hub.
  kind: object
  properties:
  - name: updateHubAssignment
    description: When set to true (default), the Device Provisioning Service will evaluate the device's IoT Hub assignment and update it if necessary for any provisioning requests beyond the first from a given device. If set to false, the device will stay assigned to its current IoT hub.
    types:
    - uid: boolean
    defaultValue: "true"
  - name: migrateDeviceData
    description: When set to true (default), the Device Provisioning Service will migrate the device's data (twin, device capabilities, and device ID) from one IoT hub to another during an IoT hub assignment update. If set to false, the Device Provisioning Service will reset the device's data to the initial desired configuration stored in the corresponding enrollment list.
    types:
    - uid: boolean
    defaultValue: "true"
- name: CustomAllocationDefinition
  description: This tells DPS which webhook to call when using custom allocation.
  kind: object
  properties:
  - name: webhookUrl
    description: The webhook URL used for allocation requests.
    types:
    - uid: string
  - name: apiVersion
    description: 'The API version of the provisioning service types (such as IndividualEnrollment) sent in the custom allocation request. Minimum supported version: "2018-09-01-preview".'
    types:
    - uid: string
- name: BulkEnrollmentGroupOperationError
  description: Bulk enrollment operation error.
  kind: object
  properties:
  - name: enrollmentGroupId
    description: Enrollment group id.
    types:
    - uid: string
  - name: errorCode
    description: Error code
    types:
    - uid: integer
  - name: errorStatus
    description: Error status.
    types:
    - uid: string
- name: TpmAttestation
  description: Attestation via TPM.
  kind: object
  properties:
  - name: endorsementKey
    description: ''
    types:
    - uid: string
  - name: storageRootKey
    description: ''
    types:
    - uid: string
- name: X509Attestation
  description: Attestation via X509.
  kind: object
  properties:
  - name: clientCertificates
    description: Primary and secondary certificates
    types:
    - uid: X509Certificates
  - name: signingCertificates
    description: Primary and secondary certificates
    types:
    - uid: X509Certificates
  - name: caReferences
    description: Primary and secondary CA references.
    types:
    - uid: X509CAReferences
- name: SymmetricKeyAttestation
  description: Attestation via SymmetricKey.
  kind: object
  properties:
  - name: primaryKey
    description: Primary symmetric key.
    types:
    - uid: string
  - name: secondaryKey
    description: Secondary symmetric key.
    types:
    - uid: string
- name: TwinCollection
  description: Represents a collection of properties within a Twin
  kind: object
  properties:
  - name: version
    description: Version of the TwinCollection
    types:
    - uid: integer
  - name: count
    description: Number of properties in the TwinCollection
    types:
    - uid: integer
  - name: metadata
    description: Metadata for the TwinCollection
    types:
    - uid: Metadata
- name: InitialTwinProperties
  description: Represents the initial properties that will be set on the device twin.
  kind: object
  properties:
  - name: desired
    description: Gets and sets the InitialTwin desired properties.
    types:
    - uid: TwinCollection
- name: X509Certificates
  description: Primary and secondary certificates
  kind: object
  properties:
  - name: primary
    description: Certificate and Certificate info
    types:
    - uid: X509CertificateWithInfo
  - name: secondary
    description: Certificate and Certificate info
    types:
    - uid: X509CertificateWithInfo
- name: X509CAReferences
  description: Primary and secondary CA references.
  kind: object
  properties:
  - name: primary
    description: ''
    types:
    - uid: string
  - name: secondary
    description: ''
    types:
    - uid: string
- name: Metadata
  description: Metadata for the TwinCollection
  kind: object
  properties:
  - name: lastUpdated
    description: Last time the TwinCollection was updated
    types:
    - uid: string
  - name: lastUpdatedVersion
    description: This is null for reported properties metadata and is not null for desired properties metadata.
    types:
    - uid: integer
- name: X509CertificateWithInfo
  description: Certificate and Certificate info
  kind: object
  properties:
  - name: certificate
    description: ''
    types:
    - uid: string
  - name: info
    description: X509 certificate info.
    types:
    - uid: X509CertificateInfo
- name: X509CertificateInfo
  description: X509 certificate info.
  kind: object
  properties:
  - name: subjectName
    description: ''
    types:
    - uid: string
  - name: sha1Thumbprint
    description: ''
    types:
    - uid: string
  - name: sha256Thumbprint
    description: ''
    types:
    - uid: string
  - name: issuerName
    description: ''
    types:
    - uid: string
  - name: notBeforeUtc
    description: ''
    types:
    - uid: string
  - name: notAfterUtc
    description: ''
    types:
    - uid: string
  - name: serialNumber
    description: ''
    types:
    - uid: string
  - name: version
    description: ''
    types:
    - uid: integer
examples: []
security: []
metadata:
  description: >
    Learn more about IoT Hub Device Provisioning Service service - Bulk device enrollment group operation with maximum of 10 groups.
errorCodes: []
