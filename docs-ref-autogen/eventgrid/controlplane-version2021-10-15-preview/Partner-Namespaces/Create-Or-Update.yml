### YamlMime:RESTOperation
uid: management.azure.com.eventgrid.controlplane-version2021-10-15-preview.partnernamespaces.createorupdate
name: Create Or Update
service: Event Grid
groupName: Partner Namespaces
apiVersion: 2021-10-15-preview
summary: "Create a partner namespace.  \nAsynchronously creates a new partner namespace with the specified parameters."
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventGrid/partnerNamespaces/{partnerNamespaceName}?api-version=2021-10-15-preview
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: Subscription credentials that uniquely identify a Microsoft Azure subscription. The subscription ID forms part of the URI for every service call.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group within the user's subscription.
  types:
  - uid: string
- name: partnerNamespaceName
  in: path
  isRequired: true
  description: Name of the partner namespace.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: Version of the API to be used with the client request.
  types:
  - uid: string
responses:
- name: 201 Created
  description: Created
  types:
  - uid: PartnerNamespace
- name: Other Status Codes
  description: >-
    *** Error Responses: ***

     * 400 Bad Request.

     * 500 Internal Server Error.
requestBody:
- name: default
  parameters:
  - name: properties.partnerRegistrationFullyQualifiedId
    in: body
    description: >-
      The fully qualified ARM Id of the partner registration that should be associated with this partner namespace. This takes the following format:

      /subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventGrid/partnerRegistrations/{partnerRegistrationName}.
    types:
    - uid: string
  - name: properties.publicNetworkAccess
    in: body
    description: >-
      This determines if traffic is allowed over public network. By default it is enabled.

      You can further restrict to specific IPs by configuring <seealso cref="P:Microsoft.Azure.Events.ResourceProvider.Common.Contracts.PartnerNamespaceProperties.InboundIpRules" />
    types:
    - uid: PublicNetworkAccess
  - name: properties.inboundIpRules
    in: body
    description: 'This can be used to restrict traffic from specific IPs instead of all IPs. Note: These are considered only if PublicNetworkAccess is enabled.'
    types:
    - uid: InboundIpRule
      isArray: true
  - name: properties.disableLocalAuth
    in: body
    description: This boolean is used to enable or disable local auth. Default value is false. When the property is set to true, only AAD token will be used to authenticate if user is allowed to publish to the partner namespace.
    types:
    - uid: boolean
  - name: properties.partnerTopicRoutingMode
    in: body
    description: >-
      This determines if events published to this partner namespace should use the source attribute in the event payload

      or use the channel name in the header when matching to the partner topic. If none is specified, source attribute routing will be used to match the partner topic.
    types:
    - uid: PartnerTopicRoutingMode
  - name: location
    in: body
    isRequired: true
    description: Location of the resource.
    types:
    - uid: string
  - name: tags
    in: body
    description: Tags of the resource.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
requestHeader: []
definitions:
- name: systemData
  description: Metadata pertaining to creation and last modification of the resource.
  kind: object
  properties:
  - name: createdBy
    description: The identity that created the resource.
    types:
    - uid: string
  - name: createdByType
    description: The type of identity that created the resource.
    types:
    - uid: createdByType
  - name: createdAt
    description: The timestamp of resource creation (UTC).
    types:
    - uid: string
  - name: lastModifiedBy
    description: The identity that last modified the resource.
    types:
    - uid: string
  - name: lastModifiedByType
    description: The type of identity that last modified the resource.
    types:
    - uid: createdByType
  - name: lastModifiedAt
    description: The timestamp of resource last modification (UTC)
    types:
    - uid: string
- name: PrivateEndpointConnection
  kind: object
  properties:
  - name: properties.privateEndpoint
    description: The Private Endpoint resource for this Connection.
    types:
    - uid: PrivateEndpoint
  - name: properties.groupIds
    description: GroupIds from the private link service resource.
    types:
    - uid: string
      isArray: true
  - name: properties.privateLinkServiceConnectionState
    description: Details about the state of the connection.
    types:
    - uid: ConnectionState
  - name: properties.provisioningState
    description: Provisioning state of the Private Endpoint Connection.
    types:
    - uid: ResourceProvisioningState
  - name: id
    isReadyOnly: true
    description: Fully qualified identifier of the resource.
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: Name of the resource.
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: Type of the resource.
    types:
    - uid: string
- name: InboundIpRule
  kind: object
  properties:
  - name: ipMask
    description: IP Address in CIDR notation e.g., 10.0.0.0/8.
    types:
    - uid: string
  - name: action
    description: Action to perform based on the match or no match of the IpMask.
    types:
    - uid: IpActionType
- name: PartnerNamespace
  description: EventGrid Partner Namespace.
  kind: object
  properties:
  - name: systemData
    isReadyOnly: true
    description: The system metadata relating to Partner Namespace resource.
    types:
    - uid: systemData
  - name: properties.privateEndpointConnections
    isReadyOnly: true
    description: ''
    types:
    - uid: PrivateEndpointConnection
      isArray: true
  - name: properties.provisioningState
    isReadyOnly: true
    description: Provisioning state of the partner namespace.
    types:
    - uid: PartnerNamespaceProvisioningState
  - name: properties.partnerRegistrationFullyQualifiedId
    description: >-
      The fully qualified ARM Id of the partner registration that should be associated with this partner namespace. This takes the following format:

      /subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventGrid/partnerRegistrations/{partnerRegistrationName}.
    types:
    - uid: string
  - name: properties.endpoint
    isReadyOnly: true
    description: Endpoint for the partner namespace.
    types:
    - uid: string
  - name: properties.publicNetworkAccess
    description: >-
      This determines if traffic is allowed over public network. By default it is enabled.

      You can further restrict to specific IPs by configuring <seealso cref="P:Microsoft.Azure.Events.ResourceProvider.Common.Contracts.PartnerNamespaceProperties.InboundIpRules" />
    types:
    - uid: PublicNetworkAccess
    defaultValue: Enabled
  - name: properties.inboundIpRules
    description: 'This can be used to restrict traffic from specific IPs instead of all IPs. Note: These are considered only if PublicNetworkAccess is enabled.'
    types:
    - uid: InboundIpRule
      isArray: true
  - name: properties.disableLocalAuth
    description: This boolean is used to enable or disable local auth. Default value is false. When the property is set to true, only AAD token will be used to authenticate if user is allowed to publish to the partner namespace.
    types:
    - uid: boolean
    defaultValue: false
  - name: properties.partnerTopicRoutingMode
    description: >-
      This determines if events published to this partner namespace should use the source attribute in the event payload

      or use the channel name in the header when matching to the partner topic. If none is specified, source attribute routing will be used to match the partner topic.
    types:
    - uid: PartnerTopicRoutingMode
    defaultValue: SourceEventAttribute
  - name: location
    description: Location of the resource.
    types:
    - uid: string
  - name: tags
    description: Tags of the resource.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: id
    isReadyOnly: true
    description: Fully qualified identifier of the resource.
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: Name of the resource.
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: Type of the resource.
    types:
    - uid: string
- name: createdByType
  description: The type of identity that created the resource.
  kind: enum
  properties:
  - name: User
    types:
    - uid: string
  - name: Application
    types:
    - uid: string
  - name: ManagedIdentity
    types:
    - uid: string
  - name: Key
    types:
    - uid: string
- name: PrivateEndpoint
  description: PrivateEndpoint information.
  kind: object
  properties:
  - name: id
    description: The ARM identifier for Private Endpoint.
    types:
    - uid: string
- name: ConnectionState
  description: ConnectionState information.
  kind: object
  properties:
  - name: status
    description: Status of the connection.
    types:
    - uid: PersistedConnectionStatus
  - name: description
    description: Description of the connection state.
    types:
    - uid: string
  - name: actionsRequired
    description: Actions required (if any).
    types:
    - uid: string
- name: ResourceProvisioningState
  description: Provisioning state of the Private Endpoint Connection.
  kind: enum
  properties:
  - name: Creating
    types:
    - uid: string
  - name: Updating
    types:
    - uid: string
  - name: Deleting
    types:
    - uid: string
  - name: Succeeded
    types:
    - uid: string
  - name: Canceled
    types:
    - uid: string
  - name: Failed
    types:
    - uid: string
- name: IpActionType
  description: Action to perform based on the match or no match of the IpMask.
  kind: enum
  properties:
  - name: Allow
    types:
    - uid: string
- name: PartnerNamespaceProvisioningState
  description: Provisioning state of the partner namespace.
  kind: enum
  properties:
  - name: Creating
    types:
    - uid: string
  - name: Updating
    types:
    - uid: string
  - name: Deleting
    types:
    - uid: string
  - name: Succeeded
    types:
    - uid: string
  - name: Canceled
    types:
    - uid: string
  - name: Failed
    types:
    - uid: string
- name: PublicNetworkAccess
  description: >-
    This determines if traffic is allowed over public network. By default it is enabled.

    You can further restrict to specific IPs by configuring <seealso cref="P:Microsoft.Azure.Events.ResourceProvider.Common.Contracts.DomainProperties.InboundIpRules" />
  kind: enum
  properties:
  - name: Enabled
    types:
    - uid: string
  - name: Disabled
    types:
    - uid: string
- name: PartnerTopicRoutingMode
  description: >-
    This determines if events published to this partner namespace should use the source attribute in the event payload

    or use the channel name in the header when matching to the partner topic. If none is specified, source attribute routing will be used to match the partner topic.
  kind: enum
  properties:
  - name: SourceEventAttribute
    types:
    - uid: string
  - name: ChannelNameHeader
    types:
    - uid: string
- name: PersistedConnectionStatus
  description: Status of the connection.
  kind: enum
  properties:
  - name: Pending
    types:
    - uid: string
  - name: Approved
    types:
    - uid: string
  - name: Rejected
    types:
    - uid: string
  - name: Disconnected
    types:
    - uid: string
examples:
- name: PartnerNamespaces_CreateOrUpdate
  request:
    uri: PUT https://management.azure.com/subscriptions/5b4b650e-28b9-4790-b3ab-ddbd88d727c4/resourceGroups/examplerg/providers/Microsoft.EventGrid/partnerNamespaces/examplePartnerNamespaceName1?api-version=2021-10-15-preview
    body: >-
      {
        "location": "westus",
        "tags": {
          "tag1": "value1",
          "tag2": "value2"
        },
        "properties": {
          "partnerRegistrationFullyQualifiedId": "/subscriptions/5b4b650e-28b9-4790-b3ab-ddbd88d727c4/resourceGroups/examplerg/providers/Microsoft.EventGrid/partnerRegistrations/ContosoCorpAccount1"
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/5b4b650e-28b9-4790-b3ab-ddbd88d727c4/resourceGroups/examplerg/providers/Microsoft.EventGrid/partnerNamespaces/examplePartnerNamespaceName1?api-version=2021-10-15-preview

      {
        "location": "westus",
        "tags": {
          "tag1": "value1",
          "tag2": "value2"
        },
        "properties": {
          "partnerRegistrationFullyQualifiedId": "/subscriptions/5b4b650e-28b9-4790-b3ab-ddbd88d727c4/resourceGroups/examplerg/providers/Microsoft.EventGrid/partnerRegistrations/ContosoCorpAccount1"
        }
      }

      ```

      # [Java](#tab/Java)
      ``` java
      import java.util.HashMap;
      import java.util.Map;

      /** Samples for PartnerNamespaces CreateOrUpdate. */
      public final class Main {
          /*
           * x-ms-original-file: specification/eventgrid/resource-manager/Microsoft.EventGrid/preview/2021-10-15-preview/examples/PartnerNamespaces_CreateOrUpdate.json
           */
          /**
           * Sample code: PartnerNamespaces_CreateOrUpdate.
           *
           * @param manager Entry point to EventGridManager.
           */
          public static void partnerNamespacesCreateOrUpdate(com.azure.resourcemanager.eventgrid.EventGridManager manager) {
              manager
                  .partnerNamespaces()
                  .define("examplePartnerNamespaceName1")
                  .withRegion("westus")
                  .withExistingResourceGroup("examplerg")
                  .withTags(mapOf("tag1", "value1", "tag2", "value2"))
                  .withPartnerRegistrationFullyQualifiedId(
                      "/subscriptions/5b4b650e-28b9-4790-b3ab-ddbd88d727c4/resourceGroups/examplerg/providers/Microsoft.EventGrid/partnerRegistrations/ContosoCorpAccount1")
                  .create();
          }

          @SuppressWarnings("unchecked")
          private static <T> Map<String, T> mapOf(Object... inputs) {
              Map<String, T> map = new HashMap<>();
              for (int i = 0; i < inputs.length; i += 2) {
                  String key = (String) inputs[i];
                  T value = (T) inputs[i + 1];
                  map.put(key, value);
              }
              return map;
          }
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-java/blob/azure-resourcemanager-eventgrid_1.2.0-beta.2/sdk/eventgrid/azure-resourcemanager-eventgrid/README.md) on how to add the SDK to your project and authenticate.
      # [Go](#tab/Go)
      ``` go
      package armeventgrid_test

      import (
      	"context"
      	"log"

      	"time"

      	"github.com/Azure/azure-sdk-for-go/sdk/azcore/to"
      	"github.com/Azure/azure-sdk-for-go/sdk/azidentity"
      	"github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/eventgrid/armeventgrid"
      )

      // Generated from example definition: https://github.com/Azure/azure-rest-api-specs/tree/main/specification/eventgrid/resource-manager/Microsoft.EventGrid/preview/2021-10-15-preview/examples/PartnerNamespaces_CreateOrUpdate.json
      func ExamplePartnerNamespacesClient_BeginCreateOrUpdate() {
      	cred, err := azidentity.NewDefaultAzureCredential(nil)
      	if err != nil {
      		log.Fatalf("failed to obtain a credential: %v", err)
      		return
      	}
      	ctx := context.Background()
      	client, err := armeventgrid.NewPartnerNamespacesClient("<subscription-id>", cred, nil)
      	if err != nil {
      		log.Fatalf("failed to create client: %v", err)
      		return
      	}
      	poller, err := client.BeginCreateOrUpdate(ctx,
      		"<resource-group-name>",
      		"<partner-namespace-name>",
      		armeventgrid.PartnerNamespace{
      			Location: to.Ptr("<location>"),
      			Tags: map[string]*string{
      				"tag1": to.Ptr("value1"),
      				"tag2": to.Ptr("value2"),
      			},
      			Properties: &armeventgrid.PartnerNamespaceProperties{
      				PartnerRegistrationFullyQualifiedID: to.Ptr("<partner-registration-fully-qualified-id>"),
      			},
      		},
      		&armeventgrid.PartnerNamespacesClientBeginCreateOrUpdateOptions{ResumeToken: ""})
      	if err != nil {
      		log.Fatalf("failed to finish the request: %v", err)
      		return
      	}
      	_, err = poller.PollUntilDone(ctx, 30*time.Second)
      	if err != nil {
      		log.Fatalf("failed to pull the result: %v", err)
      		return
      	}
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-go/blob/sdk%2Fresourcemanager%2Feventgrid%2Farmeventgrid%2Fv0.5.0/sdk/resourcemanager/eventgrid/armeventgrid/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "201"
    body: >-
      {
        "properties": {
          "provisioningState": "Succeeded",
          "partnerRegistrationFullyQualifiedId": "/subscriptions/5b4b650e-28b9-4790-b3ab-ddbd88d727c4/resourceGroups/examplerg/providers/Microsoft.EventGrid/partnerRegistrations/ContosoCorpAccount1",
          "endpoint": "https://examplePartnerNamespaceName1.centraluseuap-1.eventgrid.azure.net/api/events"
        },
        "location": "westus",
        "tags": {
          "key1": "value1",
          "key2": "value2"
        },
        "id": "/subscriptions/5b4b650e-28b9-4790-b3ab-ddbd88d727c4/resourceGroups/examplerg/providers/Microsoft.EventGrid/partnerNamespaces/examplePartnerNamespaceName1",
        "name": "examplePartnerNamespaceName1",
        "type": "Microsoft.EventGrid/partnerNamespaces"
      }
security: []
metadata:
  description: >
    Create a partner namespace.

    Asynchronously creates a new partner namespace with the specified parameters.
errorCodes: []
