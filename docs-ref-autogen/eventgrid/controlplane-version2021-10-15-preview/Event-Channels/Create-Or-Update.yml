### YamlMime:RESTOperation
uid: management.azure.com.eventgrid.controlplane-version2021-10-15-preview.eventchannels.createorupdate
name: Create Or Update
service: Event Grid
groupName: Event Channels
apiVersion: 2021-10-15-preview
summary: "Create an event channel.  \nAsynchronously creates a new event channel with the specified parameters."
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventGrid/partnerNamespaces/{partnerNamespaceName}/eventChannels/{eventChannelName}?api-version=2021-10-15-preview
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: Subscription credentials that uniquely identify a Microsoft Azure subscription. The subscription ID forms part of the URI for every service call.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group within the user's subscription.
  types:
  - uid: string
- name: partnerNamespaceName
  in: path
  isRequired: true
  description: Name of the partner namespace.
  types:
  - uid: string
- name: eventChannelName
  in: path
  isRequired: true
  description: Name of the event channel.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: Version of the API to be used with the client request.
  types:
  - uid: string
responses:
- name: 200 OK
  description: OK
  types:
  - uid: EventChannel
- name: Other Status Codes
  description: >-
    *** Error Responses: ***

     * 400 Bad Request.

     * 500 Internal Server Error.
requestBody:
- name: default
  parameters:
  - name: properties.source
    in: body
    description: Source of the event channel. This represents a unique resource in the partner's resource model.
    types:
    - uid: EventChannelSource
  - name: properties.destination
    in: body
    description: Represents the destination of an event channel.
    types:
    - uid: EventChannelDestination
  - name: properties.expirationTimeIfNotActivatedUtc
    in: body
    description: >-
      Expiration time of the event channel. If this timer expires while the corresponding partner topic is never activated,

      the event channel and corresponding partner topic are deleted.
    types:
    - uid: string
  - name: properties.filter
    in: body
    description: Information about the filter for the event channel.
    types:
    - uid: EventChannelFilter
  - name: properties.partnerTopicFriendlyDescription
    in: body
    description: >-
      Friendly description about the topic. This can be set by the publisher/partner to show custom description for the customer partner topic.

      This will be helpful to remove any ambiguity of the origin of creation of the partner topic for the customer.
    types:
    - uid: string
requestHeader: []
definitions:
- name: systemData
  description: Metadata pertaining to creation and last modification of the resource.
  kind: object
  properties:
  - name: createdBy
    description: The identity that created the resource.
    types:
    - uid: string
  - name: createdByType
    description: The type of identity that created the resource.
    types:
    - uid: createdByType
  - name: createdAt
    description: The timestamp of resource creation (UTC).
    types:
    - uid: string
  - name: lastModifiedBy
    description: The identity that last modified the resource.
    types:
    - uid: string
  - name: lastModifiedByType
    description: The type of identity that last modified the resource.
    types:
    - uid: createdByType
  - name: lastModifiedAt
    description: The timestamp of resource last modification (UTC)
    types:
    - uid: string
- name: EventChannelSource
  description: Properties of the source of an event channel.
  kind: object
  properties:
  - name: source
    description: >-
      The identifier of the resource that's the source of the events.

      This represents a unique resource in the partner's resource model.
    types:
    - uid: string
- name: EventChannelDestination
  description: Properties of the destination of an event channel.
  kind: object
  properties:
  - name: azureSubscriptionId
    description: >-
      Azure subscription ID of the customer creating the event channel. The partner topic

      associated with the event channel will be created under this Azure subscription.
    types:
    - uid: string
  - name: resourceGroup
    description: >-
      Azure Resource Group of the customer creating the event channel. The partner topic

      associated with the event channel will be created under this resource group.
    types:
    - uid: string
  - name: partnerTopicName
    description: Name of the partner topic associated with the event channel.
    types:
    - uid: string
- name: EventChannelFilter
  description: Filter for the Event Channel.
  kind: object
  properties:
  - name: enableAdvancedFilteringOnArrays
    description: Allows advanced filters to be evaluated against an array of values instead of expecting a singular value. The default value is either false or null.
    types:
    - uid: boolean
    defaultValue: false
  - name: advancedFilters
    description: An array of advanced filters that are used for filtering event channels.
    types:
    - uid: NumberInAdvancedFilter
      isArray: true
    - uid: NumberNotInAdvancedFilter
      isArray: true
    - uid: NumberLessThanAdvancedFilter
      isArray: true
    - uid: NumberGreaterThanAdvancedFilter
      isArray: true
    - uid: NumberLessThanOrEqualsAdvancedFilter
      isArray: true
    - uid: NumberGreaterThanOrEqualsAdvancedFilter
      isArray: true
    - uid: BoolEqualsAdvancedFilter
      isArray: true
    - uid: StringInAdvancedFilter
      isArray: true
    - uid: StringNotInAdvancedFilter
      isArray: true
    - uid: StringBeginsWithAdvancedFilter
      isArray: true
    - uid: StringEndsWithAdvancedFilter
      isArray: true
    - uid: StringContainsAdvancedFilter
      isArray: true
    - uid: NumberInRangeAdvancedFilter
      isArray: true
    - uid: NumberNotInRangeAdvancedFilter
      isArray: true
    - uid: StringNotBeginsWithAdvancedFilter
      isArray: true
    - uid: StringNotEndsWithAdvancedFilter
      isArray: true
    - uid: StringNotContainsAdvancedFilter
      isArray: true
    - uid: IsNullOrUndefinedAdvancedFilter
      isArray: true
    - uid: IsNotNullAdvancedFilter
      isArray: true
    typesTitle: AdvancedFilter[]
- name: EventChannel
  description: Event Channel.
  kind: object
  properties:
  - name: systemData
    isReadyOnly: true
    description: The system metadata relating to Event Channel resource.
    types:
    - uid: systemData
  - name: properties.source
    description: Source of the event channel. This represents a unique resource in the partner's resource model.
    types:
    - uid: EventChannelSource
  - name: properties.destination
    description: Represents the destination of an event channel.
    types:
    - uid: EventChannelDestination
  - name: properties.provisioningState
    isReadyOnly: true
    description: Provisioning state of the event channel.
    types:
    - uid: EventChannelProvisioningState
  - name: properties.partnerTopicReadinessState
    isReadyOnly: true
    description: The readiness state of the corresponding partner topic.
    types:
    - uid: PartnerTopicReadinessState
  - name: properties.expirationTimeIfNotActivatedUtc
    description: >-
      Expiration time of the event channel. If this timer expires while the corresponding partner topic is never activated,

      the event channel and corresponding partner topic are deleted.
    types:
    - uid: string
  - name: properties.filter
    description: Information about the filter for the event channel.
    types:
    - uid: EventChannelFilter
  - name: properties.partnerTopicFriendlyDescription
    description: >-
      Friendly description about the topic. This can be set by the publisher/partner to show custom description for the customer partner topic.

      This will be helpful to remove any ambiguity of the origin of creation of the partner topic for the customer.
    types:
    - uid: string
  - name: id
    isReadyOnly: true
    description: Fully qualified identifier of the resource.
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: Name of the resource.
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: Type of the resource.
    types:
    - uid: string
- name: createdByType
  description: The type of identity that created the resource.
  kind: enum
  properties:
  - name: User
    types:
    - uid: string
  - name: Application
    types:
    - uid: string
  - name: ManagedIdentity
    types:
    - uid: string
  - name: Key
    types:
    - uid: string
- name: EventChannelProvisioningState
  description: Provisioning state of the event channel.
  kind: enum
  properties:
  - name: Creating
    types:
    - uid: string
  - name: Updating
    types:
    - uid: string
  - name: Deleting
    types:
    - uid: string
  - name: Succeeded
    types:
    - uid: string
  - name: Canceled
    types:
    - uid: string
  - name: Failed
    types:
    - uid: string
- name: PartnerTopicReadinessState
  description: The readiness state of the corresponding partner topic.
  kind: enum
  properties:
  - name: NotActivatedByUserYet
    types:
    - uid: string
  - name: ActivatedByUser
    types:
    - uid: string
  - name: DeactivatedByUser
    types:
    - uid: string
  - name: DeletedByUser
    types:
    - uid: string
- name: NumberInAdvancedFilter
  description: NumberIn Advanced Filter.
  kind: object
  properties:
  - name: values
    description: The set of filter values.
    types:
    - uid: number
      isArray: true
  - name: operatorType
    description: The operator type used for filtering, e.g., NumberIn, StringContains, BoolEquals and others.
    types:
    - uid: NumberIn
    typesTitle: string
  - name: key
    description: The field/property in the event based on which you want to filter.
    types:
    - uid: string
- name: NumberNotInAdvancedFilter
  description: NumberNotIn Advanced Filter.
  kind: object
  properties:
  - name: values
    description: The set of filter values.
    types:
    - uid: number
      isArray: true
  - name: operatorType
    description: The operator type used for filtering, e.g., NumberIn, StringContains, BoolEquals and others.
    types:
    - uid: NumberNotIn
    typesTitle: string
  - name: key
    description: The field/property in the event based on which you want to filter.
    types:
    - uid: string
- name: NumberLessThanAdvancedFilter
  description: NumberLessThan Advanced Filter.
  kind: object
  properties:
  - name: value
    description: The filter value.
    types:
    - uid: number
  - name: operatorType
    description: The operator type used for filtering, e.g., NumberIn, StringContains, BoolEquals and others.
    types:
    - uid: NumberLessThan
    typesTitle: string
  - name: key
    description: The field/property in the event based on which you want to filter.
    types:
    - uid: string
- name: NumberGreaterThanAdvancedFilter
  description: NumberGreaterThan Advanced Filter.
  kind: object
  properties:
  - name: value
    description: The filter value.
    types:
    - uid: number
  - name: operatorType
    description: The operator type used for filtering, e.g., NumberIn, StringContains, BoolEquals and others.
    types:
    - uid: NumberGreaterThan
    typesTitle: string
  - name: key
    description: The field/property in the event based on which you want to filter.
    types:
    - uid: string
- name: NumberLessThanOrEqualsAdvancedFilter
  description: NumberLessThanOrEquals Advanced Filter.
  kind: object
  properties:
  - name: value
    description: The filter value.
    types:
    - uid: number
  - name: operatorType
    description: The operator type used for filtering, e.g., NumberIn, StringContains, BoolEquals and others.
    types:
    - uid: NumberLessThanOrEquals
    typesTitle: string
  - name: key
    description: The field/property in the event based on which you want to filter.
    types:
    - uid: string
- name: NumberGreaterThanOrEqualsAdvancedFilter
  description: NumberGreaterThanOrEquals Advanced Filter.
  kind: object
  properties:
  - name: value
    description: The filter value.
    types:
    - uid: number
  - name: operatorType
    description: The operator type used for filtering, e.g., NumberIn, StringContains, BoolEquals and others.
    types:
    - uid: NumberGreaterThanOrEquals
    typesTitle: string
  - name: key
    description: The field/property in the event based on which you want to filter.
    types:
    - uid: string
- name: BoolEqualsAdvancedFilter
  description: BoolEquals Advanced Filter.
  kind: object
  properties:
  - name: value
    description: The boolean filter value.
    types:
    - uid: boolean
  - name: operatorType
    description: The operator type used for filtering, e.g., NumberIn, StringContains, BoolEquals and others.
    types:
    - uid: BoolEquals
    typesTitle: string
  - name: key
    description: The field/property in the event based on which you want to filter.
    types:
    - uid: string
- name: StringInAdvancedFilter
  description: StringIn Advanced Filter.
  kind: object
  properties:
  - name: values
    description: The set of filter values.
    types:
    - uid: string
      isArray: true
  - name: operatorType
    description: The operator type used for filtering, e.g., NumberIn, StringContains, BoolEquals and others.
    types:
    - uid: StringIn
    typesTitle: string
  - name: key
    description: The field/property in the event based on which you want to filter.
    types:
    - uid: string
- name: StringNotInAdvancedFilter
  description: StringNotIn Advanced Filter.
  kind: object
  properties:
  - name: values
    description: The set of filter values.
    types:
    - uid: string
      isArray: true
  - name: operatorType
    description: The operator type used for filtering, e.g., NumberIn, StringContains, BoolEquals and others.
    types:
    - uid: StringNotIn
    typesTitle: string
  - name: key
    description: The field/property in the event based on which you want to filter.
    types:
    - uid: string
- name: StringBeginsWithAdvancedFilter
  description: StringBeginsWith Advanced Filter.
  kind: object
  properties:
  - name: values
    description: The set of filter values.
    types:
    - uid: string
      isArray: true
  - name: operatorType
    description: The operator type used for filtering, e.g., NumberIn, StringContains, BoolEquals and others.
    types:
    - uid: StringBeginsWith
    typesTitle: string
  - name: key
    description: The field/property in the event based on which you want to filter.
    types:
    - uid: string
- name: StringEndsWithAdvancedFilter
  description: StringEndsWith Advanced Filter.
  kind: object
  properties:
  - name: values
    description: The set of filter values.
    types:
    - uid: string
      isArray: true
  - name: operatorType
    description: The operator type used for filtering, e.g., NumberIn, StringContains, BoolEquals and others.
    types:
    - uid: StringEndsWith
    typesTitle: string
  - name: key
    description: The field/property in the event based on which you want to filter.
    types:
    - uid: string
- name: StringContainsAdvancedFilter
  description: StringContains Advanced Filter.
  kind: object
  properties:
  - name: values
    description: The set of filter values.
    types:
    - uid: string
      isArray: true
  - name: operatorType
    description: The operator type used for filtering, e.g., NumberIn, StringContains, BoolEquals and others.
    types:
    - uid: StringContains
    typesTitle: string
  - name: key
    description: The field/property in the event based on which you want to filter.
    types:
    - uid: string
- name: NumberInRangeAdvancedFilter
  description: NumberInRange Advanced Filter.
  kind: object
  properties:
  - name: values
    description: The set of filter values.
    types:
    - uid: array
      isArray: true
  - name: operatorType
    description: The operator type used for filtering, e.g., NumberIn, StringContains, BoolEquals and others.
    types:
    - uid: NumberInRange
    typesTitle: string
  - name: key
    description: The field/property in the event based on which you want to filter.
    types:
    - uid: string
- name: NumberNotInRangeAdvancedFilter
  description: NumberNotInRange Advanced Filter.
  kind: object
  properties:
  - name: values
    description: The set of filter values.
    types:
    - uid: array
      isArray: true
  - name: operatorType
    description: The operator type used for filtering, e.g., NumberIn, StringContains, BoolEquals and others.
    types:
    - uid: NumberNotInRange
    typesTitle: string
  - name: key
    description: The field/property in the event based on which you want to filter.
    types:
    - uid: string
- name: StringNotBeginsWithAdvancedFilter
  description: StringNotBeginsWith Advanced Filter.
  kind: object
  properties:
  - name: values
    description: The set of filter values.
    types:
    - uid: string
      isArray: true
  - name: operatorType
    description: The operator type used for filtering, e.g., NumberIn, StringContains, BoolEquals and others.
    types:
    - uid: StringNotBeginsWith
    typesTitle: string
  - name: key
    description: The field/property in the event based on which you want to filter.
    types:
    - uid: string
- name: StringNotEndsWithAdvancedFilter
  description: StringNotEndsWith Advanced Filter.
  kind: object
  properties:
  - name: values
    description: The set of filter values.
    types:
    - uid: string
      isArray: true
  - name: operatorType
    description: The operator type used for filtering, e.g., NumberIn, StringContains, BoolEquals and others.
    types:
    - uid: StringNotEndsWith
    typesTitle: string
  - name: key
    description: The field/property in the event based on which you want to filter.
    types:
    - uid: string
- name: StringNotContainsAdvancedFilter
  description: StringNotContains Advanced Filter.
  kind: object
  properties:
  - name: values
    description: The set of filter values.
    types:
    - uid: string
      isArray: true
  - name: operatorType
    description: The operator type used for filtering, e.g., NumberIn, StringContains, BoolEquals and others.
    types:
    - uid: StringNotContains
    typesTitle: string
  - name: key
    description: The field/property in the event based on which you want to filter.
    types:
    - uid: string
- name: IsNullOrUndefinedAdvancedFilter
  description: IsNullOrUndefined Advanced Filter.
  kind: object
  properties:
  - name: operatorType
    description: The operator type used for filtering, e.g., NumberIn, StringContains, BoolEquals and others.
    types:
    - uid: IsNullOrUndefined
    typesTitle: string
  - name: key
    description: The field/property in the event based on which you want to filter.
    types:
    - uid: string
- name: IsNotNullAdvancedFilter
  description: IsNotNull Advanced Filter.
  kind: object
  properties:
  - name: operatorType
    description: The operator type used for filtering, e.g., NumberIn, StringContains, BoolEquals and others.
    types:
    - uid: IsNotNull
    typesTitle: string
  - name: key
    description: The field/property in the event based on which you want to filter.
    types:
    - uid: string
examples:
- name: EventChannels_CreateOrUpdate
  request:
    uri: PUT https://management.azure.com/subscriptions/5b4b650e-28b9-4790-b3ab-ddbd88d727c4/resourceGroups/examplerg/providers/Microsoft.EventGrid/partnerNamespaces/examplePartnerNamespaceName1/eventChannels/exampleEventChannelName1?api-version=2021-10-15-preview
    body: >-
      {
        "properties": {
          "source": {
            "source": "ContosoCorp.Accounts.User1"
          },
          "destination": {
            "azureSubscriptionId": "5b4b650e-28b9-4790-b3ab-ddbd88d727c4",
            "resourceGroup": "examplerg2",
            "partnerTopicName": "examplePartnerTopic1"
          }
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/5b4b650e-28b9-4790-b3ab-ddbd88d727c4/resourceGroups/examplerg/providers/Microsoft.EventGrid/partnerNamespaces/examplePartnerNamespaceName1/eventChannels/exampleEventChannelName1?api-version=2021-10-15-preview

      {
        "properties": {
          "source": {
            "source": "ContosoCorp.Accounts.User1"
          },
          "destination": {
            "azureSubscriptionId": "5b4b650e-28b9-4790-b3ab-ddbd88d727c4",
            "resourceGroup": "examplerg2",
            "partnerTopicName": "examplePartnerTopic1"
          }
        }
      }

      ```

      # [Java](#tab/Java)
      ``` java
      import com.azure.resourcemanager.eventgrid.models.EventChannelDestination;
      import com.azure.resourcemanager.eventgrid.models.EventChannelSource;

      /** Samples for EventChannels CreateOrUpdate. */
      public final class Main {
          /*
           * x-ms-original-file: specification/eventgrid/resource-manager/Microsoft.EventGrid/preview/2021-10-15-preview/examples/EventChannels_CreateOrUpdate.json
           */
          /**
           * Sample code: EventChannels_CreateOrUpdate.
           *
           * @param manager Entry point to EventGridManager.
           */
          public static void eventChannelsCreateOrUpdate(com.azure.resourcemanager.eventgrid.EventGridManager manager) {
              manager
                  .eventChannels()
                  .define("exampleEventChannelName1")
                  .withExistingPartnerNamespace("examplerg", "examplePartnerNamespaceName1")
                  .withSource(new EventChannelSource().withSource("ContosoCorp.Accounts.User1"))
                  .withDestination(
                      new EventChannelDestination()
                          .withAzureSubscriptionId("5b4b650e-28b9-4790-b3ab-ddbd88d727c4")
                          .withResourceGroup("examplerg2")
                          .withPartnerTopicName("examplePartnerTopic1"))
                  .create();
          }
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-java/blob/azure-resourcemanager-eventgrid_1.2.0-beta.2/sdk/eventgrid/azure-resourcemanager-eventgrid/README.md) on how to add the SDK to your project and authenticate.
      # [Go](#tab/Go)
      ``` go
      package armeventgrid_test

      import (
      	"context"
      	"log"

      	"github.com/Azure/azure-sdk-for-go/sdk/azcore/to"
      	"github.com/Azure/azure-sdk-for-go/sdk/azidentity"
      	"github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/eventgrid/armeventgrid"
      )

      // Generated from example definition: https://github.com/Azure/azure-rest-api-specs/tree/main/specification/eventgrid/resource-manager/Microsoft.EventGrid/preview/2021-10-15-preview/examples/EventChannels_CreateOrUpdate.json
      func ExampleEventChannelsClient_CreateOrUpdate() {
      	cred, err := azidentity.NewDefaultAzureCredential(nil)
      	if err != nil {
      		log.Fatalf("failed to obtain a credential: %v", err)
      		return
      	}
      	ctx := context.Background()
      	client, err := armeventgrid.NewEventChannelsClient("<subscription-id>", cred, nil)
      	if err != nil {
      		log.Fatalf("failed to create client: %v", err)
      		return
      	}
      	res, err := client.CreateOrUpdate(ctx,
      		"<resource-group-name>",
      		"<partner-namespace-name>",
      		"<event-channel-name>",
      		armeventgrid.EventChannel{
      			Properties: &armeventgrid.EventChannelProperties{
      				Destination: &armeventgrid.EventChannelDestination{
      					AzureSubscriptionID: to.Ptr("<azure-subscription-id>"),
      					PartnerTopicName:    to.Ptr("<partner-topic-name>"),
      					ResourceGroup:       to.Ptr("<resource-group>"),
      				},
      				Source: &armeventgrid.EventChannelSource{
      					Source: to.Ptr("<source>"),
      				},
      			},
      		},
      		nil)
      	if err != nil {
      		log.Fatalf("failed to finish the request: %v", err)
      		return
      	}
      	// TODO: use response item
      	_ = res
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-go/blob/sdk%2Fresourcemanager%2Feventgrid%2Farmeventgrid%2Fv0.5.0/sdk/resourcemanager/eventgrid/armeventgrid/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "properties": {
          "source": {
            "source": "ContosoCorp.Accounts.User1"
          },
          "destination": {
            "azureSubscriptionId": "5b4b650e-28b9-4790-b3ab-ddbd88d727c4",
            "resourceGroup": "examplerg2",
            "partnerTopicName": "examplePartnerTopic1"
          },
          "provisioningState": "Succeeded"
        },
        "id": "/subscriptions/5b4b650e-28b9-4790-b3ab-ddbd88d727c4/resourceGroups/examplerg/providers/Microsoft.EventGrid/partnerNamespaces/partnerNamespace123/eventChannels/exampleEventChannelName1",
        "name": "exampleEventChannelName1",
        "type": "Microsoft.EventGrid/partnerNamespaces/eventChannels"
      }
security: []
metadata:
  description: "Learn more about Event Grid service - Create an event channel.  \nAsynchronously creates a new event channel with the specified parameters."
errorCodes: []
