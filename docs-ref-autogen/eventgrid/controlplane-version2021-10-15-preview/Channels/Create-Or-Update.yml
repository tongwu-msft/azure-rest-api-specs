### YamlMime:RESTOperation
uid: management.azure.com.eventgrid.controlplane-version2021-10-15-preview.channels.createorupdate
name: Create Or Update
service: Event Grid
groupName: Channels
apiVersion: 2021-10-15-preview
summary: "Create or update a channel.  \nSynchronously creates or updates a new channel with the specified parameters."
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventGrid/partnerNamespaces/{partnerNamespaceName}/channels/{channelName}?api-version=2021-10-15-preview
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: Subscription credentials that uniquely identify a Microsoft Azure subscription. The subscription ID forms part of the URI for every service call.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group within the partners subscription.
  types:
  - uid: string
- name: partnerNamespaceName
  in: path
  isRequired: true
  description: Name of the partner namespace.
  types:
  - uid: string
- name: channelName
  in: path
  isRequired: true
  description: Name of the channel.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: Version of the API to be used with the client request.
  types:
  - uid: string
responses:
- name: 200 OK
  description: OK
  types:
  - uid: Channel
- name: 201 Created
  description: Created
  types:
  - uid: Channel
- name: Other Status Codes
  description: >-
    *** Error Responses: ***

     * 400 Bad Request.

     * 500 Internal Server Error.
requestBody:
- name: default
  parameters:
  - name: properties.channelType
    in: body
    description: The type of the event channel which represents the  direction flow of events.
    types:
    - uid: ChannelType
  - name: properties.partnerTopicInfo
    in: body
    description: This property should be populated when channelType is PartnerTopic and represents information about the partner topic resource corresponding to the channel.
    types:
    - uid: PartnerTopicInfo
  - name: properties.partnerDestinationInfo
    in: body
    description: This property should be populated when channelType is PartnerDestination and represents information about the partner destination resource corresponding to the channel.
    types:
    - uid: WebhookPartnerDestinationInfo
    typesTitle: PartnerDestinationInfo
  - name: properties.messageForActivation
    in: body
    description: Context or helpful message that can be used during the approval process by the subscriber.
    types:
    - uid: string
  - name: properties.provisioningState
    in: body
    description: Provisioning state of the channel.
    types:
    - uid: ChannelProvisioningState
  - name: properties.readinessState
    in: body
    description: The readiness state of the corresponding partner topic.
    types:
    - uid: ReadinessState
  - name: properties.expirationTimeIfNotActivatedUtc
    in: body
    description: >-
      Expiration time of the channel. If this timer expires while the corresponding partner topic is never activated,

      the channel and corresponding partner topic are deleted.
    types:
    - uid: string
requestHeader: []
definitions:
- name: systemData
  description: Metadata pertaining to creation and last modification of the resource.
  kind: object
  properties:
  - name: createdBy
    description: The identity that created the resource.
    types:
    - uid: string
  - name: createdByType
    description: The type of identity that created the resource.
    types:
    - uid: createdByType
  - name: createdAt
    description: The timestamp of resource creation (UTC).
    types:
    - uid: string
  - name: lastModifiedBy
    description: The identity that last modified the resource.
    types:
    - uid: string
  - name: lastModifiedByType
    description: The type of identity that last modified the resource.
    types:
    - uid: createdByType
  - name: lastModifiedAt
    description: The timestamp of resource last modification (UTC)
    types:
    - uid: string
- name: PartnerTopicInfo
  description: Properties of the corresponding partner topic of a Channel.
  kind: object
  properties:
  - name: azureSubscriptionId
    description: >-
      Azure subscription ID of the subscriber. The partner topic associated with the channel will be

      created under this Azure subscription.
    types:
    - uid: string
  - name: resourceGroupName
    description: >-
      Azure Resource Group of the subscriber. The partner topic associated with the channel will be

      created under this resource group.
    types:
    - uid: string
  - name: name
    description: Name of the partner topic associated with the channel.
    types:
    - uid: string
  - name: eventTypeInfo
    description: "Event Type Information for the partner topic. This information is provided by the publisher and can be used by the \nsubscriber to view different types of events that are published."
    types:
    - uid: EventTypeInfo
  - name: source
    description: >-
      The source information is provided by the publisher to determine the scope or context from which the events

      are originating. This information can be used by the subscriber during the approval process of the

      created partner topic.
    types:
    - uid: string
- name: Channel
  description: Channel info.
  kind: object
  properties:
  - name: systemData
    isReadyOnly: true
    description: The system metadata relating to Channel resource.
    types:
    - uid: systemData
  - name: properties.channelType
    description: The type of the event channel which represents the  direction flow of events.
    types:
    - uid: ChannelType
  - name: properties.partnerTopicInfo
    description: This property should be populated when channelType is PartnerTopic and represents information about the partner topic resource corresponding to the channel.
    types:
    - uid: PartnerTopicInfo
  - name: properties.partnerDestinationInfo
    description: This property should be populated when channelType is PartnerDestination and represents information about the partner destination resource corresponding to the channel.
    types:
    - uid: WebhookPartnerDestinationInfo
    typesTitle: PartnerDestinationInfo
  - name: properties.messageForActivation
    description: Context or helpful message that can be used during the approval process by the subscriber.
    types:
    - uid: string
  - name: properties.provisioningState
    description: Provisioning state of the channel.
    types:
    - uid: ChannelProvisioningState
  - name: properties.readinessState
    description: The readiness state of the corresponding partner topic.
    types:
    - uid: ReadinessState
  - name: properties.expirationTimeIfNotActivatedUtc
    description: >-
      Expiration time of the channel. If this timer expires while the corresponding partner topic is never activated,

      the channel and corresponding partner topic are deleted.
    types:
    - uid: string
  - name: id
    isReadyOnly: true
    description: Fully qualified identifier of the resource.
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: Name of the resource.
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: Type of the resource.
    types:
    - uid: string
- name: createdByType
  description: The type of identity that created the resource.
  kind: enum
  properties:
  - name: User
    types:
    - uid: string
  - name: Application
    types:
    - uid: string
  - name: ManagedIdentity
    types:
    - uid: string
  - name: Key
    types:
    - uid: string
- name: EventTypeInfo
  description: The event type information for Channels.
  kind: object
  properties:
  - name: kind
    description: The kind of event type used.
    types:
    - uid: EventDefinitionKind
  - name: inlineEventTypes
    description: >-
      A collection of inline event types for the resource. The inline event type keys are of type string which represents the name of the event.

      An example of a valid inline event name is "Contoso.OrderCreated".

      The inline event type values are of type InlineEventProperties and will contain additional information for every inline event type.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: InlineEventProperties
- name: WebhookPartnerDestinationInfo
  description: Information about the WebHook of the partner destination.
  kind: object
  properties:
  - name: resourceMoveChangeHistory
    description: Change history of the resource move.
    types:
    - uid: ResourceMoveChangeHistory
      isArray: true
  - name: properties.endpointUrl
    description: The URL that represents the endpoint of the partner destination.
    types:
    - uid: string
  - name: properties.endpointBaseUrl
    description: The base URL that represents the endpoint of the partner destination.
    types:
    - uid: string
  - name: properties.clientAuthentication
    description: Partner client authentication
    types:
    - uid: AzureADPartnerClientAuthentication
    typesTitle: PartnerClientAuthentication
  - name: azureSubscriptionId
    description: >-
      Azure subscription ID of the subscriber. The partner destination associated with the channel will be

      created under this Azure subscription.
    types:
    - uid: string
  - name: resourceGroupName
    description: >-
      Azure Resource Group of the subscriber. The partner destination associated with the channel will be

      created under this resource group.
    types:
    - uid: string
  - name: name
    description: Name of the partner destination associated with the channel.
    types:
    - uid: string
  - name: endpointType
    description: Type of the endpoint for the partner destination
    types:
    - uid: WebHook
    typesTitle: string
    defaultValue: WebHook
  - name: endpointServiceContext
    description: Additional context of the partner destination endpoint.
    types:
    - uid: string
- name: ChannelType
  description: The type of the event channel which represents the  direction flow of events.
  kind: enum
  properties:
  - name: PartnerTopic
    types:
    - uid: string
  - name: PartnerDestination
    types:
    - uid: string
- name: ChannelProvisioningState
  description: Provisioning state of the channel.
  kind: enum
  properties:
  - name: Creating
    types:
    - uid: string
  - name: Updating
    types:
    - uid: string
  - name: Deleting
    types:
    - uid: string
  - name: Succeeded
    types:
    - uid: string
  - name: Canceled
    types:
    - uid: string
  - name: Failed
    types:
    - uid: string
- name: ReadinessState
  description: The readiness state of the corresponding partner topic.
  kind: enum
  properties:
  - name: NeverActivated
    types:
    - uid: string
  - name: Activated
    types:
    - uid: string
- name: EventDefinitionKind
  description: The kind of event type used.
  kind: enum
  properties:
  - name: Inline
    types:
    - uid: string
- name: InlineEventProperties
  description: Additional information about every inline event.
  kind: object
  properties:
  - name: description
    description: The description for the inline event.
    types:
    - uid: string
  - name: documentationUrl
    description: The documentationUrl for the inline event.
    types:
    - uid: string
  - name: dataSchemaUrl
    description: The dataSchemaUrl for the inline event.
    types:
    - uid: string
- name: ResourceMoveChangeHistory
  description: The change history of the resource move.
  kind: object
  properties:
  - name: azureSubscriptionId
    description: Azure subscription ID of the resource.
    types:
    - uid: string
  - name: resourceGroupName
    description: Azure Resource Group of the resource.
    types:
    - uid: string
  - name: changedTimeUtc
    description: UTC timestamp of when the resource was changed.
    types:
    - uid: string
- name: AzureADPartnerClientAuthentication
  description: Azure Active Directory Partner Client Authentication
  kind: object
  properties:
  - name: properties.azureActiveDirectoryTenantId
    description: The Azure Active Directory Tenant ID to get the access token that will be included as the bearer token in delivery requests.
    types:
    - uid: string
  - name: properties.azureActiveDirectoryApplicationIdOrUri
    description: The Azure Active Directory Application ID or URI to get the access token that will be included as the bearer token in delivery requests.
    types:
    - uid: string
  - name: clientAuthenticationType
    description: Type of client authentication
    types:
    - uid: AzureAD
    typesTitle: string
    defaultValue: AzureAD
examples:
- name: Channels_CreateOrUpdate
  request:
    uri: PUT https://management.azure.com/subscriptions/5b4b650e-28b9-4790-b3ab-ddbd88d727c4/resourceGroups/examplerg/providers/Microsoft.EventGrid/partnerNamespaces/examplePartnerNamespaceName1/channels/exampleChannelName1?api-version=2021-10-15-preview
    body: >-
      {
        "properties": {
          "channelType": "PartnerTopic",
          "partnerTopicInfo": {
            "azureSubscriptionId": "5b4b650e-28b9-4790-b3ab-ddbd88d727c4",
            "resourceGroupName": "examplerg2",
            "name": "examplePartnerTopic1",
            "source": "ContosoCorp.Accounts.User1"
          },
          "messageForActivation": "Example message to approver",
          "expirationTimeIfNotActivatedUtc": "2021-10-21T22:50:25.410433Z"
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/5b4b650e-28b9-4790-b3ab-ddbd88d727c4/resourceGroups/examplerg/providers/Microsoft.EventGrid/partnerNamespaces/examplePartnerNamespaceName1/channels/exampleChannelName1?api-version=2021-10-15-preview

      {
        "properties": {
          "channelType": "PartnerTopic",
          "partnerTopicInfo": {
            "azureSubscriptionId": "5b4b650e-28b9-4790-b3ab-ddbd88d727c4",
            "resourceGroupName": "examplerg2",
            "name": "examplePartnerTopic1",
            "source": "ContosoCorp.Accounts.User1"
          },
          "messageForActivation": "Example message to approver",
          "expirationTimeIfNotActivatedUtc": "2021-10-21T22:50:25.410433Z"
        }
      }

      ```

      # [Java](#tab/Java)
      ``` java
      import com.azure.resourcemanager.eventgrid.models.ChannelType;
      import com.azure.resourcemanager.eventgrid.models.PartnerTopicInfo;
      import java.time.OffsetDateTime;

      /** Samples for Channels CreateOrUpdate. */
      public final class Main {
          /*
           * x-ms-original-file: specification/eventgrid/resource-manager/Microsoft.EventGrid/preview/2021-10-15-preview/examples/Channels_CreateOrUpdate.json
           */
          /**
           * Sample code: Channels_CreateOrUpdate.
           *
           * @param manager Entry point to EventGridManager.
           */
          public static void channelsCreateOrUpdate(com.azure.resourcemanager.eventgrid.EventGridManager manager) {
              manager
                  .channels()
                  .define("exampleChannelName1")
                  .withExistingPartnerNamespace("examplerg", "examplePartnerNamespaceName1")
                  .withChannelType(ChannelType.PARTNER_TOPIC)
                  .withPartnerTopicInfo(
                      new PartnerTopicInfo()
                          .withAzureSubscriptionId("5b4b650e-28b9-4790-b3ab-ddbd88d727c4")
                          .withResourceGroupName("examplerg2")
                          .withName("examplePartnerTopic1")
                          .withSource("ContosoCorp.Accounts.User1"))
                  .withMessageForActivation("Example message to approver")
                  .withExpirationTimeIfNotActivatedUtc(OffsetDateTime.parse("2021-10-21T22:50:25.410433Z"))
                  .create();
          }
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-java/blob/azure-resourcemanager-eventgrid_1.2.0-beta.2/sdk/eventgrid/azure-resourcemanager-eventgrid/README.md) on how to add the SDK to your project and authenticate.
      # [Go](#tab/Go)
      ``` go
      package armeventgrid_test

      import (
      	"context"
      	"log"

      	"time"

      	"github.com/Azure/azure-sdk-for-go/sdk/azcore/to"
      	"github.com/Azure/azure-sdk-for-go/sdk/azidentity"
      	"github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/eventgrid/armeventgrid"
      )

      // Generated from example definition: https://github.com/Azure/azure-rest-api-specs/tree/main/specification/eventgrid/resource-manager/Microsoft.EventGrid/preview/2021-10-15-preview/examples/Channels_CreateOrUpdate.json
      func ExampleChannelsClient_CreateOrUpdate() {
      	cred, err := azidentity.NewDefaultAzureCredential(nil)
      	if err != nil {
      		log.Fatalf("failed to obtain a credential: %v", err)
      		return
      	}
      	ctx := context.Background()
      	client, err := armeventgrid.NewChannelsClient("<subscription-id>", cred, nil)
      	if err != nil {
      		log.Fatalf("failed to create client: %v", err)
      		return
      	}
      	res, err := client.CreateOrUpdate(ctx,
      		"<resource-group-name>",
      		"<partner-namespace-name>",
      		"<channel-name>",
      		armeventgrid.Channel{
      			Properties: &armeventgrid.ChannelProperties{
      				ChannelType:                     to.Ptr(armeventgrid.ChannelTypePartnerTopic),
      				ExpirationTimeIfNotActivatedUTC: to.Ptr(func() time.Time { t, _ := time.Parse(time.RFC3339Nano, "2021-10-21T22:50:25.410433Z"); return t }()),
      				MessageForActivation:            to.Ptr("<message-for-activation>"),
      				PartnerTopicInfo: &armeventgrid.PartnerTopicInfo{
      					Name:                to.Ptr("<name>"),
      					AzureSubscriptionID: to.Ptr("<azure-subscription-id>"),
      					ResourceGroupName:   to.Ptr("<resource-group-name>"),
      					Source:              to.Ptr("<source>"),
      				},
      			},
      		},
      		nil)
      	if err != nil {
      		log.Fatalf("failed to finish the request: %v", err)
      		return
      	}
      	// TODO: use response item
      	_ = res
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-go/blob/sdk%2Fresourcemanager%2Feventgrid%2Farmeventgrid%2Fv0.5.0/sdk/resourcemanager/eventgrid/armeventgrid/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "properties": {
          "channelType": "PartnerTopic",
          "partnerTopicInfo": {
            "azureSubscriptionId": "5b4b650e-28b9-4790-b3ab-ddbd88d727c4",
            "resourceGroupName": "examplerg2",
            "name": "examplePartnerTopic1",
            "source": "ContosoCorp.Accounts.User1"
          },
          "messageForActivation": "Example message to approver",
          "expirationTimeIfNotActivatedUtc": "2021-10-21T22:50:25.410433Z"
        },
        "id": "/subscriptions/5b4b650e-28b9-4790-b3ab-ddbd88d727c4/resourceGroups/examplerg/providers/Microsoft.EventGrid/partnerNamespaces/examplePartnerNamespaceName1/changes/exampleChannelName1",
        "name": "exampleChannelName1",
        "type": "Microsoft.EventGrid/partnerNamespaces/channels"
      }
  - statusCode: "201"
    body: >-
      {
        "properties": {
          "channelType": "PartnerTopic",
          "partnerTopicInfo": {
            "azureSubscriptionId": "5b4b650e-28b9-4790-b3ab-ddbd88d727c4",
            "resourceGroupName": "examplerg2",
            "name": "examplePartnerTopic1",
            "source": "ContosoCorp.Accounts.User1"
          },
          "messageForActivation": "Example message to approver",
          "expirationTimeIfNotActivatedUtc": "2021-10-21T22:50:25.410433Z"
        },
        "id": "/subscriptions/5b4b650e-28b9-4790-b3ab-ddbd88d727c4/resourceGroups/examplerg/providers/Microsoft.EventGrid/partnerNamespaces/examplePartnerNamespaceName1/changes/exampleChannelName1",
        "name": "exampleChannelName1",
        "type": "Microsoft.EventGrid/partnerNamespaces/channels"
      }
security: []
metadata:
  description: "Create or update a channel.  \nSynchronously creates or updates a new channel with the specified parameters."
errorCodes: []
