### YamlMime:RESTOperation
uid: management.azure.com.eventgrid.controlplane-version2022-06-15.partnertopics.createorupdate
name: Create Or Update
service: Event Grid
groupName: Partner Topics
apiVersion: 2022-06-15
summary: "Create a partner topic.  \nAsynchronously creates a new partner topic with the specified parameters."
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventGrid/partnerTopics/{partnerTopicName}?api-version=2022-06-15
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: Subscription credentials that uniquely identify a Microsoft Azure subscription. The subscription ID forms part of the URI for every service call.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group within the user's subscription.
  types:
  - uid: string
- name: partnerTopicName
  in: path
  isRequired: true
  description: Name of the partner topic.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: Version of the API to be used with the client request.
  types:
  - uid: string
responses:
- name: 200 OK
  description: OK
  types:
  - uid: PartnerTopic
- name: 201 Created
  description: Created
  types:
  - uid: PartnerTopic
- name: Other Status Codes
  description: >-
    *** Error Responses: ***

     * 400 Bad Request.

     * 500 Internal Server Error.
requestBody:
- name: default
  parameters:
  - name: identity
    in: body
    description: Identity information for the Partner Topic resource.
    types:
    - uid: IdentityInfo
  - name: properties.partnerRegistrationImmutableId
    in: body
    description: The immutableId of the corresponding partner registration.
    types:
    - uid: string
  - name: properties.source
    in: body
    description: Source associated with this partner topic. This represents a unique partner resource.
    types:
    - uid: string
  - name: properties.eventTypeInfo
    in: body
    description: Event Type information from the corresponding event channel.
    types:
    - uid: EventTypeInfo
  - name: properties.expirationTimeIfNotActivatedUtc
    in: body
    description: >-
      Expiration time of the partner topic. If this timer expires while the partner topic is still never activated,

      the partner topic and corresponding event channel are deleted.
    types:
    - uid: string
  - name: properties.activationState
    in: body
    description: Activation state of the partner topic.
    types:
    - uid: PartnerTopicActivationState
  - name: properties.partnerTopicFriendlyDescription
    in: body
    description: >-
      Friendly description about the topic. This can be set by the publisher/partner to show custom description for the customer partner topic.

      This will be helpful to remove any ambiguity of the origin of creation of the partner topic for the customer.
    types:
    - uid: string
  - name: properties.messageForActivation
    in: body
    description: Context or helpful message that can be used during the approval process by the subscriber.
    types:
    - uid: string
  - name: location
    in: body
    isRequired: true
    description: Location of the resource.
    types:
    - uid: string
  - name: tags
    in: body
    description: Tags of the resource.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
requestHeader: []
definitions:
- name: systemData
  description: Metadata pertaining to creation and last modification of the resource.
  kind: object
  properties:
  - name: createdBy
    description: The identity that created the resource.
    types:
    - uid: string
  - name: createdByType
    description: The type of identity that created the resource.
    types:
    - uid: createdByType
  - name: createdAt
    description: The timestamp of resource creation (UTC).
    types:
    - uid: string
  - name: lastModifiedBy
    description: The identity that last modified the resource.
    types:
    - uid: string
  - name: lastModifiedByType
    description: The type of identity that last modified the resource.
    types:
    - uid: createdByType
  - name: lastModifiedAt
    description: The timestamp of resource last modification (UTC)
    types:
    - uid: string
- name: IdentityInfo
  description: The identity information for the resource.
  kind: object
  properties:
  - name: type
    description: The type of managed identity used. The type 'SystemAssigned, UserAssigned' includes both an implicitly created identity and a set of user-assigned identities. The type 'None' will remove any identity.
    types:
    - uid: IdentityType
  - name: principalId
    description: The principal ID of resource identity.
    types:
    - uid: string
  - name: tenantId
    description: The tenant ID of resource.
    types:
    - uid: string
  - name: userAssignedIdentities
    description: >-
      The list of user identities associated with the resource. The user identity dictionary key references will be ARM resource ids in the form:

      '/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.ManagedIdentity/userAssignedIdentities/{identityName}'.

      This property is currently not used and reserved for future usage.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: UserIdentityProperties
- name: EventTypeInfo
  description: The event type information for Channels.
  kind: object
  properties:
  - name: kind
    description: The kind of event type used.
    types:
    - uid: EventDefinitionKind
  - name: inlineEventTypes
    description: >-
      A collection of inline event types for the resource. The inline event type keys are of type string which represents the name of the event.

      An example of a valid inline event name is "Contoso.OrderCreated".

      The inline event type values are of type InlineEventProperties and will contain additional information for every inline event type.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: InlineEventProperties
- name: PartnerTopic
  description: Event Grid Partner Topic.
  kind: object
  properties:
  - name: systemData
    isReadyOnly: true
    description: The system metadata relating to Partner Topic resource.
    types:
    - uid: systemData
  - name: identity
    description: Identity information for the Partner Topic resource.
    types:
    - uid: IdentityInfo
  - name: properties.partnerRegistrationImmutableId
    description: The immutableId of the corresponding partner registration.
    types:
    - uid: string
  - name: properties.source
    description: Source associated with this partner topic. This represents a unique partner resource.
    types:
    - uid: string
  - name: properties.eventTypeInfo
    description: Event Type information from the corresponding event channel.
    types:
    - uid: EventTypeInfo
  - name: properties.expirationTimeIfNotActivatedUtc
    description: >-
      Expiration time of the partner topic. If this timer expires while the partner topic is still never activated,

      the partner topic and corresponding event channel are deleted.
    types:
    - uid: string
  - name: properties.provisioningState
    isReadyOnly: true
    description: Provisioning state of the partner topic.
    types:
    - uid: PartnerTopicProvisioningState
  - name: properties.activationState
    description: Activation state of the partner topic.
    types:
    - uid: PartnerTopicActivationState
  - name: properties.partnerTopicFriendlyDescription
    description: >-
      Friendly description about the topic. This can be set by the publisher/partner to show custom description for the customer partner topic.

      This will be helpful to remove any ambiguity of the origin of creation of the partner topic for the customer.
    types:
    - uid: string
  - name: properties.messageForActivation
    description: Context or helpful message that can be used during the approval process by the subscriber.
    types:
    - uid: string
  - name: location
    description: Location of the resource.
    types:
    - uid: string
  - name: tags
    description: Tags of the resource.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: id
    isReadyOnly: true
    description: Fully qualified identifier of the resource.
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: Name of the resource.
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: Type of the resource.
    types:
    - uid: string
- name: createdByType
  description: The type of identity that created the resource.
  kind: enum
  properties:
  - name: User
    types:
    - uid: string
  - name: Application
    types:
    - uid: string
  - name: ManagedIdentity
    types:
    - uid: string
  - name: Key
    types:
    - uid: string
- name: IdentityType
  description: The type of managed identity used. The type 'SystemAssigned, UserAssigned' includes both an implicitly created identity and a set of user-assigned identities. The type 'None' will remove any identity.
  kind: enum
  properties:
  - name: None
    types:
    - uid: string
  - name: SystemAssigned
    types:
    - uid: string
  - name: UserAssigned
    types:
    - uid: string
  - name: SystemAssigned, UserAssigned
    types:
    - uid: string
- name: UserIdentityProperties
  description: The information about the user identity.
  kind: object
  properties:
  - name: principalId
    description: The principal id of user assigned identity.
    types:
    - uid: string
  - name: clientId
    description: The client id of user assigned identity.
    types:
    - uid: string
- name: EventDefinitionKind
  description: The kind of event type used.
  kind: enum
  properties:
  - name: Inline
    types:
    - uid: string
- name: InlineEventProperties
  description: Additional information about every inline event.
  kind: object
  properties:
  - name: description
    description: The description for the inline event.
    types:
    - uid: string
  - name: displayName
    description: The displayName for the inline event.
    types:
    - uid: string
  - name: documentationUrl
    description: The documentationUrl for the inline event.
    types:
    - uid: string
  - name: dataSchemaUrl
    description: The dataSchemaUrl for the inline event.
    types:
    - uid: string
- name: PartnerTopicProvisioningState
  description: Provisioning state of the partner topic.
  kind: enum
  properties:
  - name: Creating
    types:
    - uid: string
  - name: Updating
    types:
    - uid: string
  - name: Deleting
    types:
    - uid: string
  - name: Succeeded
    types:
    - uid: string
  - name: Canceled
    types:
    - uid: string
  - name: Failed
    types:
    - uid: string
  - name: IdleDueToMirroredChannelResourceDeletion
    types:
    - uid: string
- name: PartnerTopicActivationState
  description: Activation state of the partner topic.
  kind: enum
  properties:
  - name: NeverActivated
    types:
    - uid: string
  - name: Activated
    types:
    - uid: string
  - name: Deactivated
    types:
    - uid: string
examples:
- name: PartnerTopics_CreateOrUpdate
  request:
    uri: PUT https://management.azure.com/subscriptions/5b4b650e-28b9-4790-b3ab-ddbd88d727c4/resourceGroups/examplerg/providers/Microsoft.EventGrid/partnerTopics/examplePartnerTopicName1?api-version=2022-06-15
    body: >-
      {
        "properties": {
          "partnerRegistrationImmutableId": "6f541064-031d-4cc8-9ec3-a3b4fc0f7185",
          "source": "ContosoCorp.Accounts.User1",
          "expirationTimeIfNotActivatedUtc": "2022-03-23T23:06:13.109Z",
          "partnerTopicFriendlyDescription": "Example description",
          "messageForActivation": "Example message for activation"
        },
        "location": "westus2"
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/5b4b650e-28b9-4790-b3ab-ddbd88d727c4/resourceGroups/examplerg/providers/Microsoft.EventGrid/partnerTopics/examplePartnerTopicName1?api-version=2022-06-15

      {
        "properties": {
          "partnerRegistrationImmutableId": "6f541064-031d-4cc8-9ec3-a3b4fc0f7185",
          "source": "ContosoCorp.Accounts.User1",
          "expirationTimeIfNotActivatedUtc": "2022-03-23T23:06:13.109Z",
          "partnerTopicFriendlyDescription": "Example description",
          "messageForActivation": "Example message for activation"
        },
        "location": "westus2"
      }

      ```

      # [Java](#tab/Java)
      ``` java
      import java.time.OffsetDateTime;
      import java.util.UUID;

      /** Samples for PartnerTopics CreateOrUpdate. */
      public final class Main {
          /*
           * x-ms-original-file: specification/eventgrid/resource-manager/Microsoft.EventGrid/stable/2022-06-15/examples/PartnerTopics_CreateOrUpdate.json
           */
          /**
           * Sample code: PartnerTopics_CreateOrUpdate.
           *
           * @param manager Entry point to EventGridManager.
           */
          public static void partnerTopicsCreateOrUpdate(com.azure.resourcemanager.eventgrid.EventGridManager manager) {
              manager
                  .partnerTopics()
                  .define("examplePartnerTopicName1")
                  .withRegion("westus2")
                  .withExistingResourceGroup("examplerg")
                  .withPartnerRegistrationImmutableId(UUID.fromString("6f541064-031d-4cc8-9ec3-a3b4fc0f7185"))
                  .withSource("ContosoCorp.Accounts.User1")
                  .withExpirationTimeIfNotActivatedUtc(OffsetDateTime.parse("2022-03-23T23:06:13.109Z"))
                  .withPartnerTopicFriendlyDescription("Example description")
                  .withMessageForActivation("Example message for activation")
                  .create();
          }
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-java/blob/azure-resourcemanager-eventgrid_1.2.0-beta.3/sdk/eventgrid/azure-resourcemanager-eventgrid/README.md) on how to add the SDK to your project and authenticate.
      # [Go](#tab/Go)
      ``` go
      package armeventgrid_test

      import (
      	"context"
      	"log"

      	"time"

      	"github.com/Azure/azure-sdk-for-go/sdk/azcore/to"
      	"github.com/Azure/azure-sdk-for-go/sdk/azidentity"
      	"github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/eventgrid/armeventgrid/v2"
      )

      // Generated from example definition: https://github.com/Azure/azure-rest-api-specs/tree/main/specification/eventgrid/resource-manager/Microsoft.EventGrid/stable/2022-06-15/examples/PartnerTopics_CreateOrUpdate.json
      func ExamplePartnerTopicsClient_CreateOrUpdate() {
      	cred, err := azidentity.NewDefaultAzureCredential(nil)
      	if err != nil {
      		log.Fatalf("failed to obtain a credential: %v", err)
      	}
      	ctx := context.Background()
      	client, err := armeventgrid.NewPartnerTopicsClient("5b4b650e-28b9-4790-b3ab-ddbd88d727c4", cred, nil)
      	if err != nil {
      		log.Fatalf("failed to create client: %v", err)
      	}
      	res, err := client.CreateOrUpdate(ctx,
      		"examplerg",
      		"examplePartnerTopicName1",
      		armeventgrid.PartnerTopic{
      			Location: to.Ptr("westus2"),
      			Properties: &armeventgrid.PartnerTopicProperties{
      				ExpirationTimeIfNotActivatedUTC: to.Ptr(func() time.Time { t, _ := time.Parse(time.RFC3339Nano, "2022-03-23T23:06:13.109Z"); return t }()),
      				MessageForActivation:            to.Ptr("Example message for activation"),
      				PartnerRegistrationImmutableID:  to.Ptr("6f541064-031d-4cc8-9ec3-a3b4fc0f7185"),
      				PartnerTopicFriendlyDescription: to.Ptr("Example description"),
      				Source:                          to.Ptr("ContosoCorp.Accounts.User1"),
      			},
      		},
      		nil)
      	if err != nil {
      		log.Fatalf("failed to finish the request: %v", err)
      	}
      	// TODO: use response item
      	_ = res
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-go/blob/sdk%2Fresourcemanager%2Feventgrid%2Farmeventgrid%2Fv2.0.0/sdk/resourcemanager/eventgrid/armeventgrid/README.md) on how to add the SDK to your project and authenticate.
      # [JavaScript](#tab/JavaScript)
      ``` js
      const { EventGridManagementClient } = require("@azure/arm-eventgrid");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to Asynchronously creates a new partner topic with the specified parameters.
       *
       * @summary Asynchronously creates a new partner topic with the specified parameters.
       * x-ms-original-file: specification/eventgrid/resource-manager/Microsoft.EventGrid/stable/2022-06-15/examples/PartnerTopics_CreateOrUpdate.json
       */
      async function partnerTopicsCreateOrUpdate() {
        const subscriptionId = "5b4b650e-28b9-4790-b3ab-ddbd88d727c4";
        const resourceGroupName = "examplerg";
        const partnerTopicName = "examplePartnerTopicName1";
        const partnerTopicInfo = {
          expirationTimeIfNotActivatedUtc: new Date("2022-03-23T23:06:13.109Z"),
          location: "westus2",
          messageForActivation: "Example message for activation",
          partnerRegistrationImmutableId: "6f541064-031d-4cc8-9ec3-a3b4fc0f7185",
          partnerTopicFriendlyDescription: "Example description",
          source: "ContosoCorp.Accounts.User1",
        };
        const credential = new DefaultAzureCredential();
        const client = new EventGridManagementClient(credential, subscriptionId);
        const result = await client.partnerTopics.createOrUpdate(
          resourceGroupName,
          partnerTopicName,
          partnerTopicInfo
        );
        console.log(result);
      }

      partnerTopicsCreateOrUpdate().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-eventgrid_14.0.0/sdk/eventgrid/arm-eventgrid/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "properties": {
          "source": "ContosoCorp.Accounts.User1",
          "provisioningState": "Succeeded",
          "activationState": "NeverActivated",
          "partnerRegistrationImmutableId": "6f541064-031d-4cc8-9ec3-a3b4fc0f7185",
          "expirationTimeIfNotActivatedUtc": "2022-03-23T23:06:13.109Z",
          "partnerTopicFriendlyDescription": "Example description",
          "messageForActivation": "Example message for activation"
        },
        "location": "centraluseuap",
        "tags": {
          "tag1": "value1",
          "tag2": "value2"
        },
        "id": "/subscriptions/5b4b650e-28b9-4790-b3ab-ddbd88d727c4/resourceGroups/examplerg/providers/Microsoft.EventGrid/partnerTopics/examplePartnerTopicName1",
        "name": "examplePartnerTopicName1",
        "type": "Microsoft.EventGrid/partnerTopics"
      }
  - statusCode: "201"
    body: >-
      {
        "properties": {
          "source": "ContosoCorp.Accounts.User1",
          "provisioningState": "Succeeded",
          "activationState": "NeverActivated",
          "partnerRegistrationImmutableId": "6f541064-031d-4cc8-9ec3-a3b4fc0f7185",
          "expirationTimeIfNotActivatedUtc": "2022-03-23T23:06:13.109Z",
          "partnerTopicFriendlyDescription": "Example description",
          "messageForActivation": "Example message for activation"
        },
        "location": "centraluseuap",
        "tags": {
          "tag1": "value1",
          "tag2": "value2"
        },
        "id": "/subscriptions/5b4b650e-28b9-4790-b3ab-ddbd88d727c4/resourceGroups/examplerg/providers/Microsoft.EventGrid/partnerTopics/examplePartnerTopicName1",
        "name": "examplePartnerTopicName1",
        "type": "Microsoft.EventGrid/partnerTopics"
      }
security: []
metadata:
  description: "Learn more about Event Grid service - Create a partner topic.  \nAsynchronously creates a new partner topic with the specified parameters."
errorCodes: []
