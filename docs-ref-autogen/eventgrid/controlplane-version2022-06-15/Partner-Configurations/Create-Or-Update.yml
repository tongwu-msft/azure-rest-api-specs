### YamlMime:RESTOperation
uid: management.azure.com.eventgrid.controlplane-version2022-06-15.partnerconfigurations.createorupdate
name: Create Or Update
service: Event Grid
groupName: Partner Configurations
apiVersion: 2022-06-15
summary: "Create or update a partner configuration.  \nSynchronously creates or updates a partner configuration with the specified parameters."
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.EventGrid/partnerConfigurations/default?api-version=2022-06-15
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: Subscription credentials that uniquely identify a Microsoft Azure subscription. The subscription ID forms part of the URI for every service call.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group within the user's subscription.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: Version of the API to be used with the client request.
  types:
  - uid: string
responses:
- name: 200 OK
  description: OK
  types:
  - uid: PartnerConfiguration
- name: 201 Created
  description: Created
  types:
  - uid: PartnerConfiguration
- name: Other Status Codes
  description: >-
    *** Error Responses: ***

     * 400 Bad Request.

     * 500 Internal Server Error.
requestBody:
- name: default
  parameters:
  - name: location
    in: body
    description: Location of the resource.
    types:
    - uid: string
  - name: tags
    in: body
    description: Tags of the resource.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: properties.partnerAuthorization
    in: body
    description: The details of authorized partners.
    types:
    - uid: PartnerAuthorization
  - name: properties.provisioningState
    in: body
    description: Provisioning state of the partner configuration.
    types:
    - uid: PartnerConfigurationProvisioningState
requestHeader: []
definitions:
- name: systemData
  description: Metadata pertaining to creation and last modification of the resource.
  kind: object
  properties:
  - name: createdBy
    description: The identity that created the resource.
    types:
    - uid: string
  - name: createdByType
    description: The type of identity that created the resource.
    types:
    - uid: createdByType
  - name: createdAt
    description: The timestamp of resource creation (UTC).
    types:
    - uid: string
  - name: lastModifiedBy
    description: The identity that last modified the resource.
    types:
    - uid: string
  - name: lastModifiedByType
    description: The type of identity that last modified the resource.
    types:
    - uid: createdByType
  - name: lastModifiedAt
    description: The timestamp of resource last modification (UTC)
    types:
    - uid: string
- name: PartnerAuthorization
  description: The partner authorization details.
  kind: object
  properties:
  - name: defaultMaximumExpirationTimeInDays
    description: >-
      Time used to validate the authorization expiration time for each authorized partner. If DefaultMaximumExpirationTimeInDays is

      not specified, the default is 7 days. Otherwise, allowed values are between 1 and 365 days.
    types:
    - uid: integer
  - name: authorizedPartnersList
    description: The list of authorized partners.
    types:
    - uid: Partner
      isArray: true
- name: PartnerConfiguration
  description: Partner configuration information
  kind: object
  properties:
  - name: systemData
    isReadyOnly: true
    description: The system metadata relating to partner configuration resource.
    types:
    - uid: systemData
  - name: location
    description: Location of the resource.
    types:
    - uid: string
  - name: tags
    description: Tags of the resource.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: properties.partnerAuthorization
    description: The details of authorized partners.
    types:
    - uid: PartnerAuthorization
  - name: properties.provisioningState
    description: Provisioning state of the partner configuration.
    types:
    - uid: PartnerConfigurationProvisioningState
  - name: id
    isReadyOnly: true
    description: Fully qualified identifier of the resource.
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: Name of the resource.
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: Type of the resource.
    types:
    - uid: string
- name: createdByType
  description: The type of identity that created the resource.
  kind: enum
  properties:
  - name: User
    types:
    - uid: string
  - name: Application
    types:
    - uid: string
  - name: ManagedIdentity
    types:
    - uid: string
  - name: Key
    types:
    - uid: string
- name: Partner
  description: Information about the partner.
  kind: object
  properties:
  - name: partnerRegistrationImmutableId
    description: The immutableId of the corresponding partner registration.
    types:
    - uid: string
  - name: partnerName
    description: The partner name.
    types:
    - uid: string
  - name: authorizationExpirationTimeInUtc
    description: >-
      Expiration time of the partner authorization. If this timer expires, any request from this partner to create, update or delete resources in subscriber's

      context will fail. If specified, the allowed values are between 1 to the value of defaultMaximumExpirationTimeInDays specified in PartnerConfiguration.

      If not specified, the default value will be the value of defaultMaximumExpirationTimeInDays specified in PartnerConfiguration or 7 if this value is not specified.
    types:
    - uid: string
- name: PartnerConfigurationProvisioningState
  description: Provisioning state of the partner configuration.
  kind: enum
  properties:
  - name: Creating
    types:
    - uid: string
  - name: Updating
    types:
    - uid: string
  - name: Deleting
    types:
    - uid: string
  - name: Succeeded
    types:
    - uid: string
  - name: Canceled
    types:
    - uid: string
  - name: Failed
    types:
    - uid: string
examples:
- name: PartnerConfigurations_CreateOrUpdate
  request:
    uri: PUT https://management.azure.com/subscriptions/5b4b650e-28b9-4790-b3ab-ddbd88d727c4/resourceGroups/examplerg/providers/Microsoft.EventGrid/partnerConfigurations/default?api-version=2022-06-15
    body: >-
      {
        "properties": {
          "partnerAuthorization": {
            "defaultMaximumExpirationTimeInDays": 10,
            "authorizedPartnersList": [
              {
                "partnerRegistrationImmutableId": "941892bc-f5d0-4d1c-8fb5-477570fc2b71",
                "partnerName": "Contoso.Finance",
                "authorizationExpirationTimeInUtc": "2022-01-28T01:20:55.142Z"
              },
              {
                "partnerRegistrationImmutableId": "5362bdb6-ce3e-4d0d-9a5b-3eb92c8aab38",
                "partnerName": "fabrikam.HR",
                "authorizationExpirationTimeInUtc": "2022-02-20T01:00:00.142Z"
              }
            ]
          }
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/5b4b650e-28b9-4790-b3ab-ddbd88d727c4/resourceGroups/examplerg/providers/Microsoft.EventGrid/partnerConfigurations/default?api-version=2022-06-15

      {
        "properties": {
          "partnerAuthorization": {
            "defaultMaximumExpirationTimeInDays": 10,
            "authorizedPartnersList": [
              {
                "partnerRegistrationImmutableId": "941892bc-f5d0-4d1c-8fb5-477570fc2b71",
                "partnerName": "Contoso.Finance",
                "authorizationExpirationTimeInUtc": "2022-01-28T01:20:55.142Z"
              },
              {
                "partnerRegistrationImmutableId": "5362bdb6-ce3e-4d0d-9a5b-3eb92c8aab38",
                "partnerName": "fabrikam.HR",
                "authorizationExpirationTimeInUtc": "2022-02-20T01:00:00.142Z"
              }
            ]
          }
        }
      }

      ```

      # [Java](#tab/Java)
      ``` java
      import com.azure.core.util.Context;
      import com.azure.resourcemanager.eventgrid.fluent.models.PartnerConfigurationInner;
      import com.azure.resourcemanager.eventgrid.models.Partner;
      import com.azure.resourcemanager.eventgrid.models.PartnerAuthorization;
      import java.time.OffsetDateTime;
      import java.util.Arrays;
      import java.util.UUID;

      /** Samples for PartnerConfigurations CreateOrUpdate. */
      public final class Main {
          /*
           * x-ms-original-file: specification/eventgrid/resource-manager/Microsoft.EventGrid/stable/2022-06-15/examples/PartnerConfigurations_CreateOrUpdate.json
           */
          /**
           * Sample code: PartnerConfigurations_CreateOrUpdate.
           *
           * @param manager Entry point to EventGridManager.
           */
          public static void partnerConfigurationsCreateOrUpdate(
              com.azure.resourcemanager.eventgrid.EventGridManager manager) {
              manager
                  .partnerConfigurations()
                  .createOrUpdate(
                      "examplerg",
                      new PartnerConfigurationInner()
                          .withPartnerAuthorization(
                              new PartnerAuthorization()
                                  .withDefaultMaximumExpirationTimeInDays(10)
                                  .withAuthorizedPartnersList(
                                      Arrays
                                          .asList(
                                              new Partner()
                                                  .withPartnerRegistrationImmutableId(
                                                      UUID.fromString("941892bc-f5d0-4d1c-8fb5-477570fc2b71"))
                                                  .withPartnerName("Contoso.Finance")
                                                  .withAuthorizationExpirationTimeInUtc(
                                                      OffsetDateTime.parse("2022-01-28T01:20:55.142Z")),
                                              new Partner()
                                                  .withPartnerRegistrationImmutableId(
                                                      UUID.fromString("5362bdb6-ce3e-4d0d-9a5b-3eb92c8aab38"))
                                                  .withPartnerName("fabrikam.HR")
                                                  .withAuthorizationExpirationTimeInUtc(
                                                      OffsetDateTime.parse("2022-02-20T01:00:00.142Z"))))),
                      Context.NONE);
          }
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-java/blob/azure-resourcemanager-eventgrid_1.2.0-beta.3/sdk/eventgrid/azure-resourcemanager-eventgrid/README.md) on how to add the SDK to your project and authenticate.
      # [Go](#tab/Go)
      ``` go
      package armeventgrid_test

      import (
      	"context"
      	"log"

      	"time"

      	"github.com/Azure/azure-sdk-for-go/sdk/azcore/to"
      	"github.com/Azure/azure-sdk-for-go/sdk/azidentity"
      	"github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/eventgrid/armeventgrid/v2"
      )

      // Generated from example definition: https://github.com/Azure/azure-rest-api-specs/tree/main/specification/eventgrid/resource-manager/Microsoft.EventGrid/stable/2022-06-15/examples/PartnerConfigurations_CreateOrUpdate.json
      func ExamplePartnerConfigurationsClient_BeginCreateOrUpdate() {
      	cred, err := azidentity.NewDefaultAzureCredential(nil)
      	if err != nil {
      		log.Fatalf("failed to obtain a credential: %v", err)
      	}
      	ctx := context.Background()
      	client, err := armeventgrid.NewPartnerConfigurationsClient("5b4b650e-28b9-4790-b3ab-ddbd88d727c4", cred, nil)
      	if err != nil {
      		log.Fatalf("failed to create client: %v", err)
      	}
      	poller, err := client.BeginCreateOrUpdate(ctx,
      		"examplerg",
      		armeventgrid.PartnerConfiguration{
      			Properties: &armeventgrid.PartnerConfigurationProperties{
      				PartnerAuthorization: &armeventgrid.PartnerAuthorization{
      					AuthorizedPartnersList: []*armeventgrid.Partner{
      						{
      							AuthorizationExpirationTimeInUTC: to.Ptr(func() time.Time { t, _ := time.Parse(time.RFC3339Nano, "2022-01-28T01:20:55.142Z"); return t }()),
      							PartnerName:                      to.Ptr("Contoso.Finance"),
      							PartnerRegistrationImmutableID:   to.Ptr("941892bc-f5d0-4d1c-8fb5-477570fc2b71"),
      						},
      						{
      							AuthorizationExpirationTimeInUTC: to.Ptr(func() time.Time { t, _ := time.Parse(time.RFC3339Nano, "2022-02-20T01:00:00.142Z"); return t }()),
      							PartnerName:                      to.Ptr("fabrikam.HR"),
      							PartnerRegistrationImmutableID:   to.Ptr("5362bdb6-ce3e-4d0d-9a5b-3eb92c8aab38"),
      						}},
      					DefaultMaximumExpirationTimeInDays: to.Ptr[int32](10),
      				},
      			},
      		},
      		nil)
      	if err != nil {
      		log.Fatalf("failed to finish the request: %v", err)
      	}
      	res, err := poller.PollUntilDone(ctx, nil)
      	if err != nil {
      		log.Fatalf("failed to pull the result: %v", err)
      	}
      	// TODO: use response item
      	_ = res
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-go/blob/sdk%2Fresourcemanager%2Feventgrid%2Farmeventgrid%2Fv2.0.0/sdk/resourcemanager/eventgrid/armeventgrid/README.md) on how to add the SDK to your project and authenticate.
      # [JavaScript](#tab/JavaScript)
      ``` js
      const { EventGridManagementClient } = require("@azure/arm-eventgrid");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to Synchronously creates or updates a partner configuration with the specified parameters.
       *
       * @summary Synchronously creates or updates a partner configuration with the specified parameters.
       * x-ms-original-file: specification/eventgrid/resource-manager/Microsoft.EventGrid/stable/2022-06-15/examples/PartnerConfigurations_CreateOrUpdate.json
       */
      async function partnerConfigurationsCreateOrUpdate() {
        const subscriptionId = "5b4b650e-28b9-4790-b3ab-ddbd88d727c4";
        const resourceGroupName = "examplerg";
        const partnerConfigurationInfo = {
          partnerAuthorization: {
            authorizedPartnersList: [
              {
                authorizationExpirationTimeInUtc: new Date("2022-01-28T01:20:55.142Z"),
                partnerName: "Contoso.Finance",
                partnerRegistrationImmutableId: "941892bc-f5d0-4d1c-8fb5-477570fc2b71",
              },
              {
                authorizationExpirationTimeInUtc: new Date("2022-02-20T01:00:00.142Z"),
                partnerName: "fabrikam.HR",
                partnerRegistrationImmutableId: "5362bdb6-ce3e-4d0d-9a5b-3eb92c8aab38",
              },
            ],
            defaultMaximumExpirationTimeInDays: 10,
          },
        };
        const credential = new DefaultAzureCredential();
        const client = new EventGridManagementClient(credential, subscriptionId);
        const result = await client.partnerConfigurations.beginCreateOrUpdateAndWait(
          resourceGroupName,
          partnerConfigurationInfo
        );
        console.log(result);
      }

      partnerConfigurationsCreateOrUpdate().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-eventgrid_14.0.0/sdk/eventgrid/arm-eventgrid/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "properties": {
          "partnerAuthorization": {
            "defaultMaximumExpirationTimeInDays": 10,
            "authorizedPartnersList": [
              {
                "partnerRegistrationImmutableId": "941892bc-f5d0-4d1c-8fb5-477570fc2b71",
                "partnerName": "Contoso.Finance",
                "authorizationExpirationTimeInUtc": "2022-01-28T01:20:55.142Z"
              },
              {
                "partnerRegistrationImmutableId": "5362bdb6-ce3e-4d0d-9a5b-3eb92c8aab38",
                "partnerName": "fabrikam.HR",
                "authorizationExpirationTimeInUtc": "2022-02-20T01:00:00.142Z"
              }
            ]
          }
        },
        "location": "global",
        "tags": {
          "tag1": "value1",
          "tag2": "value2"
        },
        "id": "/subscriptions/5b4b650e-28b9-4790-b3ab-ddbd88d727c4/resourceGroups/examplerg/providers/Microsoft.EventGrid/partnerConfigurations/default",
        "name": "default",
        "type": "Microsoft.EventGrid/partnerConfigurations"
      }
  - statusCode: "201"
    body: >-
      {
        "properties": {
          "partnerAuthorization": {
            "defaultMaximumExpirationTimeInDays": 10,
            "authorizedPartnersList": [
              {
                "partnerRegistrationImmutableId": "941892bc-f5d0-4d1c-8fb5-477570fc2b71",
                "partnerName": "Contoso.Finance",
                "authorizationExpirationTimeInUtc": "2022-01-28T01:20:55.142Z"
              },
              {
                "partnerRegistrationImmutableId": "5362bdb6-ce3e-4d0d-9a5b-3eb92c8aab38",
                "partnerName": "fabrikam.HR",
                "authorizationExpirationTimeInUtc": "2022-02-20T01:00:00.142Z"
              }
            ]
          }
        },
        "location": "global",
        "tags": {
          "tag1": "value1",
          "tag2": "value2"
        },
        "id": "/subscriptions/5b4b650e-28b9-4790-b3ab-ddbd88d727c4/resourceGroups/examplerg/providers/Microsoft.EventGrid/partnerConfigurations/default",
        "name": "default",
        "type": "Microsoft.EventGrid/partnerConfigurations"
      }
security: []
metadata:
  description: "Create or update a partner configuration.  \nSynchronously creates or updates a partner configuration with the specified parameters."
errorCodes: []
