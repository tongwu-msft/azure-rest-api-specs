### YamlMime:RESTOperation
uid: management.azure.com.time-series-insights.management(gen1.gen2).eventsources.update
name: Update
service: Time Series Insights
groupName: Event Sources
apiVersion: 2020-05-15
summary: Updates the event source with the specified name in the specified subscription, resource group, and environment.
consumes:
- application/json
produces:
- application/json
paths:
- content: PATCH https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.TimeSeriesInsights/environments/{environmentName}/eventSources/{eventSourceName}?api-version=2020-05-15
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: Azure Subscription ID.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: Name of an Azure Resource group.
  types:
  - uid: string
- name: environmentName
  in: path
  isRequired: true
  description: The name of the Time Series Insights environment associated with the specified resource group.
  types:
  - uid: string
- name: eventSourceName
  in: path
  isRequired: true
  description: The name of the Time Series Insights event source associated with the specified environment.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: Version of the API to be used with the client request.
  types:
  - uid: string
responses:
- name: 200 OK
  description: The event source definition was successfully updated and is in the response.
  types:
  - uid: EventHubEventSourceResource
  - uid: IoTHubEventSourceResource
  typesTitle: EventSourceResource
- name: Other Status Codes
  description: 'HTTP 404 (Not Found): The subscription, resource group, environment, or event source could not be found.'
  types:
  - uid: CloudError
requestBody:
- name: EventHubEventSourceUpdateParameters
  description: Parameters supplied to the Update Event Source operation to update an EventHub event source.
  parameters:
  - name: properties.sharedAccessKey
    in: body
    description: The value of the shared access key that grants the Time Series Insights service read access to the event hub. This property is not shown in event source responses.
    types:
    - uid: string
  - name: kind
    in: body
    isRequired: true
    description: The kind of the event source.
    types:
    - uid: Microsoft.EventHub
    typesTitle: string
  - name: tags
    in: body
    description: Key-value pairs of additional properties for the event source.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: properties.timestampPropertyName
    in: body
    description: The event property that will be used as the event source's timestamp. If a value isn't specified for timestampPropertyName, or if null or empty-string is specified, the event creation time will be used.
    types:
    - uid: string
- name: IoTHubEventSourceUpdateParameters
  description: Parameters supplied to the Update Event Source operation to update an IoTHub event source.
  parameters:
  - name: properties.sharedAccessKey
    in: body
    description: The value of the shared access key that grants the Time Series Insights service read access to the iot hub. This property is not shown in event source responses.
    types:
    - uid: string
  - name: kind
    in: body
    isRequired: true
    description: The kind of the event source.
    types:
    - uid: Microsoft.IoTHub
    typesTitle: string
  - name: tags
    in: body
    description: Key-value pairs of additional properties for the event source.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: properties.timestampPropertyName
    in: body
    description: The event property that will be used as the event source's timestamp. If a value isn't specified for timestampPropertyName, or if null or empty-string is specified, the event creation time will be used.
    types:
    - uid: string
requestHeader: []
definitions:
- name: EventHubEventSourceUpdateParameters
  description: Parameters supplied to the Update Event Source operation to update an EventHub event source.
  kind: object
  properties:
  - name: properties.sharedAccessKey
    description: The value of the shared access key that grants the Time Series Insights service read access to the event hub. This property is not shown in event source responses.
    types:
    - uid: string
  - name: kind
    description: The kind of the event source.
    types:
    - uid: Microsoft.EventHub
    typesTitle: string
  - name: tags
    description: Key-value pairs of additional properties for the event source.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: properties.timestampPropertyName
    description: The event property that will be used as the event source's timestamp. If a value isn't specified for timestampPropertyName, or if null or empty-string is specified, the event creation time will be used.
    types:
    - uid: string
- name: IoTHubEventSourceUpdateParameters
  description: Parameters supplied to the Update Event Source operation to update an IoTHub event source.
  kind: object
  properties:
  - name: properties.sharedAccessKey
    description: The value of the shared access key that grants the Time Series Insights service read access to the iot hub. This property is not shown in event source responses.
    types:
    - uid: string
  - name: kind
    description: The kind of the event source.
    types:
    - uid: Microsoft.IoTHub
    typesTitle: string
  - name: tags
    description: Key-value pairs of additional properties for the event source.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: properties.timestampPropertyName
    description: The event property that will be used as the event source's timestamp. If a value isn't specified for timestampPropertyName, or if null or empty-string is specified, the event creation time will be used.
    types:
    - uid: string
- name: CloudError
  description: Contains information about an API error.
  kind: object
  properties:
  - name: error
    description: Describes a particular API error with an error code and a message.
    types:
    - uid: CloudErrorBody
- name: EventHubEventSourceResource
  description: An event source that receives its data from an Azure EventHub.
  kind: object
  properties:
  - name: kind
    description: The kind of the event source.
    types:
    - uid: Microsoft.EventHub
    typesTitle: string
  - name: location
    description: Resource location
    types:
    - uid: string
  - name: tags
    description: Resource tags
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: id
    isReadyOnly: true
    description: Resource Id
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: Resource name
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: Resource type
    types:
    - uid: string
  - name: properties.serviceBusNamespace
    description: The name of the service bus that contains the event hub.
    types:
    - uid: string
  - name: properties.eventHubName
    description: The name of the event hub.
    types:
    - uid: string
  - name: properties.consumerGroupName
    description: The name of the event hub's consumer group that holds the partitions from which events will be read.
    types:
    - uid: string
  - name: properties.keyName
    description: The name of the SAS key that grants the Time Series Insights service access to the event hub. The shared access policies for this key must grant 'Listen' permissions to the event hub.
    types:
    - uid: string
  - name: eventSourceResourceId
    description: The resource id of the event source in Azure Resource Manager.
    types:
    - uid: string
  - name: timestampPropertyName
    description: The event property that will be used as the event source's timestamp. If a value isn't specified for timestampPropertyName, or if null or empty-string is specified, the event creation time will be used.
    types:
    - uid: string
  - name: localTimestamp
    description: An object that represents the local timestamp property. It contains the format of local timestamp that needs to be used and the corresponding timezone offset information. If a value isn't specified for localTimestamp, or if null, then the local timestamp will not be ingressed with the events.
    types:
    - uid: LocalTimestamp
  - name: ingressStartAt.type
    description: The type of the ingressStartAt, It can be "EarliestAvailable", "EventSourceCreationTime", "CustomEnqueuedTime".
    types:
    - uid: IngressStartAtType
  - name: ingressStartAt.time
    description: ISO8601 UTC datetime with seconds precision (milliseconds are optional), specifying the date and time that will be the starting point for Events to be consumed.
    types:
    - uid: string
  - name: provisioningState
    isReadyOnly: true
    description: Provisioning state of the resource.
    types:
    - uid: ProvisioningState
  - name: creationTime
    isReadyOnly: true
    description: The time the resource was created.
    types:
    - uid: string
- name: IoTHubEventSourceResource
  description: An event source that receives its data from an Azure IoTHub.
  kind: object
  properties:
  - name: kind
    description: The kind of the event source.
    types:
    - uid: Microsoft.IoTHub
    typesTitle: string
  - name: location
    description: Resource location
    types:
    - uid: string
  - name: tags
    description: Resource tags
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: id
    isReadyOnly: true
    description: Resource Id
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: Resource name
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: Resource type
    types:
    - uid: string
  - name: properties.iotHubName
    description: The name of the iot hub.
    types:
    - uid: string
  - name: properties.consumerGroupName
    description: The name of the iot hub's consumer group that holds the partitions from which events will be read.
    types:
    - uid: string
  - name: properties.keyName
    description: The name of the Shared Access Policy key that grants the Time Series Insights service access to the iot hub. This shared access policy key must grant 'service connect' permissions to the iot hub.
    types:
    - uid: string
  - name: eventSourceResourceId
    description: The resource id of the event source in Azure Resource Manager.
    types:
    - uid: string
  - name: timestampPropertyName
    description: The event property that will be used as the event source's timestamp. If a value isn't specified for timestampPropertyName, or if null or empty-string is specified, the event creation time will be used.
    types:
    - uid: string
  - name: localTimestamp
    description: An object that represents the local timestamp property. It contains the format of local timestamp that needs to be used and the corresponding timezone offset information. If a value isn't specified for localTimestamp, or if null, then the local timestamp will not be ingressed with the events.
    types:
    - uid: LocalTimestamp
  - name: ingressStartAt.type
    description: The type of the ingressStartAt, It can be "EarliestAvailable", "EventSourceCreationTime", "CustomEnqueuedTime".
    types:
    - uid: IngressStartAtType
  - name: ingressStartAt.time
    description: ISO8601 UTC datetime with seconds precision (milliseconds are optional), specifying the date and time that will be the starting point for Events to be consumed.
    types:
    - uid: string
  - name: provisioningState
    isReadyOnly: true
    description: Provisioning state of the resource.
    types:
    - uid: ProvisioningState
  - name: creationTime
    isReadyOnly: true
    description: The time the resource was created.
    types:
    - uid: string
- name: CloudErrorBody
  description: Describes a particular API error with an error code and a message.
  kind: object
  properties:
  - name: code
    description: An error code that describes the error condition more precisely than an HTTP status code. Can be used to programmatically handle specific error cases.
    types:
    - uid: string
  - name: message
    description: A message that describes the error in detail and provides debugging information.
    types:
    - uid: string
  - name: target
    description: The target of the particular error (for example, the name of the property in error).
    types:
    - uid: string
  - name: details
    description: Contains nested errors that are related to this error.
    types:
    - uid: CloudErrorBody
      isArray: true
- name: LocalTimestamp
  description: An object that represents the local timestamp property. It contains the format of local timestamp that needs to be used and the corresponding timezone offset information. If a value isn't specified for localTimestamp, or if null, then the local timestamp will not be ingressed with the events.
  kind: object
  properties:
  - name: format
    description: An enum that represents the format of the local timestamp property that needs to be set.
    types:
    - uid: LocalTimestampFormat
  - name: timeZoneOffset
    description: An object that represents the offset information for the local timestamp format specified. Should not be specified for LocalTimestampFormat - Embedded.
    types:
    - uid: TimeZoneOffset
- name: IngressStartAtType
  description: The type of the ingressStartAt, It can be "EarliestAvailable", "EventSourceCreationTime", "CustomEnqueuedTime".
  kind: enum
  properties:
  - name: EarliestAvailable
    types:
    - uid: string
  - name: EventSourceCreationTime
    types:
    - uid: string
  - name: CustomEnqueuedTime
    types:
    - uid: string
- name: ProvisioningState
  description: Provisioning state of the resource.
  kind: enum
  properties:
  - name: Accepted
    types:
    - uid: string
  - name: Creating
    types:
    - uid: string
  - name: Updating
    types:
    - uid: string
  - name: Succeeded
    types:
    - uid: string
  - name: Failed
    types:
    - uid: string
  - name: Deleting
    types:
    - uid: string
- name: LocalTimestampFormat
  description: An enum that represents the format of the local timestamp property that needs to be set.
  kind: enum
  properties:
  - name: Embedded
    types:
    - uid: string
- name: TimeZoneOffset
  description: An object that represents the offset information for the local timestamp format specified. Should not be specified for LocalTimestampFormat - Embedded.
  kind: object
  properties:
  - name: propertyName
    description: 'The event property that will be contain the offset information to calculate the local timestamp. When the LocalTimestampFormat is Iana, the property name will contain the name of the column which contains IANA Timezone Name (eg: Americas/Los Angeles). When LocalTimestampFormat is Timespan, it contains the name of property which contains values representing the offset (eg: P1D or 1.00:00:00)'
    types:
    - uid: string
examples:
- name: UpdateEventSource
  request:
    uri: PATCH https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.TimeSeriesInsights/environments/env1/eventSources/es1?api-version=2020-05-15
    body: >-
      {
        "tags": {
          "someKey": "someValue"
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PATCH https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.TimeSeriesInsights/environments/env1/eventSources/es1?api-version=2020-05-15

      {
        "tags": {
          "someKey": "someValue"
        }
      }

      ```

      # [Go](#tab/Go)
      ``` go
      package armtimeseriesinsights_test

      import (
      	"context"
      	"log"

      	"github.com/Azure/azure-sdk-for-go/sdk/azcore/to"
      	"github.com/Azure/azure-sdk-for-go/sdk/azidentity"
      	"github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/timeseriesinsights/armtimeseriesinsights"
      )

      // Generated from example definition: https://github.com/Azure/azure-rest-api-specs/tree/main/specification/timeseriesinsights/resource-manager/Microsoft.TimeSeriesInsights/stable/2020-05-15/examples/EventSourcesPatchTags.json
      func ExampleEventSourcesClient_Update() {
      	cred, err := azidentity.NewDefaultAzureCredential(nil)
      	if err != nil {
      		log.Fatalf("failed to obtain a credential: %v", err)
      	}
      	ctx := context.Background()
      	client, err := armtimeseriesinsights.NewEventSourcesClient("subid", cred, nil)
      	if err != nil {
      		log.Fatalf("failed to create client: %v", err)
      	}
      	res, err := client.Update(ctx,
      		"rg1",
      		"env1",
      		"es1",
      		&armtimeseriesinsights.EventSourceUpdateParameters{
      			Tags: map[string]*string{
      				"someKey": to.Ptr("someValue"),
      			},
      		},
      		nil)
      	if err != nil {
      		log.Fatalf("failed to finish the request: %v", err)
      	}
      	// TODO: use response item
      	_ = res
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-go/blob/sdk%2Fresourcemanager%2Ftimeseriesinsights%2Farmtimeseriesinsights%2Fv1.0.0/sdk/resourcemanager/timeseriesinsights/armtimeseriesinsights/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.TimeSeriesInsights/Environments/env1/eventSources/es1",
        "location": "West US",
        "name": "es1",
        "type": "Microsoft.TimeSeriesInsights/Environments/EventSources",
        "tags": {
          "someKey": "someValue"
        },
        "kind": "Microsoft.EventHub",
        "properties": {
          "eventSourceResourceId": "somePathInArm",
          "serviceBusNamespace": "sbn",
          "consumerGroupName": "cgn",
          "eventHubName": "ehn",
          "keyName": "managementKey",
          "provisioningState": "Succeeded",
          "creationTime": "2017-04-18T19:20:33.2288820Z",
          "timestampPropertyName": "someOtherTimestampProperty",
          "localTimestamp": {
            "format": "TimeSpan",
            "timeZoneOffset": {
              "propertyName": "someEventPropertyName"
            }
          },
          "ingressStartAt": {
            "type": "EarliestAvailable"
          }
        }
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: Updates the event source with the specified name in the specified subscription, resource group, and environment.
errorCodes: []
