### YamlMime:RESTOperation
uid: time-series-insights.dataaccessgen2.query.getavailability
name: Get Availability
service: Time Series Insights
groupName: Query
apiVersion: 2020-07-31
summary: Returns the time range and distribution of event count over the event timestamp ($ts). This API can be used to provide landing experience of navigating to the environment.
consumes:
- application/json
produces:
- application/json
paths:
- content: GET https://{environmentFqdn}/availability?api-version=2020-07-31
- content: GET https://{environmentFqdn}/availability?api-version=2020-07-31&storeType={storeType}
  isOptional: true
uriParameters:
- name: environmentFqdn
  in: path
  isRequired: true
  skipUrlEncoding: true
  description: Per environment FQDN, for example 10000000-0000-0000-0000-100000000109.env.timeseries.azure.com. You can obtain this domain name from the response of the Get Environments API, Azure portal, or Azure Resource Manager.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: Version of the API to be used with the client request. Currently supported version is "2020-07-31".
  types:
  - uid: string
- name: storeType
  in: query
  description: For the environments with warm store enabled, the query can be executed either on the 'WarmStore' or 'ColdStore'. This parameter in the query defines which store the query should be executed on. If not defined, the query will be executed on the cold store.
  types:
  - uid: string
responses:
- name: 200 OK
  headers:
  - name: x-ms-request-id
    value: string
  description: Successful operation.
  types:
  - uid: AvailabilityResponse
- name: Other Status Codes
  headers:
  - name: x-ms-request-id
    value: string
  description: Unexpected error.
  types:
  - uid: TsiError
requestHeader:
- name: x-ms-client-request-id
  in: header
  description: Optional client request ID. Service records this value. Allows the service to trace operation across services, and allows the customer to contact support regarding a particular request.
  types:
  - uid: string
- name: x-ms-client-session-id
  in: header
  description: Optional client session ID. Service records this value. Allows the service to trace a group of related operations across services, and allows the customer to contact support regarding a particular group of requests.
  types:
  - uid: string
definitions:
- name: AvailabilityResponse
  description: Response of Get Availability operation. When environment has no data, availability property is null.
  kind: object
  properties:
  - name: availability
    isReadyOnly: true
    description: Event availability information when environment contains events. When environment has no data yet, this property is null or not present.
    types:
    - uid: Availability
- name: TsiError
  description: Information about an API error.
  kind: object
  properties:
  - name: error
    description: A particular API error with an error code and a message.
    types:
    - uid: TsiErrorBody
- name: Availability
  description: Event availability information when environment contains events. Contains time range of events and approximate distribution of events over time.
  kind: object
  properties:
  - name: range
    isReadyOnly: true
    description: Minimum and maximum values of event timestamp ($ts) property.
    types:
    - uid: DateTimeRange
  - name: intervalSize
    isReadyOnly: true
    description: 'Interval size for the returned distribution of the events. Returned interval is selected to return a reasonable number of points. All intervals are the same size. On the wire interval is specified in ISO-8601 duration format. One month is always converted to 30 days, and one year is always 365 days. Examples: 1 minute is "PT1M", 1 millisecond is "PT0.001S". For more information, see https://www.w3.org/TR/xmlschema-2/#duration'
    types:
    - uid: string
  - name: distribution
    description: ''
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: integer
- name: TsiErrorBody
  description: A particular API error with an error code and a message.
  kind: object
  properties:
  - name: code
    isReadyOnly: true
    description: Language-independent, human-readable string that defines a service-specific error code. This code serves as a more specific indicator for the HTTP error code specified in the response. Can be used to programmatically handle specific error cases.
    types:
    - uid: string
  - name: message
    isReadyOnly: true
    description: Human-readable, language-independent representation of the error. It is intended as an aid to developers and is not suitable for exposure to end users.
    types:
    - uid: string
  - name: target
    isReadyOnly: true
    description: Target of the particular error (for example, the name of the property in error). May be null.
    types:
    - uid: string
  - name: innerError
    isReadyOnly: true
    description: Contains more specific error that narrows down the cause. May be null.
    types:
    - uid: TsiErrorBody
  - name: details
    isReadyOnly: true
    description: Contains additional error information. May be null.
    types:
    - uid: TsiErrorDetails
      isArray: true
- name: DateTimeRange
  description: The range of time. Cannot be null or negative.
  kind: object
  properties:
  - name: from
    description: Start timestamp of the time range. Start timestamp is inclusive when used in time series query requests. Events that have this timestamp are included.
    types:
    - uid: string
  - name: to
    description: End timestamp of the time range. End timestamp is exclusive when used in time series query requests. Events that match this timestamp are excluded. Note that end timestamp is inclusive when returned by Get Availability (meaning that there is an event with this exact "to" timestamp).
    types:
    - uid: string
- name: TsiErrorDetails
  description: Additional error information.
  kind: object
  properties:
  - name: code
    isReadyOnly: true
    description: Language-independent, human-readable string that defines a service-specific error code. This code serves as a more specific indicator for the HTTP error code specified in the response. Can be used to programmatically handle specific error cases.
    types:
    - uid: string
  - name: message
    isReadyOnly: true
    description: Human-readable, language-independent representation of the error. It is intended as an aid to developers and is not suitable for exposure to end users.
    types:
    - uid: string
examples:
- name: AvailabilityGet
  request:
    uri: GET https://10000000-0000-0000-0000-100000000109.env.timeseries.azure.com/availability?api-version=2020-07-31
  responses:
  - statusCode: "200"
    headers:
    - name: x-ms-request-id
      value: 0d59d156-2807-4952-87bb-0e074417dbfb
    body: >-
      {
        "availability": {
          "intervalSize": "PT1H",
          "distribution": {
            "2019-03-27T04:00:00Z": 432447,
            "2019-03-27T05:00:00Z": 432340,
            "2019-03-27T06:00:00Z": 432451,
            "2019-03-27T07:00:00Z": 432436,
            "2019-03-26T13:00:00Z": 386247,
            "2019-03-27T00:00:00Z": 436968,
            "2019-03-27T01:00:00Z": 432509,
            "2019-03-27T02:00:00Z": 432487
          },
          "range": {
            "from": "2019-03-14T06:38:27.153Z",
            "to": "2019-03-27T03:57:11.697Z"
          }
        }
      }
- name: ColdStoreAvailabilityGet
  request:
    uri: GET https://10000000-0000-0000-0000-100000000109.env.timeseries.azure.com/availability?api-version=2020-07-31&storeType=coldstore
  responses:
  - statusCode: "200"
    headers:
    - name: x-ms-request-id
      value: 0d59d156-2807-4952-87bb-0e074417dbfb
    body: >-
      {
        "availability": {
          "intervalSize": "PT1H",
          "distribution": {
            "2019-03-27T04:00:00Z": 432447,
            "2019-03-27T05:00:00Z": 432340,
            "2019-03-27T06:00:00Z": 432451,
            "2019-03-27T07:00:00Z": 432436,
            "2019-03-26T13:00:00Z": 386247,
            "2019-03-27T00:00:00Z": 436968,
            "2019-03-27T01:00:00Z": 432509,
            "2019-03-27T02:00:00Z": 432487
          },
          "range": {
            "from": "2019-03-14T06:38:27.153Z",
            "to": "2019-03-27T03:57:11.697Z"
          }
        }
      }
- name: WarmStoreAvailabilityGet
  request:
    uri: GET https://10000000-0000-0000-0000-100000000109.env.timeseries.azure.com/availability?api-version=2020-07-31&storeType=warmstore
  responses:
  - statusCode: "200"
    headers:
    - name: x-ms-request-id
      value: 0d59d156-2807-4952-87bb-0e074417dbfb
    body: >-
      {
        "availability": {
          "intervalSize": "PT1H",
          "distribution": {
            "2019-03-27T04:00:00Z": 432447,
            "2019-03-27T05:00:00Z": 432340,
            "2019-03-27T06:00:00Z": 432451,
            "2019-03-27T07:00:00Z": 432436,
            "2019-03-26T13:00:00Z": 386247,
            "2019-03-27T00:00:00Z": 436968,
            "2019-03-27T01:00:00Z": 432509,
            "2019-03-27T02:00:00Z": 432487
          },
          "range": {
            "from": "2019-03-14T06:38:27.153Z",
            "to": "2019-03-27T03:57:11.697Z"
          }
        }
      }
- name: AvailabilityGetEmpty
  request:
    uri: GET https://10000000-0000-0000-0000-100000000109.env.timeseries.azure.com/availability?api-version=2020-07-31
  responses:
  - statusCode: "200"
    body: '{}'
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
errorCodes: []
