### YamlMime:RESTOperation
uid: management.azure.com.time-series-insights.management(preview).environments.listbysubscription
name: List By Subscription
service: Time Series Insights
groupName: Environments
apiVersion: 2018-08-15-preview
summary: Lists all the available environments within a subscription, irrespective of the resource groups.
consumes:
- application/json
produces:
- application/json
paths:
- content: GET https://management.azure.com/subscriptions/{subscriptionId}/providers/Microsoft.TimeSeriesInsights/environments?api-version=2018-08-15-preview
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: Azure Subscription ID.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: Version of the API to be used with the client request.
  types:
  - uid: string
responses:
- name: 200 OK
  description: Environments returned successfully.
  types:
  - uid: EnvironmentListResponse
- name: Other Status Codes
  description: 'HTTP 404 (Not Found): The subscription could not be found.'
  types:
  - uid: CloudError
requestHeader: []
definitions:
- name: EnvironmentListResponse
  description: The response of the List Environments operation.
  kind: object
  properties:
  - name: value
    description: Result of the List Environments operation.
    types:
    - uid: StandardEnvironmentResource
      isArray: true
    - uid: LongTermEnvironmentResource
      isArray: true
    typesTitle: EnvironmentResource[]
- name: CloudError
  description: Contains information about an API error.
  kind: object
  properties:
  - name: error
    description: Describes a particular API error with an error code and a message.
    types:
    - uid: CloudErrorBody
- name: CloudErrorBody
  description: Describes a particular API error with an error code and a message.
  kind: object
  properties:
  - name: code
    description: An error code that describes the error condition more precisely than an HTTP status code. Can be used to programmatically handle specific error cases.
    types:
    - uid: string
  - name: message
    description: A message that describes the error in detail and provides debugging information.
    types:
    - uid: string
  - name: target
    description: The target of the particular error (for example, the name of the property in error).
    types:
    - uid: string
  - name: details
    description: Contains nested errors that are related to this error.
    types:
    - uid: CloudErrorBody
      isArray: true
- name: StandardEnvironmentResource
  description: An environment is a set of time-series data available for query, and is the top level Azure Time Series Insights resource. Standard environments have data retention limits.
  kind: object
  properties:
  - name: sku
    description: The sku determines the type of environment, either standard (S1 or S2) or long-term (L1). For standard environments the sku determines the capacity of the environment, the ingress rate, and the billing rate.
    types:
    - uid: Sku
  - name: kind
    description: The kind of the environment.
    types:
    - uid: Standard
    typesTitle: string
  - name: location
    description: Resource location
    types:
    - uid: string
  - name: tags
    description: Resource tags
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: id
    isReadyOnly: true
    description: Resource Id
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: Resource name
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: Resource type
    types:
    - uid: string
  - name: properties.dataRetentionTime
    description: ISO8601 timespan specifying the minimum number of days the environment's events will be available for query.
    types:
    - uid: string
  - name: properties.storageLimitExceededBehavior
    description: The behavior the Time Series Insights service should take when the environment's capacity has been exceeded. If "PauseIngress" is specified, new events will not be read from the event source. If "PurgeOldData" is specified, new events will continue to be read and old events will be deleted from the environment. The default behavior is PurgeOldData.
    types:
    - uid: StorageLimitExceededBehavior
  - name: properties.partitionKeyProperties
    description: The list of event properties which will be used to partition data in the environment. Currently, only a single partition key property is supported.
    types:
    - uid: TimeSeriesIdProperty
      isArray: true
  - name: properties.dataAccessId
    isReadyOnly: true
    description: An id used to access the environment data, e.g. to query the environment's events or upload reference data for the environment.
    types:
    - uid: string
  - name: properties.dataAccessFqdn
    isReadyOnly: true
    description: The fully qualified domain name used to access the environment data, e.g. to query the environment's events or upload reference data for the environment.
    types:
    - uid: string
  - name: properties.status
    isReadyOnly: true
    description: An object that represents the status of the environment, and its internal state in the Time Series Insights service.
    types:
    - uid: EnvironmentStatus
  - name: provisioningState
    isReadyOnly: true
    description: Provisioning state of the resource.
    types:
    - uid: ProvisioningState
  - name: creationTime
    isReadyOnly: true
    description: The time the resource was created.
    types:
    - uid: string
- name: LongTermEnvironmentResource
  description: An environment is a set of time-series data available for query, and is the top level Azure Time Series Insights resource. LongTerm environments do not have set data retention limits.
  kind: object
  properties:
  - name: properties.timeSeriesIdProperties
    description: The list of event properties which will be used to define the environment's time series id.
    types:
    - uid: TimeSeriesIdProperty
      isArray: true
  - name: properties.storageConfiguration
    description: The storage configuration provides the connection details that allows the Time Series Insights service to connect to the customer storage account that is used to store the environment's data.
    types:
    - uid: LongTermStorageConfigurationOutput
  - name: properties.warmStoreConfiguration
    description: The warm store configuration provides the details to create a warm store cache that will retain a copy of the environment's data available for faster query.
    types:
    - uid: WarmStoreConfigurationProperties
  - name: sku
    description: The sku determines the type of environment, either standard (S1 or S2) or long-term (L1). For standard environments the sku determines the capacity of the environment, the ingress rate, and the billing rate.
    types:
    - uid: Sku
  - name: kind
    description: The kind of the environment.
    types:
    - uid: LongTerm
    typesTitle: string
  - name: location
    description: Resource location
    types:
    - uid: string
  - name: tags
    description: Resource tags
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: id
    isReadyOnly: true
    description: Resource Id
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: Resource name
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: Resource type
    types:
    - uid: string
  - name: properties.dataAccessId
    isReadyOnly: true
    description: An id used to access the environment data, e.g. to query the environment's events or upload reference data for the environment.
    types:
    - uid: string
  - name: properties.dataAccessFqdn
    isReadyOnly: true
    description: The fully qualified domain name used to access the environment data, e.g. to query the environment's events or upload reference data for the environment.
    types:
    - uid: string
  - name: properties.status
    isReadyOnly: true
    description: An object that represents the status of the environment, and its internal state in the Time Series Insights service.
    types:
    - uid: EnvironmentStatus
  - name: provisioningState
    isReadyOnly: true
    description: Provisioning state of the resource.
    types:
    - uid: ProvisioningState
  - name: creationTime
    isReadyOnly: true
    description: The time the resource was created.
    types:
    - uid: string
- name: Sku
  description: The sku determines the type of environment, either standard (S1 or S2) or long-term (L1). For standard environments the sku determines the capacity of the environment, the ingress rate, and the billing rate.
  kind: object
  properties:
  - name: name
    description: The name of this SKU.
    types:
    - uid: SkuName
  - name: capacity
    description: The capacity of the sku. For standard environments, this value can be changed to support scale out of environments after they have been created.
    types:
    - uid: integer
- name: StorageLimitExceededBehavior
  description: The behavior the Time Series Insights service should take when the environment's capacity has been exceeded. If "PauseIngress" is specified, new events will not be read from the event source. If "PurgeOldData" is specified, new events will continue to be read and old events will be deleted from the environment. The default behavior is PurgeOldData.
  kind: enum
  properties:
  - name: PurgeOldData
    types:
    - uid: string
  - name: PauseIngress
    types:
    - uid: string
- name: TimeSeriesIdProperty
  description: The structure of the property that a time series id can have. An environment can have multiple such properties.
  kind: object
  properties:
  - name: name
    description: The name of the property.
    types:
    - uid: string
  - name: type
    description: The type of the property.
    types:
    - uid: PropertyType
- name: EnvironmentStatus
  description: An object that represents the status of the environment, and its internal state in the Time Series Insights service.
  kind: object
  properties:
  - name: ingress
    isReadyOnly: true
    description: An object that represents the status of ingress on an environment.
    types:
    - uid: IngressEnvironmentStatus
  - name: warmStorage
    isReadyOnly: true
    description: An object that represents the status of warm storage on an environment.
    types:
    - uid: WarmStorageEnvironmentStatus
- name: ProvisioningState
  description: Provisioning state of the resource.
  kind: enum
  properties:
  - name: Accepted
    types:
    - uid: string
  - name: Creating
    types:
    - uid: string
  - name: Updating
    types:
    - uid: string
  - name: Succeeded
    types:
    - uid: string
  - name: Failed
    types:
    - uid: string
  - name: Deleting
    types:
    - uid: string
- name: LongTermStorageConfigurationOutput
  description: The storage configuration provides the non-secret connection details about the customer storage account that is used to store the environment's data.
  kind: object
  properties:
  - name: accountName
    description: The name of the storage account that will hold the environment's long term data.
    types:
    - uid: string
- name: WarmStoreConfigurationProperties
  description: The warm store configuration provides the details to create a warm store cache that will retain a copy of the environment's data available for faster query.
  kind: object
  properties:
  - name: dataRetention
    description: ISO8601 timespan specifying the number of days the environment's events will be available for query from the warm store.
    types:
    - uid: string
- name: SkuName
  description: The name of this SKU.
  kind: enum
  properties:
  - name: S1
    types:
    - uid: string
  - name: S2
    types:
    - uid: string
  - name: P1
    types:
    - uid: string
  - name: L1
    types:
    - uid: string
- name: PropertyType
  description: The type of the property.
  kind: enum
  properties:
  - name: String
    types:
    - uid: string
- name: IngressEnvironmentStatus
  description: An object that represents the status of ingress on an environment.
  kind: object
  properties:
  - name: state
    description: This string represents the state of ingress operations on an environment. It can be "Disabled", "Ready", "Running", "Paused" or "Unknown"
    types:
    - uid: IngressState
  - name: stateDetails
    isReadyOnly: true
    description: An object that contains the details about an environment's state.
    types:
    - uid: EnvironmentStateDetails
- name: WarmStorageEnvironmentStatus
  description: An object that represents the status of warm storage on an environment.
  kind: object
  properties:
  - name: propertiesUsage.state
    description: This string represents the state of warm storage properties usage. It can be "Ok", "Error", "Unknown".
    types:
    - uid: WarmStoragePropertiesState
  - name: propertiesUsage.stateDetails.currentCount
    description: A value that represents the number of properties used by the environment for S1/S2 SKU and number of properties used by Warm Store for PAYG SKU
    types:
    - uid: integer
  - name: propertiesUsage.stateDetails.maxCount
    description: A value that represents the maximum number of properties used allowed by the environment for S1/S2 SKU and maximum number of properties allowed by Warm Store for PAYG SKU.
    types:
    - uid: integer
- name: IngressState
  description: This string represents the state of ingress operations on an environment. It can be "Disabled", "Ready", "Running", "Paused" or "Unknown"
  kind: enum
  properties:
  - name: Disabled
    types:
    - uid: string
  - name: Ready
    types:
    - uid: string
  - name: Running
    types:
    - uid: string
  - name: Paused
    types:
    - uid: string
  - name: Unknown
    types:
    - uid: string
- name: EnvironmentStateDetails
  description: An object that contains the details about an environment's state.
  kind: object
  properties:
  - name: code
    description: Contains the code that represents the reason of an environment being in a particular state. Can be used to programmatically handle specific cases.
    types:
    - uid: string
  - name: message
    description: A message that describes the state in detail.
    types:
    - uid: string
- name: WarmStoragePropertiesState
  description: This string represents the state of warm storage properties usage. It can be "Ok", "Error", "Unknown".
  kind: enum
  properties:
  - name: Ok
    types:
    - uid: string
  - name: Error
    types:
    - uid: string
  - name: Unknown
    types:
    - uid: string
examples:
- name: EnvironmentsBySubscription
  request:
    uri: GET https://management.azure.com/subscriptions/subid/providers/Microsoft.TimeSeriesInsights/environments?api-version=2018-08-15-preview
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      GET https://management.azure.com/subscriptions/subid/providers/Microsoft.TimeSeriesInsights/environments?api-version=2018-08-15-preview
      ```

  responses:
  - statusCode: "200"
    body: >-
      {
        "value": [
          {
            "id": "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.TimeSeriesInsights/Environments/env1",
            "location": "West US",
            "name": "env1",
            "type": "Microsoft.TimeSeriesInsights/Environments",
            "kind": "Standard",
            "tags": {},
            "properties": {
              "dataRetentionTime": "P31D",
              "provisioningState": "Succeeded",
              "creationTime": "2017-04-18T19:20:33.2288820Z"
            },
            "sku": {
              "name": "S1",
              "capacity": 1
            }
          }
        ]
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: Learn more about Time Series Insights service - Lists all the available environments within a subscription, irrespective of the resource groups.
errorCodes: []
