### YamlMime:RESTOperation
uid: management.azure.com.storagerp.managementpolicies.createorupdate
name: Create Or Update
service: Storage Resource Provider
groupName: Management Policies
apiVersion: 2021-09-01
summary: Sets the managementpolicy to the specified storage account.
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Storage/storageAccounts/{accountName}/managementPolicies/default?api-version=2021-09-01
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: The ID of the target subscription.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group within the user's subscription. The name is case insensitive.
  types:
  - uid: string
  pattern: ^[-\w\._\(\)]+$
- name: accountName
  in: path
  isRequired: true
  description: The name of the storage account within the specified resource group. Storage account names must be between 3 and 24 characters in length and use numbers and lower-case letters only.
  types:
  - uid: string
- name: managementPolicyName
  in: path
  isRequired: true
  description: The name of the Storage Account Management Policy. It should always be 'default'
  types:
  - uid: ManagementPolicyName
- name: api-version
  in: query
  isRequired: true
  description: The API version to use for this operation.
  types:
  - uid: string
responses:
- name: 200 OK
  description: OK -- Put managementpolicy successfully.
  types:
  - uid: ManagementPolicy
requestBody:
- name: default
  parameters:
  - name: properties.policy
    in: body
    isRequired: true
    description: 'The Storage Account ManagementPolicy, in JSON format. See more details in: https://docs.microsoft.com/en-us/azure/storage/common/storage-lifecycle-managment-concepts.'
    types:
    - uid: ManagementPolicySchema
requestHeader: []
definitions:
- name: ManagementPolicyName
  description: The name of the Storage Account Management Policy. It should always be 'default'
  kind: enum
  properties:
  - name: default
    types:
    - uid: string
- name: ManagementPolicySchema
  description: 'The Storage Account ManagementPolicies Rules. See more details in: https://docs.microsoft.com/en-us/azure/storage/common/storage-lifecycle-managment-concepts.'
  kind: object
  properties:
  - name: rules
    description: 'The Storage Account ManagementPolicies Rules. See more details in: https://docs.microsoft.com/en-us/azure/storage/common/storage-lifecycle-managment-concepts.'
    types:
    - uid: ManagementPolicyRule
      isArray: true
- name: ManagementPolicy
  description: The Get Storage Account ManagementPolicies operation response.
  kind: object
  properties:
  - name: properties.lastModifiedTime
    isReadyOnly: true
    description: Returns the date and time the ManagementPolicies was last modified.
    types:
    - uid: string
  - name: properties.policy
    description: 'The Storage Account ManagementPolicy, in JSON format. See more details in: https://docs.microsoft.com/en-us/azure/storage/common/storage-lifecycle-managment-concepts.'
    types:
    - uid: ManagementPolicySchema
  - name: id
    isReadyOnly: true
    description: Fully qualified resource ID for the resource. Ex - /subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/{resourceProviderNamespace}/{resourceType}/{resourceName}
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: The name of the resource
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: The type of the resource. E.g. "Microsoft.Compute/virtualMachines" or "Microsoft.Storage/storageAccounts"
    types:
    - uid: string
- name: ManagementPolicyRule
  description: An object that wraps the Lifecycle rule. Each rule is uniquely defined by name.
  kind: object
  properties:
  - name: enabled
    description: Rule is enabled if set to true.
    types:
    - uid: boolean
  - name: name
    description: A rule name can contain any combination of alpha numeric characters. Rule name is case-sensitive. It must be unique within a policy.
    types:
    - uid: string
  - name: type
    description: The valid value is Lifecycle
    types:
    - uid: RuleType
  - name: definition
    description: An object that defines the Lifecycle rule.
    types:
    - uid: ManagementPolicyDefinition
- name: RuleType
  description: The valid value is Lifecycle
  kind: enum
  properties:
  - name: Lifecycle
    types:
    - uid: string
- name: ManagementPolicyDefinition
  description: An object that defines the Lifecycle rule. Each definition is made up with a filters set and an actions set.
  kind: object
  properties:
  - name: actions
    description: An object that defines the action set.
    types:
    - uid: ManagementPolicyAction
  - name: filters
    description: An object that defines the filter set.
    types:
    - uid: ManagementPolicyFilter
- name: ManagementPolicyAction
  description: Actions are applied to the filtered blobs when the execution condition is met.
  kind: object
  properties:
  - name: baseBlob
    description: The management policy action for base blob
    types:
    - uid: ManagementPolicyBaseBlob
  - name: snapshot
    description: The management policy action for snapshot
    types:
    - uid: ManagementPolicySnapShot
  - name: version
    description: The management policy action for version
    types:
    - uid: ManagementPolicyVersion
- name: ManagementPolicyFilter
  description: 'Filters limit rule actions to a subset of blobs within the storage account. If multiple filters are defined, a logical AND is performed on all filters. '
  kind: object
  properties:
  - name: prefixMatch
    description: An array of strings for prefixes to be match.
    types:
    - uid: string
      isArray: true
  - name: blobTypes
    description: An array of predefined enum values. Currently blockBlob supports all tiering and delete actions. Only delete actions are supported for appendBlob.
    types:
    - uid: string
      isArray: true
  - name: blobIndexMatch
    description: An array of blob index tag based filters, there can be at most 10 tag filters
    types:
    - uid: TagFilter
      isArray: true
- name: ManagementPolicyBaseBlob
  description: Management policy action for base blob.
  kind: object
  properties:
  - name: tierToCool
    description: The function to tier blobs to cool storage. Support blobs currently at Hot tier
    types:
    - uid: DateAfterModification
  - name: tierToArchive
    description: The function to tier blobs to archive storage. Support blobs currently at Hot or Cool tier
    types:
    - uid: DateAfterModification
  - name: delete
    description: The function to delete the blob
    types:
    - uid: DateAfterModification
  - name: enableAutoTierToHotFromCool
    description: This property enables auto tiering of a blob from cool to hot on a blob access. This property requires tierToCool.daysAfterLastAccessTimeGreaterThan.
    types:
    - uid: boolean
- name: ManagementPolicySnapShot
  description: Management policy action for snapshot.
  kind: object
  properties:
  - name: tierToCool
    description: The function to tier blob snapshot to cool storage. Support blob snapshot currently at Hot tier
    types:
    - uid: DateAfterCreation
  - name: tierToArchive
    description: The function to tier blob snapshot to archive storage. Support blob snapshot currently at Hot or Cool tier
    types:
    - uid: DateAfterCreation
  - name: delete
    description: The function to delete the blob snapshot
    types:
    - uid: DateAfterCreation
- name: ManagementPolicyVersion
  description: Management policy action for blob version.
  kind: object
  properties:
  - name: tierToCool
    description: The function to tier blob version to cool storage. Support blob version currently at Hot tier
    types:
    - uid: DateAfterCreation
  - name: tierToArchive
    description: The function to tier blob version to archive storage. Support blob version currently at Hot or Cool tier
    types:
    - uid: DateAfterCreation
  - name: delete
    description: The function to delete the blob version
    types:
    - uid: DateAfterCreation
- name: TagFilter
  description: Blob index tag based filtering for blob objects
  kind: object
  properties:
  - name: name
    description: This is the filter tag name, it can have 1 - 128 characters
    types:
    - uid: string
  - name: op
    description: This is the comparison operator which is used for object comparison and filtering. Only == (equality operator) is currently supported
    types:
    - uid: string
  - name: value
    description: This is the filter tag value field used for tag based filtering, it can have 0 - 256 characters
    types:
    - uid: string
- name: DateAfterModification
  description: Object to define the base blob action conditions. Properties daysAfterModificationGreaterThan, daysAfterLastAccessTimeGreaterThan and daysAfterCreationGreaterThan are mutually exclusive. The daysAfterLastTierChangeGreaterThan property is only applicable for tierToArchive actions which requires daysAfterModificationGreaterThan to be set, also it cannot be used in conjunction with daysAfterLastAccessTimeGreaterThan or daysAfterCreationGreaterThan.
  kind: object
  properties:
  - name: daysAfterModificationGreaterThan
    description: Value indicating the age in days after last modification
    types:
    - uid: number
  - name: daysAfterLastAccessTimeGreaterThan
    description: Value indicating the age in days after last blob access. This property can only be used in conjunction with last access time tracking policy
    types:
    - uid: number
  - name: daysAfterLastTierChangeGreaterThan
    description: Value indicating the age in days after last blob tier change time. This property is only applicable for tierToArchive actions and requires daysAfterModificationGreaterThan to be set for baseBlobs based actions. The blob will be archived if both the conditions are satisfied.
    types:
    - uid: number
  - name: daysAfterCreationGreaterThan
    description: Value indicating the age in days after blob creation.
    types:
    - uid: number
- name: DateAfterCreation
  description: Object to define snapshot and version action conditions.
  kind: object
  properties:
  - name: daysAfterCreationGreaterThan
    description: Value indicating the age in days after creation
    types:
    - uid: number
  - name: daysAfterLastTierChangeGreaterThan
    description: Value indicating the age in days after last blob tier change time. This property is only applicable for tierToArchive actions and requires daysAfterCreationGreaterThan to be set for snapshots and blob version based actions. The blob will be archived if both the conditions are satisfied.
    types:
    - uid: number
examples:
- name: StorageAccountSetManagementPolicies
  request:
    uri: PUT https://management.azure.com/subscriptions/{subscription-id}/resourceGroups/res7687/providers/Microsoft.Storage/storageAccounts/sto9699/managementPolicies/default?api-version=2021-09-01
    body: >-
      {
        "properties": {
          "policy": {
            "rules": [
              {
                "enabled": true,
                "name": "olcmtest1",
                "type": "Lifecycle",
                "definition": {
                  "filters": {
                    "blobTypes": [
                      "blockBlob"
                    ],
                    "prefixMatch": [
                      "olcmtestcontainer1"
                    ]
                  },
                  "actions": {
                    "baseBlob": {
                      "tierToCool": {
                        "daysAfterModificationGreaterThan": 30
                      },
                      "tierToArchive": {
                        "daysAfterModificationGreaterThan": 90
                      },
                      "delete": {
                        "daysAfterModificationGreaterThan": 1000
                      }
                    },
                    "snapshot": {
                      "delete": {
                        "daysAfterCreationGreaterThan": 30
                      }
                    }
                  }
                }
              },
              {
                "enabled": true,
                "name": "olcmtest2",
                "type": "Lifecycle",
                "definition": {
                  "filters": {
                    "blobTypes": [
                      "blockBlob"
                    ],
                    "prefixMatch": [
                      "olcmtestcontainer2"
                    ],
                    "blobIndexMatch": [
                      {
                        "name": "tag1",
                        "op": "==",
                        "value": "val1"
                      },
                      {
                        "name": "tag2",
                        "op": "==",
                        "value": "val2"
                      }
                    ]
                  },
                  "actions": {
                    "baseBlob": {
                      "tierToCool": {
                        "daysAfterModificationGreaterThan": 30
                      },
                      "tierToArchive": {
                        "daysAfterModificationGreaterThan": 90
                      },
                      "delete": {
                        "daysAfterModificationGreaterThan": 1000
                      }
                    }
                  }
                }
              }
            ]
          }
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/{subscription-id}/resourceGroups/res7687/providers/Microsoft.Storage/storageAccounts/sto9699/managementPolicies/default?api-version=2021-09-01

      {
        "properties": {
          "policy": {
            "rules": [
              {
                "enabled": true,
                "name": "olcmtest1",
                "type": "Lifecycle",
                "definition": {
                  "filters": {
                    "blobTypes": [
                      "blockBlob"
                    ],
                    "prefixMatch": [
                      "olcmtestcontainer1"
                    ]
                  },
                  "actions": {
                    "baseBlob": {
                      "tierToCool": {
                        "daysAfterModificationGreaterThan": 30
                      },
                      "tierToArchive": {
                        "daysAfterModificationGreaterThan": 90
                      },
                      "delete": {
                        "daysAfterModificationGreaterThan": 1000
                      }
                    },
                    "snapshot": {
                      "delete": {
                        "daysAfterCreationGreaterThan": 30
                      }
                    }
                  }
                }
              },
              {
                "enabled": true,
                "name": "olcmtest2",
                "type": "Lifecycle",
                "definition": {
                  "filters": {
                    "blobTypes": [
                      "blockBlob"
                    ],
                    "prefixMatch": [
                      "olcmtestcontainer2"
                    ],
                    "blobIndexMatch": [
                      {
                        "name": "tag1",
                        "op": "==",
                        "value": "val1"
                      },
                      {
                        "name": "tag2",
                        "op": "==",
                        "value": "val2"
                      }
                    ]
                  },
                  "actions": {
                    "baseBlob": {
                      "tierToCool": {
                        "daysAfterModificationGreaterThan": 30
                      },
                      "tierToArchive": {
                        "daysAfterModificationGreaterThan": 90
                      },
                      "delete": {
                        "daysAfterModificationGreaterThan": 1000
                      }
                    }
                  }
                }
              }
            ]
          }
        }
      }

      ```

      # [Java](#tab/Java)
      ``` java
      import com.azure.core.util.Context;
      import com.azure.resourcemanager.storage.fluent.models.ManagementPolicyInner;
      import com.azure.resourcemanager.storage.models.DateAfterCreation;
      import com.azure.resourcemanager.storage.models.DateAfterModification;
      import com.azure.resourcemanager.storage.models.ManagementPolicyAction;
      import com.azure.resourcemanager.storage.models.ManagementPolicyBaseBlob;
      import com.azure.resourcemanager.storage.models.ManagementPolicyDefinition;
      import com.azure.resourcemanager.storage.models.ManagementPolicyFilter;
      import com.azure.resourcemanager.storage.models.ManagementPolicyName;
      import com.azure.resourcemanager.storage.models.ManagementPolicyRule;
      import com.azure.resourcemanager.storage.models.ManagementPolicySchema;
      import com.azure.resourcemanager.storage.models.ManagementPolicySnapShot;
      import com.azure.resourcemanager.storage.models.RuleType;
      import com.azure.resourcemanager.storage.models.TagFilter;
      import java.util.Arrays;

      /** Samples for ManagementPolicies CreateOrUpdate. */
      public final class Main {
          /*
           * x-ms-original-file: specification/storage/resource-manager/Microsoft.Storage/stable/2021-09-01/examples/StorageAccountSetManagementPolicy.json
           */
          /**
           * Sample code: StorageAccountSetManagementPolicies.
           *
           * @param azure The entry point for accessing resource management APIs in Azure.
           */
          public static void storageAccountSetManagementPolicies(com.azure.resourcemanager.AzureResourceManager azure) {
              azure
                  .storageAccounts()
                  .manager()
                  .serviceClient()
                  .getManagementPolicies()
                  .createOrUpdateWithResponse(
                      "res7687",
                      "sto9699",
                      ManagementPolicyName.DEFAULT,
                      new ManagementPolicyInner()
                          .withPolicy(
                              new ManagementPolicySchema()
                                  .withRules(
                                      Arrays
                                          .asList(
                                              new ManagementPolicyRule()
                                                  .withEnabled(true)
                                                  .withName("olcmtest1")
                                                  .withType(RuleType.LIFECYCLE)
                                                  .withDefinition(
                                                      new ManagementPolicyDefinition()
                                                          .withActions(
                                                              new ManagementPolicyAction()
                                                                  .withBaseBlob(
                                                                      new ManagementPolicyBaseBlob()
                                                                          .withTierToCool(
                                                                              new DateAfterModification()
                                                                                  .withDaysAfterModificationGreaterThan(
                                                                                      30.0f))
                                                                          .withTierToArchive(
                                                                              new DateAfterModification()
                                                                                  .withDaysAfterModificationGreaterThan(
                                                                                      90.0f))
                                                                          .withDelete(
                                                                              new DateAfterModification()
                                                                                  .withDaysAfterModificationGreaterThan(
                                                                                      1000.0f)))
                                                                  .withSnapshot(
                                                                      new ManagementPolicySnapShot()
                                                                          .withDelete(
                                                                              new DateAfterCreation()
                                                                                  .withDaysAfterCreationGreaterThan(30f))))
                                                          .withFilters(
                                                              new ManagementPolicyFilter()
                                                                  .withPrefixMatch(Arrays.asList("olcmtestcontainer1"))
                                                                  .withBlobTypes(Arrays.asList("blockBlob")))),
                                              new ManagementPolicyRule()
                                                  .withEnabled(true)
                                                  .withName("olcmtest2")
                                                  .withType(RuleType.LIFECYCLE)
                                                  .withDefinition(
                                                      new ManagementPolicyDefinition()
                                                          .withActions(
                                                              new ManagementPolicyAction()
                                                                  .withBaseBlob(
                                                                      new ManagementPolicyBaseBlob()
                                                                          .withTierToCool(
                                                                              new DateAfterModification()
                                                                                  .withDaysAfterModificationGreaterThan(
                                                                                      30.0f))
                                                                          .withTierToArchive(
                                                                              new DateAfterModification()
                                                                                  .withDaysAfterModificationGreaterThan(
                                                                                      90.0f))
                                                                          .withDelete(
                                                                              new DateAfterModification()
                                                                                  .withDaysAfterModificationGreaterThan(
                                                                                      1000.0f))))
                                                          .withFilters(
                                                              new ManagementPolicyFilter()
                                                                  .withPrefixMatch(Arrays.asList("olcmtestcontainer2"))
                                                                  .withBlobTypes(Arrays.asList("blockBlob"))
                                                                  .withBlobIndexMatch(
                                                                      Arrays
                                                                          .asList(
                                                                              new TagFilter()
                                                                                  .withName("tag1")
                                                                                  .withOp("==")
                                                                                  .withValue("val1"),
                                                                              new TagFilter()
                                                                                  .withName("tag2")
                                                                                  .withOp("==")
                                                                                  .withValue("val2")))))))),
                      Context.NONE);
          }
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-java/blob/azure-resourcemanager_2.17.0/sdk/resourcemanager/azure-resourcemanager/README.md) on how to add the SDK to your project and authenticate.
      # [Go](#tab/Go)
      ``` go
      package armstorage_test

      import (
      	"context"
      	"log"

      	"github.com/Azure/azure-sdk-for-go/sdk/azcore/to"
      	"github.com/Azure/azure-sdk-for-go/sdk/azidentity"
      	"github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/storage/armstorage"
      )

      // Generated from example definition: https://github.com/Azure/azure-rest-api-specs/tree/main/specification/storage/resource-manager/Microsoft.Storage/stable/2021-09-01/examples/StorageAccountSetManagementPolicy.json
      func ExampleManagementPoliciesClient_CreateOrUpdate() {
      	cred, err := azidentity.NewDefaultAzureCredential(nil)
      	if err != nil {
      		log.Fatalf("failed to obtain a credential: %v", err)
      	}
      	ctx := context.Background()
      	client, err := armstorage.NewManagementPoliciesClient("{subscription-id}", cred, nil)
      	if err != nil {
      		log.Fatalf("failed to create client: %v", err)
      	}
      	res, err := client.CreateOrUpdate(ctx,
      		"res7687",
      		"sto9699",
      		armstorage.ManagementPolicyNameDefault,
      		armstorage.ManagementPolicy{
      			Properties: &armstorage.ManagementPolicyProperties{
      				Policy: &armstorage.ManagementPolicySchema{
      					Rules: []*armstorage.ManagementPolicyRule{
      						{
      							Name: to.Ptr("olcmtest1"),
      							Type: to.Ptr(armstorage.RuleTypeLifecycle),
      							Definition: &armstorage.ManagementPolicyDefinition{
      								Actions: &armstorage.ManagementPolicyAction{
      									BaseBlob: &armstorage.ManagementPolicyBaseBlob{
      										Delete: &armstorage.DateAfterModification{
      											DaysAfterModificationGreaterThan: to.Ptr[float32](1000),
      										},
      										TierToArchive: &armstorage.DateAfterModification{
      											DaysAfterModificationGreaterThan: to.Ptr[float32](90),
      										},
      										TierToCool: &armstorage.DateAfterModification{
      											DaysAfterModificationGreaterThan: to.Ptr[float32](30),
      										},
      									},
      									Snapshot: &armstorage.ManagementPolicySnapShot{
      										Delete: &armstorage.DateAfterCreation{
      											DaysAfterCreationGreaterThan: to.Ptr[float32](30),
      										},
      									},
      								},
      								Filters: &armstorage.ManagementPolicyFilter{
      									BlobTypes: []*string{
      										to.Ptr("blockBlob")},
      									PrefixMatch: []*string{
      										to.Ptr("olcmtestcontainer1")},
      								},
      							},
      							Enabled: to.Ptr(true),
      						},
      						{
      							Name: to.Ptr("olcmtest2"),
      							Type: to.Ptr(armstorage.RuleTypeLifecycle),
      							Definition: &armstorage.ManagementPolicyDefinition{
      								Actions: &armstorage.ManagementPolicyAction{
      									BaseBlob: &armstorage.ManagementPolicyBaseBlob{
      										Delete: &armstorage.DateAfterModification{
      											DaysAfterModificationGreaterThan: to.Ptr[float32](1000),
      										},
      										TierToArchive: &armstorage.DateAfterModification{
      											DaysAfterModificationGreaterThan: to.Ptr[float32](90),
      										},
      										TierToCool: &armstorage.DateAfterModification{
      											DaysAfterModificationGreaterThan: to.Ptr[float32](30),
      										},
      									},
      								},
      								Filters: &armstorage.ManagementPolicyFilter{
      									BlobIndexMatch: []*armstorage.TagFilter{
      										{
      											Name:  to.Ptr("tag1"),
      											Op:    to.Ptr("=="),
      											Value: to.Ptr("val1"),
      										},
      										{
      											Name:  to.Ptr("tag2"),
      											Op:    to.Ptr("=="),
      											Value: to.Ptr("val2"),
      										}},
      									BlobTypes: []*string{
      										to.Ptr("blockBlob")},
      									PrefixMatch: []*string{
      										to.Ptr("olcmtestcontainer2")},
      								},
      							},
      							Enabled: to.Ptr(true),
      						}},
      				},
      			},
      		},
      		nil)
      	if err != nil {
      		log.Fatalf("failed to finish the request: %v", err)
      	}
      	// TODO: use response item
      	_ = res
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-go/blob/sdk%2Fresourcemanager%2Fstorage%2Farmstorage%2Fv1.0.0/sdk/resourcemanager/storage/armstorage/README.md) on how to add the SDK to your project and authenticate.
      # [JavaScript](#tab/JavaScript)
      ``` js
      const { StorageManagementClient } = require("@azure/arm-storage");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to Sets the managementpolicy to the specified storage account.
       *
       * @summary Sets the managementpolicy to the specified storage account.
       * x-ms-original-file: specification/storage/resource-manager/Microsoft.Storage/stable/2021-09-01/examples/StorageAccountSetManagementPolicy.json
       */
      async function storageAccountSetManagementPolicies() {
        const subscriptionId = "{subscription-id}";
        const resourceGroupName = "res7687";
        const accountName = "sto9699";
        const managementPolicyName = "default";
        const properties = {
          policy: {
            rules: [
              {
                name: "olcmtest1",
                type: "Lifecycle",
                definition: {
                  actions: {
                    baseBlob: {
                      delete: { daysAfterModificationGreaterThan: 1000 },
                      tierToArchive: { daysAfterModificationGreaterThan: 90 },
                      tierToCool: { daysAfterModificationGreaterThan: 30 },
                    },
                    snapshot: { delete: { daysAfterCreationGreaterThan: 30 } },
                  },
                  filters: {
                    blobTypes: ["blockBlob"],
                    prefixMatch: ["olcmtestcontainer1"],
                  },
                },
                enabled: true,
              },
              {
                name: "olcmtest2",
                type: "Lifecycle",
                definition: {
                  actions: {
                    baseBlob: {
                      delete: { daysAfterModificationGreaterThan: 1000 },
                      tierToArchive: { daysAfterModificationGreaterThan: 90 },
                      tierToCool: { daysAfterModificationGreaterThan: 30 },
                    },
                  },
                  filters: {
                    blobIndexMatch: [
                      { name: "tag1", op: "==", value: "val1" },
                      { name: "tag2", op: "==", value: "val2" },
                    ],
                    blobTypes: ["blockBlob"],
                    prefixMatch: ["olcmtestcontainer2"],
                  },
                },
                enabled: true,
              },
            ],
          },
        };
        const credential = new DefaultAzureCredential();
        const client = new StorageManagementClient(credential, subscriptionId);
        const result = await client.managementPolicies.createOrUpdate(
          resourceGroupName,
          accountName,
          managementPolicyName,
          properties
        );
        console.log(result);
      }

      storageAccountSetManagementPolicies().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-storage_17.2.1/sdk/storage/arm-storage/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/{subscription-id}/resourceGroups/res7231/providers/Microsoft.Storage/storageAccounts/sto288/managementPolicies/default",
        "name": "DefaultManagementPolicy",
        "type": "Microsoft.Storage/storageAccounts/managementPolicies",
        "properties": {
          "policy": {
            "rules": [
              {
                "enabled": true,
                "name": "olcmtest1",
                "type": "Lifecycle",
                "definition": {
                  "filters": {
                    "blobTypes": [
                      "blockBlob"
                    ],
                    "prefixMatch": [
                      "olcmtestcontainer1"
                    ]
                  },
                  "actions": {
                    "baseBlob": {
                      "tierToCool": {
                        "daysAfterModificationGreaterThan": 30
                      },
                      "tierToArchive": {
                        "daysAfterModificationGreaterThan": 90
                      },
                      "delete": {
                        "daysAfterModificationGreaterThan": 1000
                      }
                    },
                    "snapshot": {
                      "delete": {
                        "daysAfterCreationGreaterThan": 30
                      }
                    }
                  }
                }
              },
              {
                "enabled": true,
                "name": "olcmtest2",
                "type": "Lifecycle",
                "definition": {
                  "filters": {
                    "blobTypes": [
                      "blockBlob"
                    ],
                    "prefixMatch": [
                      "olcmtestcontainer2"
                    ],
                    "blobIndexMatch": [
                      {
                        "name": "tag1",
                        "op": "==",
                        "value": "val1"
                      },
                      {
                        "name": "tag2",
                        "op": "==",
                        "value": "val2"
                      }
                    ]
                  },
                  "actions": {
                    "baseBlob": {
                      "tierToCool": {
                        "daysAfterModificationGreaterThan": 30
                      },
                      "tierToArchive": {
                        "daysAfterModificationGreaterThan": 90
                      },
                      "delete": {
                        "daysAfterModificationGreaterThan": 1000
                      }
                    }
                  }
                }
              }
            ]
          },
          "lastModifiedTime": "2018-06-08T02:53:39.0932539Z"
        }
      }
- name: StorageAccountSetManagementPolicy_LastAccessTimeBasedBlobActions
  request:
    uri: PUT https://management.azure.com/subscriptions/{subscription-id}/resourceGroups/res7687/providers/Microsoft.Storage/storageAccounts/sto9699/managementPolicies/default?api-version=2021-09-01
    body: >-
      {
        "properties": {
          "policy": {
            "rules": [
              {
                "enabled": true,
                "name": "olcmtest",
                "type": "Lifecycle",
                "definition": {
                  "filters": {
                    "blobTypes": [
                      "blockBlob"
                    ],
                    "prefixMatch": [
                      "olcmtestcontainer"
                    ]
                  },
                  "actions": {
                    "baseBlob": {
                      "tierToCool": {
                        "daysAfterLastAccessTimeGreaterThan": 30
                      },
                      "tierToArchive": {
                        "daysAfterLastAccessTimeGreaterThan": 90
                      },
                      "delete": {
                        "daysAfterLastAccessTimeGreaterThan": 1000
                      },
                      "enableAutoTierToHotFromCool": true
                    },
                    "snapshot": {
                      "delete": {
                        "daysAfterCreationGreaterThan": 30
                      }
                    }
                  }
                }
              }
            ]
          }
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/{subscription-id}/resourceGroups/res7687/providers/Microsoft.Storage/storageAccounts/sto9699/managementPolicies/default?api-version=2021-09-01

      {
        "properties": {
          "policy": {
            "rules": [
              {
                "enabled": true,
                "name": "olcmtest",
                "type": "Lifecycle",
                "definition": {
                  "filters": {
                    "blobTypes": [
                      "blockBlob"
                    ],
                    "prefixMatch": [
                      "olcmtestcontainer"
                    ]
                  },
                  "actions": {
                    "baseBlob": {
                      "tierToCool": {
                        "daysAfterLastAccessTimeGreaterThan": 30
                      },
                      "tierToArchive": {
                        "daysAfterLastAccessTimeGreaterThan": 90
                      },
                      "delete": {
                        "daysAfterLastAccessTimeGreaterThan": 1000
                      },
                      "enableAutoTierToHotFromCool": true
                    },
                    "snapshot": {
                      "delete": {
                        "daysAfterCreationGreaterThan": 30
                      }
                    }
                  }
                }
              }
            ]
          }
        }
      }

      ```

      # [Java](#tab/Java)
      ``` java
      import com.azure.core.util.Context;
      import com.azure.resourcemanager.storage.fluent.models.ManagementPolicyInner;
      import com.azure.resourcemanager.storage.models.DateAfterCreation;
      import com.azure.resourcemanager.storage.models.DateAfterModification;
      import com.azure.resourcemanager.storage.models.ManagementPolicyAction;
      import com.azure.resourcemanager.storage.models.ManagementPolicyBaseBlob;
      import com.azure.resourcemanager.storage.models.ManagementPolicyDefinition;
      import com.azure.resourcemanager.storage.models.ManagementPolicyFilter;
      import com.azure.resourcemanager.storage.models.ManagementPolicyName;
      import com.azure.resourcemanager.storage.models.ManagementPolicyRule;
      import com.azure.resourcemanager.storage.models.ManagementPolicySchema;
      import com.azure.resourcemanager.storage.models.ManagementPolicySnapShot;
      import com.azure.resourcemanager.storage.models.RuleType;
      import java.util.Arrays;

      /** Samples for ManagementPolicies CreateOrUpdate. */
      public final class Main {
          /*
           * x-ms-original-file: specification/storage/resource-manager/Microsoft.Storage/stable/2021-09-01/examples/StorageAccountSetManagementPolicy_LastAccessTimeBasedBlobActions.json
           */
          /**
           * Sample code: StorageAccountSetManagementPolicy_LastAccessTimeBasedBlobActions.
           *
           * @param azure The entry point for accessing resource management APIs in Azure.
           */
          public static void storageAccountSetManagementPolicyLastAccessTimeBasedBlobActions(
              com.azure.resourcemanager.AzureResourceManager azure) {
              azure
                  .storageAccounts()
                  .manager()
                  .serviceClient()
                  .getManagementPolicies()
                  .createOrUpdateWithResponse(
                      "res7687",
                      "sto9699",
                      ManagementPolicyName.DEFAULT,
                      new ManagementPolicyInner()
                          .withPolicy(
                              new ManagementPolicySchema()
                                  .withRules(
                                      Arrays
                                          .asList(
                                              new ManagementPolicyRule()
                                                  .withEnabled(true)
                                                  .withName("olcmtest")
                                                  .withType(RuleType.LIFECYCLE)
                                                  .withDefinition(
                                                      new ManagementPolicyDefinition()
                                                          .withActions(
                                                              new ManagementPolicyAction()
                                                                  .withBaseBlob(
                                                                      new ManagementPolicyBaseBlob()
                                                                          .withTierToCool(
                                                                              new DateAfterModification()
                                                                                  .withDaysAfterLastAccessTimeGreaterThan(
                                                                                      30.0f))
                                                                          .withTierToArchive(
                                                                              new DateAfterModification()
                                                                                  .withDaysAfterLastAccessTimeGreaterThan(
                                                                                      90.0f))
                                                                          .withDelete(
                                                                              new DateAfterModification()
                                                                                  .withDaysAfterLastAccessTimeGreaterThan(
                                                                                      1000.0f))
                                                                          .withEnableAutoTierToHotFromCool(true))
                                                                  .withSnapshot(
                                                                      new ManagementPolicySnapShot()
                                                                          .withDelete(
                                                                              new DateAfterCreation()
                                                                                  .withDaysAfterCreationGreaterThan(30f))))
                                                          .withFilters(
                                                              new ManagementPolicyFilter()
                                                                  .withPrefixMatch(Arrays.asList("olcmtestcontainer"))
                                                                  .withBlobTypes(Arrays.asList("blockBlob"))))))),
                      Context.NONE);
          }
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-java/blob/azure-resourcemanager_2.17.0/sdk/resourcemanager/azure-resourcemanager/README.md) on how to add the SDK to your project and authenticate.
      # [JavaScript](#tab/JavaScript)
      ``` js
      const { StorageManagementClient } = require("@azure/arm-storage");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to Sets the managementpolicy to the specified storage account.
       *
       * @summary Sets the managementpolicy to the specified storage account.
       * x-ms-original-file: specification/storage/resource-manager/Microsoft.Storage/stable/2021-09-01/examples/StorageAccountSetManagementPolicy_LastAccessTimeBasedBlobActions.json
       */
      async function storageAccountSetManagementPolicyLastAccessTimeBasedBlobActions() {
        const subscriptionId = "{subscription-id}";
        const resourceGroupName = "res7687";
        const accountName = "sto9699";
        const managementPolicyName = "default";
        const properties = {
          policy: {
            rules: [
              {
                name: "olcmtest",
                type: "Lifecycle",
                definition: {
                  actions: {
                    baseBlob: {
                      delete: { daysAfterLastAccessTimeGreaterThan: 1000 },
                      enableAutoTierToHotFromCool: true,
                      tierToArchive: { daysAfterLastAccessTimeGreaterThan: 90 },
                      tierToCool: { daysAfterLastAccessTimeGreaterThan: 30 },
                    },
                    snapshot: { delete: { daysAfterCreationGreaterThan: 30 } },
                  },
                  filters: {
                    blobTypes: ["blockBlob"],
                    prefixMatch: ["olcmtestcontainer"],
                  },
                },
                enabled: true,
              },
            ],
          },
        };
        const credential = new DefaultAzureCredential();
        const client = new StorageManagementClient(credential, subscriptionId);
        const result = await client.managementPolicies.createOrUpdate(
          resourceGroupName,
          accountName,
          managementPolicyName,
          properties
        );
        console.log(result);
      }

      storageAccountSetManagementPolicyLastAccessTimeBasedBlobActions().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-storage_17.2.1/sdk/storage/arm-storage/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/{subscription-id}/resourceGroups/res7231/providers/Microsoft.Storage/storageAccounts/sto288/managementPolicies/default",
        "name": "DefaultManagementPolicy",
        "type": "Microsoft.Storage/storageAccounts/managementPolicies",
        "properties": {
          "policy": {
            "rules": [
              {
                "enabled": true,
                "name": "olcmtest",
                "type": "Lifecycle",
                "definition": {
                  "filters": {
                    "blobTypes": [
                      "blockBlob"
                    ],
                    "prefixMatch": [
                      "olcmtestcontainer"
                    ]
                  },
                  "actions": {
                    "baseBlob": {
                      "tierToCool": {
                        "daysAfterLastAccessTimeGreaterThan": 30
                      },
                      "tierToArchive": {
                        "daysAfterLastAccessTimeGreaterThan": 90
                      },
                      "delete": {
                        "daysAfterLastAccessTimeGreaterThan": 1000
                      },
                      "enableAutoTierToHotFromCool": true
                    },
                    "snapshot": {
                      "delete": {
                        "daysAfterCreationGreaterThan": 30
                      }
                    }
                  }
                }
              }
            ]
          },
          "lastModifiedTime": "2018-06-08T02:53:39.0932539Z"
        }
      }
- name: StorageAccountSetManagementPolicyWithSnapshotAndVersion
  request:
    uri: PUT https://management.azure.com/subscriptions/{subscription-id}/resourceGroups/res7687/providers/Microsoft.Storage/storageAccounts/sto9699/managementPolicies/default?api-version=2021-09-01
    body: >-
      {
        "properties": {
          "policy": {
            "rules": [
              {
                "enabled": true,
                "name": "olcmtest1",
                "type": "Lifecycle",
                "definition": {
                  "filters": {
                    "blobTypes": [
                      "blockBlob"
                    ],
                    "prefixMatch": [
                      "olcmtestcontainer1"
                    ]
                  },
                  "actions": {
                    "baseBlob": {
                      "tierToCool": {
                        "daysAfterModificationGreaterThan": 30
                      },
                      "tierToArchive": {
                        "daysAfterModificationGreaterThan": 90
                      },
                      "delete": {
                        "daysAfterModificationGreaterThan": 1000
                      }
                    },
                    "snapshot": {
                      "tierToCool": {
                        "daysAfterCreationGreaterThan": 30
                      },
                      "tierToArchive": {
                        "daysAfterCreationGreaterThan": 90
                      },
                      "delete": {
                        "daysAfterCreationGreaterThan": 1000
                      }
                    },
                    "version": {
                      "tierToCool": {
                        "daysAfterCreationGreaterThan": 30
                      },
                      "tierToArchive": {
                        "daysAfterCreationGreaterThan": 90
                      },
                      "delete": {
                        "daysAfterCreationGreaterThan": 1000
                      }
                    }
                  }
                }
              }
            ]
          }
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/{subscription-id}/resourceGroups/res7687/providers/Microsoft.Storage/storageAccounts/sto9699/managementPolicies/default?api-version=2021-09-01

      {
        "properties": {
          "policy": {
            "rules": [
              {
                "enabled": true,
                "name": "olcmtest1",
                "type": "Lifecycle",
                "definition": {
                  "filters": {
                    "blobTypes": [
                      "blockBlob"
                    ],
                    "prefixMatch": [
                      "olcmtestcontainer1"
                    ]
                  },
                  "actions": {
                    "baseBlob": {
                      "tierToCool": {
                        "daysAfterModificationGreaterThan": 30
                      },
                      "tierToArchive": {
                        "daysAfterModificationGreaterThan": 90
                      },
                      "delete": {
                        "daysAfterModificationGreaterThan": 1000
                      }
                    },
                    "snapshot": {
                      "tierToCool": {
                        "daysAfterCreationGreaterThan": 30
                      },
                      "tierToArchive": {
                        "daysAfterCreationGreaterThan": 90
                      },
                      "delete": {
                        "daysAfterCreationGreaterThan": 1000
                      }
                    },
                    "version": {
                      "tierToCool": {
                        "daysAfterCreationGreaterThan": 30
                      },
                      "tierToArchive": {
                        "daysAfterCreationGreaterThan": 90
                      },
                      "delete": {
                        "daysAfterCreationGreaterThan": 1000
                      }
                    }
                  }
                }
              }
            ]
          }
        }
      }

      ```

      # [Java](#tab/Java)
      ``` java
      import com.azure.core.util.Context;
      import com.azure.resourcemanager.storage.fluent.models.ManagementPolicyInner;
      import com.azure.resourcemanager.storage.models.DateAfterCreation;
      import com.azure.resourcemanager.storage.models.DateAfterModification;
      import com.azure.resourcemanager.storage.models.ManagementPolicyAction;
      import com.azure.resourcemanager.storage.models.ManagementPolicyBaseBlob;
      import com.azure.resourcemanager.storage.models.ManagementPolicyDefinition;
      import com.azure.resourcemanager.storage.models.ManagementPolicyFilter;
      import com.azure.resourcemanager.storage.models.ManagementPolicyName;
      import com.azure.resourcemanager.storage.models.ManagementPolicyRule;
      import com.azure.resourcemanager.storage.models.ManagementPolicySchema;
      import com.azure.resourcemanager.storage.models.ManagementPolicySnapShot;
      import com.azure.resourcemanager.storage.models.ManagementPolicyVersion;
      import com.azure.resourcemanager.storage.models.RuleType;
      import java.util.Arrays;

      /** Samples for ManagementPolicies CreateOrUpdate. */
      public final class Main {
          /*
           * x-ms-original-file: specification/storage/resource-manager/Microsoft.Storage/stable/2021-09-01/examples/StorageAccountSetManagementPolicyWithSnapshotAndVersion.json
           */
          /**
           * Sample code: StorageAccountSetManagementPolicyWithSnapshotAndVersion.
           *
           * @param azure The entry point for accessing resource management APIs in Azure.
           */
          public static void storageAccountSetManagementPolicyWithSnapshotAndVersion(
              com.azure.resourcemanager.AzureResourceManager azure) {
              azure
                  .storageAccounts()
                  .manager()
                  .serviceClient()
                  .getManagementPolicies()
                  .createOrUpdateWithResponse(
                      "res7687",
                      "sto9699",
                      ManagementPolicyName.DEFAULT,
                      new ManagementPolicyInner()
                          .withPolicy(
                              new ManagementPolicySchema()
                                  .withRules(
                                      Arrays
                                          .asList(
                                              new ManagementPolicyRule()
                                                  .withEnabled(true)
                                                  .withName("olcmtest1")
                                                  .withType(RuleType.LIFECYCLE)
                                                  .withDefinition(
                                                      new ManagementPolicyDefinition()
                                                          .withActions(
                                                              new ManagementPolicyAction()
                                                                  .withBaseBlob(
                                                                      new ManagementPolicyBaseBlob()
                                                                          .withTierToCool(
                                                                              new DateAfterModification()
                                                                                  .withDaysAfterModificationGreaterThan(
                                                                                      30.0f))
                                                                          .withTierToArchive(
                                                                              new DateAfterModification()
                                                                                  .withDaysAfterModificationGreaterThan(
                                                                                      90.0f))
                                                                          .withDelete(
                                                                              new DateAfterModification()
                                                                                  .withDaysAfterModificationGreaterThan(
                                                                                      1000.0f)))
                                                                  .withSnapshot(
                                                                      new ManagementPolicySnapShot()
                                                                          .withTierToCool(
                                                                              new DateAfterCreation()
                                                                                  .withDaysAfterCreationGreaterThan(30f))
                                                                          .withTierToArchive(
                                                                              new DateAfterCreation()
                                                                                  .withDaysAfterCreationGreaterThan(90f))
                                                                          .withDelete(
                                                                              new DateAfterCreation()
                                                                                  .withDaysAfterCreationGreaterThan(1000f)))
                                                                  .withVersion(
                                                                      new ManagementPolicyVersion()
                                                                          .withTierToCool(
                                                                              new DateAfterCreation()
                                                                                  .withDaysAfterCreationGreaterThan(30f))
                                                                          .withTierToArchive(
                                                                              new DateAfterCreation()
                                                                                  .withDaysAfterCreationGreaterThan(90f))
                                                                          .withDelete(
                                                                              new DateAfterCreation()
                                                                                  .withDaysAfterCreationGreaterThan(1000f))))
                                                          .withFilters(
                                                              new ManagementPolicyFilter()
                                                                  .withPrefixMatch(Arrays.asList("olcmtestcontainer1"))
                                                                  .withBlobTypes(Arrays.asList("blockBlob"))))))),
                      Context.NONE);
          }
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-java/blob/azure-resourcemanager_2.17.0/sdk/resourcemanager/azure-resourcemanager/README.md) on how to add the SDK to your project and authenticate.
      # [JavaScript](#tab/JavaScript)
      ``` js
      const { StorageManagementClient } = require("@azure/arm-storage");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to Sets the managementpolicy to the specified storage account.
       *
       * @summary Sets the managementpolicy to the specified storage account.
       * x-ms-original-file: specification/storage/resource-manager/Microsoft.Storage/stable/2021-09-01/examples/StorageAccountSetManagementPolicyWithSnapshotAndVersion.json
       */
      async function storageAccountSetManagementPolicyWithSnapshotAndVersion() {
        const subscriptionId = "{subscription-id}";
        const resourceGroupName = "res7687";
        const accountName = "sto9699";
        const managementPolicyName = "default";
        const properties = {
          policy: {
            rules: [
              {
                name: "olcmtest1",
                type: "Lifecycle",
                definition: {
                  actions: {
                    baseBlob: {
                      delete: { daysAfterModificationGreaterThan: 1000 },
                      tierToArchive: { daysAfterModificationGreaterThan: 90 },
                      tierToCool: { daysAfterModificationGreaterThan: 30 },
                    },
                    snapshot: {
                      delete: { daysAfterCreationGreaterThan: 1000 },
                      tierToArchive: { daysAfterCreationGreaterThan: 90 },
                      tierToCool: { daysAfterCreationGreaterThan: 30 },
                    },
                    version: {
                      delete: { daysAfterCreationGreaterThan: 1000 },
                      tierToArchive: { daysAfterCreationGreaterThan: 90 },
                      tierToCool: { daysAfterCreationGreaterThan: 30 },
                    },
                  },
                  filters: {
                    blobTypes: ["blockBlob"],
                    prefixMatch: ["olcmtestcontainer1"],
                  },
                },
                enabled: true,
              },
            ],
          },
        };
        const credential = new DefaultAzureCredential();
        const client = new StorageManagementClient(credential, subscriptionId);
        const result = await client.managementPolicies.createOrUpdate(
          resourceGroupName,
          accountName,
          managementPolicyName,
          properties
        );
        console.log(result);
      }

      storageAccountSetManagementPolicyWithSnapshotAndVersion().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-storage_17.2.1/sdk/storage/arm-storage/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/{subscription-id}/resourceGroups/res7231/providers/Microsoft.Storage/storageAccounts/sto288/managementPolicies/default",
        "name": "DefaultManagementPolicy",
        "type": "Microsoft.Storage/storageAccounts/managementPolicies",
        "properties": {
          "policy": {
            "rules": [
              {
                "enabled": true,
                "name": "olcmtest1",
                "type": "Lifecycle",
                "definition": {
                  "filters": {
                    "blobTypes": [
                      "blockBlob"
                    ],
                    "prefixMatch": [
                      "olcmtestcontainer1"
                    ]
                  },
                  "actions": {
                    "baseBlob": {
                      "tierToCool": {
                        "daysAfterModificationGreaterThan": 30
                      },
                      "tierToArchive": {
                        "daysAfterModificationGreaterThan": 90
                      },
                      "delete": {
                        "daysAfterModificationGreaterThan": 1000
                      }
                    },
                    "snapshot": {
                      "tierToCool": {
                        "daysAfterCreationGreaterThan": 30
                      },
                      "tierToArchive": {
                        "daysAfterCreationGreaterThan": 90
                      },
                      "delete": {
                        "daysAfterCreationGreaterThan": 1000
                      }
                    },
                    "version": {
                      "tierToCool": {
                        "daysAfterCreationGreaterThan": 30
                      },
                      "tierToArchive": {
                        "daysAfterCreationGreaterThan": 90
                      },
                      "delete": {
                        "daysAfterCreationGreaterThan": 1000
                      }
                    }
                  }
                }
              }
            ]
          },
          "lastModifiedTime": "2018-06-08T02:53:39.0932539Z"
        }
      }
- name: StorageAccountSetManagementPolicyForBlockAndAppendBlobs
  request:
    uri: PUT https://management.azure.com/subscriptions/{subscription-id}/resourceGroups/res7687/providers/Microsoft.Storage/storageAccounts/sto9699/managementPolicies/default?api-version=2021-09-01
    body: >-
      {
        "properties": {
          "policy": {
            "rules": [
              {
                "enabled": true,
                "name": "olcmtest1",
                "type": "Lifecycle",
                "definition": {
                  "filters": {
                    "blobTypes": [
                      "blockBlob",
                      "appendBlob"
                    ],
                    "prefixMatch": [
                      "olcmtestcontainer1"
                    ]
                  },
                  "actions": {
                    "baseBlob": {
                      "delete": {
                        "daysAfterModificationGreaterThan": 90
                      }
                    },
                    "snapshot": {
                      "delete": {
                        "daysAfterCreationGreaterThan": 90
                      }
                    },
                    "version": {
                      "delete": {
                        "daysAfterCreationGreaterThan": 90
                      }
                    }
                  }
                }
              }
            ]
          }
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/{subscription-id}/resourceGroups/res7687/providers/Microsoft.Storage/storageAccounts/sto9699/managementPolicies/default?api-version=2021-09-01

      {
        "properties": {
          "policy": {
            "rules": [
              {
                "enabled": true,
                "name": "olcmtest1",
                "type": "Lifecycle",
                "definition": {
                  "filters": {
                    "blobTypes": [
                      "blockBlob",
                      "appendBlob"
                    ],
                    "prefixMatch": [
                      "olcmtestcontainer1"
                    ]
                  },
                  "actions": {
                    "baseBlob": {
                      "delete": {
                        "daysAfterModificationGreaterThan": 90
                      }
                    },
                    "snapshot": {
                      "delete": {
                        "daysAfterCreationGreaterThan": 90
                      }
                    },
                    "version": {
                      "delete": {
                        "daysAfterCreationGreaterThan": 90
                      }
                    }
                  }
                }
              }
            ]
          }
        }
      }

      ```

      # [Java](#tab/Java)
      ``` java
      import com.azure.core.util.Context;
      import com.azure.resourcemanager.storage.fluent.models.ManagementPolicyInner;
      import com.azure.resourcemanager.storage.models.DateAfterCreation;
      import com.azure.resourcemanager.storage.models.DateAfterModification;
      import com.azure.resourcemanager.storage.models.ManagementPolicyAction;
      import com.azure.resourcemanager.storage.models.ManagementPolicyBaseBlob;
      import com.azure.resourcemanager.storage.models.ManagementPolicyDefinition;
      import com.azure.resourcemanager.storage.models.ManagementPolicyFilter;
      import com.azure.resourcemanager.storage.models.ManagementPolicyName;
      import com.azure.resourcemanager.storage.models.ManagementPolicyRule;
      import com.azure.resourcemanager.storage.models.ManagementPolicySchema;
      import com.azure.resourcemanager.storage.models.ManagementPolicySnapShot;
      import com.azure.resourcemanager.storage.models.ManagementPolicyVersion;
      import com.azure.resourcemanager.storage.models.RuleType;
      import java.util.Arrays;

      /** Samples for ManagementPolicies CreateOrUpdate. */
      public final class Main {
          /*
           * x-ms-original-file: specification/storage/resource-manager/Microsoft.Storage/stable/2021-09-01/examples/StorageAccountSetManagementPolicyForBlockAndAppendBlobs.json
           */
          /**
           * Sample code: StorageAccountSetManagementPolicyForBlockAndAppendBlobs.
           *
           * @param azure The entry point for accessing resource management APIs in Azure.
           */
          public static void storageAccountSetManagementPolicyForBlockAndAppendBlobs(
              com.azure.resourcemanager.AzureResourceManager azure) {
              azure
                  .storageAccounts()
                  .manager()
                  .serviceClient()
                  .getManagementPolicies()
                  .createOrUpdateWithResponse(
                      "res7687",
                      "sto9699",
                      ManagementPolicyName.DEFAULT,
                      new ManagementPolicyInner()
                          .withPolicy(
                              new ManagementPolicySchema()
                                  .withRules(
                                      Arrays
                                          .asList(
                                              new ManagementPolicyRule()
                                                  .withEnabled(true)
                                                  .withName("olcmtest1")
                                                  .withType(RuleType.LIFECYCLE)
                                                  .withDefinition(
                                                      new ManagementPolicyDefinition()
                                                          .withActions(
                                                              new ManagementPolicyAction()
                                                                  .withBaseBlob(
                                                                      new ManagementPolicyBaseBlob()
                                                                          .withDelete(
                                                                              new DateAfterModification()
                                                                                  .withDaysAfterModificationGreaterThan(
                                                                                      90.0f)))
                                                                  .withSnapshot(
                                                                      new ManagementPolicySnapShot()
                                                                          .withDelete(
                                                                              new DateAfterCreation()
                                                                                  .withDaysAfterCreationGreaterThan(90f)))
                                                                  .withVersion(
                                                                      new ManagementPolicyVersion()
                                                                          .withDelete(
                                                                              new DateAfterCreation()
                                                                                  .withDaysAfterCreationGreaterThan(90f))))
                                                          .withFilters(
                                                              new ManagementPolicyFilter()
                                                                  .withPrefixMatch(Arrays.asList("olcmtestcontainer1"))
                                                                  .withBlobTypes(
                                                                      Arrays.asList("blockBlob", "appendBlob"))))))),
                      Context.NONE);
          }
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-java/blob/azure-resourcemanager_2.17.0/sdk/resourcemanager/azure-resourcemanager/README.md) on how to add the SDK to your project and authenticate.
      # [JavaScript](#tab/JavaScript)
      ``` js
      const { StorageManagementClient } = require("@azure/arm-storage");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to Sets the managementpolicy to the specified storage account.
       *
       * @summary Sets the managementpolicy to the specified storage account.
       * x-ms-original-file: specification/storage/resource-manager/Microsoft.Storage/stable/2021-09-01/examples/StorageAccountSetManagementPolicyForBlockAndAppendBlobs.json
       */
      async function storageAccountSetManagementPolicyForBlockAndAppendBlobs() {
        const subscriptionId = "{subscription-id}";
        const resourceGroupName = "res7687";
        const accountName = "sto9699";
        const managementPolicyName = "default";
        const properties = {
          policy: {
            rules: [
              {
                name: "olcmtest1",
                type: "Lifecycle",
                definition: {
                  actions: {
                    baseBlob: { delete: { daysAfterModificationGreaterThan: 90 } },
                    snapshot: { delete: { daysAfterCreationGreaterThan: 90 } },
                    version: { delete: { daysAfterCreationGreaterThan: 90 } },
                  },
                  filters: {
                    blobTypes: ["blockBlob", "appendBlob"],
                    prefixMatch: ["olcmtestcontainer1"],
                  },
                },
                enabled: true,
              },
            ],
          },
        };
        const credential = new DefaultAzureCredential();
        const client = new StorageManagementClient(credential, subscriptionId);
        const result = await client.managementPolicies.createOrUpdate(
          resourceGroupName,
          accountName,
          managementPolicyName,
          properties
        );
        console.log(result);
      }

      storageAccountSetManagementPolicyForBlockAndAppendBlobs().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-storage_17.2.1/sdk/storage/arm-storage/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/{subscription-id}/resourceGroups/res7231/providers/Microsoft.Storage/storageAccounts/sto288/managementPolicies/default",
        "name": "DefaultManagementPolicy",
        "type": "Microsoft.Storage/storageAccounts/managementPolicies",
        "properties": {
          "policy": {
            "rules": [
              {
                "enabled": true,
                "name": "olcmtest1",
                "type": "Lifecycle",
                "definition": {
                  "filters": {
                    "blobTypes": [
                      "blockBlob",
                      "appendBlob"
                    ],
                    "prefixMatch": [
                      "olcmtestcontainer1"
                    ]
                  },
                  "actions": {
                    "baseBlob": {
                      "delete": {
                        "daysAfterModificationGreaterThan": 90
                      }
                    },
                    "snapshot": {
                      "delete": {
                        "daysAfterCreationGreaterThan": 90
                      }
                    },
                    "version": {
                      "delete": {
                        "daysAfterCreationGreaterThan": 90
                      }
                    }
                  }
                }
              }
            ]
          },
          "lastModifiedTime": "2018-06-08T02:53:39.0932539Z"
        }
      }
- name: StorageAccountSetManagementPolicy_LastTierChangeTimeActions
  request:
    uri: PUT https://management.azure.com/subscriptions/{subscription-id}/resourceGroups/res7687/providers/Microsoft.Storage/storageAccounts/sto9699/managementPolicies/default?api-version=2021-09-01
    body: >-
      {
        "properties": {
          "policy": {
            "rules": [
              {
                "enabled": true,
                "name": "olcmtest",
                "type": "Lifecycle",
                "definition": {
                  "filters": {
                    "blobTypes": [
                      "blockBlob"
                    ],
                    "prefixMatch": [
                      "olcmtestcontainer"
                    ]
                  },
                  "actions": {
                    "baseBlob": {
                      "tierToCool": {
                        "daysAfterModificationGreaterThan": 30
                      },
                      "tierToArchive": {
                        "daysAfterModificationGreaterThan": 90,
                        "daysAfterLastTierChangeGreaterThan": 120
                      },
                      "delete": {
                        "daysAfterModificationGreaterThan": 1000
                      }
                    },
                    "snapshot": {
                      "tierToArchive": {
                        "daysAfterCreationGreaterThan": 30,
                        "daysAfterLastTierChangeGreaterThan": 90
                      }
                    },
                    "version": {
                      "tierToArchive": {
                        "daysAfterCreationGreaterThan": 30,
                        "daysAfterLastTierChangeGreaterThan": 90
                      }
                    }
                  }
                }
              }
            ]
          }
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/{subscription-id}/resourceGroups/res7687/providers/Microsoft.Storage/storageAccounts/sto9699/managementPolicies/default?api-version=2021-09-01

      {
        "properties": {
          "policy": {
            "rules": [
              {
                "enabled": true,
                "name": "olcmtest",
                "type": "Lifecycle",
                "definition": {
                  "filters": {
                    "blobTypes": [
                      "blockBlob"
                    ],
                    "prefixMatch": [
                      "olcmtestcontainer"
                    ]
                  },
                  "actions": {
                    "baseBlob": {
                      "tierToCool": {
                        "daysAfterModificationGreaterThan": 30
                      },
                      "tierToArchive": {
                        "daysAfterModificationGreaterThan": 90,
                        "daysAfterLastTierChangeGreaterThan": 120
                      },
                      "delete": {
                        "daysAfterModificationGreaterThan": 1000
                      }
                    },
                    "snapshot": {
                      "tierToArchive": {
                        "daysAfterCreationGreaterThan": 30,
                        "daysAfterLastTierChangeGreaterThan": 90
                      }
                    },
                    "version": {
                      "tierToArchive": {
                        "daysAfterCreationGreaterThan": 30,
                        "daysAfterLastTierChangeGreaterThan": 90
                      }
                    }
                  }
                }
              }
            ]
          }
        }
      }

      ```

      # [Java](#tab/Java)
      ``` java
      import com.azure.core.util.Context;
      import com.azure.resourcemanager.storage.fluent.models.ManagementPolicyInner;
      import com.azure.resourcemanager.storage.models.DateAfterCreation;
      import com.azure.resourcemanager.storage.models.DateAfterModification;
      import com.azure.resourcemanager.storage.models.ManagementPolicyAction;
      import com.azure.resourcemanager.storage.models.ManagementPolicyBaseBlob;
      import com.azure.resourcemanager.storage.models.ManagementPolicyDefinition;
      import com.azure.resourcemanager.storage.models.ManagementPolicyFilter;
      import com.azure.resourcemanager.storage.models.ManagementPolicyName;
      import com.azure.resourcemanager.storage.models.ManagementPolicyRule;
      import com.azure.resourcemanager.storage.models.ManagementPolicySchema;
      import com.azure.resourcemanager.storage.models.ManagementPolicySnapShot;
      import com.azure.resourcemanager.storage.models.ManagementPolicyVersion;
      import com.azure.resourcemanager.storage.models.RuleType;
      import java.util.Arrays;

      /** Samples for ManagementPolicies CreateOrUpdate. */
      public final class Main {
          /*
           * x-ms-original-file: specification/storage/resource-manager/Microsoft.Storage/stable/2021-09-01/examples/StorageAccountSetManagementPolicy_LastTierChangeTimeActions.json
           */
          /**
           * Sample code: StorageAccountSetManagementPolicy_LastTierChangeTimeActions.
           *
           * @param azure The entry point for accessing resource management APIs in Azure.
           */
          public static void storageAccountSetManagementPolicyLastTierChangeTimeActions(
              com.azure.resourcemanager.AzureResourceManager azure) {
              azure
                  .storageAccounts()
                  .manager()
                  .serviceClient()
                  .getManagementPolicies()
                  .createOrUpdateWithResponse(
                      "res7687",
                      "sto9699",
                      ManagementPolicyName.DEFAULT,
                      new ManagementPolicyInner()
                          .withPolicy(
                              new ManagementPolicySchema()
                                  .withRules(
                                      Arrays
                                          .asList(
                                              new ManagementPolicyRule()
                                                  .withEnabled(true)
                                                  .withName("olcmtest")
                                                  .withType(RuleType.LIFECYCLE)
                                                  .withDefinition(
                                                      new ManagementPolicyDefinition()
                                                          .withActions(
                                                              new ManagementPolicyAction()
                                                                  .withBaseBlob(
                                                                      new ManagementPolicyBaseBlob()
                                                                          .withTierToCool(
                                                                              new DateAfterModification()
                                                                                  .withDaysAfterModificationGreaterThan(
                                                                                      30.0f))
                                                                          .withTierToArchive(
                                                                              new DateAfterModification()
                                                                                  .withDaysAfterModificationGreaterThan(90.0f)
                                                                                  .withDaysAfterLastTierChangeGreaterThan(
                                                                                      120.0f))
                                                                          .withDelete(
                                                                              new DateAfterModification()
                                                                                  .withDaysAfterModificationGreaterThan(
                                                                                      1000.0f)))
                                                                  .withSnapshot(
                                                                      new ManagementPolicySnapShot()
                                                                          .withTierToArchive(
                                                                              new DateAfterCreation()
                                                                                  .withDaysAfterCreationGreaterThan(30f)
                                                                                  .withDaysAfterLastTierChangeGreaterThan(
                                                                                      90.0f)))
                                                                  .withVersion(
                                                                      new ManagementPolicyVersion()
                                                                          .withTierToArchive(
                                                                              new DateAfterCreation()
                                                                                  .withDaysAfterCreationGreaterThan(30f)
                                                                                  .withDaysAfterLastTierChangeGreaterThan(
                                                                                      90.0f))))
                                                          .withFilters(
                                                              new ManagementPolicyFilter()
                                                                  .withPrefixMatch(Arrays.asList("olcmtestcontainer"))
                                                                  .withBlobTypes(Arrays.asList("blockBlob"))))))),
                      Context.NONE);
          }
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-java/blob/azure-resourcemanager_2.17.0/sdk/resourcemanager/azure-resourcemanager/README.md) on how to add the SDK to your project and authenticate.
      # [JavaScript](#tab/JavaScript)
      ``` js
      const { StorageManagementClient } = require("@azure/arm-storage");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to Sets the managementpolicy to the specified storage account.
       *
       * @summary Sets the managementpolicy to the specified storage account.
       * x-ms-original-file: specification/storage/resource-manager/Microsoft.Storage/stable/2021-09-01/examples/StorageAccountSetManagementPolicy_LastTierChangeTimeActions.json
       */
      async function storageAccountSetManagementPolicyLastTierChangeTimeActions() {
        const subscriptionId = "{subscription-id}";
        const resourceGroupName = "res7687";
        const accountName = "sto9699";
        const managementPolicyName = "default";
        const properties = {
          policy: {
            rules: [
              {
                name: "olcmtest",
                type: "Lifecycle",
                definition: {
                  actions: {
                    baseBlob: {
                      delete: { daysAfterModificationGreaterThan: 1000 },
                      tierToArchive: {
                        daysAfterLastTierChangeGreaterThan: 120,
                        daysAfterModificationGreaterThan: 90,
                      },
                      tierToCool: { daysAfterModificationGreaterThan: 30 },
                    },
                    snapshot: {
                      tierToArchive: {
                        daysAfterCreationGreaterThan: 30,
                        daysAfterLastTierChangeGreaterThan: 90,
                      },
                    },
                    version: {
                      tierToArchive: {
                        daysAfterCreationGreaterThan: 30,
                        daysAfterLastTierChangeGreaterThan: 90,
                      },
                    },
                  },
                  filters: {
                    blobTypes: ["blockBlob"],
                    prefixMatch: ["olcmtestcontainer"],
                  },
                },
                enabled: true,
              },
            ],
          },
        };
        const credential = new DefaultAzureCredential();
        const client = new StorageManagementClient(credential, subscriptionId);
        const result = await client.managementPolicies.createOrUpdate(
          resourceGroupName,
          accountName,
          managementPolicyName,
          properties
        );
        console.log(result);
      }

      storageAccountSetManagementPolicyLastTierChangeTimeActions().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-storage_17.2.1/sdk/storage/arm-storage/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/{subscription-id}/resourceGroups/res7231/providers/Microsoft.Storage/storageAccounts/sto288/managementPolicies/default",
        "name": "DefaultManagementPolicy",
        "type": "Microsoft.Storage/storageAccounts/managementPolicies",
        "properties": {
          "policy": {
            "rules": [
              {
                "enabled": true,
                "name": "olcmtest",
                "type": "Lifecycle",
                "definition": {
                  "filters": {
                    "blobTypes": [
                      "blockBlob"
                    ],
                    "prefixMatch": [
                      "olcmtestcontainer"
                    ]
                  },
                  "actions": {
                    "baseBlob": {
                      "tierToCool": {
                        "daysAfterModificationGreaterThan": 30
                      },
                      "tierToArchive": {
                        "daysAfterModificationGreaterThan": 90,
                        "daysAfterLastTierChangeGreaterThan": 120
                      },
                      "delete": {
                        "daysAfterModificationGreaterThan": 1000
                      }
                    },
                    "snapshot": {
                      "tierToArchive": {
                        "daysAfterCreationGreaterThan": 30,
                        "daysAfterLastTierChangeGreaterThan": 90
                      }
                    },
                    "version": {
                      "tierToArchive": {
                        "daysAfterCreationGreaterThan": 30,
                        "daysAfterLastTierChangeGreaterThan": 90
                      }
                    }
                  }
                }
              }
            ]
          },
          "lastModifiedTime": "2018-06-08T02:53:39.0932539Z"
        }
      }
- name: StorageAccountSetManagementPolicy_BaseBlobDaysAfterCreationActions
  request:
    uri: PUT https://management.azure.com/subscriptions/{subscription-id}/resourceGroups/res7687/providers/Microsoft.Storage/storageAccounts/sto9699/managementPolicies/default?api-version=2021-09-01
    body: >-
      {
        "properties": {
          "policy": {
            "rules": [
              {
                "enabled": true,
                "name": "olcmtest1",
                "type": "Lifecycle",
                "definition": {
                  "filters": {
                    "blobTypes": [
                      "blockBlob"
                    ],
                    "prefixMatch": [
                      "olcmtestcontainer1"
                    ]
                  },
                  "actions": {
                    "baseBlob": {
                      "tierToCool": {
                        "daysAfterCreationGreaterThan": 30
                      },
                      "tierToArchive": {
                        "daysAfterCreationGreaterThan": 90
                      },
                      "delete": {
                        "daysAfterCreationGreaterThan": 1000
                      }
                    }
                  }
                }
              }
            ]
          }
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/{subscription-id}/resourceGroups/res7687/providers/Microsoft.Storage/storageAccounts/sto9699/managementPolicies/default?api-version=2021-09-01

      {
        "properties": {
          "policy": {
            "rules": [
              {
                "enabled": true,
                "name": "olcmtest1",
                "type": "Lifecycle",
                "definition": {
                  "filters": {
                    "blobTypes": [
                      "blockBlob"
                    ],
                    "prefixMatch": [
                      "olcmtestcontainer1"
                    ]
                  },
                  "actions": {
                    "baseBlob": {
                      "tierToCool": {
                        "daysAfterCreationGreaterThan": 30
                      },
                      "tierToArchive": {
                        "daysAfterCreationGreaterThan": 90
                      },
                      "delete": {
                        "daysAfterCreationGreaterThan": 1000
                      }
                    }
                  }
                }
              }
            ]
          }
        }
      }

      ```

      # [Java](#tab/Java)
      ``` java
      import com.azure.core.util.Context;
      import com.azure.resourcemanager.storage.fluent.models.ManagementPolicyInner;
      import com.azure.resourcemanager.storage.models.DateAfterModification;
      import com.azure.resourcemanager.storage.models.ManagementPolicyAction;
      import com.azure.resourcemanager.storage.models.ManagementPolicyBaseBlob;
      import com.azure.resourcemanager.storage.models.ManagementPolicyDefinition;
      import com.azure.resourcemanager.storage.models.ManagementPolicyFilter;
      import com.azure.resourcemanager.storage.models.ManagementPolicyName;
      import com.azure.resourcemanager.storage.models.ManagementPolicyRule;
      import com.azure.resourcemanager.storage.models.ManagementPolicySchema;
      import com.azure.resourcemanager.storage.models.RuleType;
      import java.util.Arrays;

      /** Samples for ManagementPolicies CreateOrUpdate. */
      public final class Main {
          /*
           * x-ms-original-file: specification/storage/resource-manager/Microsoft.Storage/stable/2021-09-01/examples/StorageAccountSetManagementPolicy_BaseBlobDaysAfterCreationActions.json
           */
          /**
           * Sample code: StorageAccountSetManagementPolicy_BaseBlobDaysAfterCreationActions.
           *
           * @param azure The entry point for accessing resource management APIs in Azure.
           */
          public static void storageAccountSetManagementPolicyBaseBlobDaysAfterCreationActions(
              com.azure.resourcemanager.AzureResourceManager azure) {
              azure
                  .storageAccounts()
                  .manager()
                  .serviceClient()
                  .getManagementPolicies()
                  .createOrUpdateWithResponse(
                      "res7687",
                      "sto9699",
                      ManagementPolicyName.DEFAULT,
                      new ManagementPolicyInner()
                          .withPolicy(
                              new ManagementPolicySchema()
                                  .withRules(
                                      Arrays
                                          .asList(
                                              new ManagementPolicyRule()
                                                  .withEnabled(true)
                                                  .withName("olcmtest1")
                                                  .withType(RuleType.LIFECYCLE)
                                                  .withDefinition(
                                                      new ManagementPolicyDefinition()
                                                          .withActions(
                                                              new ManagementPolicyAction()
                                                                  .withBaseBlob(
                                                                      new ManagementPolicyBaseBlob()
                                                                          .withTierToCool(
                                                                              new DateAfterModification()
                                                                                  .withDaysAfterCreationGreaterThan(30.0f))
                                                                          .withTierToArchive(
                                                                              new DateAfterModification()
                                                                                  .withDaysAfterCreationGreaterThan(90.0f))
                                                                          .withDelete(
                                                                              new DateAfterModification()
                                                                                  .withDaysAfterCreationGreaterThan(
                                                                                      1000.0f))))
                                                          .withFilters(
                                                              new ManagementPolicyFilter()
                                                                  .withPrefixMatch(Arrays.asList("olcmtestcontainer1"))
                                                                  .withBlobTypes(Arrays.asList("blockBlob"))))))),
                      Context.NONE);
          }
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-java/blob/azure-resourcemanager_2.17.0/sdk/resourcemanager/azure-resourcemanager/README.md) on how to add the SDK to your project and authenticate.
      # [JavaScript](#tab/JavaScript)
      ``` js
      const { StorageManagementClient } = require("@azure/arm-storage");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to Sets the managementpolicy to the specified storage account.
       *
       * @summary Sets the managementpolicy to the specified storage account.
       * x-ms-original-file: specification/storage/resource-manager/Microsoft.Storage/stable/2021-09-01/examples/StorageAccountSetManagementPolicy_BaseBlobDaysAfterCreationActions.json
       */
      async function storageAccountSetManagementPolicyBaseBlobDaysAfterCreationActions() {
        const subscriptionId = "{subscription-id}";
        const resourceGroupName = "res7687";
        const accountName = "sto9699";
        const managementPolicyName = "default";
        const properties = {
          policy: {
            rules: [
              {
                name: "olcmtest1",
                type: "Lifecycle",
                definition: {
                  actions: {
                    baseBlob: {
                      delete: { daysAfterCreationGreaterThan: 1000 },
                      tierToArchive: { daysAfterCreationGreaterThan: 90 },
                      tierToCool: { daysAfterCreationGreaterThan: 30 },
                    },
                  },
                  filters: {
                    blobTypes: ["blockBlob"],
                    prefixMatch: ["olcmtestcontainer1"],
                  },
                },
                enabled: true,
              },
            ],
          },
        };
        const credential = new DefaultAzureCredential();
        const client = new StorageManagementClient(credential, subscriptionId);
        const result = await client.managementPolicies.createOrUpdate(
          resourceGroupName,
          accountName,
          managementPolicyName,
          properties
        );
        console.log(result);
      }

      storageAccountSetManagementPolicyBaseBlobDaysAfterCreationActions().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-storage_17.2.1/sdk/storage/arm-storage/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/{subscription-id}/resourceGroups/res7231/providers/Microsoft.Storage/storageAccounts/sto288/managementPolicies/default",
        "name": "DefaultManagementPolicy",
        "type": "Microsoft.Storage/storageAccounts/managementPolicies",
        "properties": {
          "policy": {
            "rules": [
              {
                "enabled": true,
                "name": "olcmtest1",
                "type": "Lifecycle",
                "definition": {
                  "filters": {
                    "blobTypes": [
                      "blockBlob"
                    ],
                    "prefixMatch": [
                      "olcmtestcontainer1"
                    ]
                  },
                  "actions": {
                    "baseBlob": {
                      "tierToCool": {
                        "daysAfterCreationGreaterThan": 30
                      },
                      "tierToArchive": {
                        "daysAfterCreationGreaterThan": 90
                      },
                      "delete": {
                        "daysAfterCreationGreaterThan": 1000
                      }
                    }
                  }
                }
              }
            ]
          },
          "lastModifiedTime": "2021-06-08T02:53:39.0932539Z"
        }
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: Learn more about Storage Resource Provider service - Sets the managementpolicy to the specified storage account.
errorCodes: []
