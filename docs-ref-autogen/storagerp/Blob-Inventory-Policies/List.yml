### YamlMime:RESTOperation
uid: management.azure.com.storagerp.blobinventorypolicies.list
name: List
service: Storage Resource Provider
groupName: Blob Inventory Policies
apiVersion: 2021-04-01
summary: Gets the blob inventory policy associated with the specified storage account.
consumes:
- application/json
produces:
- application/json
paths:
- content: GET https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Storage/storageAccounts/{accountName}/inventoryPolicies?api-version=2021-04-01
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: The ID of the target subscription.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group within the user's subscription. The name is case insensitive.
  types:
  - uid: string
  pattern: ^[-\w\._\(\)]+$
- name: accountName
  in: path
  isRequired: true
  description: The name of the storage account within the specified resource group. Storage account names must be between 3 and 24 characters in length and use numbers and lower-case letters only.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: The API version to use for this operation.
  types:
  - uid: string
responses:
- name: 200 OK
  description: OK -- Get the blob inventory policies successfully.
  types:
  - uid: ListBlobInventoryPolicy
- name: Other Status Codes
  description: Error response describing why the operation failed.
  types:
  - uid: ErrorResponse
requestHeader: []
definitions:
- name: ListBlobInventoryPolicy
  description: List of blob inventory policies returned.
  kind: object
  properties:
  - name: value
    isReadyOnly: true
    description: List of blob inventory policies.
    types:
    - uid: BlobInventoryPolicy
      isArray: true
- name: ErrorResponse
  description: An error response from the storage resource provider.
  kind: object
  properties:
  - name: error
    description: Azure Storage Resource Provider error response body.
    types:
    - uid: ErrorResponseBody
- name: BlobInventoryPolicy
  description: The storage account blob inventory policy.
  kind: object
  properties:
  - name: systemData
    isReadyOnly: true
    description: Metadata pertaining to creation and last modification of the resource.
    types:
    - uid: systemData
  - name: properties.lastModifiedTime
    isReadyOnly: true
    description: Returns the last modified date and time of the blob inventory policy.
    types:
    - uid: string
  - name: properties.policy
    description: The storage account blob inventory policy object. It is composed of policy rules.
    types:
    - uid: BlobInventoryPolicySchema
  - name: id
    isReadyOnly: true
    description: Fully qualified resource ID for the resource. Ex - /subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/{resourceProviderNamespace}/{resourceType}/{resourceName}
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: The name of the resource
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: The type of the resource. E.g. "Microsoft.Compute/virtualMachines" or "Microsoft.Storage/storageAccounts"
    types:
    - uid: string
- name: ErrorResponseBody
  description: Error response body contract.
  kind: object
  properties:
  - name: code
    description: An identifier for the error. Codes are invariant and are intended to be consumed programmatically.
    types:
    - uid: string
  - name: message
    description: A message describing the error, intended to be suitable for display in a user interface.
    types:
    - uid: string
- name: systemData
  description: Metadata pertaining to creation and last modification of the resource.
  kind: object
  properties:
  - name: createdBy
    description: The identity that created the resource.
    types:
    - uid: string
  - name: createdByType
    description: The type of identity that created the resource.
    types:
    - uid: createdByType
  - name: createdAt
    description: The timestamp of resource creation (UTC).
    types:
    - uid: string
  - name: lastModifiedBy
    description: The identity that last modified the resource.
    types:
    - uid: string
  - name: lastModifiedByType
    description: The type of identity that last modified the resource.
    types:
    - uid: createdByType
  - name: lastModifiedAt
    description: The timestamp of resource last modification (UTC)
    types:
    - uid: string
- name: BlobInventoryPolicySchema
  description: The storage account blob inventory policy rules.
  kind: object
  properties:
  - name: enabled
    description: Policy is enabled if set to true.
    types:
    - uid: boolean
  - name: type
    description: The valid value is Inventory
    types:
    - uid: InventoryRuleType
  - name: rules
    description: The storage account blob inventory policy rules. The rule is applied when it is enabled.
    types:
    - uid: BlobInventoryPolicyRule
      isArray: true
- name: createdByType
  description: The type of identity that created the resource.
  kind: enum
  properties:
  - name: User
    types:
    - uid: string
  - name: Application
    types:
    - uid: string
  - name: ManagedIdentity
    types:
    - uid: string
  - name: Key
    types:
    - uid: string
- name: InventoryRuleType
  description: The valid value is Inventory
  kind: enum
  properties:
  - name: Inventory
    types:
    - uid: string
- name: BlobInventoryPolicyRule
  description: An object that wraps the blob inventory rule. Each rule is uniquely defined by name.
  kind: object
  properties:
  - name: enabled
    description: Rule is enabled when set to true.
    types:
    - uid: boolean
  - name: name
    description: A rule name can contain any combination of alpha numeric characters. Rule name is case-sensitive. It must be unique within a policy.
    types:
    - uid: string
  - name: destination
    description: Container name where blob inventory files are stored. Must be pre-created.
    types:
    - uid: string
  - name: definition
    description: An object that defines the blob inventory policy rule.
    types:
    - uid: BlobInventoryPolicyDefinition
- name: BlobInventoryPolicyDefinition
  description: An object that defines the blob inventory rule.
  kind: object
  properties:
  - name: filters
    description: An object that defines the filter set.
    types:
    - uid: BlobInventoryPolicyFilter
  - name: format
    description: This is a required field, it specifies the format for the inventory files.
    types:
    - uid: format
  - name: schedule
    description: This is a required field. This field is used to schedule an inventory formation.
    types:
    - uid: schedule
  - name: objectType
    description: This is a required field. This field specifies the scope of the inventory created either at the blob or container level.
    types:
    - uid: objectType
  - name: schemaFields
    description: This is a required field. This field specifies the fields and properties of the object to be included in the inventory. The Schema field value 'Name' is always required. The valid values for this field for the 'Blob' definition.objectType include 'Name, Creation-Time, Last-Modified, Content-Length, Content-MD5, BlobType, AccessTier, AccessTierChangeTime, Expiry-Time, hdi_isfolder, Owner, Group, Permissions, Acl, Snapshot, VersionId, IsCurrentVersion, Metadata, LastAccessTime'. The valid values for 'Container' definition.objectType include 'Name, Last-Modified, Metadata, LeaseStatus, LeaseState, LeaseDuration, PublicAccess, HasImmutabilityPolicy, HasLegalHold'. Schema field values 'Expiry-Time, hdi_isfolder, Owner, Group, Permissions, Acl' are valid only for Hns enabled accounts.
    types:
    - uid: string
      isArray: true
- name: BlobInventoryPolicyFilter
  description: An object that defines the blob inventory rule filter conditions. For 'Blob' definition.objectType all filter properties are applicable, 'blobTypes' is required and others are optional. For 'Container' definition.objectType only prefixMatch is applicable and is optional.
  kind: object
  properties:
  - name: prefixMatch
    description: An array of strings for blob prefixes to be matched.
    types:
    - uid: string
      isArray: true
  - name: blobTypes
    description: An array of predefined enum values. Valid values include blockBlob, appendBlob, pageBlob. Hns accounts does not support pageBlobs. This field is required when definition.objectType property is set to 'Blob'.
    types:
    - uid: string
      isArray: true
  - name: includeBlobVersions
    description: Includes blob versions in blob inventory when value is set to true. The definition.schemaFields values 'VersionId and IsCurrentVersion' are required if this property is set to true, else they must be excluded.
    types:
    - uid: boolean
  - name: includeSnapshots
    description: Includes blob snapshots in blob inventory when value is set to true. The definition.schemaFields value 'Snapshot' is required if this property is set to true, else it must be excluded.
    types:
    - uid: boolean
- name: format
  description: This is a required field, it specifies the format for the inventory files.
  kind: enum
  properties:
  - name: Csv
    types:
    - uid: string
  - name: Parquet
    types:
    - uid: string
- name: schedule
  description: This is a required field. This field is used to schedule an inventory formation.
  kind: enum
  properties:
  - name: Daily
    types:
    - uid: string
  - name: Weekly
    types:
    - uid: string
- name: objectType
  description: This is a required field. This field specifies the scope of the inventory created either at the blob or container level.
  kind: enum
  properties:
  - name: Blob
    types:
    - uid: string
  - name: Container
    types:
    - uid: string
examples:
- name: StorageAccountGetBlobInventoryPolicy
  request:
    uri: GET https://management.azure.com/subscriptions/{subscription-id}/resourceGroups/res7687/providers/Microsoft.Storage/storageAccounts/sto9699/inventoryPolicies?api-version=2021-04-01
  responses:
  - statusCode: "200"
    body: >-
      {
        "value": [
          {
            "id": "/subscriptions/{subscription-id}/resourceGroups/res7687/providers/Microsoft.Storage/storageAccounts/sto9699/inventoryPolicies/default",
            "name": "DefaultInventoryPolicy",
            "type": "Microsoft.Storage/storageAccounts/inventoryPolicies",
            "properties": {
              "policy": {
                "enabled": true,
                "type": "Inventory",
                "rules": [
                  {
                    "enabled": true,
                    "name": "inventoryPolicyRule1",
                    "destination": "container1",
                    "definition": {
                      "filters": {
                        "blobTypes": [
                          "blockBlob",
                          "appendBlob",
                          "pageBlob"
                        ],
                        "prefixMatch": [
                          "inventoryprefix1",
                          "inventoryprefix2"
                        ],
                        "includeSnapshots": true,
                        "includeBlobVersions": true
                      },
                      "format": "Csv",
                      "schedule": "Daily",
                      "objectType": "Blob",
                      "schemaFields": [
                        "Name",
                        "Creation-Time",
                        "Last-Modified",
                        "Content-Length",
                        "Content-MD5",
                        "BlobType",
                        "AccessTier",
                        "AccessTierChangeTime",
                        "Snapshot",
                        "VersionId",
                        "IsCurrentVersion",
                        "Metadata"
                      ]
                    }
                  }
                ]
              },
              "lastModifiedTime": "2020-10-05T02:53:39.0932539Z"
            }
          }
        ]
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: Learn more about Storage Resource Provider service - Gets the blob inventory policy associated with the specified storage account.
errorCodes: []
