### YamlMime:RESTOperation
uid: management.azure.com.storagerp.storageaccounts.restoreblobranges
name: Restore Blob Ranges
service: Storage Resource Provider
groupName: Storage Accounts
apiVersion: 2021-09-01
summary: Restore blobs in the specified blob ranges
consumes:
- application/json
produces:
- application/json
paths:
- content: POST https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Storage/storageAccounts/{accountName}/restoreBlobRanges?api-version=2021-09-01
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: The ID of the target subscription.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group within the user's subscription. The name is case insensitive.
  types:
  - uid: string
  pattern: ^[-\w\._\(\)]+$
- name: accountName
  in: path
  isRequired: true
  description: The name of the storage account within the specified resource group. Storage account names must be between 3 and 24 characters in length and use numbers and lower-case letters only.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: The API version to use for this operation.
  types:
  - uid: string
responses:
- name: 200 OK
  description: OK -- returned when blob ranges are restored completely with the same properties specified in the request body.
  types:
  - uid: BlobRestoreStatus
- name: 202 Accepted
  description: Accepted -- Blob restore request accepted; operation will complete asynchronously.
  types:
  - uid: BlobRestoreStatus
requestBody:
- name: default
  parameters:
  - name: timeToRestore
    in: body
    isRequired: true
    description: Restore blob to the specified time.
    types:
    - uid: string
  - name: blobRanges
    in: body
    isRequired: true
    description: Blob ranges to restore.
    types:
    - uid: BlobRestoreRange
      isArray: true
requestHeader: []
definitions:
- name: BlobRestoreRange
  description: Blob range
  kind: object
  properties:
  - name: startRange
    description: Blob start range. This is inclusive. Empty means account start.
    types:
    - uid: string
  - name: endRange
    description: Blob end range. This is exclusive. Empty means account end.
    types:
    - uid: string
- name: BlobRestoreStatus
  description: Blob restore status.
  kind: object
  properties:
  - name: status
    isReadyOnly: true
    description: 'The status of blob restore progress. Possible values are: - InProgress: Indicates that blob restore is ongoing. - Complete: Indicates that blob restore has been completed successfully. - Failed: Indicates that blob restore is failed.'
    types:
    - uid: BlobRestoreProgressStatus
  - name: failureReason
    isReadyOnly: true
    description: Failure reason when blob restore is failed.
    types:
    - uid: string
  - name: restoreId
    isReadyOnly: true
    description: Id for tracking blob restore request.
    types:
    - uid: string
  - name: parameters
    isReadyOnly: true
    description: Blob restore request parameters.
    types:
    - uid: BlobRestoreParameters
- name: BlobRestoreParameters
  description: Blob restore parameters
  kind: object
  properties:
  - name: timeToRestore
    description: Restore blob to the specified time.
    types:
    - uid: string
  - name: blobRanges
    description: Blob ranges to restore.
    types:
    - uid: BlobRestoreRange
      isArray: true
- name: BlobRestoreProgressStatus
  description: 'The status of blob restore progress. Possible values are: - InProgress: Indicates that blob restore is ongoing. - Complete: Indicates that blob restore has been completed successfully. - Failed: Indicates that blob restore is failed.'
  kind: enum
  properties:
  - name: InProgress
    types:
    - uid: string
  - name: Complete
    types:
    - uid: string
  - name: Failed
    types:
    - uid: string
examples:
- name: BlobRangesRestore
  request:
    uri: POST https://management.azure.com/subscriptions/{subscription-id}/resourceGroups/res9101/providers/Microsoft.Storage/storageAccounts/sto4445/restoreBlobRanges?api-version=2021-09-01
    body: >-
      {
        "timeToRestore": "2019-04-20T15:30:00.0000000Z",
        "blobRanges": [
          {
            "startRange": "container/blobpath1",
            "endRange": "container/blobpath2"
          },
          {
            "startRange": "container2/blobpath3",
            "endRange": ""
          }
        ]
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      POST https://management.azure.com/subscriptions/{subscription-id}/resourceGroups/res9101/providers/Microsoft.Storage/storageAccounts/sto4445/restoreBlobRanges?api-version=2021-09-01

      {
        "timeToRestore": "2019-04-20T15:30:00.0000000Z",
        "blobRanges": [
          {
            "startRange": "container/blobpath1",
            "endRange": "container/blobpath2"
          },
          {
            "startRange": "container2/blobpath3",
            "endRange": ""
          }
        ]
      }

      ```

      # [Java](#tab/Java)
      ``` java
      import com.azure.core.util.Context;
      import com.azure.resourcemanager.storage.models.BlobRestoreParameters;
      import com.azure.resourcemanager.storage.models.BlobRestoreRange;
      import java.time.OffsetDateTime;
      import java.util.Arrays;

      /** Samples for StorageAccounts RestoreBlobRanges. */
      public final class Main {
          /*
           * x-ms-original-file: specification/storage/resource-manager/Microsoft.Storage/stable/2021-09-01/examples/BlobRangesRestore.json
           */
          /**
           * Sample code: BlobRangesRestore.
           *
           * @param azure The entry point for accessing resource management APIs in Azure.
           */
          public static void blobRangesRestore(com.azure.resourcemanager.AzureResourceManager azure) {
              azure
                  .storageAccounts()
                  .manager()
                  .serviceClient()
                  .getStorageAccounts()
                  .restoreBlobRanges(
                      "res9101",
                      "sto4445",
                      new BlobRestoreParameters()
                          .withTimeToRestore(OffsetDateTime.parse("2019-04-20T15:30:00.0000000Z"))
                          .withBlobRanges(
                              Arrays
                                  .asList(
                                      new BlobRestoreRange()
                                          .withStartRange("container/blobpath1")
                                          .withEndRange("container/blobpath2"),
                                      new BlobRestoreRange().withStartRange("container2/blobpath3").withEndRange(""))),
                      Context.NONE);
          }
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-java/blob/azure-resourcemanager_2.17.0/sdk/resourcemanager/azure-resourcemanager/README.md) on how to add the SDK to your project and authenticate.
      # [Go](#tab/Go)
      ``` go
      package armstorage_test

      import (
      	"context"
      	"log"

      	"time"

      	"github.com/Azure/azure-sdk-for-go/sdk/azcore/to"
      	"github.com/Azure/azure-sdk-for-go/sdk/azidentity"
      	"github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/storage/armstorage"
      )

      // Generated from example definition: https://github.com/Azure/azure-rest-api-specs/tree/main/specification/storage/resource-manager/Microsoft.Storage/stable/2021-09-01/examples/BlobRangesRestore.json
      func ExampleAccountsClient_BeginRestoreBlobRanges() {
      	cred, err := azidentity.NewDefaultAzureCredential(nil)
      	if err != nil {
      		log.Fatalf("failed to obtain a credential: %v", err)
      	}
      	ctx := context.Background()
      	client, err := armstorage.NewAccountsClient("{subscription-id}", cred, nil)
      	if err != nil {
      		log.Fatalf("failed to create client: %v", err)
      	}
      	poller, err := client.BeginRestoreBlobRanges(ctx,
      		"res9101",
      		"sto4445",
      		armstorage.BlobRestoreParameters{
      			BlobRanges: []*armstorage.BlobRestoreRange{
      				{
      					EndRange:   to.Ptr("container/blobpath2"),
      					StartRange: to.Ptr("container/blobpath1"),
      				},
      				{
      					EndRange:   to.Ptr(""),
      					StartRange: to.Ptr("container2/blobpath3"),
      				}},
      			TimeToRestore: to.Ptr(func() time.Time { t, _ := time.Parse(time.RFC3339Nano, "2019-04-20T15:30:00.0000000Z"); return t }()),
      		},
      		nil)
      	if err != nil {
      		log.Fatalf("failed to finish the request: %v", err)
      	}
      	res, err := poller.PollUntilDone(ctx, nil)
      	if err != nil {
      		log.Fatalf("failed to pull the result: %v", err)
      	}
      	// TODO: use response item
      	_ = res
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-go/blob/sdk%2Fresourcemanager%2Fstorage%2Farmstorage%2Fv1.0.0/sdk/resourcemanager/storage/armstorage/README.md) on how to add the SDK to your project and authenticate.
      # [JavaScript](#tab/JavaScript)
      ``` js
      const { StorageManagementClient } = require("@azure/arm-storage");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to Restore blobs in the specified blob ranges
       *
       * @summary Restore blobs in the specified blob ranges
       * x-ms-original-file: specification/storage/resource-manager/Microsoft.Storage/stable/2021-09-01/examples/BlobRangesRestore.json
       */
      async function blobRangesRestore() {
        const subscriptionId = "{subscription-id}";
        const resourceGroupName = "res9101";
        const accountName = "sto4445";
        const parameters = {
          blobRanges: [
            { endRange: "container/blobpath2", startRange: "container/blobpath1" },
            { endRange: "", startRange: "container2/blobpath3" },
          ],
          timeToRestore: new Date("2019-04-20T15:30:00.0000000Z"),
        };
        const credential = new DefaultAzureCredential();
        const client = new StorageManagementClient(credential, subscriptionId);
        const result = await client.storageAccounts.beginRestoreBlobRangesAndWait(
          resourceGroupName,
          accountName,
          parameters
        );
        console.log(result);
      }

      blobRangesRestore().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-storage_17.2.1/sdk/storage/arm-storage/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "status": "Succeeded",
        "restoreId": "{restore_id}",
        "parameters": {
          "timeToRestore": "2019-04-20T15:30:00.0000000Z",
          "blobRanges": [
            {
              "startRange": "container/blobpath1",
              "endRange": "container/blobpath2"
            },
            {
              "startRange": "container2/blobpath3",
              "endRange": ""
            }
          ]
        }
      }
  - statusCode: "202"
    headers:
    - name: location
      value: https://management.azure.com/subscriptions/{subscription-id}/resourceGroups/res9101/providers/Microsoft.Storage/locations/eastus/operationResults/00000000-0000-0000-0000-000000000000?api-version=2021-09-01
    body: >-
      {
        "status": "InProgress",
        "restoreId": "{restore_id}",
        "parameters": {
          "timeToRestore": "2019-04-20T15:30:00.0000000Z",
          "blobRanges": [
            {
              "startRange": "container/blobpath1",
              "endRange": "container/blobpath2"
            },
            {
              "startRange": "container2/blobpath3",
              "endRange": ""
            }
          ]
        }
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: Learn more about Storage Resource Provider service - Restore blobs in the specified blob ranges
errorCodes: []
