### YamlMime:RESTOperation
uid: management.azure.com.billing.2019-10-01-preview.billingroleassignments.addbyinvoicesection
name: Add By Invoice Section
service: Billing
groupName: Billing Role Assignments
apiVersion: 2019-10-01-preview
summary: Adds a role assignment on an invoice section. The operation is supported for billing accounts with agreement type Microsoft Customer Agreement.
consumes:
- application/json
produces:
- application/json
paths:
- content: POST https://management.azure.com/providers/Microsoft.Billing/billingAccounts/{billingAccountName}/billingProfiles/{billingProfileName}/invoiceSections/{invoiceSectionName}/createBillingRoleAssignment?api-version=2019-10-01-preview
uriParameters:
- name: billingAccountName
  in: path
  isRequired: true
  description: The ID that uniquely identifies a billing account.
  types:
  - uid: string
- name: billingProfileName
  in: path
  isRequired: true
  description: The ID that uniquely identifies a billing profile.
  types:
  - uid: string
- name: invoiceSectionName
  in: path
  isRequired: true
  description: The ID that uniquely identifies an invoice section.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: The version of the API to be used with the client request. The current version is 2019-10-01-preview.
  types:
  - uid: string
responses:
- name: 201 Created
  description: Role assignment is successfully created
  types:
  - uid: BillingRoleAssignmentListResult
- name: Other Status Codes
  description: Error response describing why the operation failed.
  types:
  - uid: ErrorResponse
requestBody:
- name: default
  parameters:
  - name: principalId
    in: body
    description: The user's principal id that the role gets assigned to
    types:
    - uid: string
  - name: billingRoleDefinitionId
    in: body
    description: The role definition id
    types:
    - uid: string
requestHeader: []
definitions:
- name: BillingRoleAssignmentListResult
  description: The list of role assignments.
  kind: object
  properties:
  - name: value
    isReadyOnly: true
    description: The list of role assignments.
    types:
    - uid: BillingRoleAssignment
      isArray: true
  - name: nextLink
    isReadyOnly: true
    description: The link (url) to the next page of results.
    types:
    - uid: string
- name: ErrorResponse
  description: Error response indicates that the service is not able to process the incoming request. The reason is provided in the error message.
  kind: object
  properties:
  - name: error
    description: The details of the error.
    types:
    - uid: ErrorDetails
- name: BillingRoleAssignmentPayload
  description: The payload use to update role assignment on a scope
  kind: object
  properties:
  - name: principalId
    description: The user's principal id that the role gets assigned to
    types:
    - uid: string
  - name: billingRoleDefinitionId
    description: The role definition id
    types:
    - uid: string
- name: BillingRoleAssignment
  description: The role assignment
  kind: object
  properties:
  - name: properties.createdOn
    isReadyOnly: true
    description: The date the role assignment was created.
    types:
    - uid: string
  - name: properties.createdByPrincipalTenantId
    isReadyOnly: true
    description: The tenant Id of the user who created the role assignment.
    types:
    - uid: string
  - name: properties.createdByPrincipalId
    isReadyOnly: true
    description: The principal Id of the user who created the role assignment.
    types:
    - uid: string
  - name: properties.createdByUserEmailAddress
    isReadyOnly: true
    description: The email address of the user who created the role assignment. This is supported only for billing accounts with agreement type Enterprise Agreement.
    types:
    - uid: string
  - name: properties.name
    isReadyOnly: true
    description: The name of the role assignment.
    types:
    - uid: string
  - name: properties.principalId
    description: The principal id of the user to whom the role was assigned.
    types:
    - uid: string
  - name: properties.principalTenantId
    description: The principal tenant id of the user to whom the role was assigned.
    types:
    - uid: string
  - name: properties.roleDefinitionId
    description: The ID of the role definition.
    types:
    - uid: string
  - name: properties.scope
    isReadyOnly: true
    description: The scope at which the role was assigned.
    types:
    - uid: string
  - name: properties.userEmailAddress
    description: The email address of the user to whom the role was assigned. This is supported only for billing accounts with agreement type Enterprise Agreement.
    types:
    - uid: string
  - name: properties.userAuthenticationType
    description: The authentication type of the user, whether Organization or MSA, of the user to whom the role was assigned. This is supported only for billing accounts with agreement type Enterprise Agreement.
    types:
    - uid: string
  - name: id
    isReadyOnly: true
    description: Resource Id.
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: Resource name.
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: Resource type.
    types:
    - uid: string
- name: ErrorDetails
  description: The details of the error.
  kind: object
  properties:
  - name: code
    isReadyOnly: true
    description: Error code.
    types:
    - uid: string
  - name: message
    isReadyOnly: true
    description: Error message indicating why the operation failed.
    types:
    - uid: string
  - name: target
    isReadyOnly: true
    description: The target of the particular error.
    types:
    - uid: string
  - name: details
    isReadyOnly: true
    description: The sub details of the error.
    types:
    - uid: ErrorSubDetails
      isArray: true
- name: ErrorSubDetails
  kind: object
  properties:
  - name: code
    isReadyOnly: true
    description: Error code.
    types:
    - uid: string
  - name: message
    isReadyOnly: true
    description: Error message indicating why the operation failed.
    types:
    - uid: string
  - name: target
    isReadyOnly: true
    description: The target of the particular error.
    types:
    - uid: string
examples:
- name: AddRoleAssignmentToInvoiceSection
  request:
    uri: POST https://management.azure.com/providers/Microsoft.Billing/billingAccounts/{billingAccountName}/billingProfiles/{billingProfileName}/invoiceSections/{invoiceSectionName}/createBillingRoleAssignment?api-version=2019-10-01-preview
    body: >-
      {
        "principalId": "00000000-0000-0000-0000-000000000000",
        "billingRoleDefinitionId": "/providers/Microsoft.Billing/billingAccounts/{billingAccountName}/billingProfiles/{billingProfileName}/invoiceSections/{invoiceSectionName}/providers/Microsoft.Billing/billingRoleDefinition/10000000-aaaa-bbbb-cccc-100000000000"
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      POST https://management.azure.com/providers/Microsoft.Billing/billingAccounts/{billingAccountName}/billingProfiles/{billingProfileName}/invoiceSections/{invoiceSectionName}/createBillingRoleAssignment?api-version=2019-10-01-preview

      {
        "principalId": "00000000-0000-0000-0000-000000000000",
        "billingRoleDefinitionId": "/providers/Microsoft.Billing/billingAccounts/{billingAccountName}/billingProfiles/{billingProfileName}/invoiceSections/{invoiceSectionName}/providers/Microsoft.Billing/billingRoleDefinition/10000000-aaaa-bbbb-cccc-100000000000"
      }

      ```

  responses:
  - statusCode: "201"
    body: >-
      {
        "value": [
          {
            "id": "10000000-aaaa-bbbb-cccc-100000000000_00000000-0000-0000-0000-000000000000",
            "name": "10000000-aaaa-bbbb-cccc-100000000000_00000000-0000-0000-0000-000000000000",
            "properties": {
              "createdOn": "2018-06-21T21:34:12.2363515+00:00",
              "createdByPrincipalTenantId": "7ca289b9-c32d-4f01-8566-7ff93261d76f",
              "createdByPrincipalId": "",
              "name": "10000000-aaaa-bbbb-cccc-100000000000_00000000-0000-0000-0000-000000000000",
              "principalId": "00000000-0000-0000-0000-000000000000",
              "scope": "/providers/Microsoft.Billing/billingAccounts/{billingAccountName}/billingProfiles/{billingProfileName}/invoiceSections/{invoiceSectionName}"
            },
            "type": "Microsoft.Billing/billingRoleAssignments"
          }
        ]
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow.
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: Adds a role assignment on an invoice section. The operation is supported for billing accounts with agreement type Microsoft Customer Agreement.
errorCodes: []
