### YamlMime:RESTOperation
uid: management.azure.com.sql.2021-02-01-preview.servers.importdatabase
name: Import Database
service: SQL Database
groupName: Servers
apiVersion: 2021-02-01-preview
summary: Imports a bacpac into a new database.
consumes:
- application/json
produces:
- application/json
paths:
- content: POST https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/import?api-version=2021-02-01-preview
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: The subscription ID that identifies an Azure subscription.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group that contains the resource. You can obtain this value from the Azure Resource Manager API or the portal.
  types:
  - uid: string
- name: serverName
  in: path
  isRequired: true
  description: The name of the server.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: The API version to use for the request.
  types:
  - uid: string
responses:
- name: 200 OK
  description: Successfully imported the database.
  types:
  - uid: ImportExportOperationResult
- name: Other Status Codes
  description: >-
    *** Error Responses: ***

     * 400 MissingImportExportInputParameters - Missing ImportExport input parameters.

     * 400 PolybaseImportAuthenticationTypeNotSupported - Authentication type parameter is not support for PolybaseImport operation.

     * 400 DatabaseExtensionsInvalidOperationMode - Invalid operationMode parameter for database extension.

     * 400 DatabaseExtensionsInvalidStorageKeyType - The storage key type must by 'StorageAccessKey'.

     * 400 DatabaseExtensionsMissingStorageUri - Storage URI cannot be empty.

     * 400 FeatureDisabledOnSelectedEdition - User attempted to use a feature which is disabled on current database edition.

     * 400 InvalidOperationType - Provide a valid operation type.

     * 400 ImportExportJobError - The ImportExport operation has failed.

     * 400 BlockedByOutboundFirewall - The outbound firewall rules blocked the request.

     * 404 ResourceNotFound - Invalid request specifying a non-existent resource.

     * 404 ServerNotInSubscriptionResourceGroup - Specified server does not exist in the specified resource group and subscription.

     * 404 ImportExportOperationIdNotFound - The operation Id for import or export cannot be found.

     * 404 ServerNotInSubscription - Specified server does not exist on the specified subscription.

     * 409 ImportExportOperationInProgress - There is an import or export operation in progress on the database.
- name: 202 Accepted
  description: Importing the database is in progress.
requestBody:
- name: default
  parameters:
  - name: databaseName
    in: body
    description: Name of the import database.
    types:
    - uid: string
  - name: edition
    in: body
    description: Edition of the import database.
    types:
    - uid: string
  - name: serviceObjectiveName
    in: body
    description: Service level objective name of the import database.
    types:
    - uid: string
  - name: maxSizeBytes
    in: body
    description: Max size in bytes for the import database.
    types:
    - uid: string
  - name: storageKeyType
    in: body
    isRequired: true
    description: Storage key type.
    types:
    - uid: StorageKeyType
  - name: storageKey
    in: body
    isRequired: true
    description: Storage key.
    types:
    - uid: string
  - name: storageUri
    in: body
    isRequired: true
    description: Storage Uri.
    types:
    - uid: string
  - name: administratorLogin
    in: body
    isRequired: true
    description: Administrator login name.
    types:
    - uid: string
  - name: administratorLoginPassword
    in: body
    isRequired: true
    description: Administrator login password.
    types:
    - uid: string
  - name: authenticationType
    in: body
    description: Authentication type.
    types:
    - uid: string
  - name: networkIsolation
    in: body
    description: Optional resource information to enable network isolation for request.
    types:
    - uid: NetworkIsolationSettings
requestHeader: []
definitions:
- name: NetworkIsolationSettings
  description: Contains the ARM resources for which to create private endpoint connection.
  kind: object
  properties:
  - name: storageAccountResourceId
    description: The resource id for the storage account used to store BACPAC file. If set, private endpoint connection will be created for the storage account. Must match storage account used for StorageUri parameter.
    types:
    - uid: string
  - name: sqlServerResourceId
    description: The resource id for the SQL server which is the target of this request. If set, private endpoint connection will be created for the SQL server. Must match server which is target of the operation.
    types:
    - uid: string
- name: ImportExportOperationResult
  description: An ImportExport operation result resource.
  kind: object
  properties:
  - name: properties.requestId
    isReadyOnly: true
    description: Request Id.
    types:
    - uid: string
  - name: properties.requestType
    isReadyOnly: true
    description: Request type.
    types:
    - uid: string
  - name: properties.queuedTime
    isReadyOnly: true
    description: Queued time.
    types:
    - uid: string
  - name: properties.lastModifiedTime
    isReadyOnly: true
    description: Last modified time.
    types:
    - uid: string
  - name: properties.blobUri
    isReadyOnly: true
    description: Blob Uri.
    types:
    - uid: string
  - name: properties.serverName
    isReadyOnly: true
    description: Server name.
    types:
    - uid: string
  - name: properties.databaseName
    isReadyOnly: true
    description: Database name.
    types:
    - uid: string
  - name: properties.status
    isReadyOnly: true
    description: Operation status.
    types:
    - uid: string
  - name: properties.errorMessage
    isReadyOnly: true
    description: Error message.
    types:
    - uid: string
  - name: properties.privateEndpointConnections
    isReadyOnly: true
    description: Gets the status of private endpoints associated with this request.
    types:
    - uid: PrivateEndpointConnectionRequestStatus
      isArray: true
  - name: id
    isReadyOnly: true
    description: Resource ID.
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: Resource name.
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: Resource type.
    types:
    - uid: string
- name: ImportNewDatabaseDefinition
  description: Contains the information necessary to perform import operation for new database.
  kind: object
  properties:
  - name: databaseName
    description: Name of the import database.
    types:
    - uid: string
  - name: edition
    description: Edition of the import database.
    types:
    - uid: string
  - name: serviceObjectiveName
    description: Service level objective name of the import database.
    types:
    - uid: string
  - name: maxSizeBytes
    description: Max size in bytes for the import database.
    types:
    - uid: string
  - name: storageKeyType
    description: Storage key type.
    types:
    - uid: StorageKeyType
  - name: storageKey
    description: Storage key.
    types:
    - uid: string
  - name: storageUri
    description: Storage Uri.
    types:
    - uid: string
  - name: administratorLogin
    description: Administrator login name.
    types:
    - uid: string
  - name: administratorLoginPassword
    description: Administrator login password.
    types:
    - uid: string
  - name: authenticationType
    description: Authentication type.
    types:
    - uid: string
  - name: networkIsolation
    description: Optional resource information to enable network isolation for request.
    types:
    - uid: NetworkIsolationSettings
- name: PrivateEndpointConnectionRequestStatus
  description: Contains the private endpoint connection requests status.
  kind: object
  properties:
  - name: privateLinkServiceId
    isReadyOnly: true
    description: Resource id for which the private endpoint is created.
    types:
    - uid: string
  - name: privateEndpointConnectionName
    isReadyOnly: true
    description: The connection name for the private endpoint.
    types:
    - uid: string
  - name: status
    isReadyOnly: true
    description: Status of this private endpoint connection.
    types:
    - uid: string
- name: StorageKeyType
  description: Storage key type.
  kind: enum
  properties:
  - name: SharedAccessKey
    types:
    - uid: string
  - name: StorageAccessKey
    types:
    - uid: string
examples:
- name: Imports to a new database.
  request:
    uri: POST https://management.azure.com/subscriptions/00000000-1111-2222-3333-444444444444/resourceGroups/Default-SQL-SouthEastAsia/providers/Microsoft.Sql/servers/testsvr/import?api-version=2021-02-01-preview
    body: >-
      {
        "databaseName": "testdb",
        "storageKeyType": "StorageAccessKey",
        "storageKey": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx==",
        "storageUri": "https://test.blob.core.windows.net/test.bacpac",
        "administratorLogin": "login",
        "administratorLoginPassword": "password",
        "authenticationType": "Sql"
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      POST https://management.azure.com/subscriptions/00000000-1111-2222-3333-444444444444/resourceGroups/Default-SQL-SouthEastAsia/providers/Microsoft.Sql/servers/testsvr/import?api-version=2021-02-01-preview

      {
        "databaseName": "testdb",
        "storageKeyType": "StorageAccessKey",
        "storageKey": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx==",
        "storageUri": "https://test.blob.core.windows.net/test.bacpac",
        "administratorLogin": "login",
        "administratorLoginPassword": "password",
        "authenticationType": "Sql"
      }

      ```

      # [JavaScript](#tab/JavaScript)
      ``` js
      const { SqlManagementClient } = require("@azure/arm-sql");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to Imports a bacpac into a new database.
       *
       * @summary Imports a bacpac into a new database.
       * x-ms-original-file: specification/sql/resource-manager/Microsoft.Sql/preview/2021-02-01-preview/examples/ImportNewDatabase.json
       */
      async function importsToANewDatabase() {
        const subscriptionId = "00000000-1111-2222-3333-444444444444";
        const resourceGroupName = "Default-SQL-SouthEastAsia";
        const serverName = "testsvr";
        const parameters = {
          administratorLogin: "login",
          administratorLoginPassword: "password",
          authenticationType: "Sql",
          databaseName: "testdb",
          storageKey:
            "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx==",
          storageKeyType: "StorageAccessKey",
          storageUri: "https://test.blob.core.windows.net/test.bacpac",
        };
        const credential = new DefaultAzureCredential();
        const client = new SqlManagementClient(credential, subscriptionId);
        const result = await client.servers.beginImportDatabaseAndWait(
          resourceGroupName,
          serverName,
          parameters
        );
        console.log(result);
      }

      importsToANewDatabase().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-sql_9.0.1/sdk/sql/arm-sql/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "properties": {
          "requestId": "9d9a794a-5cec-4f23-af70-d29511b522a4",
          "requestType": "Import",
          "queuedTime": "2/2/2020 8:33:27 PM",
          "lastModifiedTime": "2/2/2020 8:34:47 PM",
          "blobUri": "https://test.blob.core.windows.net/test.bacpac",
          "serverName": "testsvr.database.windows.net",
          "databaseName": "testdb",
          "status": "Completed"
        },
        "id": "/subscriptions/00000000-1111-2222-3333-444444444444/resourceGroups/Default-SQL-SouthEastAsia/providers/Microsoft.Sql/servers/testsvr/databases/testdb/importExportOperationResults/9d9a794a-5cec-4f23-af70-d29511b522a4",
        "name": "9d9a794a-5cec-4f23-af70-d29511b522a4",
        "type": "Microsoft.Sql/servers/databases/importExportOperationResults"
      }
  - statusCode: "202"
- name: Imports to a new database, using private link for the SQL server and storage account.
  request:
    uri: POST https://management.azure.com/subscriptions/00000000-1111-2222-3333-444444444444/resourceGroups/Default-SQL-SouthEastAsia/providers/Microsoft.Sql/servers/testsvr/import?api-version=2021-02-01-preview
    body: >-
      {
        "databaseName": "testdb",
        "storageKeyType": "StorageAccessKey",
        "storageKey": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx==",
        "storageUri": "https://test.blob.core.windows.net/test.bacpac",
        "administratorLogin": "login",
        "administratorLoginPassword": "password",
        "authenticationType": "Sql",
        "networkIsolation": {
          "sqlServerResourceId": "/subscriptions/00000000-1111-2222-3333-444444444444/resourceGroups/Default-SQL-SouthEastAsia/providers/Microsoft.Sql/servers/testsvr",
          "storageAccountResourceId": "/subscriptions/00000000-1111-2222-3333-444444444444/resourceGroups/Default-SQL-SouthEastAsia/providers/Microsoft.Storage/storageAccounts/test-privatelink"
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      POST https://management.azure.com/subscriptions/00000000-1111-2222-3333-444444444444/resourceGroups/Default-SQL-SouthEastAsia/providers/Microsoft.Sql/servers/testsvr/import?api-version=2021-02-01-preview

      {
        "databaseName": "testdb",
        "storageKeyType": "StorageAccessKey",
        "storageKey": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx==",
        "storageUri": "https://test.blob.core.windows.net/test.bacpac",
        "administratorLogin": "login",
        "administratorLoginPassword": "password",
        "authenticationType": "Sql",
        "networkIsolation": {
          "sqlServerResourceId": "/subscriptions/00000000-1111-2222-3333-444444444444/resourceGroups/Default-SQL-SouthEastAsia/providers/Microsoft.Sql/servers/testsvr",
          "storageAccountResourceId": "/subscriptions/00000000-1111-2222-3333-444444444444/resourceGroups/Default-SQL-SouthEastAsia/providers/Microsoft.Storage/storageAccounts/test-privatelink"
        }
      }

      ```

      # [Go](#tab/Go)
      ``` go
      package armsql_test

      import (
      	"context"
      	"log"

      	"github.com/Azure/azure-sdk-for-go/sdk/azcore/to"
      	"github.com/Azure/azure-sdk-for-go/sdk/azidentity"
      	"github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/sql/armsql"
      )

      // Generated from example definition: https://github.com/Azure/azure-rest-api-specs/tree/main/specification/sql/resource-manager/Microsoft.Sql/preview/2021-02-01-preview/examples/ImportNewDatabaseWithNetworkIsolation.json
      func ExampleServersClient_BeginImportDatabase() {
      	cred, err := azidentity.NewDefaultAzureCredential(nil)
      	if err != nil {
      		log.Fatalf("failed to obtain a credential: %v", err)
      	}
      	ctx := context.Background()
      	client, err := armsql.NewServersClient("00000000-1111-2222-3333-444444444444", cred, nil)
      	if err != nil {
      		log.Fatalf("failed to create client: %v", err)
      	}
      	poller, err := client.BeginImportDatabase(ctx,
      		"Default-SQL-SouthEastAsia",
      		"testsvr",
      		armsql.ImportNewDatabaseDefinition{
      			AdministratorLogin:         to.Ptr("login"),
      			AdministratorLoginPassword: to.Ptr("password"),
      			AuthenticationType:         to.Ptr("Sql"),
      			DatabaseName:               to.Ptr("testdb"),
      			NetworkIsolation: &armsql.NetworkIsolationSettings{
      				SQLServerResourceID:      to.Ptr("/subscriptions/00000000-1111-2222-3333-444444444444/resourceGroups/Default-SQL-SouthEastAsia/providers/Microsoft.Sql/servers/testsvr"),
      				StorageAccountResourceID: to.Ptr("/subscriptions/00000000-1111-2222-3333-444444444444/resourceGroups/Default-SQL-SouthEastAsia/providers/Microsoft.Storage/storageAccounts/test-privatelink"),
      			},
      			StorageKey:     to.Ptr("xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx=="),
      			StorageKeyType: to.Ptr(armsql.StorageKeyTypeStorageAccessKey),
      			StorageURI:     to.Ptr("https://test.blob.core.windows.net/test.bacpac"),
      		},
      		nil)
      	if err != nil {
      		log.Fatalf("failed to finish the request: %v", err)
      	}
      	res, err := poller.PollUntilDone(ctx, nil)
      	if err != nil {
      		log.Fatalf("failed to pull the result: %v", err)
      	}
      	// TODO: use response item
      	_ = res
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-go/blob/sdk%2Fresourcemanager%2Fsql%2Farmsql%2Fv1.0.0/sdk/resourcemanager/sql/armsql/README.md) on how to add the SDK to your project and authenticate.
      # [JavaScript](#tab/JavaScript)
      ``` js
      const { SqlManagementClient } = require("@azure/arm-sql");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to Imports a bacpac into a new database.
       *
       * @summary Imports a bacpac into a new database.
       * x-ms-original-file: specification/sql/resource-manager/Microsoft.Sql/preview/2021-02-01-preview/examples/ImportNewDatabaseWithNetworkIsolation.json
       */
      async function importsToANewDatabaseUsingPrivateLinkForTheSqlServerAndStorageAccount() {
        const subscriptionId = "00000000-1111-2222-3333-444444444444";
        const resourceGroupName = "Default-SQL-SouthEastAsia";
        const serverName = "testsvr";
        const parameters = {
          administratorLogin: "login",
          administratorLoginPassword: "password",
          authenticationType: "Sql",
          databaseName: "testdb",
          networkIsolation: {
            sqlServerResourceId:
              "/subscriptions/00000000-1111-2222-3333-444444444444/resourceGroups/Default-SQL-SouthEastAsia/providers/Microsoft.Sql/servers/testsvr",
            storageAccountResourceId:
              "/subscriptions/00000000-1111-2222-3333-444444444444/resourceGroups/Default-SQL-SouthEastAsia/providers/Microsoft.Storage/storageAccounts/test-privatelink",
          },
          storageKey:
            "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx==",
          storageKeyType: "StorageAccessKey",
          storageUri: "https://test.blob.core.windows.net/test.bacpac",
        };
        const credential = new DefaultAzureCredential();
        const client = new SqlManagementClient(credential, subscriptionId);
        const result = await client.servers.beginImportDatabaseAndWait(
          resourceGroupName,
          serverName,
          parameters
        );
        console.log(result);
      }

      importsToANewDatabaseUsingPrivateLinkForTheSqlServerAndStorageAccount().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-sql_9.0.1/sdk/sql/arm-sql/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "properties": {
          "requestId": "9d9a794a-5cec-4f23-af70-d29511b522a4",
          "requestType": "Import",
          "queuedTime": "2/2/2020 8:33:27 PM",
          "lastModifiedTime": "2/2/2020 8:34:47 PM",
          "blobUri": "https://test.blob.core.windows.net/test.bacpac",
          "serverName": "testsvr.database.windows.net",
          "databaseName": "testdb",
          "status": "Completed"
        },
        "id": "/subscriptions/00000000-1111-2222-3333-444444444444/resourceGroups/Default-SQL-SouthEastAsia/providers/Microsoft.Sql/servers/testsvr/databases/testdb/importExportOperationResults/9d9a794a-5cec-4f23-af70-d29511b522a4",
        "name": "9d9a794a-5cec-4f23-af70-d29511b522a4",
        "type": "Microsoft.Sql/servers/databases/importExportOperationResults"
      }
  - statusCode: "202"
security: []
metadata:
  description: Learn more about SQL Database service - Imports a bacpac into a new database.
errorCodes: []
