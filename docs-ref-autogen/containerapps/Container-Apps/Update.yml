### YamlMime:RESTOperation
uid: management.azure.com.containerapps.containerapps.update
name: Update
service: Azure Container Apps
groupName: Container Apps
apiVersion: 2022-03-01
summary: "Update properties of a Container App  \nPatches a Container App using JSON Merge Patch"
consumes:
- application/json
produces:
- application/json
paths:
- content: PATCH https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.App/containerApps/{containerAppName}?api-version=2022-03-01
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: The ID of the target subscription.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group. The name is case insensitive.
  types:
  - uid: string
- name: containerAppName
  in: path
  isRequired: true
  description: Name of the Container App.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: The API version to use for this operation.
  types:
  - uid: string
responses:
- name: 202 Accepted
  description: Patch operation is in progress.
- name: Other Status Codes
  description: Common error response.
  types:
  - uid: DefaultErrorResponse
requestBody:
- name: default
  parameters:
  - name: identity
    in: body
    description: managed identities for the Container App to interact with other Azure services without maintaining any secrets or credentials in code.
    types:
    - uid: ManagedServiceIdentity
  - name: properties.managedEnvironmentId
    in: body
    description: Resource ID of the Container App's environment.
    types:
    - uid: string
  - name: properties.configuration
    in: body
    description: Non versioned Container App configuration properties.
    types:
    - uid: Configuration
  - name: properties.template
    in: body
    description: Container App versioned application definition.
    types:
    - uid: Template
  - name: tags
    in: body
    description: Resource tags.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: location
    in: body
    isRequired: true
    description: The geo-location where the resource lives
    types:
    - uid: string
requestHeader: []
definitions:
- name: ManagedServiceIdentity
  description: Managed service identity (system assigned and/or user assigned identities)
  kind: object
  properties:
  - name: principalId
    isReadyOnly: true
    description: The service principal ID of the system assigned identity. This property will only be provided for a system assigned identity.
    types:
    - uid: string
  - name: tenantId
    isReadyOnly: true
    description: The tenant ID of the system assigned identity. This property will only be provided for a system assigned identity.
    types:
    - uid: string
  - name: type
    description: Type of managed service identity (where both SystemAssigned and UserAssigned types are allowed).
    types:
    - uid: ManagedServiceIdentityType
  - name: userAssignedIdentities
    description: "User-Assigned Identities  \nThe set of user assigned identities associated with the resource. The userAssignedIdentities dictionary keys will be ARM resource ids in the form: '/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.ManagedIdentity/userAssignedIdentities/{identityName}. The dictionary values can be empty objects ({}) in requests."
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: UserAssignedIdentity
- name: Configuration
  description: Non versioned Container App configuration properties that define the mutable settings of a Container app
  kind: object
  properties:
  - name: secrets
    description: Collection of secrets used by a Container app
    types:
    - uid: Secret
      isArray: true
  - name: activeRevisionsMode
    description: >-
      ActiveRevisionsMode controls how active revisions are handled for the Container app:

      <list><item>Multiple: multiple revisions can be active.</item><item>Single: Only one revision can be active at a time. Revision weights can not be used in this mode. If no value if provided, this is the default.</item></list>
    types:
    - uid: ActiveRevisionsMode
  - name: ingress
    description: Ingress configurations.
    types:
    - uid: Ingress
  - name: registries
    description: Collection of private container registry credentials for containers used by the Container app
    types:
    - uid: RegistryCredentials
      isArray: true
  - name: dapr
    description: Dapr configuration for the Container App.
    types:
    - uid: Dapr
- name: Template
  description: >-
    Container App versioned application definition.

    Defines the desired state of an immutable revision.

    Any changes to this section Will result in a new revision being created
  kind: object
  properties:
  - name: revisionSuffix
    description: User friendly suffix that is appended to the revision name
    types:
    - uid: string
  - name: containers
    description: List of container definitions for the Container App.
    types:
    - uid: Container
      isArray: true
  - name: scale
    description: Scaling properties for the Container App.
    types:
    - uid: Scale
  - name: volumes
    description: List of volume definitions for the Container App.
    types:
    - uid: Volume
      isArray: true
- name: systemData
  description: Metadata pertaining to creation and last modification of the resource.
  kind: object
  properties:
  - name: createdBy
    description: The identity that created the resource.
    types:
    - uid: string
  - name: createdByType
    description: The type of identity that created the resource.
    types:
    - uid: createdByType
  - name: createdAt
    description: The timestamp of resource creation (UTC).
    types:
    - uid: string
  - name: lastModifiedBy
    description: The identity that last modified the resource.
    types:
    - uid: string
  - name: lastModifiedByType
    description: The type of identity that last modified the resource.
    types:
    - uid: createdByType
  - name: lastModifiedAt
    description: The timestamp of resource last modification (UTC)
    types:
    - uid: string
- name: DefaultErrorResponse
  description: App Service error response.
  kind: object
  properties:
  - name: error
    isReadyOnly: true
    description: Error model.
    types:
    - uid: Error
- name: ContainerApp
  description: Container App.
  kind: object
  properties:
  - name: identity
    description: managed identities for the Container App to interact with other Azure services without maintaining any secrets or credentials in code.
    types:
    - uid: ManagedServiceIdentity
  - name: properties.provisioningState
    isReadyOnly: true
    description: Provisioning state of the Container App.
    types:
    - uid: ContainerAppProvisioningState
  - name: properties.managedEnvironmentId
    description: Resource ID of the Container App's environment.
    types:
    - uid: string
  - name: properties.latestRevisionName
    isReadyOnly: true
    description: Name of the latest revision of the Container App.
    types:
    - uid: string
  - name: properties.latestRevisionFqdn
    isReadyOnly: true
    description: Fully Qualified Domain Name of the latest revision of the Container App.
    types:
    - uid: string
  - name: properties.customDomainVerificationId
    isReadyOnly: true
    description: Id used to verify domain name ownership
    types:
    - uid: string
  - name: properties.configuration
    description: Non versioned Container App configuration properties.
    types:
    - uid: Configuration
  - name: properties.template
    description: Container App versioned application definition.
    types:
    - uid: Template
  - name: properties.outboundIPAddresses
    isReadyOnly: true
    description: Outbound IP Addresses for container app.
    types:
    - uid: string
      isArray: true
  - name: tags
    description: Resource tags.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: location
    description: The geo-location where the resource lives
    types:
    - uid: string
  - name: id
    isReadyOnly: true
    description: Fully qualified resource ID for the resource. Ex - /subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/{resourceProviderNamespace}/{resourceType}/{resourceName}
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: The name of the resource
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: The type of the resource. E.g. "Microsoft.Compute/virtualMachines" or "Microsoft.Storage/storageAccounts"
    types:
    - uid: string
  - name: systemData
    isReadyOnly: true
    description: Azure Resource Manager metadata containing createdBy and modifiedBy information.
    types:
    - uid: systemData
- name: ManagedServiceIdentityType
  description: Type of managed service identity (where both SystemAssigned and UserAssigned types are allowed).
  kind: enum
  properties:
  - name: None
    types:
    - uid: string
  - name: SystemAssigned
    types:
    - uid: string
  - name: UserAssigned
    types:
    - uid: string
  - name: SystemAssigned,UserAssigned
    types:
    - uid: string
- name: UserAssignedIdentity
  description: User assigned identity properties
  kind: object
  properties:
  - name: principalId
    isReadyOnly: true
    description: The principal ID of the assigned identity.
    types:
    - uid: string
  - name: clientId
    isReadyOnly: true
    description: The client ID of the assigned identity.
    types:
    - uid: string
- name: Secret
  description: Secret definition.
  kind: object
  properties:
  - name: name
    description: Secret Name.
    types:
    - uid: string
  - name: value
    description: Secret Value.
    types:
    - uid: string
- name: ActiveRevisionsMode
  description: >-
    ActiveRevisionsMode controls how active revisions are handled for the Container app:

    <list><item>Multiple: multiple revisions can be active.</item><item>Single: Only one revision can be active at a time. Revision weights can not be used in this mode. If no value if provided, this is the default.</item></list>
  kind: enum
  properties:
  - name: Multiple
    types:
    - uid: string
  - name: Single
    types:
    - uid: string
- name: Ingress
  description: Container App Ingress configuration.
  kind: object
  properties:
  - name: fqdn
    isReadyOnly: true
    description: Hostname.
    types:
    - uid: string
  - name: external
    description: Bool indicating if app exposes an external http endpoint
    types:
    - uid: boolean
    defaultValue: false
  - name: targetPort
    description: Target Port in containers for traffic from ingress
    types:
    - uid: integer
  - name: transport
    description: Ingress transport protocol
    types:
    - uid: IngressTransportMethod
  - name: traffic
    description: Traffic weights for app's revisions
    types:
    - uid: TrafficWeight
      isArray: true
  - name: customDomains
    description: custom domain bindings for Container Apps' hostnames.
    types:
    - uid: CustomDomain
      isArray: true
  - name: allowInsecure
    description: Bool indicating if HTTP connections to is allowed. If set to false HTTP connections are automatically redirected to HTTPS connections
    types:
    - uid: boolean
- name: RegistryCredentials
  description: Container App Private Registry
  kind: object
  properties:
  - name: server
    description: Container Registry Server
    types:
    - uid: string
  - name: username
    description: Container Registry Username
    types:
    - uid: string
  - name: passwordSecretRef
    description: The name of the Secret that contains the registry login password
    types:
    - uid: string
  - name: identity
    description: A Managed Identity to use to authenticate with Azure Container Registry. For user-assigned identities, use the full user-assigned identity Resource ID. For system-assigned identities, use 'system'
    types:
    - uid: string
- name: Dapr
  description: Container App Dapr configuration.
  kind: object
  properties:
  - name: enabled
    description: Boolean indicating if the Dapr side car is enabled
    types:
    - uid: boolean
  - name: appId
    description: Dapr application identifier
    types:
    - uid: string
  - name: appProtocol
    description: Tells Dapr which protocol your application is using. Valid options are http and grpc. Default is http
    types:
    - uid: appProtocol
  - name: appPort
    description: Tells Dapr which port your application is listening on
    types:
    - uid: integer
- name: Container
  description: Container App container definition.
  kind: object
  properties:
  - name: image
    description: Container image tag.
    types:
    - uid: string
  - name: name
    description: Custom container name.
    types:
    - uid: string
  - name: command
    description: Container start command.
    types:
    - uid: string
      isArray: true
  - name: args
    description: Container start command arguments.
    types:
    - uid: string
      isArray: true
  - name: env
    description: Container environment variables.
    types:
    - uid: EnvironmentVar
      isArray: true
  - name: resources
    description: Container resource requirements.
    types:
    - uid: ContainerResources
  - name: probes
    description: List of probes for the container.
    types:
    - uid: ContainerAppProbe
      isArray: true
  - name: volumeMounts
    description: Container volume mounts.
    types:
    - uid: VolumeMount
      isArray: true
- name: Scale
  description: Container App scaling configurations.
  kind: object
  properties:
  - name: minReplicas
    description: Optional. Minimum number of container replicas.
    types:
    - uid: integer
  - name: maxReplicas
    description: Optional. Maximum number of container replicas. Defaults to 10 if not set.
    types:
    - uid: integer
  - name: rules
    description: Scaling rules.
    types:
    - uid: ScaleRule
      isArray: true
- name: Volume
  description: Volume definitions for the Container App.
  kind: object
  properties:
  - name: name
    description: Volume name.
    types:
    - uid: string
  - name: storageType
    description: Storage type for the volume. If not provided, use EmptyDir.
    types:
    - uid: StorageType
  - name: storageName
    description: Name of storage resource. No need to provide for EmptyDir.
    types:
    - uid: string
- name: createdByType
  description: The type of identity that created the resource.
  kind: enum
  properties:
  - name: User
    types:
    - uid: string
  - name: Application
    types:
    - uid: string
  - name: ManagedIdentity
    types:
    - uid: string
  - name: Key
    types:
    - uid: string
- name: Error
  description: Error model.
  kind: object
  properties:
  - name: code
    isReadyOnly: true
    description: Standardized string to programmatically identify the error.
    types:
    - uid: string
  - name: message
    isReadyOnly: true
    description: Detailed error description and debugging information.
    types:
    - uid: string
  - name: target
    isReadyOnly: true
    description: Detailed error description and debugging information.
    types:
    - uid: string
  - name: details
    description: Details or the error
    types:
    - uid: Details
      isArray: true
  - name: innererror
    isReadyOnly: true
    description: More information to debug error.
    types:
    - uid: string
- name: ContainerAppProvisioningState
  description: Provisioning state of the Container App.
  kind: enum
  properties:
  - name: InProgress
    types:
    - uid: string
  - name: Succeeded
    types:
    - uid: string
  - name: Failed
    types:
    - uid: string
  - name: Canceled
    types:
    - uid: string
- name: IngressTransportMethod
  description: Ingress transport protocol
  kind: enum
  properties:
  - name: auto
    types:
    - uid: string
  - name: http
    types:
    - uid: string
  - name: http2
    types:
    - uid: string
- name: TrafficWeight
  description: Traffic weight assigned to a revision
  kind: object
  properties:
  - name: revisionName
    description: Name of a revision
    types:
    - uid: string
  - name: weight
    description: Traffic weight assigned to a revision
    types:
    - uid: integer
  - name: latestRevision
    description: Indicates that the traffic weight belongs to a latest stable revision
    types:
    - uid: boolean
    defaultValue: false
  - name: label
    description: Associates a traffic label with a revision
    types:
    - uid: string
- name: CustomDomain
  description: Custom Domain of a Container App
  kind: object
  properties:
  - name: name
    description: Hostname.
    types:
    - uid: string
  - name: bindingType
    description: Custom Domain binding type.
    types:
    - uid: bindingType
  - name: certificateId
    description: Resource Id of the Certificate to be bound to this hostname. Must exist in the Managed Environment.
    types:
    - uid: string
- name: appProtocol
  description: Tells Dapr which protocol your application is using. Valid options are http and grpc. Default is http
  kind: enum
  properties:
  - name: http
    types:
    - uid: string
  - name: grpc
    types:
    - uid: string
- name: EnvironmentVar
  description: Container App container environment variable.
  kind: object
  properties:
  - name: name
    description: Environment variable name.
    types:
    - uid: string
  - name: value
    description: Non-secret environment variable value.
    types:
    - uid: string
  - name: secretRef
    description: Name of the Container App secret from which to pull the environment variable value.
    types:
    - uid: string
- name: ContainerResources
  description: Container App container resource requirements.
  kind: object
  properties:
  - name: cpu
    description: Required CPU in cores, e.g. 0.5
    types:
    - uid: number
  - name: memory
    description: Required memory, e.g. "250Mb"
    types:
    - uid: string
  - name: ephemeralStorage
    isReadyOnly: true
    description: Ephemeral Storage, e.g. "1Gi"
    types:
    - uid: string
- name: ContainerAppProbe
  description: Probe describes a health check to be performed against a container to determine whether it is alive or ready to receive traffic.
  kind: object
  properties:
  - name: failureThreshold
    description: Minimum consecutive failures for the probe to be considered failed after having succeeded. Defaults to 3. Minimum value is 1. Maximum value is 10.
    types:
    - uid: integer
  - name: httpGet
    description: HTTPGet specifies the http request to perform.
    types:
    - uid: HttpGet
  - name: initialDelaySeconds
    description: Number of seconds after the container has started before liveness probes are initiated. Minimum value is 1. Maximum value is 60.
    types:
    - uid: integer
  - name: periodSeconds
    description: How often (in seconds) to perform the probe. Default to 10 seconds. Minimum value is 1. Maximum value is 240.
    types:
    - uid: integer
  - name: successThreshold
    description: Minimum consecutive successes for the probe to be considered successful after having failed. Defaults to 1. Must be 1 for liveness and startup. Minimum value is 1. Maximum value is 10.
    types:
    - uid: integer
  - name: tcpSocket
    description: TCPSocket specifies an action involving a TCP port. TCP hooks not yet supported.
    types:
    - uid: TcpSocket
  - name: terminationGracePeriodSeconds
    description: Optional duration in seconds the pod needs to terminate gracefully upon probe failure. The grace period is the duration in seconds after the processes running in the pod are sent a termination signal and the time when the processes are forcibly halted with a kill signal. Set this value longer than the expected cleanup time for your process. If this value is nil, the pod's terminationGracePeriodSeconds will be used. Otherwise, this value overrides the value provided by the pod spec. Value must be non-negative integer. The value zero indicates stop immediately via the kill signal (no opportunity to shut down). This is an alpha field and requires enabling ProbeTerminationGracePeriod feature gate. Maximum value is 3600 seconds (1 hour)
    types:
    - uid: integer
  - name: timeoutSeconds
    description: Number of seconds after which the probe times out. Defaults to 1 second. Minimum value is 1. Maximum value is 240.
    types:
    - uid: integer
  - name: type
    description: The type of probe.
    types:
    - uid: Type
- name: VolumeMount
  description: Volume mount for the Container App.
  kind: object
  properties:
  - name: volumeName
    description: This must match the Name of a Volume.
    types:
    - uid: string
  - name: mountPath
    description: Path within the container at which the volume should be mounted.Must not contain ':'.
    types:
    - uid: string
- name: ScaleRule
  description: Container App container scaling rule.
  kind: object
  properties:
  - name: name
    description: Scale Rule Name
    types:
    - uid: string
  - name: azureQueue
    description: Azure Queue based scaling.
    types:
    - uid: QueueScaleRule
  - name: custom
    description: Custom scale rule.
    types:
    - uid: CustomScaleRule
  - name: http
    description: HTTP requests based scaling.
    types:
    - uid: HttpScaleRule
- name: StorageType
  description: Storage type for the volume. If not provided, use EmptyDir.
  kind: enum
  properties:
  - name: AzureFile
    types:
    - uid: string
  - name: EmptyDir
    types:
    - uid: string
- name: Details
  description: Details or the error
  kind: object
  properties:
  - name: code
    isReadyOnly: true
    description: Standardized string to programmatically identify the error.
    types:
    - uid: string
  - name: message
    isReadyOnly: true
    description: Detailed error description and debugging information.
    types:
    - uid: string
  - name: target
    isReadyOnly: true
    description: Detailed error description and debugging information.
    types:
    - uid: string
- name: bindingType
  description: Custom Domain binding type.
  kind: enum
  properties:
  - name: Disabled
    types:
    - uid: string
  - name: SniEnabled
    types:
    - uid: string
- name: HttpGet
  description: HTTPGet specifies the http request to perform.
  kind: object
  properties:
  - name: host
    description: Host name to connect to, defaults to the pod IP. You probably want to set "Host" in httpHeaders instead.
    types:
    - uid: string
  - name: httpHeaders
    description: Custom headers to set in the request. HTTP allows repeated headers.
    types:
    - uid: HttpHeaders
      isArray: true
  - name: path
    description: Path to access on the HTTP server.
    types:
    - uid: string
  - name: port
    description: Name or number of the port to access on the container. Number must be in the range 1 to 65535. Name must be an IANA_SVC_NAME.
    types:
    - uid: integer
  - name: scheme
    description: Scheme to use for connecting to the host. Defaults to HTTP.
    types:
    - uid: Scheme
- name: TcpSocket
  description: TCPSocket specifies an action involving a TCP port. TCP hooks not yet supported.
  kind: object
  properties:
  - name: host
    description: 'Optional: Host name to connect to, defaults to the pod IP.'
    types:
    - uid: string
  - name: port
    description: Number or name of the port to access on the container. Number must be in the range 1 to 65535. Name must be an IANA_SVC_NAME.
    types:
    - uid: integer
- name: Type
  description: The type of probe.
  kind: enum
  properties:
  - name: Liveness
    types:
    - uid: string
  - name: Readiness
    types:
    - uid: string
  - name: Startup
    types:
    - uid: string
- name: QueueScaleRule
  description: Container App container Azure Queue based scaling rule.
  kind: object
  properties:
  - name: queueName
    description: Queue name.
    types:
    - uid: string
  - name: queueLength
    description: Queue length.
    types:
    - uid: integer
  - name: auth
    description: Authentication secrets for the queue scale rule.
    types:
    - uid: ScaleRuleAuth
      isArray: true
- name: CustomScaleRule
  description: Container App container Custom scaling rule.
  kind: object
  properties:
  - name: type
    description: >-
      Type of the custom scale rule

      eg: azure-servicebus, redis etc.
    types:
    - uid: string
  - name: metadata
    description: Metadata properties to describe custom scale rule.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: auth
    description: Authentication secrets for the custom scale rule.
    types:
    - uid: ScaleRuleAuth
      isArray: true
- name: HttpScaleRule
  description: Container App container Custom scaling rule.
  kind: object
  properties:
  - name: metadata
    description: Metadata properties to describe http scale rule.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: auth
    description: Authentication secrets for the custom scale rule.
    types:
    - uid: ScaleRuleAuth
      isArray: true
- name: HttpHeaders
  description: Custom headers to set in the request. HTTP allows repeated headers.
  kind: object
  properties:
  - name: name
    description: The header field name
    types:
    - uid: string
  - name: value
    description: The header field value
    types:
    - uid: string
- name: Scheme
  description: Scheme to use for connecting to the host. Defaults to HTTP.
  kind: enum
  properties:
  - name: HTTP
    types:
    - uid: string
  - name: HTTPS
    types:
    - uid: string
- name: ScaleRuleAuth
  description: Auth Secrets for Container App Scale Rule
  kind: object
  properties:
  - name: secretRef
    description: Name of the Container App secret from which to pull the auth params.
    types:
    - uid: string
  - name: triggerParameter
    description: Trigger Parameter that uses the secret
    types:
    - uid: string
examples:
- name: Patch Container App
  request:
    uri: PATCH https://management.azure.com/subscriptions/34adfa4f-cedf-4dc0-ba29-b6d1a69ab345/resourceGroups/rg/providers/Microsoft.App/containerApps/testcontainerApp0?api-version=2022-03-01
    body: >-
      {
        "location": "East US",
        "tags": {
          "tag1": "value1",
          "tag2": "value2"
        },
        "properties": {
          "configuration": {
            "ingress": {
              "external": true,
              "targetPort": 3000,
              "customDomains": [
                {
                  "name": "www.my-name.com",
                  "bindingType": "SniEnabled",
                  "certificateId": "/subscriptions/34adfa4f-cedf-4dc0-ba29-b6d1a69ab345/resourceGroups/rg/providers/Microsoft.App/managedEnvironments/demokube/certificates/my-certificate-for-my-name-dot-com"
                },
                {
                  "name": "www.my-other-name.com",
                  "bindingType": "SniEnabled",
                  "certificateId": "/subscriptions/34adfa4f-cedf-4dc0-ba29-b6d1a69ab345/resourceGroups/rg/providers/Microsoft.App/managedEnvironments/demokube/certificates/my-certificate-for-my-other-name-dot-com"
                }
              ],
              "traffic": [
                {
                  "weight": 100,
                  "revisionName": "testcontainerApp0-ab1234",
                  "label": "production"
                }
              ]
            },
            "dapr": {
              "enabled": true,
              "appPort": 3000,
              "appProtocol": "http"
            }
          },
          "template": {
            "containers": [
              {
                "image": "repo/testcontainerApp0:v1",
                "name": "testcontainerApp0",
                "probes": [
                  {
                    "type": "Liveness",
                    "httpGet": {
                      "path": "/health",
                      "port": 8080,
                      "httpHeaders": [
                        {
                          "name": "Custom-Header",
                          "value": "Awesome"
                        }
                      ]
                    },
                    "initialDelaySeconds": 3,
                    "periodSeconds": 3
                  }
                ]
              }
            ],
            "scale": {
              "minReplicas": 1,
              "maxReplicas": 5,
              "rules": [
                {
                  "name": "httpscalingrule",
                  "custom": {
                    "type": "http",
                    "metadata": {
                      "concurrentRequests": "50"
                    }
                  }
                }
              ]
            }
          }
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PATCH https://management.azure.com/subscriptions/34adfa4f-cedf-4dc0-ba29-b6d1a69ab345/resourceGroups/rg/providers/Microsoft.App/containerApps/testcontainerApp0?api-version=2022-03-01

      {
        "location": "East US",
        "tags": {
          "tag1": "value1",
          "tag2": "value2"
        },
        "properties": {
          "configuration": {
            "ingress": {
              "external": true,
              "targetPort": 3000,
              "customDomains": [
                {
                  "name": "www.my-name.com",
                  "bindingType": "SniEnabled",
                  "certificateId": "/subscriptions/34adfa4f-cedf-4dc0-ba29-b6d1a69ab345/resourceGroups/rg/providers/Microsoft.App/managedEnvironments/demokube/certificates/my-certificate-for-my-name-dot-com"
                },
                {
                  "name": "www.my-other-name.com",
                  "bindingType": "SniEnabled",
                  "certificateId": "/subscriptions/34adfa4f-cedf-4dc0-ba29-b6d1a69ab345/resourceGroups/rg/providers/Microsoft.App/managedEnvironments/demokube/certificates/my-certificate-for-my-other-name-dot-com"
                }
              ],
              "traffic": [
                {
                  "weight": 100,
                  "revisionName": "testcontainerApp0-ab1234",
                  "label": "production"
                }
              ]
            },
            "dapr": {
              "enabled": true,
              "appPort": 3000,
              "appProtocol": "http"
            }
          },
          "template": {
            "containers": [
              {
                "image": "repo/testcontainerApp0:v1",
                "name": "testcontainerApp0",
                "probes": [
                  {
                    "type": "Liveness",
                    "httpGet": {
                      "path": "/health",
                      "port": 8080,
                      "httpHeaders": [
                        {
                          "name": "Custom-Header",
                          "value": "Awesome"
                        }
                      ]
                    },
                    "initialDelaySeconds": 3,
                    "periodSeconds": 3
                  }
                ]
              }
            ],
            "scale": {
              "minReplicas": 1,
              "maxReplicas": 5,
              "rules": [
                {
                  "name": "httpscalingrule",
                  "custom": {
                    "type": "http",
                    "metadata": {
                      "concurrentRequests": "50"
                    }
                  }
                }
              ]
            }
          }
        }
      }

      ```

      # [Java](#tab/Java)
      ``` java
      import com.azure.core.util.Context;
      import com.azure.resourcemanager.appcontainers.fluent.models.ContainerAppInner;
      import com.azure.resourcemanager.appcontainers.models.AppProtocol;
      import com.azure.resourcemanager.appcontainers.models.BindingType;
      import com.azure.resourcemanager.appcontainers.models.Configuration;
      import com.azure.resourcemanager.appcontainers.models.Container;
      import com.azure.resourcemanager.appcontainers.models.ContainerAppProbe;
      import com.azure.resourcemanager.appcontainers.models.ContainerAppProbeHttpGet;
      import com.azure.resourcemanager.appcontainers.models.ContainerAppProbeHttpGetHttpHeadersItem;
      import com.azure.resourcemanager.appcontainers.models.CustomDomain;
      import com.azure.resourcemanager.appcontainers.models.CustomScaleRule;
      import com.azure.resourcemanager.appcontainers.models.Dapr;
      import com.azure.resourcemanager.appcontainers.models.Ingress;
      import com.azure.resourcemanager.appcontainers.models.Scale;
      import com.azure.resourcemanager.appcontainers.models.ScaleRule;
      import com.azure.resourcemanager.appcontainers.models.Template;
      import com.azure.resourcemanager.appcontainers.models.TrafficWeight;
      import com.azure.resourcemanager.appcontainers.models.Type;
      import java.util.Arrays;
      import java.util.HashMap;
      import java.util.Map;

      /** Samples for ContainerApps Update. */
      public final class Main {
          /*
           * x-ms-original-file: specification/app/resource-manager/Microsoft.App/stable/2022-03-01/examples/ContainerApps_Patch.json
           */
          /**
           * Sample code: Patch Container App.
           *
           * @param manager Entry point to ContainerAppsApiManager.
           */
          public static void patchContainerApp(com.azure.resourcemanager.appcontainers.ContainerAppsApiManager manager) {
              manager
                  .containerApps()
                  .update(
                      "rg",
                      "testcontainerApp0",
                      new ContainerAppInner()
                          .withLocation("East US")
                          .withTags(mapOf("tag1", "value1", "tag2", "value2"))
                          .withConfiguration(
                              new Configuration()
                                  .withIngress(
                                      new Ingress()
                                          .withExternal(true)
                                          .withTargetPort(3000)
                                          .withTraffic(
                                              Arrays
                                                  .asList(
                                                      new TrafficWeight()
                                                          .withRevisionName("testcontainerApp0-ab1234")
                                                          .withWeight(100)
                                                          .withLabel("production")))
                                          .withCustomDomains(
                                              Arrays
                                                  .asList(
                                                      new CustomDomain()
                                                          .withName("www.my-name.com")
                                                          .withBindingType(BindingType.SNI_ENABLED)
                                                          .withCertificateId(
                                                              "/subscriptions/34adfa4f-cedf-4dc0-ba29-b6d1a69ab345/resourceGroups/rg/providers/Microsoft.App/managedEnvironments/demokube/certificates/my-certificate-for-my-name-dot-com"),
                                                      new CustomDomain()
                                                          .withName("www.my-other-name.com")
                                                          .withBindingType(BindingType.SNI_ENABLED)
                                                          .withCertificateId(
                                                              "/subscriptions/34adfa4f-cedf-4dc0-ba29-b6d1a69ab345/resourceGroups/rg/providers/Microsoft.App/managedEnvironments/demokube/certificates/my-certificate-for-my-other-name-dot-com"))))
                                  .withDapr(new Dapr().withEnabled(true).withAppProtocol(AppProtocol.HTTP).withAppPort(3000)))
                          .withTemplate(
                              new Template()
                                  .withContainers(
                                      Arrays
                                          .asList(
                                              new Container()
                                                  .withImage("repo/testcontainerApp0:v1")
                                                  .withName("testcontainerApp0")
                                                  .withProbes(
                                                      Arrays
                                                          .asList(
                                                              new ContainerAppProbe()
                                                                  .withHttpGet(
                                                                      new ContainerAppProbeHttpGet()
                                                                          .withHttpHeaders(
                                                                              Arrays
                                                                                  .asList(
                                                                                      new ContainerAppProbeHttpGetHttpHeadersItem()
                                                                                          .withName("Custom-Header")
                                                                                          .withValue("Awesome")))
                                                                          .withPath("/health")
                                                                          .withPort(8080))
                                                                  .withInitialDelaySeconds(3)
                                                                  .withPeriodSeconds(3)
                                                                  .withType(Type.LIVENESS)))))
                                  .withScale(
                                      new Scale()
                                          .withMinReplicas(1)
                                          .withMaxReplicas(5)
                                          .withRules(
                                              Arrays
                                                  .asList(
                                                      new ScaleRule()
                                                          .withName("httpscalingrule")
                                                          .withCustom(
                                                              new CustomScaleRule()
                                                                  .withType("http")
                                                                  .withMetadata(mapOf("concurrentRequests", "50"))))))),
                      Context.NONE);
          }

          @SuppressWarnings("unchecked")
          private static <T> Map<String, T> mapOf(Object... inputs) {
              Map<String, T> map = new HashMap<>();
              for (int i = 0; i < inputs.length; i += 2) {
                  String key = (String) inputs[i];
                  T value = (T) inputs[i + 1];
                  map.put(key, value);
              }
              return map;
          }
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-java/blob/azure-resourcemanager-appcontainers_1.0.0-beta.3/sdk/appcontainers/azure-resourcemanager-appcontainers/README.md) on how to add the SDK to your project and authenticate.
      # [Go](#tab/Go)
      ``` go
      package armappcontainers_test

      import (
      	"context"
      	"log"

      	"github.com/Azure/azure-sdk-for-go/sdk/azcore/to"
      	"github.com/Azure/azure-sdk-for-go/sdk/azidentity"
      	"github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/appcontainers/armappcontainers"
      )

      // Generated from example definition: https://github.com/Azure/azure-rest-api-specs/tree/main/specification/app/resource-manager/Microsoft.App/stable/2022-03-01/examples/ContainerApps_Patch.json
      func ExampleContainerAppsClient_BeginUpdate() {
      	cred, err := azidentity.NewDefaultAzureCredential(nil)
      	if err != nil {
      		log.Fatalf("failed to obtain a credential: %v", err)
      	}
      	ctx := context.Background()
      	client, err := armappcontainers.NewContainerAppsClient("34adfa4f-cedf-4dc0-ba29-b6d1a69ab345", cred, nil)
      	if err != nil {
      		log.Fatalf("failed to create client: %v", err)
      	}
      	poller, err := client.BeginUpdate(ctx,
      		"rg",
      		"testcontainerApp0",
      		armappcontainers.ContainerApp{
      			Location: to.Ptr("East US"),
      			Tags: map[string]*string{
      				"tag1": to.Ptr("value1"),
      				"tag2": to.Ptr("value2"),
      			},
      			Properties: &armappcontainers.ContainerAppProperties{
      				Configuration: &armappcontainers.Configuration{
      					Dapr: &armappcontainers.Dapr{
      						AppPort:     to.Ptr[int32](3000),
      						AppProtocol: to.Ptr(armappcontainers.AppProtocolHTTP),
      						Enabled:     to.Ptr(true),
      					},
      					Ingress: &armappcontainers.Ingress{
      						CustomDomains: []*armappcontainers.CustomDomain{
      							{
      								Name:          to.Ptr("www.my-name.com"),
      								BindingType:   to.Ptr(armappcontainers.BindingTypeSniEnabled),
      								CertificateID: to.Ptr("/subscriptions/34adfa4f-cedf-4dc0-ba29-b6d1a69ab345/resourceGroups/rg/providers/Microsoft.App/managedEnvironments/demokube/certificates/my-certificate-for-my-name-dot-com"),
      							},
      							{
      								Name:          to.Ptr("www.my-other-name.com"),
      								BindingType:   to.Ptr(armappcontainers.BindingTypeSniEnabled),
      								CertificateID: to.Ptr("/subscriptions/34adfa4f-cedf-4dc0-ba29-b6d1a69ab345/resourceGroups/rg/providers/Microsoft.App/managedEnvironments/demokube/certificates/my-certificate-for-my-other-name-dot-com"),
      							}},
      						External:   to.Ptr(true),
      						TargetPort: to.Ptr[int32](3000),
      						Traffic: []*armappcontainers.TrafficWeight{
      							{
      								Label:        to.Ptr("production"),
      								RevisionName: to.Ptr("testcontainerApp0-ab1234"),
      								Weight:       to.Ptr[int32](100),
      							}},
      					},
      				},
      				Template: &armappcontainers.Template{
      					Containers: []*armappcontainers.Container{
      						{
      							Name:  to.Ptr("testcontainerApp0"),
      							Image: to.Ptr("repo/testcontainerApp0:v1"),
      							Probes: []*armappcontainers.ContainerAppProbe{
      								{
      									Type: to.Ptr(armappcontainers.TypeLiveness),
      									HTTPGet: &armappcontainers.ContainerAppProbeHTTPGet{
      										Path: to.Ptr("/health"),
      										HTTPHeaders: []*armappcontainers.ContainerAppProbeHTTPGetHTTPHeadersItem{
      											{
      												Name:  to.Ptr("Custom-Header"),
      												Value: to.Ptr("Awesome"),
      											}},
      										Port: to.Ptr[int32](8080),
      									},
      									InitialDelaySeconds: to.Ptr[int32](3),
      									PeriodSeconds:       to.Ptr[int32](3),
      								}},
      						}},
      					Scale: &armappcontainers.Scale{
      						MaxReplicas: to.Ptr[int32](5),
      						MinReplicas: to.Ptr[int32](1),
      						Rules: []*armappcontainers.ScaleRule{
      							{
      								Name: to.Ptr("httpscalingrule"),
      								Custom: &armappcontainers.CustomScaleRule{
      									Type: to.Ptr("http"),
      									Metadata: map[string]*string{
      										"concurrentRequests": to.Ptr("50"),
      									},
      								},
      							}},
      					},
      				},
      			},
      		},
      		nil)
      	if err != nil {
      		log.Fatalf("failed to finish the request: %v", err)
      	}
      	_, err = poller.PollUntilDone(ctx, nil)
      	if err != nil {
      		log.Fatalf("failed to pull the result: %v", err)
      	}
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-go/blob/sdk%2Fresourcemanager%2Fappcontainers%2Farmappcontainers%2Fv1.0.0/sdk/resourcemanager/appcontainers/armappcontainers/README.md) on how to add the SDK to your project and authenticate.
      # [JavaScript](#tab/JavaScript)
      ``` js
      const { ContainerAppsAPIClient } = require("@azure/arm-appcontainers");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to Patches a Container App using JSON Merge Patch
       *
       * @summary Patches a Container App using JSON Merge Patch
       * x-ms-original-file: specification/app/resource-manager/Microsoft.App/stable/2022-03-01/examples/ContainerApps_Patch.json
       */
      async function patchContainerApp() {
        const subscriptionId = "34adfa4f-cedf-4dc0-ba29-b6d1a69ab345";
        const resourceGroupName = "rg";
        const containerAppName = "testcontainerApp0";
        const containerAppEnvelope = {
          configuration: {
            dapr: { appPort: 3000, appProtocol: "http", enabled: true },
            ingress: {
              customDomains: [
                {
                  name: "www.my-name.com",
                  bindingType: "SniEnabled",
                  certificateId:
                    "/subscriptions/34adfa4f-cedf-4dc0-ba29-b6d1a69ab345/resourceGroups/rg/providers/Microsoft.App/managedEnvironments/demokube/certificates/my-certificate-for-my-name-dot-com",
                },
                {
                  name: "www.my-other-name.com",
                  bindingType: "SniEnabled",
                  certificateId:
                    "/subscriptions/34adfa4f-cedf-4dc0-ba29-b6d1a69ab345/resourceGroups/rg/providers/Microsoft.App/managedEnvironments/demokube/certificates/my-certificate-for-my-other-name-dot-com",
                },
              ],
              external: true,
              targetPort: 3000,
              traffic: [
                {
                  label: "production",
                  revisionName: "testcontainerApp0-ab1234",
                  weight: 100,
                },
              ],
            },
          },
          location: "East US",
          tags: { tag1: "value1", tag2: "value2" },
          template: {
            containers: [
              {
                name: "testcontainerApp0",
                image: "repo/testcontainerApp0:v1",
                probes: [
                  {
                    type: "Liveness",
                    httpGet: {
                      path: "/health",
                      httpHeaders: [{ name: "Custom-Header", value: "Awesome" }],
                      port: 8080,
                    },
                    initialDelaySeconds: 3,
                    periodSeconds: 3,
                  },
                ],
              },
            ],
            scale: {
              maxReplicas: 5,
              minReplicas: 1,
              rules: [
                {
                  name: "httpscalingrule",
                  custom: { type: "http", metadata: { concurrentRequests: "50" } },
                },
              ],
            },
          },
        };
        const credential = new DefaultAzureCredential();
        const client = new ContainerAppsAPIClient(credential, subscriptionId);
        const result = await client.containerApps.beginUpdateAndWait(
          resourceGroupName,
          containerAppName,
          containerAppEnvelope
        );
        console.log(result);
      }

      patchContainerApp().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-appcontainers_1.1.0/sdk/appcontainers/arm-appcontainers/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "202"
    headers:
    - name: azure-asyncoperation
      value: https://management.azure.com/subscriptions/34adfa4f-cedf-4dc0-ba29-b6d1a69ab345/providers/Microsoft.App/locations/eastus/containerappOperationResults/62e4d893-d233-4005-988e-a428d9f77076?api-version=2022-03-01
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: >
    Learn more about Azure Container Apps service - Update properties of a Container App

    Patches a Container App using JSON Merge Patch
errorCodes: []
