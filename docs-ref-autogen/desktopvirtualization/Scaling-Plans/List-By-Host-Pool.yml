### YamlMime:RESTOperation
uid: management.azure.com.desktopvirtualization.scalingplans.listbyhostpool
name: List By Host Pool
service: Desktop Virtualization
groupName: Scaling Plans
apiVersion: 2022-02-10-preview
summary: List scaling plan associated with hostpool.
consumes:
- application/json
produces:
- application/json
paths:
- content: GET https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.DesktopVirtualization/hostPools/{hostPoolName}/scalingPlans?api-version=2022-02-10-preview
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: The ID of the target subscription.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group. The name is case insensitive.
  types:
  - uid: string
- name: hostPoolName
  in: path
  isRequired: true
  description: The name of the host pool within the specified resource group
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: The API version to use for this operation.
  types:
  - uid: string
responses:
- name: 200 OK
  description: Successfully retrieved scaling plan associated with hostpool.
  types:
  - uid: ScalingPlanList
- name: Other Status Codes
  description: Automation error response describing why the operation failed.
  types:
  - uid: CloudError
requestHeader: []
definitions:
- name: ScalingPlanList
  description: ScalingPlanList
  kind: object
  properties:
  - name: value
    description: List of scaling plan definitions.
    types:
    - uid: ScalingPlan
      isArray: true
  - name: nextLink
    isReadyOnly: true
    description: Link to the next page of results.
    types:
    - uid: string
- name: CloudError
  description: Cloud error object.
  kind: object
  properties:
  - name: error
    description: Cloud error object properties.
    types:
    - uid: CloudErrorProperties
- name: ScalingPlan
  description: ScalingPlan
  kind: object
  properties:
  - name: systemData
    isReadyOnly: true
    description: Metadata pertaining to creation and last modification of the resource.
    types:
    - uid: systemData
  - name: properties.objectId
    isReadyOnly: true
    description: ObjectId of scaling plan. (internal use)
    types:
    - uid: string
  - name: properties.description
    description: Description of scaling plan.
    types:
    - uid: string
  - name: properties.friendlyName
    description: User friendly name of scaling plan.
    types:
    - uid: string
  - name: properties.timeZone
    description: Timezone of the scaling plan.
    types:
    - uid: string
  - name: properties.hostPoolType
    description: HostPool type for desktop.
    types:
    - uid: ScalingHostPoolType
  - name: properties.exclusionTag
    description: Exclusion tag for scaling plan.
    types:
    - uid: string
  - name: properties.schedules
    description: List of ScalingSchedule definitions.
    types:
    - uid: ScalingSchedule
      isArray: true
  - name: properties.hostPoolReferences
    description: List of ScalingHostPoolReference definitions.
    types:
    - uid: ScalingHostPoolReference
      isArray: true
  - name: id
    isReadyOnly: true
    description: Fully qualified resource ID for the resource. Ex - /subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/{resourceProviderNamespace}/{resourceType}/{resourceName}
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: The name of the resource
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: The type of the resource. E.g. "Microsoft.Compute/virtualMachines" or "Microsoft.Storage/storageAccounts"
    types:
    - uid: string
  - name: location
    description: The geo-location where the resource lives
    types:
    - uid: string
  - name: managedBy
    description: The fully qualified resource ID of the resource that manages this resource. Indicates if this resource is managed by another Azure resource. If this is present, complete mode deployment will not delete the resource if it is removed from the template since it is managed by another resource.
    types:
    - uid: string
  - name: kind
    description: Metadata used by portal/tooling/etc to render different UX experiences for resources of the same type; e.g. ApiApps are a kind of Microsoft.Web/sites type.  If supported, the resource provider must validate and persist this value.
    types:
    - uid: string
  - name: etag
    isReadyOnly: true
    description: 'The etag field is *not* required. If it is provided in the response body, it must also be provided as a header per the normal etag convention.  Entity tags are used for comparing two or more entities from the same requested resource. HTTP/1.1 uses entity tags in the etag (section 14.19), If-Match (section 14.24), If-None-Match (section 14.26), and If-Range (section 14.27) header fields. '
    types:
    - uid: string
  - name: tags
    description: Resource tags.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: identity
    description: ''
    types:
    - uid: Identity
  - name: sku
    description: ''
    types:
    - uid: Sku
  - name: plan
    description: ''
    types:
    - uid: Plan
- name: CloudErrorProperties
  description: Cloud error object properties.
  kind: object
  properties:
  - name: code
    description: Error code
    types:
    - uid: string
  - name: message
    description: Error message indicating why the operation failed.
    types:
    - uid: string
- name: systemData
  description: Metadata pertaining to creation and last modification of the resource.
  kind: object
  properties:
  - name: createdBy
    description: The identity that created the resource.
    types:
    - uid: string
  - name: createdByType
    description: The type of identity that created the resource.
    types:
    - uid: createdByType
  - name: createdAt
    description: The timestamp of resource creation (UTC).
    types:
    - uid: string
  - name: lastModifiedBy
    description: The identity that last modified the resource.
    types:
    - uid: string
  - name: lastModifiedByType
    description: The type of identity that last modified the resource.
    types:
    - uid: createdByType
  - name: lastModifiedAt
    description: The timestamp of resource last modification (UTC)
    types:
    - uid: string
- name: ScalingHostPoolType
  description: HostPool type for desktop.
  kind: enum
  properties:
  - name: Pooled
    description: Users get a new (random) SessionHost every time it connects to the HostPool.
    types:
    - uid: string
- name: ScalingSchedule
  description: Scaling plan schedule.
  kind: object
  properties:
  - name: name
    description: Name of the scaling schedule.
    types:
    - uid: string
  - name: daysOfWeek
    description: Set of days of the week on which this schedule is active.
    types:
    - uid: string
      isArray: true
  - name: rampUpStartTime
    description: Starting time for ramp up period.
    types:
    - uid: Time
  - name: rampUpLoadBalancingAlgorithm
    description: Load balancing algorithm for ramp up period.
    types:
    - uid: SessionHostLoadBalancingAlgorithm
  - name: rampUpMinimumHostsPct
    description: Minimum host percentage for ramp up period.
    types:
    - uid: integer
  - name: rampUpCapacityThresholdPct
    description: Capacity threshold for ramp up period.
    types:
    - uid: integer
  - name: peakStartTime
    description: Starting time for peak period.
    types:
    - uid: Time
  - name: peakLoadBalancingAlgorithm
    description: Load balancing algorithm for peak period.
    types:
    - uid: SessionHostLoadBalancingAlgorithm
  - name: rampDownStartTime
    description: Starting time for ramp down period.
    types:
    - uid: Time
  - name: rampDownLoadBalancingAlgorithm
    description: Load balancing algorithm for ramp down period.
    types:
    - uid: SessionHostLoadBalancingAlgorithm
  - name: rampDownMinimumHostsPct
    description: Minimum host percentage for ramp down period.
    types:
    - uid: integer
  - name: rampDownCapacityThresholdPct
    description: Capacity threshold for ramp down period.
    types:
    - uid: integer
  - name: rampDownForceLogoffUsers
    description: Should users be logged off forcefully from hosts.
    types:
    - uid: boolean
  - name: rampDownStopHostsWhen
    description: Specifies when to stop hosts during ramp down period.
    types:
    - uid: StopHostsWhen
  - name: rampDownWaitTimeMinutes
    description: Number of minutes to wait to stop hosts during ramp down period.
    types:
    - uid: integer
  - name: rampDownNotificationMessage
    description: Notification message for users during ramp down period.
    types:
    - uid: string
  - name: offPeakStartTime
    description: Starting time for off-peak period.
    types:
    - uid: Time
  - name: offPeakLoadBalancingAlgorithm
    description: Load balancing algorithm for off-peak period.
    types:
    - uid: SessionHostLoadBalancingAlgorithm
- name: ScalingHostPoolReference
  description: Scaling plan reference to hostpool.
  kind: object
  properties:
  - name: hostPoolArmPath
    description: Arm path of referenced hostpool.
    types:
    - uid: string
  - name: scalingPlanEnabled
    description: Is the scaling plan enabled for this hostpool.
    types:
    - uid: boolean
- name: Identity
  kind: object
  properties:
  - name: principalId
    isReadyOnly: true
    description: The principal ID of resource identity.
    types:
    - uid: string
  - name: tenantId
    isReadyOnly: true
    description: The tenant ID of resource.
    types:
    - uid: string
  - name: type
    description: The identity type.
    types:
    - uid: ResourceIdentityType
- name: Sku
  kind: object
  properties:
  - name: name
    description: The name of the SKU. Ex - P3. It is typically a letter+number code
    types:
    - uid: string
  - name: tier
    description: This field is required to be implemented by the Resource Provider if the service has more than one tier, but is not required on a PUT.
    types:
    - uid: SkuTier
  - name: size
    description: 'The SKU size. When the name field is the combination of tier and some other value, this would be the standalone code. '
    types:
    - uid: string
  - name: family
    description: If the service has different generations of hardware, for the same SKU, then that can be captured here.
    types:
    - uid: string
  - name: capacity
    description: If the SKU supports scale out/in then the capacity integer should be included. If scale out/in is not possible for the resource this may be omitted.
    types:
    - uid: integer
- name: Plan
  kind: object
  properties:
  - name: name
    description: A user defined name of the 3rd Party Artifact that is being procured.
    types:
    - uid: string
  - name: publisher
    description: The publisher of the 3rd Party Artifact that is being bought. E.g. NewRelic
    types:
    - uid: string
  - name: product
    description: 'The 3rd Party artifact that is being procured. E.g. NewRelic. Product maps to the OfferID specified for the artifact at the time of Data Market onboarding. '
    types:
    - uid: string
  - name: promotionCode
    description: A publisher provided promotion code as provisioned in Data Market for the said product/artifact.
    types:
    - uid: string
  - name: version
    description: The version of the desired product/artifact.
    types:
    - uid: string
- name: createdByType
  description: The type of identity that created the resource.
  kind: enum
  properties:
  - name: User
    types:
    - uid: string
  - name: Application
    types:
    - uid: string
  - name: ManagedIdentity
    types:
    - uid: string
  - name: Key
    types:
    - uid: string
- name: Time
  description: The time for a scaling action to occur.
  kind: object
  properties:
  - name: hour
    description: The hour.
    types:
    - uid: integer
  - name: minute
    description: The minute.
    types:
    - uid: integer
- name: SessionHostLoadBalancingAlgorithm
  description: Load balancing algorithm for ramp up period.
  kind: enum
  properties:
  - name: BreadthFirst
    types:
    - uid: string
  - name: DepthFirst
    types:
    - uid: string
- name: StopHostsWhen
  description: Specifies when to stop hosts during ramp down period.
  kind: enum
  properties:
  - name: ZeroSessions
    types:
    - uid: string
  - name: ZeroActiveSessions
    types:
    - uid: string
- name: ResourceIdentityType
  description: The identity type.
  kind: enum
  properties:
  - name: SystemAssigned
    types:
    - uid: string
- name: SkuTier
  description: This field is required to be implemented by the Resource Provider if the service has more than one tier, but is not required on a PUT.
  kind: enum
  properties:
  - name: Free
    types:
    - uid: string
  - name: Basic
    types:
    - uid: string
  - name: Standard
    types:
    - uid: string
  - name: Premium
    types:
    - uid: string
examples:
- name: ScalingPlan_ListByHostPool
  request:
    uri: GET https://management.azure.com/subscriptions/daefabc0-95b4-48b3-b645-8a753a63c4fa/resourceGroups/resourceGroup1/providers/Microsoft.DesktopVirtualization/hostPools/hostPool1/scalingPlans?api-version=2022-02-10-preview
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      GET https://management.azure.com/subscriptions/daefabc0-95b4-48b3-b645-8a753a63c4fa/resourceGroups/resourceGroup1/providers/Microsoft.DesktopVirtualization/hostPools/hostPool1/scalingPlans?api-version=2022-02-10-preview
      ```

      # [Go](#tab/Go)
      ``` go
      package armdesktopvirtualization_test

      import (
      	"context"
      	"log"

      	"github.com/Azure/azure-sdk-for-go/sdk/azidentity"
      	"github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/desktopvirtualization/armdesktopvirtualization/v2"
      )

      // Generated from example definition: https://github.com/Azure/azure-rest-api-specs/tree/main/specification/desktopvirtualization/resource-manager/Microsoft.DesktopVirtualization/preview/2022-02-10-preview/examples/ScalingPlan_ListByHostPool.json
      func ExampleScalingPlansClient_NewListByHostPoolPager() {
      	cred, err := azidentity.NewDefaultAzureCredential(nil)
      	if err != nil {
      		log.Fatalf("failed to obtain a credential: %v", err)
      	}
      	ctx := context.Background()
      	client, err := armdesktopvirtualization.NewScalingPlansClient("daefabc0-95b4-48b3-b645-8a753a63c4fa", cred, nil)
      	if err != nil {
      		log.Fatalf("failed to create client: %v", err)
      	}
      	pager := client.NewListByHostPoolPager("resourceGroup1",
      		"hostPool1",
      		nil)
      	for pager.More() {
      		nextResult, err := pager.NextPage(ctx)
      		if err != nil {
      			log.Fatalf("failed to advance page: %v", err)
      		}
      		for _, v := range nextResult.Value {
      			// TODO: use page item
      			_ = v
      		}
      	}
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-go/blob/sdk%2Fresourcemanager%2Fdesktopvirtualization%2Farmdesktopvirtualization%2Fv2.0.0-beta.1/sdk/resourcemanager/desktopvirtualization/armdesktopvirtualization/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "value": [
          {
            "name": "scalingPlan1",
            "id": "/subscriptions/daefabc0-95b4-48b3-b645-8a753a63c4fa/resourceGroups/resourceGroup1/providers/Microsoft.DesktopVirtualization/scalingPlans/scalingPlan1",
            "type": "Microsoft.DesktopVirtualization/scalingPlans",
            "location": "centralus",
            "tags": {
              "key1": "value1",
              "key2": "value2"
            },
            "systemData": {
              "createdBy": "user1",
              "createdByType": "User",
              "createdAt": "2020-01-01T17:18:19.1234567Z",
              "lastModifiedBy": "user2",
              "lastModifiedByType": "User",
              "lastModifiedAt": "2020-01-02T17:18:19.1234567Z"
            },
            "properties": {
              "objectId": "00000000-0000-0000-0000-000000000000",
              "description": "Description of Scaling Plan",
              "friendlyName": "Scaling Plan 1",
              "timeZone": "Central Standard Time",
              "hostPoolType": "Pooled",
              "exclusionTag": "value",
              "schedules": [
                {
                  "name": "schedule1",
                  "daysOfWeek": [
                    "Monday",
                    "Tuesday",
                    "Wednesday",
                    "Thursday",
                    "Friday"
                  ],
                  "rampUpStartTime": {
                    "hour": 6,
                    "minute": 0
                  },
                  "rampUpLoadBalancingAlgorithm": "DepthFirst",
                  "rampUpMinimumHostsPct": 20,
                  "rampUpCapacityThresholdPct": 80,
                  "peakStartTime": {
                    "hour": 8,
                    "minute": 0
                  },
                  "peakLoadBalancingAlgorithm": "BreadthFirst",
                  "rampDownStartTime": {
                    "hour": 18,
                    "minute": 0
                  },
                  "rampDownLoadBalancingAlgorithm": "DepthFirst",
                  "rampDownMinimumHostsPct": 20,
                  "rampDownCapacityThresholdPct": 50,
                  "rampDownForceLogoffUsers": true,
                  "rampDownWaitTimeMinutes": 30,
                  "rampDownNotificationMessage": "message",
                  "offPeakStartTime": {
                    "hour": 20,
                    "minute": 0
                  },
                  "offPeakLoadBalancingAlgorithm": "DepthFirst"
                }
              ],
              "hostPoolReferences": [
                {
                  "hostPoolArmPath": "/subscriptions/daefabc0-95b4-48b3-b645-8a753a63c4fa/resourceGroups/resourceGroup1/providers/Microsoft.DesktopVirtualization/hostPools/hostPool1",
                  "scalingPlanEnabled": true
                }
              ]
            }
          }
        ]
      }
security: []
metadata:
  description: Learn more about Desktop Virtualization service - List scaling plan associated with hostpool.
errorCodes: []
