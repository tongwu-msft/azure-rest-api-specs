### YamlMime:RESTOperation
uid: management.azure.com.azurestack.subscriptions.createorupdate
name: Create Or Update
service: Azure Stack Admin
groupName: Subscriptions
apiVersion: 2015-11-01
summary: Creates or updates the specified subscription.
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://management.azure.com/subscriptions/{subscriptionId}/providers/Microsoft.Subscriptions.Admin/subscriptions/{targetSubscriptionId}?api-version=2015-11-01
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: Subscription credentials which uniquely identify Microsoft Azure subscription.The subscription ID forms part of the URI for every service call.
  types:
  - uid: string
- name: targetSubscriptionId
  in: path
  isRequired: true
  description: The target subscription ID.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: Client Api Version.
  types:
  - uid: string
responses:
- name: 200 OK
  description: OK
  types:
  - uid: SubscriptionDefinition
- name: 201 Created
  description: Created
  types:
  - uid: SubscriptionDefinition
- name: Other Status Codes
  description: Unexpected Error
  types:
  - uid: Error
requestBody:
- name: default
  parameters:
  - name: delegatedProviderSubscriptionId
    in: body
    description: Parent DelegatedProvider subscription identifier.
    types:
    - uid: string
  - name: displayName
    in: body
    description: Subscription name.
    types:
    - uid: string
  - name: id
    in: body
    description: Fully qualified identifier.
    types:
    - uid: string
  - name: externalReferenceId
    in: body
    description: External reference identifier.
    types:
    - uid: string
  - name: offerId
    in: body
    description: Identifier of the offer under the scope of a delegated provider.
    types:
    - uid: string
  - name: owner
    in: body
    description: Subscription owner.
    types:
    - uid: string
  - name: routingResourceManagerType
    in: body
    description: Routing resource manager type.
    types:
    - uid: ResourceManagerType
  - name: state
    in: body
    description: Subscription state.
    types:
    - uid: SubscriptionState
  - name: subscriptionId
    in: body
    description: Subscription identifier.
    types:
    - uid: string
  - name: tenantId
    in: body
    description: Directory tenant identifier.
    types:
    - uid: string
requestHeader: []
definitions:
- name: SubscriptionDefinition
  description: Subscription object properties.
  kind: object
  properties:
  - name: delegatedProviderSubscriptionId
    description: Parent DelegatedProvider subscription identifier.
    types:
    - uid: string
  - name: displayName
    description: Subscription name.
    types:
    - uid: string
  - name: id
    description: Fully qualified identifier.
    types:
    - uid: string
  - name: externalReferenceId
    description: External reference identifier.
    types:
    - uid: string
  - name: offerId
    description: Identifier of the offer under the scope of a delegated provider.
    types:
    - uid: string
  - name: owner
    description: Subscription owner.
    types:
    - uid: string
  - name: routingResourceManagerType
    description: Routing resource manager type.
    types:
    - uid: ResourceManagerType
  - name: state
    description: Subscription state.
    types:
    - uid: SubscriptionState
  - name: subscriptionId
    description: Subscription identifier.
    types:
    - uid: string
  - name: tenantId
    description: Directory tenant identifier.
    types:
    - uid: string
- name: Error
  description: Error response.
  kind: object
  properties:
  - name: error
    description: The error details.
    types:
    - uid: ErrorDefinition
- name: ResourceManagerType
  description: Resource manager type.
  kind: enum
  properties:
  - name: Default
    types:
    - uid: string
  - name: Admin
    types:
    - uid: string
- name: SubscriptionState
  description: Subscription notification state.
  kind: enum
  properties:
  - name: NotDefined
    description: This state is not used in Azure Stack.
    types:
    - uid: string
  - name: Enabled
    description: Subscription is active. New resources can be created.
    types:
    - uid: string
  - name: Warned
    description: This state is not used in Azure Stack.
    types:
    - uid: string
  - name: PastDue
    description: This state is not used in Azure Stack.
    types:
    - uid: string
  - name: Disabled
    description: Subscription is not active and usage is not reported. Resources are shut down (VMs stopped and deallocated, IP addresses are freed, etc). During this period, the Azure Stack Operator can re-enable the subscription which allows creation of new resources but doesn’t automatically restore disabled resources.
    types:
    - uid: string
  - name: Deleted
    description: Final state of subscription. All resources and data are deleted. This state cannot be reversed.
    types:
    - uid: string
  - name: Deleting
    description: This state is unique to Azure Stack and is only visible to the Azure Stack Operator, and if used, to the respective Delegated Provider. Resources and Data are being deleted before subscription state is set to Deleted. This state cannot be reversed. It means that deletion is in progress.
    types:
    - uid: string
  - name: PartiallyDeleted
    description: This state is unique to Azure Stack and is only visible to the Azure Stack Operator, and if used, to the respective Delegated Provider. It means that deletion failed.  You can’t reverse the deletion process, so in this state all you can do is restart deletion.  This state is not reported to RPs.
    types:
    - uid: string
- name: ErrorDefinition
  description: Error definition.
  kind: object
  properties:
  - name: code
    isReadyOnly: true
    description: Service specific error code which serves as the substatus for the HTTP error code.
    types:
    - uid: string
  - name: message
    isReadyOnly: true
    description: Description of the error.
    types:
    - uid: string
  - name: details
    isReadyOnly: true
    description: Internal error details.
    types:
    - uid: ErrorDefinition
      isArray: true
examples:
- name: Creates or updates the specified subscription.
  request:
    uri: PUT https://management.azure.com/subscriptions/20ff7fc3-e762-44dd-bd96-b71116dcdc23/providers/Microsoft.Subscriptions.Admin/subscriptions/c79389af-4480-48cc-8fa2-ee8ced8e843d?api-version=2015-11-01
    body: >-
      {
        "delegatedProviderSubscriptionId": "d16dfcf0-44cc-4498-9937-08b94159d27b",
        "displayName": "Test Subscription",
        "id": "/subscriptions/d16dfcf0-44cc-4498-9937-08b94159d27b/providers/Microsoft.Subscriptions.Admin/subscriptions/c79389af-4480-48cc-8fa2-ee8ced8e843d",
        "offerId": "/subscriptions/d16dfcf0-44cc-4498-9937-08b94159d27b/resourceGroups/planrg/providers/Microsoft.Subscriptions.Admin/offers/testoffer",
        "owner": "tenantadmin1@msazurestack.onmicrosoft.com",
        "routingResourceManagerType": "Default",
        "state": "Enabled"
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/20ff7fc3-e762-44dd-bd96-b71116dcdc23/providers/Microsoft.Subscriptions.Admin/subscriptions/c79389af-4480-48cc-8fa2-ee8ced8e843d?api-version=2015-11-01

      {
        "delegatedProviderSubscriptionId": "d16dfcf0-44cc-4498-9937-08b94159d27b",
        "displayName": "Test Subscription",
        "id": "/subscriptions/d16dfcf0-44cc-4498-9937-08b94159d27b/providers/Microsoft.Subscriptions.Admin/subscriptions/c79389af-4480-48cc-8fa2-ee8ced8e843d",
        "offerId": "/subscriptions/d16dfcf0-44cc-4498-9937-08b94159d27b/resourceGroups/planrg/providers/Microsoft.Subscriptions.Admin/offers/testoffer",
        "owner": "tenantadmin1@msazurestack.onmicrosoft.com",
        "routingResourceManagerType": "Default",
        "state": "Enabled"
      }

      ```

  responses:
  - statusCode: "201"
    body: >-
      {
        "id": "/subscriptions/d16dfcf0-44cc-4498-9937-08b94159d27b/providers/Microsoft.Subscriptions.Admin/subscriptions/c79389af-4480-48cc-8fa2-ee8ced8e843d",
        "subscriptionId": "c79389af-4480-48cc-8fa2-ee8ced8e843d",
        "delegatedProviderSubscriptionId": "d16dfcf0-44cc-4498-9937-08b94159d27b",
        "displayName": "Test Subscription",
        "owner": "tenantadmin1@msazurestack.onmicrosoft.com",
        "tenantId": "104edf09-7fc1-459f-8c4e-b062db480b90",
        "routingResourceManagerType": "Default",
        "offerId": "/subscriptions/d16dfcf0-44cc-4498-9937-08b94159d27b/resourceGroups/planrg/providers/Microsoft.Subscriptions.Admin/offers/testoffer",
        "state": "Enabled"
      }
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/d16dfcf0-44cc-4498-9937-08b94159d27b/providers/Microsoft.Subscriptions.Admin/subscriptions/c79389af-4480-48cc-8fa2-ee8ced8e843d",
        "subscriptionId": "c79389af-4480-48cc-8fa2-ee8ced8e843d",
        "delegatedProviderSubscriptionId": "d16dfcf0-44cc-4498-9937-08b94159d27b",
        "displayName": "Test Subscription",
        "owner": "tenantadmin1@msazurestack.onmicrosoft.com",
        "tenantId": "104edf09-7fc1-459f-8c4e-b062db480b90",
        "routingResourceManagerType": "Default",
        "offerId": "/subscriptions/d16dfcf0-44cc-4498-9937-08b94159d27b/resourceGroups/planrg/providers/Microsoft.Subscriptions.Admin/offers/testoffer",
        "state": "Enabled"
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: Learn more about Azure Stack Admin service - Creates or updates the specified subscription.
errorCodes: []
