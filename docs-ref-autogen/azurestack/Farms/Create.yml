### YamlMime:RESTOperation
uid: adminmanagement.local.azurestack.external.azurestack.farms.create
name: Create
service: Azure Stack Admin
groupName: Farms
apiVersion: 2015-12-01-preview
summary: Create a new storage farm.
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://adminmanagement.local.azurestack.external/subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/Microsoft.Storage.Admin/farms/{farmId}?api-version=2015-12-01-preview
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: Subscription Id.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: Resource group name.
  types:
  - uid: string
- name: farmId
  in: path
  isRequired: true
  description: Farm Id.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: REST Api Version.
  types:
  - uid: string
responses:
- name: 200 OK
  description: OK -- The new storage farm has been created.
  types:
  - uid: Farm
requestBody:
- name: default
  parameters:
  - name: properties.settingAccessString
    in: body
    description: Setting access string.
    types:
    - uid: string
  - name: id
    in: body
    description: Resource ID.
    types:
    - uid: string
  - name: name
    in: body
    description: Resource Name.
    types:
    - uid: string
  - name: type
    in: body
    description: Resource type.
    types:
    - uid: string
  - name: location
    in: body
    description: Resource location.
    types:
    - uid: string
  - name: tags
    in: body
    description: Resource tags.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
requestHeader: []
definitions:
- name: Farm
  description: Storage farm.
  kind: object
  properties:
  - name: properties.farmId
    description: Farm identifier.
    types:
    - uid: string
  - name: properties.version
    description: Resource version.
    types:
    - uid: string
  - name: properties.settingsStore
    description: The settings of storage farm.
    types:
    - uid: string
  - name: properties.settings.settingsPollingIntervalInSecond
    description: The polling interval (in second).
    types:
    - uid: integer
  - name: properties.settings.retentionPeriodForDeletedStorageAccountsInDays
    description: The retention period (in days) for deleted storage account.
    types:
    - uid: integer
  - name: properties.settings.hostStyleHttpPort
    description: Host style HTTP port.
    types:
    - uid: integer
  - name: properties.settings.hostStyleHttpsPort
    description: Host style HTTPs port.
    types:
    - uid: integer
  - name: properties.settings.corsAllowedOriginsList
    description: The list of allowed origins.
    types:
    - uid: string
  - name: properties.settings.dataCenterUriHostSuffixes
    description: The suffixes of URI of hosts in data center.
    types:
    - uid: string
  - name: properties.settings.bandwidthThrottleIsEnabled
    description: Switch of bandwidth throttle enablement.
    types:
    - uid: boolean
  - name: properties.settings.usageCollectionIntervalInSeconds
    description: Interval (in seconds) of storage usage collection.
    types:
    - uid: integer
  - name: properties.settings.feedbackRefreshIntervalInSeconds
    description: Interval (in seconds) of feedback refresh.
    types:
    - uid: integer
  - name: properties.settings.numberOfAccountsToSync
    description: Number of accounts to sync.
    types:
    - uid: integer
  - name: properties.settings.defaultThrottleProbabilityDecayIntervalInSeconds
    description: Interval (in seconds) of default throttle probability decay.
    types:
    - uid: integer
  - name: properties.settings.gracePeriodForFullThrottlingInRefreshIntervals
    description: Grace period for full throttling in refresh intervals.
    types:
    - uid: integer
  - name: properties.settings.gracePeriodMaxThrottleProbability
    description: Maximum probability of throttle in grace period.
    types:
    - uid: number
  - name: properties.settings.overallRequestThresholdInTps
    description: Overall request threshold (in TPS).
    types:
    - uid: number
  - name: properties.settings.defaultRequestThresholdInTps
    description: Default request threshold (in TPS).
    types:
    - uid: number
  - name: properties.settings.minimumRequestThresholdInTps
    description: Minimum request threshold (in TPS).
    types:
    - uid: number
  - name: properties.settings.toleranceFactorForTps
    description: Tolerance factor for TPS.
    types:
    - uid: number
  - name: properties.settings.overallIngressThresholdInGbps
    description: Overall ingress threshold (in Gbps)
    types:
    - uid: number
  - name: properties.settings.defaultIngressThresholdInGbps
    description: Default ingress threshold (in Gbps).
    types:
    - uid: number
  - name: properties.settings.minimumIngressThresholdInGbps
    description: Minimum ingress threshold (in Gbps).
    types:
    - uid: number
  - name: properties.settings.toleranceFactorForIngress
    description: Tolerance factor for ingress.
    types:
    - uid: number
  - name: properties.settings.overallIntranetIngressThresholdInGbps
    description: Overall Intranet ingress threshold (in Gbps).
    types:
    - uid: number
  - name: properties.settings.defaultIntranetIngressThresholdInGbps
    description: Default Intranet ingress threshold (in Gbps).
    types:
    - uid: number
  - name: properties.settings.minimumIntranetIngressThresholdInGbps
    description: Minimum Intranet ingress threshold (in Gbps).
    types:
    - uid: number
  - name: properties.settings.toleranceFactorForIntranetIngress
    description: Tolerance factor for Intranet ingress.
    types:
    - uid: number
  - name: properties.settings.overallEgressThresholdInGbps
    description: Overall egress threshold (in Gbps).
    types:
    - uid: number
  - name: properties.settings.defaultEgressThresholdInGbps
    description: Default egress threshold (in Gbps).
    types:
    - uid: number
  - name: properties.settings.minimumEgressThresholdInGbps
    description: Minimum egress threshold (in Gbps).
    types:
    - uid: number
  - name: properties.settings.toleranceFactorForEgress
    description: Tolerance factor for egress.
    types:
    - uid: number
  - name: properties.settings.overallIntranetEgressThresholdInGbps
    description: Overall Intranet egress threshold (in Gbps).
    types:
    - uid: number
  - name: properties.settings.defaultIntranetEgressThresholdInGbps
    description: Default Intranet egress threshold (in Gbps).
    types:
    - uid: number
  - name: properties.settings.minimumIntranetEgressThresholdInGbps
    description: Minimum Intranet egress threshold (in Gbps).
    types:
    - uid: number
  - name: properties.settings.toleranceFactorForIntranetEgress
    description: Tolerance factor for Intranet egress.
    types:
    - uid: number
  - name: properties.settings.overallTotalIngressThresholdInGbps
    description: Overall total ingress threshold (in Gbps).
    types:
    - uid: number
  - name: properties.settings.defaultTotalIngressThresholdInGbps
    description: Default total ingress threshold (in Gbps).
    types:
    - uid: number
  - name: properties.settings.minimumTotalIngressThresholdInGbps
    description: Minimum total ingress threshold (in Gbps).
    types:
    - uid: number
  - name: properties.settings.toleranceFactorForTotalIngress
    description: Tolerance factor for total ingress.
    types:
    - uid: number
  - name: properties.settings.overallTotalEgressThresholdInGbps
    description: Overall total egress threshold (in Gbps).
    types:
    - uid: number
  - name: properties.settings.defaultTotalEgressThresholdInGbps
    description: Default total egress threshold (in Gbps).
    types:
    - uid: number
  - name: properties.settings.minimumTotalEgressThresholdInGbps
    description: Minimum total egress threshold (in Gbp
    types:
    - uid: number
  - name: properties.settings.toleranceFactorForTotalEgress
    description: Tolerance factor for total egress.
    types:
    - uid: number
  - name: id
    description: Resource ID.
    types:
    - uid: string
  - name: name
    description: Resource Name.
    types:
    - uid: string
  - name: type
    description: Resource type.
    types:
    - uid: string
  - name: location
    description: Resource location.
    types:
    - uid: string
  - name: tags
    description: Resource tags.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
- name: FarmCreationProperties
  description: Storage farm properties.
  kind: object
  properties:
  - name: properties.settingAccessString
    description: Setting access string.
    types:
    - uid: string
  - name: id
    description: Resource ID.
    types:
    - uid: string
  - name: name
    description: Resource Name.
    types:
    - uid: string
  - name: type
    description: Resource type.
    types:
    - uid: string
  - name: location
    description: Resource location.
    types:
    - uid: string
  - name: tags
    description: Resource tags.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
examples:
- name: Create a new storage farm.
  request:
    uri: PUT https://adminmanagement.local.azurestack.external/subscriptions/9ad61516-995c-4873-a21f-7e44904f0ed2/resourcegroups/System.local/providers/Microsoft.Storage.Admin/farms/3cf03497-c44a-4e51-a56f-3987d88c70af?api-version=2015-12-01-preview
    body: >-
      {
        "properties": {
          "settingAccessString": "local"
        }
      }
  responses:
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/9ad61516-995c-4873-a21f-7e44904f0ed2/resourceGroups/System.local/providers/Microsoft.Storage.Admin/farms/3cf03497-c44a-4e51-a56f-3987d88c70af",
        "name": "3cf03497-c44a-4e51-a56f-3987d88c70af",
        "type": "Microsoft.Storage.Admin/farms",
        "location": "local",
        "properties": {
          "farmId": "3cf03497-c44a-4e51-a56f-3987d88c70af",
          "version": "2015-12-01-preview",
          "settingsStore": "AzS-ACS01.azurestack.local:19000",
          "settings": {
            "settingsPollingIntervalInSecond": 60,
            "retentionPeriodForDeletedStorageAccountsInDays": 0,
            "hostStyleHttpPort": 0,
            "hostStyleHttpsPort": 0,
            "corsAllowedOriginsList": "https://adminportal.local.azurestack.external/;https://adminportal.local.azurestack.external:12649/;https://portal.local.azurestack.external/;https://portal.local.azurestack.external:12649/",
            "dataCenterUriHostSuffixes": "local.azurestack.external",
            "bandwidthThrottleIsEnabled": false,
            "usageCollectionIntervalInSeconds": 10,
            "feedbackRefreshIntervalInSeconds": 10,
            "numberOfAccountsToSync": 20,
            "defaultThrottleProbabilityDecayIntervalInSeconds": 240,
            "gracePeriodForFullThrottlingInRefreshIntervals": 3,
            "gracePeriodMaxThrottleProbability": 0.9,
            "overallRequestThresholdInTps": 10000,
            "defaultRequestThresholdInTps": 200,
            "minimumRequestThresholdInTps": 1,
            "toleranceFactorForTps": 2,
            "overallIngressThresholdInGbps": 25,
            "defaultIngressThresholdInGbps": 2,
            "minimumIngressThresholdInGbps": 0.0008,
            "toleranceFactorForIngress": 2,
            "overallIntranetIngressThresholdInGbps": 25,
            "defaultIntranetIngressThresholdInGbps": 2,
            "minimumIntranetIngressThresholdInGbps": 0.0008,
            "toleranceFactorForIntranetIngress": 2,
            "overallEgressThresholdInGbps": 30,
            "defaultEgressThresholdInGbps": 3,
            "minimumEgressThresholdInGbps": 0.0008,
            "toleranceFactorForEgress": 2,
            "overallIntranetEgressThresholdInGbps": 30,
            "defaultIntranetEgressThresholdInGbps": 3,
            "minimumIntranetEgressThresholdInGbps": 0.0008,
            "toleranceFactorForIntranetEgress": 2,
            "overallTotalIngressThresholdInGbps": 50,
            "defaultTotalIngressThresholdInGbps": 5,
            "minimumTotalIngressThresholdInGbps": 0.0008,
            "toleranceFactorForTotalIngress": 2,
            "overallTotalEgressThresholdInGbps": 50,
            "defaultTotalEgressThresholdInGbps": 5,
            "minimumTotalEgressThresholdInGbps": 0.0008,
            "toleranceFactorForTotalEgress": 2
          }
        }
      }
security:
- name: azure_auth
  type: oauth2
  description: Authorization uses an Azure Active Directory OAuth2 flow.
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
errorCodes: []
