### YamlMime:RESTOperation
uid: management.azure.com.netapp.pools.createorupdate
name: Create Or Update
service: Azure NetApp Files
groupName: Pools
apiVersion: 2021-10-01
summary: "Create or Update the specified capacity pool within the resource group  \nCreate or Update a capacity pool"
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.NetApp/netAppAccounts/{accountName}/capacityPools/{poolName}?api-version=2021-10-01
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: Subscription credentials which uniquely identify Microsoft Azure subscription. The subscription ID forms part of the URI for every service call.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group.
  types:
  - uid: string
  pattern: ^[-\w\._\(\)]+$
- name: accountName
  in: path
  isRequired: true
  description: The name of the NetApp account
  types:
  - uid: string
- name: poolName
  in: path
  isRequired: true
  description: The name of the capacity pool
  types:
  - uid: string
  pattern: ^[a-zA-Z0-9][a-zA-Z0-9\-_]{0,63}$
- name: api-version
  in: query
  isRequired: true
  description: The API version to use for this operation.
  types:
  - uid: string
responses:
- name: 200 OK
  description: OK - pool updated
  types:
  - uid: capacityPool
- name: 201 Created
  description: Pool created
  types:
  - uid: capacityPool
- name: Other Status Codes
  description: Error response describing why the operation failed.
requestBody:
- name: default
  parameters:
  - name: properties.size
    in: body
    isRequired: true
    description: "size  \nProvisioned size of the pool (in bytes). Allowed values are in 1TiB chunks (value must be multiply of 4398046511104)."
    types:
    - uid: integer
  - name: properties.serviceLevel
    in: body
    isRequired: true
    description: "serviceLevel  \nThe service level of the file system"
    types:
    - uid: ServiceLevel
  - name: properties.qosType
    in: body
    description: "qosType  \nThe qos type of the pool"
    types:
    - uid: qosType
  - name: properties.coolAccess
    in: body
    description: If enabled (true) the pool can contain cool Access enabled volumes.
    types:
    - uid: boolean
  - name: properties.encryptionType
    in: body
    description: "encryptionType  \nEncryption type of the capacity pool, set encryption type for data at rest for this pool and all volumes in it. This value can only be set when creating new pool."
    types:
    - uid: encryptionType
  - name: tags
    in: body
    description: Resource tags.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: location
    in: body
    isRequired: true
    description: The geo-location where the resource lives
    types:
    - uid: string
requestHeader: []
definitions:
- name: capacityPool
  description: Capacity pool resource
  kind: object
  properties:
  - name: etag
    isReadyOnly: true
    description: A unique read-only string that changes whenever the resource is updated.
    types:
    - uid: string
  - name: properties.poolId
    isReadyOnly: true
    description: "poolId  \nUUID v4 used to identify the Pool"
    types:
    - uid: string
  - name: properties.size
    description: "size  \nProvisioned size of the pool (in bytes). Allowed values are in 1TiB chunks (value must be multiply of 4398046511104)."
    types:
    - uid: integer
    defaultValue: 4398046511104
  - name: properties.serviceLevel
    description: "serviceLevel  \nThe service level of the file system"
    types:
    - uid: ServiceLevel
    defaultValue: Premium
  - name: properties.provisioningState
    isReadyOnly: true
    description: Azure lifecycle management
    types:
    - uid: string
  - name: properties.totalThroughputMibps
    isReadyOnly: true
    description: Total throughput of pool in Mibps
    types:
    - uid: number
  - name: properties.utilizedThroughputMibps
    isReadyOnly: true
    description: Utilized throughput of pool in Mibps
    types:
    - uid: number
  - name: properties.qosType
    description: "qosType  \nThe qos type of the pool"
    types:
    - uid: qosType
    defaultValue: Auto
  - name: properties.coolAccess
    description: If enabled (true) the pool can contain cool Access enabled volumes.
    types:
    - uid: boolean
    defaultValue: false
  - name: properties.encryptionType
    description: "encryptionType  \nEncryption type of the capacity pool, set encryption type for data at rest for this pool and all volumes in it. This value can only be set when creating new pool."
    types:
    - uid: encryptionType
    defaultValue: Single
  - name: tags
    description: Resource tags.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: location
    description: The geo-location where the resource lives
    types:
    - uid: string
  - name: id
    isReadyOnly: true
    description: Fully qualified resource ID for the resource. Ex - /subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/{resourceProviderNamespace}/{resourceType}/{resourceName}
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: The name of the resource
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: The type of the resource. E.g. "Microsoft.Compute/virtualMachines" or "Microsoft.Storage/storageAccounts"
    types:
    - uid: string
- name: ServiceLevel
  description: serviceLevel
  kind: enum
  properties:
  - name: Standard
    description: Standard service level
    types:
    - uid: string
  - name: Premium
    description: Premium service level
    types:
    - uid: string
  - name: Ultra
    description: Ultra service level
    types:
    - uid: string
  - name: StandardZRS
    description: Zone redundant storage service level
    types:
    - uid: string
- name: qosType
  description: qosType
  kind: enum
  properties:
  - name: Auto
    description: qos type Auto
    types:
    - uid: string
  - name: Manual
    description: qos type Manual
    types:
    - uid: string
- name: encryptionType
  description: encryptionType
  kind: enum
  properties:
  - name: Single
    description: EncryptionType Single, volumes will use single encryption at rest
    types:
    - uid: string
  - name: Double
    description: EncryptionType Double, volumes will use double encryption at rest
    types:
    - uid: string
examples:
- name: Pools_CreateOrUpdate
  request:
    uri: PUT https://management.azure.com/subscriptions/D633CC2E-722B-4AE1-B636-BBD9E4C60ED9/resourceGroups/myRG/providers/Microsoft.NetApp/netAppAccounts/account1/capacityPools/pool1?api-version=2021-10-01
    body: >-
      {
        "location": "eastus",
        "properties": {
          "size": 4398046511104,
          "serviceLevel": "Premium",
          "qosType": "Auto"
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/D633CC2E-722B-4AE1-B636-BBD9E4C60ED9/resourceGroups/myRG/providers/Microsoft.NetApp/netAppAccounts/account1/capacityPools/pool1?api-version=2021-10-01

      {
        "location": "eastus",
        "properties": {
          "size": 4398046511104,
          "serviceLevel": "Premium",
          "qosType": "Auto"
        }
      }

      ```

      # [Java](#tab/Java)
      ``` java
      import com.azure.resourcemanager.netapp.models.QosType;
      import com.azure.resourcemanager.netapp.models.ServiceLevel;

      /** Samples for Pools CreateOrUpdate. */
      public final class Main {
          /*
           * x-ms-original-file: specification/netapp/resource-manager/Microsoft.NetApp/stable/2021-10-01/examples/Pools_CreateOrUpdate.json
           */
          /**
           * Sample code: Pools_CreateOrUpdate.
           *
           * @param manager Entry point to NetAppFilesManager.
           */
          public static void poolsCreateOrUpdate(com.azure.resourcemanager.netapp.NetAppFilesManager manager) {
              manager
                  .pools()
                  .define("pool1")
                  .withRegion("eastus")
                  .withExistingNetAppAccount("myRG", "account1")
                  .withSize(4398046511104L)
                  .withServiceLevel(ServiceLevel.PREMIUM)
                  .withQosType(QosType.AUTO)
                  .create();
          }
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-java/blob/azure-resourcemanager-netapp_1.0.0-beta.8/sdk/netapp/azure-resourcemanager-netapp/README.md) on how to add the SDK to your project and authenticate.
      # [Go](#tab/Go)
      ``` go
      package armnetapp_test

      import (
      	"context"
      	"log"

      	"github.com/Azure/azure-sdk-for-go/sdk/azcore/to"
      	"github.com/Azure/azure-sdk-for-go/sdk/azidentity"
      	"github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/netapp/armnetapp"
      )

      // Generated from example definition: https://github.com/Azure/azure-rest-api-specs/tree/main/specification/netapp/resource-manager/Microsoft.NetApp/stable/2021-10-01/examples/Pools_CreateOrUpdate.json
      func ExamplePoolsClient_BeginCreateOrUpdate() {
      	cred, err := azidentity.NewDefaultAzureCredential(nil)
      	if err != nil {
      		log.Fatalf("failed to obtain a credential: %v", err)
      	}
      	ctx := context.Background()
      	client, err := armnetapp.NewPoolsClient("D633CC2E-722B-4AE1-B636-BBD9E4C60ED9", cred, nil)
      	if err != nil {
      		log.Fatalf("failed to create client: %v", err)
      	}
      	poller, err := client.BeginCreateOrUpdate(ctx,
      		"myRG",
      		"account1",
      		"pool1",
      		armnetapp.CapacityPool{
      			Location: to.Ptr("eastus"),
      			Properties: &armnetapp.PoolProperties{
      				QosType:      to.Ptr(armnetapp.QosTypeAuto),
      				ServiceLevel: to.Ptr(armnetapp.ServiceLevelPremium),
      				Size:         to.Ptr[int64](4398046511104),
      			},
      		},
      		nil)
      	if err != nil {
      		log.Fatalf("failed to finish the request: %v", err)
      	}
      	res, err := poller.PollUntilDone(ctx, nil)
      	if err != nil {
      		log.Fatalf("failed to pull the result: %v", err)
      	}
      	// TODO: use response item
      	_ = res
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-go/blob/sdk%2Fresourcemanager%2Fnetapp%2Farmnetapp%2Fv1.0.0/sdk/resourcemanager/netapp/armnetapp/README.md) on how to add the SDK to your project and authenticate.
      # [JavsScirpt](#tab/JavsScirpt)
      ``` js
      const { NetAppManagementClient } = require("@azure/arm-netapp");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to Create or Update a capacity pool
       *
       * @summary Create or Update a capacity pool
       * x-ms-original-file: specification/netapp/resource-manager/Microsoft.NetApp/stable/2021-10-01/examples/Pools_CreateOrUpdate.json
       */
      async function poolsCreateOrUpdate() {
        const subscriptionId = "D633CC2E-722B-4AE1-B636-BBD9E4C60ED9";
        const resourceGroupName = "myRG";
        const accountName = "account1";
        const poolName = "pool1";
        const body = {
          location: "eastus",
          qosType: "Auto",
          serviceLevel: "Premium",
          size: 4398046511104,
        };
        const credential = new DefaultAzureCredential();
        const client = new NetAppManagementClient(credential, subscriptionId);
        const result = await client.pools.beginCreateOrUpdateAndWait(
          resourceGroupName,
          accountName,
          poolName,
          body
        );
        console.log(result);
      }

      poolsCreateOrUpdate().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-netapp_15.1.1/sdk/netapp/arm-netapp/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/D633CC2E-722B-4AE1-B636-BBD9E4C60ED9/resourceGroups/myRG/providers/Microsoft.NetApp/netAppAccounts/account1/capacityPools/pool1",
        "name": "account1/pool1",
        "type": "Microsoft.NetApp/netAppAccounts/capacityPools",
        "location": "eastus",
        "properties": {
          "provisioningState": "Succeeded",
          "poolId": "9760acf5-4638-11e7-9bdb-020073ca7778",
          "serviceLevel": "Premium",
          "size": 4398046511104,
          "qosType": "Auto",
          "totalThroughputMibps": 281.474
        }
      }
  - statusCode: "201"
    body: >-
      {
        "id": "/subscriptions/D633CC2E-722B-4AE1-B636-BBD9E4C60ED9/resourceGroups/myRG/providers/Microsoft.NetApp/netAppAccounts/account1/capacityPools/pool1",
        "name": "account1/pool1",
        "type": "Microsoft.NetApp/netAppAccounts/capacityPools",
        "location": "eastus",
        "properties": {
          "provisioningState": "Succeeded",
          "poolId": "9760acf5-4638-11e7-9bdb-020073ca7778",
          "serviceLevel": "Premium",
          "size": 4398046511104,
          "qosType": "Auto",
          "totalThroughputMibps": 281.474
        }
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: "Create or Update the specified capacity pool within the resource group  \nCreate or Update a capacity pool"
errorCodes: []
