### YamlMime:RESTOperation
uid: management.azure.com.reserved-vm-instances.autoquotaincrease.create
name: Create
service: Reserved VM Instances
groupName: Auto Quota Increase
apiVersion: 2019-07-19-preview
summary: Sets the Auto Quota Increase enrollment properties for the specified subscription.
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://management.azure.com/subscriptions/{subscriptionId}/providers/Microsoft.Capacity/autoQuotaIncrease?api-version=2019-07-19-preview
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: Azure subscription id.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: API version.
  types:
  - uid: string
responses:
- name: 200 OK
  description: Ok. Returning the updated status of auto quota increase request.
  types:
  - uid: AutoQuotaIncreaseDetail
- name: Other Status Codes
  description: Error response describing why the operation failed.
  types:
  - uid: ExceptionResponse
requestBody:
- name: default
  parameters:
  - name: properties.settings
    in: body
    description: Settings for automatic quota increase.
    types:
    - uid: aqiSettings
  - name: properties.onFailure
    in: body
    description: The on failure Actions.
    types:
    - uid: Actions
  - name: properties.onSuccess
    in: body
    description: The on success Actions.
    types:
    - uid: Actions
  - name: properties.supportTicketAction
    in: body
    description: The support ticket action.
    types:
    - uid: SupportRequestAction
requestHeader: []
definitions:
- name: aqiSettings
  description: Settings for auto quota increase.
  kind: object
  properties:
  - name: autoQuotaIncreaseState
    description: If the subscription has enabled automatic quota increase.
    types:
    - uid: AqiStateType
- name: Actions
  description: The actions for auto quota increase.
  kind: object
  properties:
  - name: emailActions
    description: The email actions for auto quota increase.
    types:
    - uid: EmailActions
- name: SupportRequestAction
  description: The SupportRequest action.
  kind: object
  properties:
  - name: autoQuotaIncreaseState
    description: Is support request action enabled.
    types:
    - uid: AqiStateType
  - name: severity
    description: The support request severity.
    types:
    - uid: SeverityType
  - name: firstName
    description: The first name of the recipient.
    types:
    - uid: string
  - name: lastName
    description: The last name of the recipient.
    types:
    - uid: string
  - name: country
    description: The country of the recipient.
    types:
    - uid: string
  - name: phoneNumber
    description: The phone number of the recipient.
    types:
    - uid: string
  - name: primaryEmailAddress
    description: The primary email addresses of the recipients.
    types:
    - uid: string
  - name: supportLanguage
    description: The support language.
    types:
    - uid: string
  - name: preferredContactMethod
    description: The preferred communication channel.
    types:
    - uid: ContactMethodType
  - name: alternateEmailAddresses
    description: The alternate email address of the recipient.
    types:
    - uid: string
      isArray: true
- name: AutoQuotaIncreaseDetail
  description: Auto Quota Increase settings.
  kind: object
  properties:
  - name: id
    isReadyOnly: true
    description: The subscription Id.
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: The name of the auto quota increase.
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: The type of the resource
    types:
    - uid: string
  - name: properties.settings
    description: Settings for automatic quota increase.
    types:
    - uid: aqiSettings
  - name: properties.onFailure
    description: The on failure Actions.
    types:
    - uid: Actions
  - name: properties.onSuccess
    description: The on success Actions.
    types:
    - uid: Actions
  - name: properties.supportTicketAction
    description: The support ticket action.
    types:
    - uid: SupportRequestAction
- name: ExceptionResponse
  description: The api error.
  kind: object
  properties:
  - name: error
    description: The api error details.
    types:
    - uid: ServiceError
- name: AqiStateType
  description: If the subscription has enabled automatic quota increase.
  kind: enum
  properties:
  - name: enabled
    types:
    - uid: string
  - name: enabledForPreview
    types:
    - uid: string
  - name: disabled
    types:
    - uid: string
- name: EmailActions
  description: The email actions.
  kind: object
  properties:
  - name: emailAddresses
    description: The list of email actions.
    types:
    - uid: EmailAction
      isArray: true
- name: SeverityType
  description: The support request severity.
  kind: enum
  properties:
  - name: Critical
    types:
    - uid: string
  - name: Moderate
    types:
    - uid: string
  - name: Minimal
    types:
    - uid: string
- name: ContactMethodType
  description: The preferred communication channel.
  kind: enum
  properties:
  - name: Email
    types:
    - uid: string
  - name: Phone
    types:
    - uid: string
- name: ServiceError
  description: The api error details.
  kind: object
  properties:
  - name: code
    description: The error code.
    types:
    - uid: string
  - name: message
    description: The error message.
    types:
    - uid: string
  - name: details
    isReadyOnly: true
    description: The list of error details.
    types:
    - uid: ServiceErrorDetail
      isArray: true
- name: EmailAction
  description: Email Action.
  kind: object
  properties:
  - name: emailAddress
    description: The email address for the action.
    types:
    - uid: string
- name: ServiceErrorDetail
  description: The error details.
  kind: object
  properties:
  - name: code
    isReadyOnly: true
    description: The error code.
    types:
    - uid: string
  - name: message
    isReadyOnly: true
    description: The error message.
    types:
    - uid: string
examples:
- name: SetAutoQuotaIncreaseSettings
  request:
    uri: PUT https://management.azure.com/subscriptions/D7EC67B3-7657-4966-BFFC-41EFD36BAAB3/providers/Microsoft.Capacity/autoQuotaIncrease?api-version=2019-07-19-preview
    body: >-
      {
        "properties": {
          "settings": {
            "autoQuotaIncreaseState": "enabledForPreview"
          },
          "onSuccess": {
            "emailActions": {
              "emailAddresses": [
                {
                  "emailAddress": "itsupport@contoso.com"
                },
                {
                  "emailAddress": "admin3@contoso.com"
                }
              ]
            }
          },
          "onFailure": {
            "emailActions": {
              "emailAddresses": [
                {
                  "emailAddress": "itsupport@contoso.com"
                },
                {
                  "emailAddress": "admin2@contoso.com"
                }
              ]
            }
          },
          "supportTicketAction": {
            "autoQuotaIncreaseState": "enabledForPreview",
            "severity": "Minimal",
            "firstName": "FN",
            "lastName": "LN",
            "country": "US",
            "supportLanguage": "en-us",
            "phoneNumber": "123-456-7890",
            "primaryEmailAddress": "admin2@contoso.com",
            "alternateEmailAddresses": [
              "admin@contoso.com",
              "admin3@contoso.com"
            ],
            "preferredContactMethod": "Phone"
          }
        }
      }
  responses:
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/D7EC67B3-7657-4966-BFFC-41EFD36BAAB3/providers/Microsoft.Capacity/autoQuotaIncrease",
        "type": "Microsoft.Capacity/autoQuotaIncrease",
        "name": "Automatic Quota Increase",
        "properties": {
          "settings": {
            "autoQuotaIncreaseState": "enabledForPreview"
          },
          "onSuccess": {
            "emailActions": {
              "emailAddresses": [
                {
                  "emailAddress": "itsupport@contoso.com"
                },
                {
                  "emailAddress": "admin2@contoso.com"
                }
              ]
            }
          },
          "onFailure": {
            "emailActions": {
              "emailAddresses": [
                {
                  "emailAddress": "itsupport@contoso.com"
                },
                {
                  "emailAddress": "admin2@contoso.com"
                }
              ]
            }
          },
          "supportTicketAction": {
            "autoQuotaIncreaseState": "enabledForPreview",
            "severity": "Minimal",
            "firstName": "FN",
            "lastName": "LN",
            "country": "US",
            "supportLanguage": "en-us",
            "phoneNumber": "123-456-7890",
            "primaryEmailAddress": "admin2@contoso.com",
            "alternateEmailAddresses": [
              "admin@contoso.com",
              "admin3@contoso.com"
            ],
            "preferredContactMethod": "Phone"
          }
        }
      }
- name: TurnOffAutoQuotaIncrease
  request:
    uri: PUT https://management.azure.com/subscriptions/D7EC67B3-7657-4966-BFFC-41EFD36BAAB3/providers/Microsoft.Capacity/autoQuotaIncrease?api-version=2019-07-19-preview
    body: >-
      {
        "properties": {
          "settings": {
            "autoQuotaIncreaseState": "disabled"
          },
          "onSuccess": {
            "emailActions": {
              "emailAddresses": [
                {
                  "emailAddress": "itsupport@contoso.com"
                },
                {
                  "emailAddress": "admin2@contoso.com"
                }
              ]
            }
          },
          "onFailure": {
            "emailActions": {
              "emailAddresses": [
                {
                  "emailAddress": "itsupport@contoso.com"
                },
                {
                  "emailAddress": "admin3@contoso.com"
                }
              ]
            }
          },
          "supportTicketAction": {
            "autoQuotaIncreaseState": "disabled",
            "severity": "Minimal",
            "firstName": "FN",
            "lastName": "LN",
            "country": "US",
            "supportLanguage": "en-us",
            "phoneNumber": "123-456-7890",
            "primaryEmailAddress": "admin3@contoso.com",
            "alternateEmailAddresses": [
              "admin@contoso.com",
              "admin3@contoso.com"
            ],
            "preferredContactMethod": "Phone"
          }
        }
      }
  responses:
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/D7EC67B3-7657-4966-BFFC-41EFD36BAAB3/providers/Microsoft.Capacity/autoQuotaIncrease",
        "type": "Microsoft.Capacity/autoQuotaIncrease",
        "name": "Automatic Quota Increase",
        "properties": {
          "settings": {
            "autoQuotaIncreaseState": "disabled"
          },
          "onSuccess": {
            "emailActions": {
              "emailAddresses": [
                {
                  "emailAddress": "itsupport@contoso.com"
                },
                {
                  "emailAddress": "admin2@contoso.com"
                }
              ]
            }
          },
          "onFailure": {
            "emailActions": {
              "emailAddresses": [
                {
                  "emailAddress": "itsupport@contoso.com"
                },
                {
                  "emailAddress": "admin3@contoso.com"
                }
              ]
            }
          },
          "supportTicketAction": {
            "autoQuotaIncreaseState": "disabled",
            "severity": "Minimal",
            "firstName": "FN",
            "lastName": "LN",
            "country": "US",
            "supportLanguage": "en-us",
            "phoneNumber": "123-456-7890",
            "primaryEmailAddress": "admin3@contoso.com",
            "alternateEmailAddresses": [
              "admin@contoso.com",
              "admin3@contoso.com"
            ],
            "preferredContactMethod": "Phone"
          }
        }
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
errorCodes: []
