### YamlMime:RESTOperation
uid: cognitiveservices.formrecognizer.traincustommodel.traincustommodel
name: Train Custom Model
service: Cognitive Services
groupName: Train Custom Model
apiVersion: 1.0-preview
summary: "Train Model  \nCreate and train a custom model. The train request must include a source parameter that is either an externally accessible Azure Storage blob container Uri (preferably a Shared Access Signature Uri) or valid path to a data folder in a locally mounted drive. When local paths are specified, they must follow the Linux/Unix path format and be an absolute path rooted to the input mount configuration\n setting value e.g., if '{Mounts:Input}' configuration setting value is '/input' then a valid source path would be '/input/contosodataset'. All data to be trained is expected to be directly under the source folder. Subfolders are not supported. Models are trained using documents that are of the following content type - 'application/pdf', 'image/jpeg' and 'image/png'.\"\n Other type of content is ignored."
consumes:
- application/json
produces:
- application/json
paths:
- content: POST {Endpoint}/formrecognizer/v1.0-preview/custom/train
uriParameters:
- name: Endpoint
  in: path
  isRequired: true
  skipUrlEncoding: true
  description: 'Supported Cognitive Services endpoints (protocol and hostname, for example: https://westus2.api.cognitive.microsoft.com).'
  types:
  - uid: string
responses:
- name: 200 OK
  description: Success
  types:
  - uid: TrainResult
- name: Other Status Codes
  description: Response entity accompanying non-successful responses containing additional details about the error.
  types:
  - uid: ErrorResponse
requestBody:
- name: default
  parameters:
  - name: source
    in: body
    isRequired: true
    description: Get or set source path.
    types:
    - uid: string
  - name: sourceFilter
    in: body
    description: >-
      Get or set filter to further search the

      source path for content.
    types:
    - uid: TrainSourceFilter
requestHeader:
- name: Ocp-Apim-Subscription-Key
  in: header
  isRequired: true
  types:
  - uid: string
definitions:
- name: TrainSourceFilter
  description: Filters to be applied when traversing a data source.
  kind: object
  properties:
  - name: prefix
    description: >-
      A case-sensitive prefix string to filter content

      under the source location. For e.g., when using a Azure Blob

      Uri use the prefix to restrict subfolders for content.
    types:
    - uid: string
  - name: includeSubFolders
    description: >-
      A flag to indicate if sub folders within the set of

      prefix folders will also need to be included when searching

      for content to be preprocessed.
    types:
    - uid: boolean
- name: TrainResult
  description: Response of the Train API call.
  kind: object
  properties:
  - name: modelId
    description: Identifier of the model.
    types:
    - uid: string
  - name: trainingDocuments
    description: >-
      List of documents used to train the model and the

      train operation error reported by each.
    types:
    - uid: FormDocumentReport
      isArray: true
  - name: errors
    description: Errors returned during the training operation.
    types:
    - uid: FormOperationError
      isArray: true
- name: ErrorResponse
  kind: object
  properties:
  - name: error
    description: ''
    types:
    - uid: ErrorInformation
- name: TrainRequest
  description: Contract to initiate a train request.
  kind: object
  properties:
  - name: source
    description: Get or set source path.
    types:
    - uid: string
  - name: sourceFilter
    description: >-
      Get or set filter to further search the

      source path for content.
    types:
    - uid: TrainSourceFilter
- name: FormDocumentReport
  kind: object
  properties:
  - name: documentName
    description: Reference to the data that the report is for.
    types:
    - uid: string
  - name: pages
    description: Total number of pages trained on.
    types:
    - uid: integer
  - name: errors
    description: List of errors per page.
    types:
    - uid: string
      isArray: true
  - name: status
    description: Status of the training operation.
    types:
    - uid: success
    - uid: partialSuccess
    - uid: failure
    typesTitle: enum
- name: FormOperationError
  description: Error reported during an operation.
  kind: object
  properties:
  - name: errorMessage
    description: Message reported during the train operation.
    types:
    - uid: string
- name: ErrorInformation
  kind: object
  properties:
  - name: code
    description: ''
    types:
    - uid: string
  - name: innerError
    description: ''
    types:
    - uid: InnerError
  - name: message
    description: ''
    types:
    - uid: string
- name: InnerError
  kind: object
  properties:
  - name: requestId
    description: ''
    types:
    - uid: string
examples:
- name: Train new model example
  request:
    uri: POST {Endpoint}/formrecognizer/v1.0-preview/custom/train
    body: >-
      {
        "source": "/input/data"
      }
    headers:
    - name: Ocp-Apim-Subscription-Key
      value: '{API key}'
  responses:
  - statusCode: "200"
    body: >-
      {
        "modelId": "ad1901b6-ddaa-4249-8938-3f03f65cc893",
        "trainingDocuments": [
          {
            "documentName": "0.pdf",
            "pages": 1,
            "errors": [],
            "status": "success"
          },
          {
            "documentName": "1.pdf",
            "pages": 1,
            "errors": [],
            "status": "success"
          },
          {
            "documentName": "2.pdf",
            "pages": 1,
            "errors": [],
            "status": "success"
          },
          {
            "documentName": "3.pdf",
            "pages": 1,
            "errors": [],
            "status": "success"
          },
          {
            "documentName": "4.pdf",
            "pages": 1,
            "errors": [],
            "status": "success"
          }
        ],
        "errors": []
      }
- name: Train new model example, subfolder filter options
  request:
    uri: POST {Endpoint}/formrecognizer/v1.0-preview/custom/train
    body: >-
      {
        "source": "/input/data",
        "sourceFilter": {
          "prefix": "",
          "includeSubFolders": false
        }
      }
    headers:
    - name: Ocp-Apim-Subscription-Key
      value: '{API key}'
  responses:
  - statusCode: "200"
    body: >-
      {
        "modelId": "ad1901b6-ddaa-4249-8938-3f03f65cc893",
        "trainingDocuments": [
          {
            "documentName": "0.pdf",
            "pages": 1,
            "errors": [],
            "status": "success"
          },
          {
            "documentName": "1.pdf",
            "pages": 1,
            "errors": [],
            "status": "success"
          },
          {
            "documentName": "2.pdf",
            "pages": 1,
            "errors": [],
            "status": "success"
          },
          {
            "documentName": "3.pdf",
            "pages": 1,
            "errors": [],
            "status": "success"
          },
          {
            "documentName": "4.pdf",
            "pages": 1,
            "errors": [],
            "status": "success"
          }
        ],
        "errors": []
      }
security:
- name: Ocp-Apim-Subscription-Key
  type: apiKey
  in: header
errorCodes: []
