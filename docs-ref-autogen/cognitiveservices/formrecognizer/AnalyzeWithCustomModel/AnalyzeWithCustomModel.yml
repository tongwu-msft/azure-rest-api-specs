### YamlMime:RESTOperation
uid: cognitiveservices.formrecognizer.analyzewithcustommodel.analyzewithcustommodel
name: Analyze With Custom Model
service: Cognitive Services
groupName: Analyze With Custom Model
apiVersion: 1.0-preview
summary: "Analyze Form  \nExtract key-value pairs from a given document. The input document must be of one of the supported content types - 'application/pdf', 'image/jpeg' or 'image/png'. A success response is returned in JSON."
consumes:
- application/pdf
- image/jpeg
- image/png
- multipart/form-data
produces:
- application/json
paths:
- content: POST {Endpoint}/formrecognizer/v1.0-preview/custom/models/{id}/analyze
- content: POST {Endpoint}/formrecognizer/v1.0-preview/custom/models/{id}/analyze?keys={keys}
  isOptional: true
uriParameters:
- name: Endpoint
  in: path
  isRequired: true
  skipUrlEncoding: true
  description: 'Supported Cognitive Services endpoints (protocol and hostname, for example: https://westus2.api.cognitive.microsoft.com).'
  types:
  - uid: string
- name: id
  in: path
  isRequired: true
  description: Model Identifier to analyze the document with.
  types:
  - uid: string
  format: uuid
- name: keys
  in: query
  description: An optional list of known keys to extract the values for.
  types:
  - uid: array
responses:
- name: 200 OK
  description: Success
  types:
  - uid: AnalyzeResult
- name: Other Status Codes
  description: Response entity accompanying non-successful responses containing additional details about the error.
  types:
  - uid: ErrorResponse
requestHeader: []
definitions:
- name: AnalyzeResult
  description: Analyze API call result.
  kind: object
  properties:
  - name: status
    description: Status of the analyze operation.
    types:
    - uid: success
    - uid: partialSuccess
    - uid: failure
    typesTitle: enum
  - name: pages
    description: >-
      Page level information extracted in the analyzed

      document.
    types:
    - uid: ExtractedPage
      isArray: true
  - name: errors
    description: >-
      List of errors reported during the analyze

      operation.
    types:
    - uid: FormOperationError
      isArray: true
- name: ErrorResponse
  kind: object
  properties:
  - name: error
    description: ''
    types:
    - uid: ErrorInformation
- name: ExtractedPage
  description: >-
    Extraction information of a single page in a

    with a document.
  kind: object
  properties:
  - name: number
    description: Page number.
    types:
    - uid: integer
  - name: height
    description: Height of the page (in pixels).
    types:
    - uid: integer
  - name: width
    description: Width of the page (in pixels).
    types:
    - uid: integer
  - name: clusterId
    description: Cluster identifier.
    types:
    - uid: integer
  - name: keyValuePairs
    description: List of Key-Value pairs extracted from the page.
    types:
    - uid: ExtractedKeyValuePair
      isArray: true
  - name: tables
    description: List of Tables and their information extracted from the page.
    types:
    - uid: ExtractedTable
      isArray: true
- name: FormOperationError
  description: Error reported during an operation.
  kind: object
  properties:
  - name: errorMessage
    description: Message reported during the train operation.
    types:
    - uid: string
- name: ErrorInformation
  kind: object
  properties:
  - name: code
    description: ''
    types:
    - uid: string
  - name: innerError
    description: ''
    types:
    - uid: InnerError
  - name: message
    description: ''
    types:
    - uid: string
- name: ExtractedKeyValuePair
  description: >-
    Representation of a key-value pair as a list

    of key and value tokens.
  kind: object
  properties:
  - name: key
    description: List of tokens for the extracted key in a key-value pair.
    types:
    - uid: ExtractedToken
      isArray: true
  - name: value
    description: List of tokens for the extracted value in a key-value pair.
    types:
    - uid: ExtractedToken
      isArray: true
- name: ExtractedTable
  description: >-
    Extraction information about a table

    contained in a page.
  kind: object
  properties:
  - name: id
    description: Table identifier.
    types:
    - uid: string
  - name: columns
    description: List of columns contained in the table.
    types:
    - uid: ExtractedTableColumn
      isArray: true
- name: InnerError
  kind: object
  properties:
  - name: requestId
    description: ''
    types:
    - uid: string
- name: ExtractedToken
  description: Canonical representation of single extracted text.
  kind: object
  properties:
  - name: text
    description: String value of the extracted text.
    types:
    - uid: string
  - name: boundingBox
    description: >-
      Bounding box of the extracted text. Represents the

      location of the extracted text as a pair of

      cartesian co-ordinates. The co-ordinate pairs are arranged by

      top-left, top-right, bottom-right and bottom-left endpoints box

      with origin reference from the bottom-left of the page.
    types:
    - uid: number
      isArray: true
  - name: confidence
    description: A measure of accuracy of the extracted text.
    types:
    - uid: number
- name: ExtractedTableColumn
  description: >-
    Extraction information of a column in

    a table.
  kind: object
  properties:
  - name: header
    description: List of extracted tokens for the column header.
    types:
    - uid: ExtractedToken
      isArray: true
  - name: entries
    description: >-
      Extracted text for each cell of a column. Each cell

      in the column can have a list of one or more tokens.
    types:
    - uid: array
      isArray: true
examples:
- name: Get Model from id
  request:
    uri: POST {Endpoint}/formrecognizer/v1.0-preview/custom/models/{Model Id}/analyze
  responses:
  - statusCode: "200"
    body: >-
      {
        "status": "success",
        "pages": [
          {
            "number": 1,
            "height": 800,
            "width": 600,
            "clusterId": 0,
            "keyValuePairs": [
              {
                "key": [
                  {
                    "text": "Address:",
                    "boundingBox": [
                      57.4,
                      683.1,
                      100.5,
                      683.1,
                      100.5,
                      673.7,
                      57.4,
                      673.7
                    ]
                  }
                ],
                "value": [
                  {
                    "text": "1 Microsoft Way",
                    "boundingBox": [
                      57.4,
                      672.2,
                      126.6,
                      672.2,
                      126.6,
                      658.9,
                      57.4,
                      658.9
                    ],
                    "confidence": 0.9
                  }
                ]
              }
            ],
            "tables": [
              {
                "id": "table_0",
                "columns": [
                  {
                    "header": [
                      {
                        "text": "InvoiceNumber",
                        "boundingBox": [
                          38.5,
                          585.2,
                          113.4,
                          585.2,
                          113.4,
                          575.8,
                          38.5,
                          575.8
                        ]
                      }
                    ],
                    "entries": [
                      [
                        {
                          "text": "38772349",
                          "boundingBox": [
                            305.6,
                            692.1,
                            403.5,
                            692.1,
                            403.5,
                            684.2,
                            305.6,
                            684.2
                          ],
                          "confidence": 0.9
                        }
                      ]
                    ]
                  }
                ]
              }
            ]
          }
        ],
        "errors": [
          {
            "errorMessage": "Page1: Field not extracted"
          }
        ]
      }
security:
- name: Ocp-Apim-Subscription-Key
  type: apiKey
  in: header
errorCodes: []
