### YamlMime:RESTOperation
uid: cognitiveservices.snapshot.apply
name: Apply
service: Cognitive Services
groupName: Snapshot
apiVersion: "1.0"
summary: >-
  Submit an operation to apply a snapshot to current subscription. For each snapshot, only subscriptions included in the applyScope of Snapshot - Take can apply it.<br />

  The snapshot interfaces are for users to backup and restore their face data from one face subscription to another, inside same region or across regions. The workflow contains two phases, user first calls Snapshot - Take to create a copy of the source object and store it as a snapshot, then calls Snapshot - Apply to paste the snapshot to target subscription. The snapshots are stored in a centralized location (per Azure instance), so that they can be applied cross accounts and regions.<br />

  Applying snapshot is an asynchronous operation. An operation id can be obtained from the "Operation-Location" field in response header, to be used in OperationStatus - Get for tracking the progress of applying the snapshot. The target object id will be included in the "resourceLocation" field in OperationStatus - Get response when the operation status is "succeeded".<br />

  Snapshot applying time depends on the number of person and face entries in the snapshot object. It could be in seconds, or up to 1 hour for 1,000,000 persons with multiple faces.<br />

  Snapshots will be automatically expired and cleaned in 48 hours after it is created by Snapshot - Take. So the target subscription is required to apply the snapshot in 48 hours since its creation.<br />

  Applying a snapshot will not block any other operations against the target object, however it is not recommended because the correctness cannot be guaranteed during snapshot applying. After snapshot applying is completed, all operations towards the target object can work as normal. Snapshot also includes the training results of the source object, which means target subscription the snapshot applied to does not need re-train the target object before calling Identify/FindSimilar.<br />

  One snapshot can be applied multiple times in parallel, while currently only CreateNew apply mode is supported, which means the apply operation will fail if target subscription already contains an object of same type and using the same objectId. Users can specify the "objectId" in request body to avoid such conflicts.<br />

  * Free-tier subscription quota: 100 apply operations per month.

  * S0-tier subscription quota: 100 apply operations per day.
consumes:
- application/json
produces:
- application/json
paths:
- content: POST {Endpoint}/face/v1.0/snapshots/{snapshotId}/apply
uriParameters:
- name: Endpoint
  in: path
  isRequired: true
  description: 'Supported Cognitive Services endpoints (protocol and hostname, for example: https://westus.api.cognitive.microsoft.com).'
  types:
  - uid: string
- name: snapshotId
  in: path
  isRequired: true
  description: Id referencing a particular snapshot.
  types:
  - uid: string
  format: uuid
responses:
- name: 202 Accepted
  headers:
  - name: Operation-Location
    value: string
  description: The snapshot applying task was queued successfully.
- name: Other Status Codes
  description: Error response.
  types:
  - uid: APIError
requestBody:
- name: default
  parameters:
  - name: objectId
    in: body
    isRequired: true
    description: User specified target object id to be created from the snapshot.
    types:
    - uid: string
  - name: mode
    in: body
    description: Snapshot applying mode. Currently only CreateNew is supported, which means the apply operation will fail if target subscription already contains an object of same type and using the same objectId. Users can specify the "objectId" in request body to avoid such conflicts.
    types:
    - uid: SnapshotApplyMode
requestHeader: []
definitions:
- name: APIError
  description: Error information returned by the API
  kind: object
  properties:
  - name: error
    description: Error body.
    types:
    - uid: Error
- name: ApplySnapshotRequest
  description: Request body for applying snapshot operation.
  kind: object
  properties:
  - name: objectId
    description: User specified target object id to be created from the snapshot.
    types:
    - uid: string
  - name: mode
    description: Snapshot applying mode. Currently only CreateNew is supported, which means the apply operation will fail if target subscription already contains an object of same type and using the same objectId. Users can specify the "objectId" in request body to avoid such conflicts.
    types:
    - uid: SnapshotApplyMode
- name: Error
  description: Error body.
  kind: object
  properties:
  - name: code
    description: ''
    types:
    - uid: string
  - name: message
    description: ''
    types:
    - uid: string
- name: SnapshotApplyMode
  description: Snapshot applying mode. Currently only CreateNew is supported, which means the apply operation will fail if target subscription already contains an object of same type and using the same objectId. Users can specify the "objectId" in request body to avoid such conflicts.
  kind: enum
  properties:
  - name: CreateNew
    types:
    - uid: string
examples:
- name: Apply snapshot example
  request:
    uri: POST {Endpoint}/face/v1.0/snapshots/e58b3f08-1e8b-4165-81df-aa9858f233dc/apply
    body: >-
      {
        "objectId": "target-face-list-id",
        "mode": "CreateNew"
      }
  responses:
  - statusCode: "202"
security:
- name: Ocp-Apim-Subscription-Key
  type: apiKey
  in: header
errorCodes: []
