### YamlMime:RESTOperation
uid: management.azure.com.deploymentmanager.artifactsources.artifactsources_createorupdate
name: Create Or Update
service: Deployment Manager
groupName: Artifact Sources
apiVersion: 2018-09-01-preview
summary: "Creates or updates an artifact source.  \nSynchronously creates a new artifact source or updates an existing artifact source."
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.DeploymentManager/artifactSources/{artifactSourceName}?api-version=2018-09-01-preview
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: Subscription credentials which uniquely identify Microsoft Azure subscription. The subscription ID forms part of the URI for every service call.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group. The name is case insensitive.
  types:
  - uid: string
  pattern: ^[-\w\._\(\)]+$
- name: artifactSourceName
  in: path
  isRequired: true
  description: The name of the artifact source.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: The API version to use for this operation.
  types:
  - uid: string
responses:
- name: 201 Created
  description: Created
  types:
  - uid: ArtifactSource
- name: Other Status Codes
  description: All non-success conditions are handled using the standard error contract.
  types:
  - uid: CloudError
requestBody:
- name: default
  parameters:
  - name: tags
    in: body
    description: Resource tags.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: location
    in: body
    isRequired: true
    description: The geo-location where the resource lives
    types:
    - uid: string
  - name: properties.sourceType
    in: body
    isRequired: true
    description: The type of artifact source used.
    types:
    - uid: string
  - name: properties.artifactRoot
    in: body
    description: The path from the location that the 'authentication' property [say, a SAS URI to the blob container] refers to, to the location of the artifacts. This can be used to differentiate different versions of the artifacts. Or, different types of artifacts like binaries or templates. The location referenced by the authentication property concatenated with this optional artifactRoot path forms the artifact source location where the artifacts are expected to be found.
    types:
    - uid: string
  - name: properties.authentication
    in: body
    isRequired: true
    description: The authentication method to use to access the artifact source.
    types:
    - uid: SasAuthentication
    typesTitle: Authentication
requestHeader: []
definitions:
- name: ArtifactSource
  description: The resource that defines the source location where the artifacts are located.
  kind: object
  properties:
  - name: tags
    description: Resource tags.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: location
    description: The geo-location where the resource lives
    types:
    - uid: string
  - name: id
    isReadyOnly: true
    description: Fully qualified resource Id for the resource. Ex - /subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/{resourceProviderNamespace}/{resourceType}/{resourceName}
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: The name of the resource
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: The type of the resource. Ex- Microsoft.Compute/virtualMachines or Microsoft.Storage/storageAccounts.
    types:
    - uid: string
  - name: properties.sourceType
    description: The type of artifact source used.
    types:
    - uid: string
  - name: properties.artifactRoot
    description: The path from the location that the 'authentication' property [say, a SAS URI to the blob container] refers to, to the location of the artifacts. This can be used to differentiate different versions of the artifacts. Or, different types of artifacts like binaries or templates. The location referenced by the authentication property concatenated with this optional artifactRoot path forms the artifact source location where the artifacts are expected to be found.
    types:
    - uid: string
  - name: properties.authentication
    description: The authentication method to use to access the artifact source.
    types:
    - uid: SasAuthentication
    typesTitle: Authentication
- name: CloudError
  description: The error information object.
  kind: object
  properties:
  - name: error
    description: The properties that define the error.
    types:
    - uid: CloudErrorBody
- name: SasAuthentication
  description: Defines the properties to access the artifacts using an Azure Storage SAS URI.
  kind: object
  properties:
  - name: properties.sasUri
    description: The SAS URI to the Azure Storage blob container. Any offset from the root of the container to where the artifacts are located can be defined in the artifactRoot.
    types:
    - uid: string
  - name: type
    description: The authentication type
    types:
    - uid: Sas
    typesTitle: string
- name: CloudErrorBody
  description: Detailed error information of any failure.
  kind: object
  properties:
  - name: code
    isReadyOnly: true
    description: Error code string.
    types:
    - uid: string
  - name: message
    isReadyOnly: true
    description: Descriptive error information.
    types:
    - uid: string
  - name: target
    description: Error target
    types:
    - uid: string
  - name: details
    description: More detailed error information.
    types:
    - uid: CloudErrorBody
      isArray: true
examples:
- name: Create artifact source
  request:
    uri: PUT https://management.azure.com/subscriptions/caac1590-e859-444f-a9e0-62091c0f5929/resourceGroups/myResourceGroup/providers/Microsoft.DeploymentManager/artifactSources/myArtifactSource?api-version=2018-09-01-preview
    body: >-
      {
        "type": "Microsoft.DeploymentManager/artifactSources",
        "location": "centralus",
        "tags": {},
        "properties": {
          "sourceType": "AzureStorage",
          "authentication": {
            "type": "Sas",
            "properties": {
              "sasUri": "https://mystorageaccount.blob.core.windows.net/myartifactsource?st=2018-07-07T14%3A10%3A00Z&se=2019-12-31T15%3A10%3A00Z&sp=rl&sv=2017-04-17&sr=c&sig=Yh2SoJ1NhhLRwCLln7de%2Fkabcdefghijklmno5sWEIk%3D"
            }
          }
        }
      }
  responses:
  - statusCode: "201"
    body: >-
      {
        "name": "myArtifactSource",
        "type": "Microsoft.DeploymentManager/artifactSources",
        "location": "centralus",
        "tags": {},
        "properties": {
          "sourceType": "AzureStorage",
          "authentication": {
            "type": "Sas",
            "properties": {
              "sasUri": "https://mystorageaccount.blob.core.windows.net/myartifactsource?st=2018-07-07T14%3A10%3A00Z&se=2019-12-31T15%3A10%3A00Z&sp=rl&sv=2017-04-17&sr=c&sig=Yh2SoJ1NhhLRwCLln7de%2Fkabcdefghijklmno5sWEIk%3D"
            }
          }
        }
      }
- name: Create artifact source with artifact root, an offset into the storage container
  request:
    uri: PUT https://management.azure.com/subscriptions/caac1590-e859-444f-a9e0-62091c0f5929/resourceGroups/myResourceGroup/providers/Microsoft.DeploymentManager/artifactSources/myArtifactSource?api-version=2018-09-01-preview
    body: >-
      {
        "type": "Microsoft.DeploymentManager/artifactSources",
        "location": "centralus",
        "tags": {},
        "properties": {
          "sourceType": "AzureStorage",
          "artifactRoot": "1.0.0.0",
          "authentication": {
            "type": "Sas",
            "properties": {
              "sasUri": "https://mystorageaccount.blob.core.windows.net/myartifactsource?st=2018-07-07T14%3A10%3A00Z&se=2019-12-31T15%3A10%3A00Z&sp=rl&sv=2017-04-17&sr=c&sig=Yh2SoJ1NhhLRwCLln7de%2Fkabcdefghijklmno5sWEIk%3D"
            }
          }
        }
      }
  responses:
  - statusCode: "201"
    body: >-
      {
        "name": "myArtifactSource",
        "type": "Microsoft.DeploymentManager/artifactSources",
        "location": "centralus",
        "tags": {},
        "properties": {
          "sourceType": "AzureStorage",
          "authentication": {
            "type": "Sas",
            "properties": {
              "sasUri": "https://mystorageaccount.blob.core.windows.net/myartifactsource?st=2018-07-07T14%3A10%3A00Z&se=2019-12-31T15%3A10%3A00Z&sp=rl&sv=2017-04-17&sr=c&sig=Yh2SoJ1NhhLRwCLln7de%2Fkabcdefghijklmno5sWEIk%3D"
            }
          }
        }
      }
security:
- type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
