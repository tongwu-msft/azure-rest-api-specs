### YamlMime:RESTOperation
uid: management.azure.com.containerregistry.tasks.create
name: Create
service: Container Registry
groupName: Tasks
apiVersion: 2019-04-01
summary: Creates a task for a container registry with the specified parameters.
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.ContainerRegistry/registries/{registryName}/tasks/{taskName}?api-version=2019-04-01
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: The Microsoft Azure subscription ID.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group to which the container registry belongs.
  types:
  - uid: string
- name: registryName
  in: path
  isRequired: true
  description: The name of the container registry.
  types:
  - uid: string
  pattern: ^[a-zA-Z0-9]*$
- name: taskName
  in: path
  isRequired: true
  description: The name of the container registry task.
  types:
  - uid: string
  pattern: ^[a-zA-Z0-9-_]*$
- name: api-version
  in: query
  isRequired: true
  description: The client API version.
  types:
  - uid: string
responses:
- name: 200 OK
  description: The request was successful; the request was well-formed and received properly.
  types:
  - uid: Task
- name: 201 Created
  description: The request was successfully accepted; the operation will complete asynchronously. The provisioning state of the resource should indicate the current state of the resource.
  types:
  - uid: Task
- name: Other Status Codes
  description: Error response describing why the operation failed. If the registry doesn't exist, 404 (Not found) is returned. If any of the input parameters is wrong, 400(Bad Request) is returned.
requestBody:
- name: default
  parameters:
  - name: identity
    in: body
    description: Identity for the resource.
    types:
    - uid: IdentityProperties
  - name: properties.status
    in: body
    description: The current status of task.
    types:
    - uid: TaskStatus
  - name: properties.platform
    in: body
    isRequired: true
    description: The platform properties against which the run has to happen.
    types:
    - uid: PlatformProperties
  - name: properties.agentConfiguration
    in: body
    description: The machine configuration of the run agent.
    types:
    - uid: AgentProperties
  - name: properties.timeout
    in: body
    description: Run timeout in seconds.
    types:
    - uid: integer
  - name: properties.step
    in: body
    isRequired: true
    description: The properties of a task step.
    types:
    - uid: DockerBuildStep
    - uid: FileTaskStep
    - uid: EncodedTaskStep
    typesTitle: TaskStepProperties
  - name: properties.trigger
    in: body
    description: The properties that describe all triggers for the task.
    types:
    - uid: TriggerProperties
  - name: properties.credentials
    in: body
    description: The properties that describes a set of credentials that will be used when this run is invoked.
    types:
    - uid: Credentials
  - name: location
    in: body
    isRequired: true
    description: The location of the resource. This cannot be changed after the resource is created.
    types:
    - uid: string
  - name: tags
    in: body
    description: The tags of the resource.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
requestHeader: []
definitions:
- name: IdentityProperties
  description: Managed identity for the resource.
  kind: object
  properties:
  - name: principalId
    description: The principal ID of resource identity.
    types:
    - uid: string
  - name: tenantId
    description: The tenant ID of resource.
    types:
    - uid: string
  - name: type
    description: The identity type.
    types:
    - uid: ResourceIdentityType
  - name: userAssignedIdentities
    description: "The list of user identities associated with the resource. The user identity \ndictionary key references will be ARM resource ids in the form: \n'/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/\n    providers/Microsoft.ManagedIdentity/userAssignedIdentities/{identityName}'."
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: UserIdentityProperties
- name: PlatformProperties
  description: The platform properties against which the run has to happen.
  kind: object
  properties:
  - name: os
    description: The operating system type required for the run.
    types:
    - uid: OS
  - name: architecture
    description: The OS architecture.
    types:
    - uid: Architecture
  - name: variant
    description: Variant of the CPU.
    types:
    - uid: Variant
- name: AgentProperties
  description: The properties that determine the run agent configuration.
  kind: object
  properties:
  - name: cpu
    description: The CPU configuration in terms of number of cores required for the run.
    types:
    - uid: integer
- name: TriggerProperties
  description: The properties of a trigger.
  kind: object
  properties:
  - name: timerTriggers
    description: The collection of timer triggers.
    types:
    - uid: TimerTrigger
      isArray: true
  - name: sourceTriggers
    description: The collection of triggers based on source code repository.
    types:
    - uid: SourceTrigger
      isArray: true
  - name: baseImageTrigger
    description: The trigger based on base image dependencies.
    types:
    - uid: BaseImageTrigger
- name: Credentials
  description: The parameters that describes a set of credentials that will be used when a run is invoked.
  kind: object
  properties:
  - name: sourceRegistry
    description: Describes the credential parameters for accessing the source registry.
    types:
    - uid: SourceRegistryCredentials
  - name: customRegistries
    description: >-
      Describes the credential parameters for accessing other custom registries. The key

      for the dictionary item will be the registry login server (myregistry.azurecr.io) and

      the value of the item will be the registry credentials for accessing the registry.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: CustomRegistryCredentials
- name: Task
  description: "The task that has the ARM resource and task properties. \r\nThe task will have all information to schedule a run against it."
  kind: object
  properties:
  - name: identity
    description: Identity for the resource.
    types:
    - uid: IdentityProperties
  - name: properties.provisioningState
    isReadyOnly: true
    description: The provisioning state of the task.
    types:
    - uid: ProvisioningState
  - name: properties.creationDate
    isReadyOnly: true
    description: The creation date of task.
    types:
    - uid: string
  - name: properties.status
    description: The current status of task.
    types:
    - uid: TaskStatus
  - name: properties.platform
    description: The platform properties against which the run has to happen.
    types:
    - uid: PlatformProperties
  - name: properties.agentConfiguration
    description: The machine configuration of the run agent.
    types:
    - uid: AgentProperties
  - name: properties.timeout
    description: Run timeout in seconds.
    types:
    - uid: integer
    defaultValue: 3600
  - name: properties.step
    description: The properties of a task step.
    types:
    - uid: DockerBuildStep
    - uid: FileTaskStep
    - uid: EncodedTaskStep
    typesTitle: TaskStepProperties
  - name: properties.trigger
    description: The properties that describe all triggers for the task.
    types:
    - uid: TriggerProperties
  - name: properties.credentials
    description: The properties that describes a set of credentials that will be used when this run is invoked.
    types:
    - uid: Credentials
  - name: id
    isReadyOnly: true
    description: The resource ID.
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: The name of the resource.
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: The type of the resource.
    types:
    - uid: string
  - name: location
    description: The location of the resource. This cannot be changed after the resource is created.
    types:
    - uid: string
  - name: tags
    description: The tags of the resource.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
- name: ResourceIdentityType
  description: The identity type.
  kind: enum
  properties:
  - name: SystemAssigned
    types:
    - uid: string
  - name: UserAssigned
    types:
    - uid: string
  - name: SystemAssigned, UserAssigned
    types:
    - uid: string
  - name: None
    types:
    - uid: string
- name: UserIdentityProperties
  kind: object
  properties:
  - name: principalId
    description: The principal id of user assigned identity.
    types:
    - uid: string
  - name: clientId
    description: The client id of user assigned identity.
    types:
    - uid: string
- name: OS
  description: The operating system type required for the run.
  kind: enum
  properties:
  - name: Windows
    types:
    - uid: string
  - name: Linux
    types:
    - uid: string
- name: Architecture
  description: The OS architecture.
  kind: enum
  properties:
  - name: amd64
    types:
    - uid: string
  - name: x86
    types:
    - uid: string
  - name: arm
    types:
    - uid: string
- name: Variant
  description: Variant of the CPU.
  kind: enum
  properties:
  - name: v6
    types:
    - uid: string
  - name: v7
    types:
    - uid: string
  - name: v8
    types:
    - uid: string
- name: DockerBuildStep
  description: The Docker build step.
  kind: object
  properties:
  - name: imageNames
    description: The fully qualified image names including the repository and tag.
    types:
    - uid: string
      isArray: true
  - name: isPushEnabled
    description: The value of this property indicates whether the image built should be pushed to the registry or not.
    types:
    - uid: boolean
    defaultValue: true
  - name: noCache
    description: The value of this property indicates whether the image cache is enabled or not.
    types:
    - uid: boolean
    defaultValue: false
  - name: dockerFilePath
    description: The Docker file path relative to the source context.
    types:
    - uid: string
  - name: target
    description: The name of the target build stage for the docker build.
    types:
    - uid: string
  - name: arguments
    description: The collection of override arguments to be used when executing this build step.
    types:
    - uid: Argument
      isArray: true
  - name: type
    description: The type of the step.
    types:
    - uid: Docker
    typesTitle: string
  - name: baseImageDependencies
    isReadyOnly: true
    description: List of base image dependencies for a step.
    types:
    - uid: BaseImageDependency
      isArray: true
  - name: contextPath
    description: The URL(absolute or relative) of the source context for the task step.
    types:
    - uid: string
  - name: contextAccessToken
    description: The token (git PAT or SAS token of storage account blob) associated with the context for a step.
    types:
    - uid: string
- name: FileTaskStep
  description: The properties of a task step.
  kind: object
  properties:
  - name: taskFilePath
    description: The task template/definition file path relative to the source context.
    types:
    - uid: string
  - name: valuesFilePath
    description: The task values/parameters file path relative to the source context.
    types:
    - uid: string
  - name: values
    description: The collection of overridable values that can be passed when running a task.
    types:
    - uid: SetValue
      isArray: true
  - name: type
    description: The type of the step.
    types:
    - uid: FileTask
    typesTitle: string
  - name: baseImageDependencies
    isReadyOnly: true
    description: List of base image dependencies for a step.
    types:
    - uid: BaseImageDependency
      isArray: true
  - name: contextPath
    description: The URL(absolute or relative) of the source context for the task step.
    types:
    - uid: string
  - name: contextAccessToken
    description: The token (git PAT or SAS token of storage account blob) associated with the context for a step.
    types:
    - uid: string
- name: EncodedTaskStep
  description: The properties of a encoded task step.
  kind: object
  properties:
  - name: encodedTaskContent
    description: Base64 encoded value of the template/definition file content.
    types:
    - uid: string
  - name: encodedValuesContent
    description: Base64 encoded value of the parameters/values file content.
    types:
    - uid: string
  - name: values
    description: The collection of overridable values that can be passed when running a task.
    types:
    - uid: SetValue
      isArray: true
  - name: type
    description: The type of the step.
    types:
    - uid: EncodedTask
    typesTitle: string
  - name: baseImageDependencies
    isReadyOnly: true
    description: List of base image dependencies for a step.
    types:
    - uid: BaseImageDependency
      isArray: true
  - name: contextPath
    description: The URL(absolute or relative) of the source context for the task step.
    types:
    - uid: string
  - name: contextAccessToken
    description: The token (git PAT or SAS token of storage account blob) associated with the context for a step.
    types:
    - uid: string
- name: TimerTrigger
  description: The properties of a timer trigger.
  kind: object
  properties:
  - name: schedule
    description: The CRON expression for the task schedule
    types:
    - uid: string
  - name: status
    description: The current status of trigger.
    types:
    - uid: TriggerStatus
    defaultValue: Enabled
  - name: name
    description: The name of the trigger.
    types:
    - uid: string
- name: SourceTrigger
  description: The properties of a source based trigger.
  kind: object
  properties:
  - name: sourceRepository
    description: The properties that describes the source(code) for the task.
    types:
    - uid: SourceProperties
  - name: sourceTriggerEvents
    description: The source event corresponding to the trigger.
    types:
    - uid: string
      isArray: true
  - name: status
    description: The current status of trigger.
    types:
    - uid: TriggerStatus
    defaultValue: Enabled
  - name: name
    description: The name of the trigger.
    types:
    - uid: string
- name: BaseImageTrigger
  description: The trigger based on base image dependency.
  kind: object
  properties:
  - name: baseImageTriggerType
    description: The type of the auto trigger for base image dependency updates.
    types:
    - uid: BaseImageTriggerType
  - name: status
    description: The current status of trigger.
    types:
    - uid: TriggerStatus
    defaultValue: Enabled
  - name: name
    description: The name of the trigger.
    types:
    - uid: string
- name: SourceRegistryCredentials
  description: Describes the credential parameters for accessing the source registry.
  kind: object
  properties:
  - name: loginMode
    description: >-
      The authentication mode which determines the source registry login scope. The credentials for the source registry

      will be generated using the given scope. These credentials will be used to login to

      the source registry during the run.
    types:
    - uid: SourceRegistryLoginMode
- name: CustomRegistryCredentials
  description: Describes the credentials that will be used to access a custom registry during a run.
  kind: object
  properties:
  - name: userName
    description: The username for logging into the custom registry.
    types:
    - uid: SecretObject
  - name: password
    description: "The password for logging into the custom registry. The password is a secret \nobject that allows multiple ways of providing the value for it."
    types:
    - uid: SecretObject
  - name: identity
    description: "Indicates the managed identity assigned to the custom credential. If a user-assigned identity\nthis value is the Client ID. If a system-assigned identity, the value will be `system`. In\nthe case of a system-assigned identity, the Client ID will be determined by the runner. This\nidentity may be used to authenticate to key vault to retrieve credentials or it may be the only \nsource of authentication used for accessing the registry."
    types:
    - uid: string
- name: ProvisioningState
  description: The provisioning state of a run.
  kind: enum
  properties:
  - name: Creating
    types:
    - uid: string
  - name: Updating
    types:
    - uid: string
  - name: Deleting
    types:
    - uid: string
  - name: Succeeded
    types:
    - uid: string
  - name: Failed
    types:
    - uid: string
  - name: Canceled
    types:
    - uid: string
- name: TaskStatus
  description: The current status of task.
  kind: enum
  properties:
  - name: Disabled
    types:
    - uid: string
  - name: Enabled
    types:
    - uid: string
- name: Argument
  description: The properties of a run argument.
  kind: object
  properties:
  - name: name
    description: The name of the argument.
    types:
    - uid: string
  - name: value
    description: The value of the argument.
    types:
    - uid: string
  - name: isSecret
    description: Flag to indicate whether the argument represents a secret and want to be removed from build logs.
    types:
    - uid: boolean
    defaultValue: false
- name: BaseImageDependency
  description: Properties that describe a base image dependency.
  kind: object
  properties:
  - name: type
    description: The type of the base image dependency.
    types:
    - uid: BaseImageDependencyType
  - name: registry
    description: The registry login server.
    types:
    - uid: string
  - name: repository
    description: The repository name.
    types:
    - uid: string
  - name: tag
    description: The tag name.
    types:
    - uid: string
  - name: digest
    description: The sha256-based digest of the image manifest.
    types:
    - uid: string
- name: SetValue
  description: The properties of a overridable value that can be passed to a task template.
  kind: object
  properties:
  - name: name
    description: The name of the overridable value.
    types:
    - uid: string
  - name: value
    description: The overridable value.
    types:
    - uid: string
  - name: isSecret
    description: Flag to indicate whether the value represents a secret or not.
    types:
    - uid: boolean
    defaultValue: false
- name: TriggerStatus
  description: The current status of trigger.
  kind: enum
  properties:
  - name: Disabled
    types:
    - uid: string
  - name: Enabled
    types:
    - uid: string
- name: SourceProperties
  description: The properties of the source code repository.
  kind: object
  properties:
  - name: sourceControlType
    description: The type of source control service.
    types:
    - uid: SourceControlType
  - name: repositoryUrl
    description: The full URL to the source code repository
    types:
    - uid: string
  - name: branch
    description: The branch name of the source code.
    types:
    - uid: string
  - name: sourceControlAuthProperties
    description: >-
      The authorization properties for accessing the source code repository and to set up

      webhooks for notifications.
    types:
    - uid: AuthInfo
- name: BaseImageTriggerType
  description: The type of the auto trigger for base image dependency updates.
  kind: enum
  properties:
  - name: All
    types:
    - uid: string
  - name: Runtime
    types:
    - uid: string
- name: SourceRegistryLoginMode
  description: >-
    The authentication mode which determines the source registry login scope. The credentials for the source registry

    will be generated using the given scope. These credentials will be used to login to

    the source registry during the run.
  kind: enum
  properties:
  - name: None
    types:
    - uid: string
  - name: Default
    types:
    - uid: string
- name: SecretObject
  description: Describes the properties of a secret object value.
  kind: object
  properties:
  - name: value
    description: >-
      The value of the secret. The format of this value will be determined

      based on the type of the secret object. If the type is Opaque, the value will be

      used as is without any modification.
    types:
    - uid: string
  - name: type
    description: >-
      The type of the secret object which determines how the value of the secret object has to be

      interpreted.
    types:
    - uid: SecretObjectType
- name: BaseImageDependencyType
  description: The type of the base image dependency.
  kind: enum
  properties:
  - name: BuildTime
    types:
    - uid: string
  - name: RunTime
    types:
    - uid: string
- name: SourceControlType
  description: The type of source control service.
  kind: enum
  properties:
  - name: Github
    types:
    - uid: string
  - name: VisualStudioTeamService
    types:
    - uid: string
- name: AuthInfo
  description: The authorization properties for accessing the source code repository.
  kind: object
  properties:
  - name: tokenType
    description: The type of Auth token.
    types:
    - uid: TokenType
  - name: token
    description: The access token used to access the source control provider.
    types:
    - uid: string
  - name: refreshToken
    description: The refresh token used to refresh the access token.
    types:
    - uid: string
  - name: scope
    description: The scope of the access token.
    types:
    - uid: string
  - name: expiresIn
    description: Time in seconds that the token remains valid
    types:
    - uid: integer
- name: SecretObjectType
  description: >-
    The type of the secret object which determines how the value of the secret object has to be

    interpreted.
  kind: enum
  properties:
  - name: Opaque
    types:
    - uid: string
  - name: Vaultsecret
    types:
    - uid: string
- name: TokenType
  description: The type of Auth token.
  kind: enum
  properties:
  - name: PAT
    types:
    - uid: string
  - name: OAuth
    types:
    - uid: string
examples:
- name: Tasks_Create
  request:
    uri: PUT https://management.azure.com/subscriptions/4385cf00-2d3a-425a-832f-f4285b1c9dce/resourceGroups/myResourceGroup/providers/Microsoft.ContainerRegistry/registries/myRegistry/tasks/mytTask?api-version=2019-04-01
    body: >-
      {
        "properties": {
          "status": "Enabled",
          "platform": {
            "os": "Linux",
            "architecture": "amd64"
          },
          "agentConfiguration": {
            "cpu": 2
          },
          "step": {
            "type": "Docker",
            "imageNames": [
              "azurerest:testtag"
            ],
            "dockerFilePath": "src/DockerFile",
            "contextPath": "src",
            "isPushEnabled": true,
            "noCache": false,
            "arguments": [
              {
                "name": "mytestargument",
                "value": "mytestvalue",
                "isSecret": false
              },
              {
                "name": "mysecrettestargument",
                "value": "mysecrettestvalue",
                "isSecret": true
              }
            ]
          },
          "trigger": {
            "timerTriggers": [
              {
                "name": "myTimerTrigger",
                "schedule": "30 9 * * 1-5"
              }
            ],
            "sourceTriggers": [
              {
                "name": "mySourceTrigger",
                "sourceRepository": {
                  "sourceControlType": "Github",
                  "repositoryUrl": "https://github.com/Azure/azure-rest-api-specs",
                  "branch": "master",
                  "sourceControlAuthProperties": {
                    "tokenType": "PAT",
                    "token": "xxxxx"
                  }
                },
                "sourceTriggerEvents": [
                  "commit"
                ]
              }
            ],
            "baseImageTrigger": {
              "name": "myBaseImageTrigger",
              "baseImageTriggerType": "Runtime"
            }
          }
        },
        "location": "eastus",
        "identity": {
          "type": "SystemAssigned"
        },
        "tags": {
          "testkey": "value"
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/4385cf00-2d3a-425a-832f-f4285b1c9dce/resourceGroups/myResourceGroup/providers/Microsoft.ContainerRegistry/registries/myRegistry/tasks/mytTask?api-version=2019-04-01

      {
        "properties": {
          "status": "Enabled",
          "platform": {
            "os": "Linux",
            "architecture": "amd64"
          },
          "agentConfiguration": {
            "cpu": 2
          },
          "step": {
            "type": "Docker",
            "imageNames": [
              "azurerest:testtag"
            ],
            "dockerFilePath": "src/DockerFile",
            "contextPath": "src",
            "isPushEnabled": true,
            "noCache": false,
            "arguments": [
              {
                "name": "mytestargument",
                "value": "mytestvalue",
                "isSecret": false
              },
              {
                "name": "mysecrettestargument",
                "value": "mysecrettestvalue",
                "isSecret": true
              }
            ]
          },
          "trigger": {
            "timerTriggers": [
              {
                "name": "myTimerTrigger",
                "schedule": "30 9 * * 1-5"
              }
            ],
            "sourceTriggers": [
              {
                "name": "mySourceTrigger",
                "sourceRepository": {
                  "sourceControlType": "Github",
                  "repositoryUrl": "https://github.com/Azure/azure-rest-api-specs",
                  "branch": "master",
                  "sourceControlAuthProperties": {
                    "tokenType": "PAT",
                    "token": "xxxxx"
                  }
                },
                "sourceTriggerEvents": [
                  "commit"
                ]
              }
            ],
            "baseImageTrigger": {
              "name": "myBaseImageTrigger",
              "baseImageTriggerType": "Runtime"
            }
          }
        },
        "location": "eastus",
        "identity": {
          "type": "SystemAssigned"
        },
        "tags": {
          "testkey": "value"
        }
      }

      ```

  responses:
  - statusCode: "200"
    body: >-
      {
        "properties": {
          "provisioningState": "Succeeded",
          "creationDate": "2018-01-25T06:54:23.536Z",
          "status": "Enabled",
          "platform": {
            "os": "Linux",
            "architecture": "amd64"
          },
          "agentConfiguration": {
            "cpu": 2
          },
          "step": {
            "type": "Docker",
            "imageNames": [
              "azurerest:testtag"
            ],
            "dockerFilePath": "src/DockerFile",
            "contextPath": "src",
            "isPushEnabled": true,
            "noCache": false,
            "arguments": [
              {
                "name": "mytestargument",
                "value": "mytestvalue",
                "isSecret": false
              }
            ]
          },
          "trigger": {
            "timerTriggers": [
              {
                "name": "myTimerTrigger",
                "status": "Enabled",
                "schedule": "30 9 * * 1-5"
              }
            ],
            "sourceTriggers": [
              {
                "name": "mySourceTrigger",
                "status": "Enabled",
                "sourceRepository": {
                  "sourceControlType": "Github",
                  "repositoryUrl": "https://github.com/Azure/azure-rest-api-specs",
                  "branch": "master"
                },
                "sourceTriggerEvents": [
                  "commit"
                ]
              }
            ],
            "baseImageTrigger": {
              "name": "myBaseImageTrigger",
              "status": "Enabled",
              "baseImageTriggerType": "Runtime"
            }
          }
        },
        "id": "/subscriptions/4385cf00-2d3a-425a-832f-f4285b1c9dce/resourceGroups/myResourceGroup/providers/Microsoft.ContainerRegistry/registries/myRegistry/tasks/myTask",
        "name": "myTask",
        "type": "Microsoft.ContainerRegistry/registries/tasks",
        "location": "eastus",
        "identity": {
          "principalId": "fa153151-b9fd-46f4-9088-5e6600f2689v",
          "tenantId": "f686d426-8d16-42db-81b7-abu4gm510ccd",
          "type": "SystemAssigned"
        },
        "tags": {
          "testkey": "value"
        }
      }
  - statusCode: "201"
    body: >-
      {
        "properties": {
          "provisioningState": "Creating",
          "creationDate": "2018-01-25T06:54:23.536Z",
          "status": "Enabled",
          "platform": {
            "os": "Linux",
            "architecture": "amd64"
          },
          "agentConfiguration": {
            "cpu": 2
          },
          "step": {
            "type": "Docker",
            "imageNames": [
              "azurerest:testtag"
            ],
            "dockerFilePath": "src/DockerFile",
            "contextPath": "src",
            "isPushEnabled": true,
            "noCache": false,
            "arguments": [
              {
                "name": "mytestargument",
                "value": "mytestvalue",
                "isSecret": false
              }
            ]
          },
          "trigger": {
            "timerTriggers": [
              {
                "name": "myTimerTrigger",
                "status": "Enabled",
                "schedule": "30 9 * * 1-5"
              }
            ],
            "sourceTriggers": [
              {
                "name": "mySourceTrigger",
                "status": "Enabled",
                "sourceRepository": {
                  "sourceControlType": "Github",
                  "repositoryUrl": "https://github.com/Azure/azure-rest-api-specs",
                  "branch": "master"
                },
                "sourceTriggerEvents": [
                  "commit"
                ]
              }
            ],
            "baseImageTrigger": {
              "name": "myBaseImageTrigger",
              "status": "Enabled",
              "baseImageTriggerType": "Runtime"
            }
          }
        },
        "id": "/subscriptions/4385cf00-2d3a-425a-832f-f4285b1c9dce/resourceGroups/myResourceGroup/providers/Microsoft.ContainerRegistry/registries/myRegistry/tasks/myTask",
        "name": "myTask",
        "type": "Microsoft.ContainerRegistry/registries/tasks",
        "location": "eastus",
        "identity": {
          "principalId": "fa153151-b9fd-46f4-9088-5e6600f2689v",
          "tenantId": "f686d426-8d16-42db-81b7-abu4gm510ccd",
          "type": "SystemAssigned"
        },
        "tags": {
          "testkey": "value"
        }
      }
- name: Tasks_Create_WithSystemAndUserIdentities
  request:
    uri: PUT https://management.azure.com/subscriptions/4385cf00-2d3a-425a-832f-f4285b1c9dce/resourceGroups/myResourceGroup/providers/Microsoft.ContainerRegistry/registries/myRegistry/tasks/mytTask?api-version=2019-04-01
    body: >-
      {
        "properties": {
          "status": "Enabled",
          "platform": {
            "os": "Linux",
            "architecture": "amd64"
          },
          "agentConfiguration": {
            "cpu": 2
          },
          "step": {
            "type": "Docker",
            "imageNames": [
              "azurerest:testtag"
            ],
            "dockerFilePath": "src/DockerFile",
            "contextPath": "src",
            "isPushEnabled": true,
            "noCache": false,
            "arguments": [
              {
                "name": "mytestargument",
                "value": "mytestvalue",
                "isSecret": false
              },
              {
                "name": "mysecrettestargument",
                "value": "mysecrettestvalue",
                "isSecret": true
              }
            ]
          },
          "trigger": {
            "timerTriggers": [
              {
                "name": "myTimerTrigger",
                "schedule": "30 9 * * 1-5"
              }
            ],
            "sourceTriggers": [
              {
                "name": "mySourceTrigger",
                "sourceRepository": {
                  "sourceControlType": "Github",
                  "repositoryUrl": "https://github.com/Azure/azure-rest-api-specs",
                  "branch": "master",
                  "sourceControlAuthProperties": {
                    "tokenType": "PAT",
                    "token": "xxxxx"
                  }
                },
                "sourceTriggerEvents": [
                  "commit"
                ]
              }
            ],
            "baseImageTrigger": {
              "name": "myBaseImageTrigger",
              "baseImageTriggerType": "Runtime"
            }
          }
        },
        "location": "eastus",
        "identity": {
          "type": "SystemAssigned, UserAssigned",
          "userAssignedIdentities": {
            "/subscriptions/f9d7ebed-adbd-4cb4-b973-aaf82c136138/resourcegroups/myResourceGroup1/providers/Microsoft.ManagedIdentity/userAssignedIdentities/identity2": {}
          }
        },
        "tags": {
          "testkey": "value"
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/4385cf00-2d3a-425a-832f-f4285b1c9dce/resourceGroups/myResourceGroup/providers/Microsoft.ContainerRegistry/registries/myRegistry/tasks/mytTask?api-version=2019-04-01

      {
        "properties": {
          "status": "Enabled",
          "platform": {
            "os": "Linux",
            "architecture": "amd64"
          },
          "agentConfiguration": {
            "cpu": 2
          },
          "step": {
            "type": "Docker",
            "imageNames": [
              "azurerest:testtag"
            ],
            "dockerFilePath": "src/DockerFile",
            "contextPath": "src",
            "isPushEnabled": true,
            "noCache": false,
            "arguments": [
              {
                "name": "mytestargument",
                "value": "mytestvalue",
                "isSecret": false
              },
              {
                "name": "mysecrettestargument",
                "value": "mysecrettestvalue",
                "isSecret": true
              }
            ]
          },
          "trigger": {
            "timerTriggers": [
              {
                "name": "myTimerTrigger",
                "schedule": "30 9 * * 1-5"
              }
            ],
            "sourceTriggers": [
              {
                "name": "mySourceTrigger",
                "sourceRepository": {
                  "sourceControlType": "Github",
                  "repositoryUrl": "https://github.com/Azure/azure-rest-api-specs",
                  "branch": "master",
                  "sourceControlAuthProperties": {
                    "tokenType": "PAT",
                    "token": "xxxxx"
                  }
                },
                "sourceTriggerEvents": [
                  "commit"
                ]
              }
            ],
            "baseImageTrigger": {
              "name": "myBaseImageTrigger",
              "baseImageTriggerType": "Runtime"
            }
          }
        },
        "location": "eastus",
        "identity": {
          "type": "SystemAssigned, UserAssigned",
          "userAssignedIdentities": {
            "/subscriptions/f9d7ebed-adbd-4cb4-b973-aaf82c136138/resourcegroups/myResourceGroup1/providers/Microsoft.ManagedIdentity/userAssignedIdentities/identity2": {}
          }
        },
        "tags": {
          "testkey": "value"
        }
      }

      ```

  responses:
  - statusCode: "200"
    body: >-
      {
        "properties": {
          "provisioningState": "Succeeded",
          "creationDate": "2018-01-25T06:54:23.536Z",
          "status": "Enabled",
          "platform": {
            "os": "Linux",
            "architecture": "amd64"
          },
          "agentConfiguration": {
            "cpu": 2
          },
          "step": {
            "type": "Docker",
            "imageNames": [
              "azurerest:testtag"
            ],
            "dockerFilePath": "src/DockerFile",
            "contextPath": "src",
            "isPushEnabled": true,
            "noCache": false,
            "arguments": [
              {
                "name": "mytestargument",
                "value": "mytestvalue",
                "isSecret": false
              }
            ]
          },
          "trigger": {
            "timerTriggers": [
              {
                "name": "myTimerTrigger",
                "status": "Enabled",
                "schedule": "30 9 * * 1-5"
              }
            ],
            "sourceTriggers": [
              {
                "name": "mySourceTrigger",
                "status": "Enabled",
                "sourceRepository": {
                  "sourceControlType": "Github",
                  "repositoryUrl": "https://github.com/Azure/azure-rest-api-specs",
                  "branch": "master"
                },
                "sourceTriggerEvents": [
                  "commit"
                ]
              }
            ],
            "baseImageTrigger": {
              "name": "myBaseImageTrigger",
              "status": "Enabled",
              "baseImageTriggerType": "Runtime"
            }
          }
        },
        "id": "/subscriptions/4385cf00-2d3a-425a-832f-f4285b1c9dce/resourceGroups/myResourceGroup/providers/Microsoft.ContainerRegistry/registries/myRegistry/tasks/myTask",
        "name": "myTask",
        "type": "Microsoft.ContainerRegistry/registries/tasks",
        "location": "eastus",
        "identity": {
          "principalId": "fc99dc67-1ad9-45c8-9ebc-e438081c8e30",
          "tenantId": "f686d426-8d16-42db-81b7-ab578e110ccd",
          "type": "SystemAssigned, UserAssigned",
          "userAssignedIdentities": {
            "/subscriptions/f9d7ebed-adbd-4cb4-b973-aaf82c136138/resourcegroups/myResourceGroup1/providers/Microsoft.ManagedIdentity/userAssignedIdentities/identity2": {
              "clientId": "e35621a5-f615-4a20-940e-de8a84b15abc",
              "principalId": "e45e3m7c-176e-416a-b466-0c5ec8298f8a"
            }
          }
        },
        "tags": {
          "testkey": "value"
        }
      }
  - statusCode: "201"
    body: >-
      {
        "properties": {
          "provisioningState": "Creating",
          "creationDate": "2018-01-25T06:54:23.536Z",
          "status": "Enabled",
          "platform": {
            "os": "Linux",
            "architecture": "amd64"
          },
          "agentConfiguration": {
            "cpu": 2
          },
          "step": {
            "type": "Docker",
            "imageNames": [
              "azurerest:testtag"
            ],
            "dockerFilePath": "src/DockerFile",
            "contextPath": "src",
            "isPushEnabled": true,
            "noCache": false,
            "arguments": [
              {
                "name": "mytestargument",
                "value": "mytestvalue",
                "isSecret": false
              }
            ]
          },
          "trigger": {
            "timerTriggers": [
              {
                "name": "myTimerTrigger",
                "status": "Enabled",
                "schedule": "30 9 * * 1-5"
              }
            ],
            "sourceTriggers": [
              {
                "name": "mySourceTrigger",
                "status": "Enabled",
                "sourceRepository": {
                  "sourceControlType": "Github",
                  "repositoryUrl": "https://github.com/Azure/azure-rest-api-specs",
                  "branch": "master"
                },
                "sourceTriggerEvents": [
                  "commit"
                ]
              }
            ],
            "baseImageTrigger": {
              "name": "myBaseImageTrigger",
              "status": "Enabled",
              "baseImageTriggerType": "Runtime"
            }
          }
        },
        "id": "/subscriptions/4385cf00-2d3a-425a-832f-f4285b1c9dce/resourceGroups/myResourceGroup/providers/Microsoft.ContainerRegistry/registries/myRegistry/tasks/myTask",
        "name": "myTask",
        "type": "Microsoft.ContainerRegistry/registries/tasks",
        "location": "eastus",
        "identity": {
          "principalId": "fc99dc67-1ad9-45c8-9ebc-e438081c8e30",
          "tenantId": "f686d426-8d16-42db-81b7-ab578e110ccd",
          "type": "SystemAssigned, UserAssigned",
          "userAssignedIdentities": {
            "/subscriptions/f9d7ebed-adbd-4cb4-b973-aaf82c136138/resourcegroups/myResourceGroup1/providers/Microsoft.ManagedIdentity/userAssignedIdentities/identity2": {
              "clientId": "e35621a5-f615-4a20-940e-de8a84b15abc",
              "principalId": "e45e3m7c-176e-416a-b466-0c5ec8298f8a"
            }
          }
        },
        "tags": {
          "testkey": "value"
        }
      }
- name: Tasks_Create_WithUserIdentities_WithSystemIdentity
  request:
    uri: PUT https://management.azure.com/subscriptions/4385cf00-2d3a-425a-832f-f4285b1c9dce/resourceGroups/myResourceGroup/providers/Microsoft.ContainerRegistry/registries/myRegistry/tasks/mytTask?api-version=2019-04-01
    body: >-
      {
        "properties": {
          "status": "Enabled",
          "platform": {
            "os": "Linux",
            "architecture": "amd64"
          },
          "agentConfiguration": {
            "cpu": 2
          },
          "step": {
            "type": "Docker",
            "imageNames": [
              "azurerest:testtag"
            ],
            "dockerFilePath": "src/DockerFile",
            "contextPath": "src",
            "isPushEnabled": true,
            "noCache": false,
            "arguments": [
              {
                "name": "mytestargument",
                "value": "mytestvalue",
                "isSecret": false
              },
              {
                "name": "mysecrettestargument",
                "value": "mysecrettestvalue",
                "isSecret": true
              }
            ]
          },
          "trigger": {
            "timerTriggers": [
              {
                "name": "myTimerTrigger",
                "schedule": "30 9 * * 1-5"
              }
            ],
            "sourceTriggers": [
              {
                "name": "mySourceTrigger",
                "sourceRepository": {
                  "sourceControlType": "Github",
                  "repositoryUrl": "https://github.com/Azure/azure-rest-api-specs",
                  "branch": "master",
                  "sourceControlAuthProperties": {
                    "tokenType": "PAT",
                    "token": "xxxxx"
                  }
                },
                "sourceTriggerEvents": [
                  "commit"
                ]
              }
            ],
            "baseImageTrigger": {
              "name": "myBaseImageTrigger",
              "baseImageTriggerType": "Runtime"
            }
          }
        },
        "location": "eastus",
        "identity": {
          "type": "SystemAssigned"
        },
        "tags": {
          "testkey": "value"
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/4385cf00-2d3a-425a-832f-f4285b1c9dce/resourceGroups/myResourceGroup/providers/Microsoft.ContainerRegistry/registries/myRegistry/tasks/mytTask?api-version=2019-04-01

      {
        "properties": {
          "status": "Enabled",
          "platform": {
            "os": "Linux",
            "architecture": "amd64"
          },
          "agentConfiguration": {
            "cpu": 2
          },
          "step": {
            "type": "Docker",
            "imageNames": [
              "azurerest:testtag"
            ],
            "dockerFilePath": "src/DockerFile",
            "contextPath": "src",
            "isPushEnabled": true,
            "noCache": false,
            "arguments": [
              {
                "name": "mytestargument",
                "value": "mytestvalue",
                "isSecret": false
              },
              {
                "name": "mysecrettestargument",
                "value": "mysecrettestvalue",
                "isSecret": true
              }
            ]
          },
          "trigger": {
            "timerTriggers": [
              {
                "name": "myTimerTrigger",
                "schedule": "30 9 * * 1-5"
              }
            ],
            "sourceTriggers": [
              {
                "name": "mySourceTrigger",
                "sourceRepository": {
                  "sourceControlType": "Github",
                  "repositoryUrl": "https://github.com/Azure/azure-rest-api-specs",
                  "branch": "master",
                  "sourceControlAuthProperties": {
                    "tokenType": "PAT",
                    "token": "xxxxx"
                  }
                },
                "sourceTriggerEvents": [
                  "commit"
                ]
              }
            ],
            "baseImageTrigger": {
              "name": "myBaseImageTrigger",
              "baseImageTriggerType": "Runtime"
            }
          }
        },
        "location": "eastus",
        "identity": {
          "type": "SystemAssigned"
        },
        "tags": {
          "testkey": "value"
        }
      }

      ```

  responses:
  - statusCode: "200"
    body: >-
      {
        "properties": {
          "provisioningState": "Succeeded",
          "creationDate": "2018-01-25T06:54:23.536Z",
          "status": "Enabled",
          "platform": {
            "os": "Linux",
            "architecture": "amd64"
          },
          "agentConfiguration": {
            "cpu": 2
          },
          "step": {
            "type": "Docker",
            "imageNames": [
              "azurerest:testtag"
            ],
            "dockerFilePath": "src/DockerFile",
            "contextPath": "src",
            "isPushEnabled": true,
            "noCache": false,
            "arguments": [
              {
                "name": "mytestargument",
                "value": "mytestvalue",
                "isSecret": false
              }
            ]
          },
          "trigger": {
            "timerTriggers": [
              {
                "name": "myTimerTrigger",
                "status": "Enabled",
                "schedule": "30 9 * * 1-5"
              }
            ],
            "sourceTriggers": [
              {
                "name": "mySourceTrigger",
                "status": "Enabled",
                "sourceRepository": {
                  "sourceControlType": "Github",
                  "repositoryUrl": "https://github.com/Azure/azure-rest-api-specs",
                  "branch": "master"
                },
                "sourceTriggerEvents": [
                  "commit"
                ]
              }
            ],
            "baseImageTrigger": {
              "name": "myBaseImageTrigger",
              "status": "Enabled",
              "baseImageTriggerType": "Runtime"
            }
          }
        },
        "id": "/subscriptions/4385cf00-2d3a-425a-832f-f4285b1c9dce/resourceGroups/myResourceGroup/providers/Microsoft.ContainerRegistry/registries/myRegistry/tasks/myTask",
        "name": "myTask",
        "type": "Microsoft.ContainerRegistry/registries/tasks",
        "location": "eastus",
        "identity": {
          "principalId": "fa153151-b9fd-46f4-9088-5e6600f2689v",
          "tenantId": "f686d426-8d16-42db-81b7-abu4gm510ccd",
          "type": "SystemAssigned"
        },
        "tags": {
          "testkey": "value"
        }
      }
  - statusCode: "201"
    body: >-
      {
        "properties": {
          "provisioningState": "Creating",
          "creationDate": "2018-01-25T06:54:23.536Z",
          "status": "Enabled",
          "platform": {
            "os": "Linux",
            "architecture": "amd64"
          },
          "agentConfiguration": {
            "cpu": 2
          },
          "step": {
            "type": "Docker",
            "imageNames": [
              "azurerest:testtag"
            ],
            "dockerFilePath": "src/DockerFile",
            "contextPath": "src",
            "isPushEnabled": true,
            "noCache": false,
            "arguments": [
              {
                "name": "mytestargument",
                "value": "mytestvalue",
                "isSecret": false
              }
            ]
          },
          "trigger": {
            "timerTriggers": [
              {
                "name": "myTimerTrigger",
                "status": "Enabled",
                "schedule": "30 9 * * 1-5"
              }
            ],
            "sourceTriggers": [
              {
                "name": "mySourceTrigger",
                "status": "Enabled",
                "sourceRepository": {
                  "sourceControlType": "Github",
                  "repositoryUrl": "https://github.com/Azure/azure-rest-api-specs",
                  "branch": "master"
                },
                "sourceTriggerEvents": [
                  "commit"
                ]
              }
            ],
            "baseImageTrigger": {
              "name": "myBaseImageTrigger",
              "status": "Enabled",
              "baseImageTriggerType": "Runtime"
            }
          }
        },
        "id": "/subscriptions/4385cf00-2d3a-425a-832f-f4285b1c9dce/resourceGroups/myResourceGroup/providers/Microsoft.ContainerRegistry/registries/myRegistry/tasks/myTask",
        "name": "myTask",
        "type": "Microsoft.ContainerRegistry/registries/tasks",
        "location": "eastus",
        "identity": {
          "principalId": "fa153151-b9fd-46f4-9088-5e6600f2689v",
          "tenantId": "f686d426-8d16-42db-81b7-abu4gm510ccd",
          "type": "SystemAssigned"
        },
        "tags": {
          "testkey": "value"
        }
      }
- name: Tasks_Create_WithUserIdentities
  request:
    uri: PUT https://management.azure.com/subscriptions/4385cf00-2d3a-425a-832f-f4285b1c9dce/resourceGroups/myResourceGroup/providers/Microsoft.ContainerRegistry/registries/myRegistry/tasks/mytTask?api-version=2019-04-01
    body: >-
      {
        "properties": {
          "status": "Enabled",
          "platform": {
            "os": "Linux",
            "architecture": "amd64"
          },
          "agentConfiguration": {
            "cpu": 2
          },
          "step": {
            "type": "Docker",
            "imageNames": [
              "azurerest:testtag"
            ],
            "dockerFilePath": "src/DockerFile",
            "contextPath": "src",
            "isPushEnabled": true,
            "noCache": false,
            "arguments": [
              {
                "name": "mytestargument",
                "value": "mytestvalue",
                "isSecret": false
              },
              {
                "name": "mysecrettestargument",
                "value": "mysecrettestvalue",
                "isSecret": true
              }
            ]
          },
          "trigger": {
            "timerTriggers": [
              {
                "name": "myTimerTrigger",
                "schedule": "30 9 * * 1-5"
              }
            ],
            "sourceTriggers": [
              {
                "name": "mySourceTrigger",
                "sourceRepository": {
                  "sourceControlType": "Github",
                  "repositoryUrl": "https://github.com/Azure/azure-rest-api-specs",
                  "branch": "master",
                  "sourceControlAuthProperties": {
                    "tokenType": "PAT",
                    "token": "xxxxx"
                  }
                },
                "sourceTriggerEvents": [
                  "commit"
                ]
              }
            ],
            "baseImageTrigger": {
              "name": "myBaseImageTrigger",
              "baseImageTriggerType": "Runtime"
            }
          }
        },
        "location": "eastus",
        "identity": {
          "type": "UserAssigned",
          "userAssignedIdentities": {
            "/subscriptions/f9d7ebed-adbd-4cb4-b973-aaf82c136138/resourcegroups/myResourceGroup/providers/Microsoft.ManagedIdentity/userAssignedIdentities/identity1": {},
            "/subscriptions/f9d7ebed-adbd-4cb4-b973-aaf82c136138/resourcegroups/myResourceGroup1/providers/Microsoft.ManagedIdentity/userAssignedIdentities/identity2": {}
          }
        },
        "tags": {
          "testkey": "value"
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/4385cf00-2d3a-425a-832f-f4285b1c9dce/resourceGroups/myResourceGroup/providers/Microsoft.ContainerRegistry/registries/myRegistry/tasks/mytTask?api-version=2019-04-01

      {
        "properties": {
          "status": "Enabled",
          "platform": {
            "os": "Linux",
            "architecture": "amd64"
          },
          "agentConfiguration": {
            "cpu": 2
          },
          "step": {
            "type": "Docker",
            "imageNames": [
              "azurerest:testtag"
            ],
            "dockerFilePath": "src/DockerFile",
            "contextPath": "src",
            "isPushEnabled": true,
            "noCache": false,
            "arguments": [
              {
                "name": "mytestargument",
                "value": "mytestvalue",
                "isSecret": false
              },
              {
                "name": "mysecrettestargument",
                "value": "mysecrettestvalue",
                "isSecret": true
              }
            ]
          },
          "trigger": {
            "timerTriggers": [
              {
                "name": "myTimerTrigger",
                "schedule": "30 9 * * 1-5"
              }
            ],
            "sourceTriggers": [
              {
                "name": "mySourceTrigger",
                "sourceRepository": {
                  "sourceControlType": "Github",
                  "repositoryUrl": "https://github.com/Azure/azure-rest-api-specs",
                  "branch": "master",
                  "sourceControlAuthProperties": {
                    "tokenType": "PAT",
                    "token": "xxxxx"
                  }
                },
                "sourceTriggerEvents": [
                  "commit"
                ]
              }
            ],
            "baseImageTrigger": {
              "name": "myBaseImageTrigger",
              "baseImageTriggerType": "Runtime"
            }
          }
        },
        "location": "eastus",
        "identity": {
          "type": "UserAssigned",
          "userAssignedIdentities": {
            "/subscriptions/f9d7ebed-adbd-4cb4-b973-aaf82c136138/resourcegroups/myResourceGroup/providers/Microsoft.ManagedIdentity/userAssignedIdentities/identity1": {},
            "/subscriptions/f9d7ebed-adbd-4cb4-b973-aaf82c136138/resourcegroups/myResourceGroup1/providers/Microsoft.ManagedIdentity/userAssignedIdentities/identity2": {}
          }
        },
        "tags": {
          "testkey": "value"
        }
      }

      ```

  responses:
  - statusCode: "200"
    body: >-
      {
        "properties": {
          "provisioningState": "Succeeded",
          "creationDate": "2018-01-25T06:54:23.536Z",
          "status": "Enabled",
          "platform": {
            "os": "Linux",
            "architecture": "amd64"
          },
          "agentConfiguration": {
            "cpu": 2
          },
          "step": {
            "type": "Docker",
            "imageNames": [
              "azurerest:testtag"
            ],
            "dockerFilePath": "src/DockerFile",
            "contextPath": "src",
            "isPushEnabled": true,
            "noCache": false,
            "arguments": [
              {
                "name": "mytestargument",
                "value": "mytestvalue",
                "isSecret": false
              }
            ]
          },
          "trigger": {
            "timerTriggers": [
              {
                "name": "myTimerTrigger",
                "status": "Enabled",
                "schedule": "30 9 * * 1-5"
              }
            ],
            "sourceTriggers": [
              {
                "name": "mySourceTrigger",
                "status": "Enabled",
                "sourceRepository": {
                  "sourceControlType": "Github",
                  "repositoryUrl": "https://github.com/Azure/azure-rest-api-specs",
                  "branch": "master"
                },
                "sourceTriggerEvents": [
                  "commit"
                ]
              }
            ],
            "baseImageTrigger": {
              "name": "myBaseImageTrigger",
              "status": "Enabled",
              "baseImageTriggerType": "Runtime"
            }
          }
        },
        "id": "/subscriptions/4385cf00-2d3a-425a-832f-f4285b1c9dce/resourceGroups/myResourceGroup/providers/Microsoft.ContainerRegistry/registries/myRegistry/tasks/myTask",
        "name": "myTask",
        "type": "Microsoft.ContainerRegistry/registries/tasks",
        "location": "eastus",
        "identity": {
          "type": "UserAssigned",
          "userAssignedIdentities": {
            "/subscriptions/f9d7ebed-adbd-4cb4-b973-aaf82c136138/resourcegroups/myResourceGroup/providers/Microsoft.ManagedIdentity/userAssignedIdentities/identity1": {
              "clientId": "d3ce1bc2-f7d7-4a5b-9979-950f4e57680e",
              "principalId": "b6p9f58b-6fbf-4efd-a7e0-fvd46911a466"
            },
            "/subscriptions/f9d7ebed-adbd-4cb4-b973-aaf82c136138/resourcegroups/myResourceGroup1/providers/Microsoft.ManagedIdentity/userAssignedIdentities/identity2": {
              "clientId": "e35621a5-f615-4a20-940e-de8a84b15abc",
              "principalId": "e45e3m7c-176e-416a-b466-0c5ec8298f8a"
            }
          }
        },
        "tags": {
          "testkey": "value"
        }
      }
  - statusCode: "201"
    body: >-
      {
        "properties": {
          "provisioningState": "Creating",
          "creationDate": "2018-01-25T06:54:23.536Z",
          "status": "Enabled",
          "platform": {
            "os": "Linux",
            "architecture": "amd64"
          },
          "agentConfiguration": {
            "cpu": 2
          },
          "step": {
            "type": "Docker",
            "imageNames": [
              "azurerest:testtag"
            ],
            "dockerFilePath": "src/DockerFile",
            "contextPath": "src",
            "isPushEnabled": true,
            "noCache": false,
            "arguments": [
              {
                "name": "mytestargument",
                "value": "mytestvalue",
                "isSecret": false
              }
            ]
          },
          "trigger": {
            "timerTriggers": [
              {
                "name": "myTimerTrigger",
                "status": "Enabled",
                "schedule": "30 9 * * 1-5"
              }
            ],
            "sourceTriggers": [
              {
                "name": "mySourceTrigger",
                "status": "Enabled",
                "sourceRepository": {
                  "sourceControlType": "Github",
                  "repositoryUrl": "https://github.com/Azure/azure-rest-api-specs",
                  "branch": "master"
                },
                "sourceTriggerEvents": [
                  "commit"
                ]
              }
            ],
            "baseImageTrigger": {
              "name": "myBaseImageTrigger",
              "status": "Enabled",
              "baseImageTriggerType": "Runtime"
            }
          }
        },
        "id": "/subscriptions/4385cf00-2d3a-425a-832f-f4285b1c9dce/resourceGroups/myResourceGroup/providers/Microsoft.ContainerRegistry/registries/myRegistry/tasks/myTask",
        "name": "myTask",
        "type": "Microsoft.ContainerRegistry/registries/tasks",
        "location": "eastus",
        "identity": {
          "type": "UserAssigned",
          "userAssignedIdentities": {
            "/subscriptions/f9d7ebed-adbd-4cb4-b973-aaf82c136138/resourcegroups/myResourceGroup/providers/Microsoft.ManagedIdentity/userAssignedIdentities/identity1": {
              "clientId": "d3ce1bc2-f7d7-4a5b-9979-950f4e57680e",
              "principalId": "b6p9f58b-6fbf-4efd-a7e0-fvd46911a466"
            },
            "/subscriptions/f9d7ebed-adbd-4cb4-b973-aaf82c136138/resourcegroups/myResourceGroup1/providers/Microsoft.ManagedIdentity/userAssignedIdentities/identity2": {
              "clientId": "e35621a5-f615-4a20-940e-de8a84b15abc",
              "principalId": "e45e3m7c-176e-416a-b466-0c5ec8298f8a"
            }
          }
        },
        "tags": {
          "testkey": "value"
        }
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: >
    Learn more about Container Registry service - Creates a task for a container registry with the specified parameters.
errorCodes: []
