### YamlMime:RESTOperation
uid: management.azure.com.dtl.labs.createorupdate
name: Create Or Update
service: Dev Test Labs
groupName: Labs
apiVersion: 2018-09-15
summary: Create or replace an existing lab. This operation can take a while to complete.
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.DevTestLab/labs/{name}?api-version=2018-09-15
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: The subscription ID.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group.
  types:
  - uid: string
- name: name
  in: path
  isRequired: true
  description: The name of the lab.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: Client API version.
  types:
  - uid: string
responses:
- name: 200 OK
  description: OK
  types:
  - uid: Lab
- name: 201 Created
  description: Created
  types:
  - uid: Lab
- name: Other Status Codes
  description: BadRequest
  types:
  - uid: CloudError
requestBody:
- name: default
  parameters:
  - name: properties.labStorageType
    in: body
    description: Type of storage used by the lab. It can be either Premium or Standard. Default is Premium.
    types:
    - uid: StorageType
  - name: properties.mandatoryArtifactsResourceIdsLinux
    in: body
    description: The ordered list of artifact resource IDs that should be applied on all Linux VM creations by default, prior to the artifacts specified by the user.
    types:
    - uid: string
      isArray: true
  - name: properties.mandatoryArtifactsResourceIdsWindows
    in: body
    description: The ordered list of artifact resource IDs that should be applied on all Windows VM creations by default, prior to the artifacts specified by the user.
    types:
    - uid: string
      isArray: true
  - name: properties.premiumDataDisks
    in: body
    description: >-
      The setting to enable usage of premium data disks.

      When its value is 'Enabled', creation of standard or premium data disks is allowed.

      When its value is 'Disabled', only creation of standard data disks is allowed.
    types:
    - uid: PremiumDataDisk
  - name: properties.environmentPermission
    in: body
    description: The access rights to be granted to the user when provisioning an environment
    types:
    - uid: EnvironmentPermission
  - name: properties.announcement
    in: body
    description: The properties of any lab announcement associated with this lab
    types:
    - uid: LabAnnouncementProperties
  - name: properties.support
    in: body
    description: The properties of any lab support message associated with this lab
    types:
    - uid: LabSupportProperties
  - name: properties.extendedProperties
    in: body
    description: Extended properties of the lab used for experimental features
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: location
    in: body
    description: The location of the resource.
    types:
    - uid: string
  - name: tags
    in: body
    description: The tags of the resource.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
requestHeader: []
definitions:
- name: LabAnnouncementProperties
  description: Properties of a lab's announcement banner
  kind: object
  properties:
  - name: title
    description: The plain text title for the lab announcement
    types:
    - uid: string
  - name: markdown
    description: The markdown text (if any) that this lab displays in the UI. If left empty/null, nothing will be shown.
    types:
    - uid: string
  - name: enabled
    description: Is the lab announcement active/enabled at this time?
    types:
    - uid: EnableStatus
  - name: expirationDate
    description: The time at which the announcement expires (null for never)
    types:
    - uid: string
  - name: expired
    description: Has this announcement expired?
    types:
    - uid: boolean
  - name: provisioningState
    isReadyOnly: true
    description: The provisioning status of the resource.
    types:
    - uid: string
  - name: uniqueIdentifier
    isReadyOnly: true
    description: The unique immutable identifier of a resource (Guid).
    types:
    - uid: string
- name: LabSupportProperties
  description: Properties of a lab's support banner
  kind: object
  properties:
  - name: enabled
    description: Is the lab support banner active/enabled at this time?
    types:
    - uid: EnableStatus
  - name: markdown
    description: The markdown text (if any) that this lab displays in the UI. If left empty/null, nothing will be shown.
    types:
    - uid: string
- name: Lab
  description: A lab.
  kind: object
  properties:
  - name: properties.defaultStorageAccount
    isReadyOnly: true
    description: The lab's default storage account.
    types:
    - uid: string
  - name: properties.defaultPremiumStorageAccount
    isReadyOnly: true
    description: The lab's default premium storage account.
    types:
    - uid: string
  - name: properties.artifactsStorageAccount
    isReadyOnly: true
    description: The lab's artifact storage account.
    types:
    - uid: string
  - name: properties.premiumDataDiskStorageAccount
    isReadyOnly: true
    description: The lab's premium data disk storage account.
    types:
    - uid: string
  - name: properties.vaultName
    isReadyOnly: true
    description: The lab's Key vault.
    types:
    - uid: string
  - name: properties.labStorageType
    description: Type of storage used by the lab. It can be either Premium or Standard. Default is Premium.
    types:
    - uid: StorageType
    defaultValue: Premium
  - name: properties.mandatoryArtifactsResourceIdsLinux
    description: The ordered list of artifact resource IDs that should be applied on all Linux VM creations by default, prior to the artifacts specified by the user.
    types:
    - uid: string
      isArray: true
  - name: properties.mandatoryArtifactsResourceIdsWindows
    description: The ordered list of artifact resource IDs that should be applied on all Windows VM creations by default, prior to the artifacts specified by the user.
    types:
    - uid: string
      isArray: true
  - name: properties.createdDate
    isReadyOnly: true
    description: The creation date of the lab.
    types:
    - uid: string
  - name: properties.premiumDataDisks
    description: >-
      The setting to enable usage of premium data disks.

      When its value is 'Enabled', creation of standard or premium data disks is allowed.

      When its value is 'Disabled', only creation of standard data disks is allowed.
    types:
    - uid: PremiumDataDisk
  - name: properties.environmentPermission
    description: The access rights to be granted to the user when provisioning an environment
    types:
    - uid: EnvironmentPermission
  - name: properties.announcement
    description: The properties of any lab announcement associated with this lab
    types:
    - uid: LabAnnouncementProperties
  - name: properties.support
    description: The properties of any lab support message associated with this lab
    types:
    - uid: LabSupportProperties
  - name: properties.vmCreationResourceGroup
    isReadyOnly: true
    description: The resource group in which all new lab virtual machines will be created. To let DevTest Labs manage resource group creation, set this value to null.
    types:
    - uid: string
  - name: properties.publicIpId
    isReadyOnly: true
    description: The public IP address for the lab's load balancer.
    types:
    - uid: string
  - name: properties.loadBalancerId
    isReadyOnly: true
    description: The load balancer used to for lab VMs that use shared IP address.
    types:
    - uid: string
  - name: properties.networkSecurityGroupId
    isReadyOnly: true
    description: The Network Security Group attached to the lab VMs Network interfaces to restrict open ports.
    types:
    - uid: string
  - name: properties.extendedProperties
    description: Extended properties of the lab used for experimental features
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: properties.provisioningState
    isReadyOnly: true
    description: The provisioning status of the resource.
    types:
    - uid: string
  - name: properties.uniqueIdentifier
    isReadyOnly: true
    description: The unique immutable identifier of a resource (Guid).
    types:
    - uid: string
  - name: id
    isReadyOnly: true
    description: The identifier of the resource.
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: The name of the resource.
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: The type of the resource.
    types:
    - uid: string
  - name: location
    description: The location of the resource.
    types:
    - uid: string
  - name: tags
    description: The tags of the resource.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
- name: CloudError
  description: Error from a REST request.
  kind: object
  properties:
  - name: error
    description: The cloud error that occurred
    types:
    - uid: CloudErrorBody
- name: EnableStatus
  description: The status of the schedule (i.e. Enabled, Disabled)
  kind: enum
  properties:
  - name: Enabled
    types:
    - uid: string
  - name: Disabled
    types:
    - uid: string
- name: StorageType
  description: The storage type for the disk (i.e. Standard, Premium).
  kind: enum
  properties:
  - name: Standard
    types:
    - uid: string
  - name: Premium
    types:
    - uid: string
  - name: StandardSSD
    types:
    - uid: string
- name: PremiumDataDisk
  description: >-
    The setting to enable usage of premium data disks.

    When its value is 'Enabled', creation of standard or premium data disks is allowed.

    When its value is 'Disabled', only creation of standard data disks is allowed.
  kind: enum
  properties:
  - name: Disabled
    types:
    - uid: string
  - name: Enabled
    types:
    - uid: string
- name: EnvironmentPermission
  description: The access rights to be granted to the user when provisioning an environment
  kind: enum
  properties:
  - name: Reader
    types:
    - uid: string
  - name: Contributor
    types:
    - uid: string
- name: CloudErrorBody
  description: Body of an error from a REST request.
  kind: object
  properties:
  - name: code
    description: The error code.
    types:
    - uid: string
  - name: message
    description: The error message.
    types:
    - uid: string
  - name: target
    description: The error target.
    types:
    - uid: string
  - name: details
    description: Inner errors.
    types:
    - uid: CloudErrorBody
      isArray: true
examples:
- name: Labs_CreateOrUpdate
  request:
    uri: PUT https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/resourceGroupName/providers/Microsoft.DevTestLab/labs/{labName}?api-version=2018-09-15
    body: >-
      {
        "properties": {
          "labStorageType": "{Standard|Premium}"
        },
        "location": "{location}",
        "tags": {
          "tagName1": "tagValue1"
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/resourceGroupName/providers/Microsoft.DevTestLab/labs/{labName}?api-version=2018-09-15

      {
        "properties": {
          "labStorageType": "{Standard|Premium}"
        },
        "location": "{location}",
        "tags": {
          "tagName1": "tagValue1"
        }
      }

      ```

      # [Go](#tab/Go)
      ``` go
      package armdevtestlabs_test

      import (
      	"context"
      	"log"

      	"github.com/Azure/azure-sdk-for-go/sdk/azcore/to"
      	"github.com/Azure/azure-sdk-for-go/sdk/azidentity"
      	"github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/devtestlabs/armdevtestlabs"
      )

      // Generated from example definition: https://github.com/Azure/azure-rest-api-specs/tree/main/specification/devtestlabs/resource-manager/Microsoft.DevTestLab/stable/2018-09-15/examples/Labs_CreateOrUpdate.json
      func ExampleLabsClient_BeginCreateOrUpdate() {
      	cred, err := azidentity.NewDefaultAzureCredential(nil)
      	if err != nil {
      		log.Fatalf("failed to obtain a credential: %v", err)
      	}
      	ctx := context.Background()
      	client, err := armdevtestlabs.NewLabsClient("{subscriptionId}", cred, nil)
      	if err != nil {
      		log.Fatalf("failed to create client: %v", err)
      	}
      	poller, err := client.BeginCreateOrUpdate(ctx,
      		"resourceGroupName",
      		"{labName}",
      		armdevtestlabs.Lab{
      			Location: to.Ptr("{location}"),
      			Tags: map[string]*string{
      				"tagName1": to.Ptr("tagValue1"),
      			},
      			Properties: &armdevtestlabs.LabProperties{
      				LabStorageType: to.Ptr(armdevtestlabs.StorageType("{Standard|Premium}")),
      			},
      		},
      		nil)
      	if err != nil {
      		log.Fatalf("failed to finish the request: %v", err)
      	}
      	res, err := poller.PollUntilDone(ctx, nil)
      	if err != nil {
      		log.Fatalf("failed to pull the result: %v", err)
      	}
      	// TODO: use response item
      	_ = res
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-go/blob/sdk%2Fresourcemanager%2Fdevtestlabs%2Farmdevtestlabs%2Fv1.0.0/sdk/resourcemanager/devtestlabs/armdevtestlabs/README.md) on how to add the SDK to your project and authenticate.
      # [JavsScirpt](#tab/JavsScirpt)
      ``` js
      const { DevTestLabsClient } = require("@azure/arm-devtestlabs");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to Create or replace an existing lab. This operation can take a while to complete.
       *
       * @summary Create or replace an existing lab. This operation can take a while to complete.
       * x-ms-original-file: specification/devtestlabs/resource-manager/Microsoft.DevTestLab/stable/2018-09-15/examples/Labs_CreateOrUpdate.json
       */
      async function labsCreateOrUpdate() {
        const subscriptionId = "{subscriptionId}";
        const resourceGroupName = "resourceGroupName";
        const name = "{labName}";
        const lab = {
          labStorageType: "{Standard|Premium}",
          location: "{location}",
          tags: { tagName1: "tagValue1" },
        };
        const credential = new DefaultAzureCredential();
        const client = new DevTestLabsClient(credential, subscriptionId);
        const result = await client.labs.beginCreateOrUpdateAndWait(resourceGroupName, name, lab);
        console.log(result);
      }

      labsCreateOrUpdate().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-devtestlabs_4.0.1/sdk/devtestlabs/arm-devtestlabs/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "properties": {
          "labStorageType": "Standard",
          "mandatoryArtifactsResourceIdsLinux": [],
          "mandatoryArtifactsResourceIdsWindows": [],
          "createdDate": "2018-10-01T18:40:48.1739018-07:00",
          "premiumDataDisks": "Disabled",
          "environmentPermission": "Reader",
          "announcement": {
            "title": "",
            "markdown": "",
            "enabled": "Disabled",
            "expired": false
          },
          "support": {
            "enabled": "Disabled",
            "markdown": ""
          },
          "provisioningState": "Creating",
          "uniqueIdentifier": "{uniqueIdentifier}"
        },
        "id": "/subscriptions/{subscriptionId}/resourcegroups/resourceGroupName/providers/microsoft.devtestlab/labs/{labName}",
        "name": "{labName}",
        "type": "Microsoft.DevTestLab/labs",
        "location": "{location}",
        "tags": {
          "tagName1": "tagValue1"
        }
      }
  - statusCode: "201"
    body: >-
      {
        "properties": {
          "labStorageType": "Standard",
          "mandatoryArtifactsResourceIdsLinux": [],
          "mandatoryArtifactsResourceIdsWindows": [],
          "createdDate": "2018-10-01T18:40:48.1739018-07:00",
          "premiumDataDisks": "Disabled",
          "environmentPermission": "Reader",
          "announcement": {
            "title": "",
            "markdown": "",
            "enabled": "Disabled",
            "expired": false
          },
          "support": {
            "enabled": "Disabled",
            "markdown": ""
          },
          "provisioningState": "Creating",
          "uniqueIdentifier": "{uniqueIdentifier}"
        },
        "id": "/subscriptions/{subscriptionId}/resourcegroups/resourceGroupName/providers/microsoft.devtestlab/labs/{labName}",
        "name": "{labName}",
        "type": "Microsoft.DevTestLab/labs",
        "location": "{location}",
        "tags": {
          "tagName1": "tagValue1"
        }
      }
security:
- name: azure_auth
  type: oauth2
  description: OAuth2 Implicit Grant
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: Access Microsoft Azure
metadata:
  description: Learn more about Dev Test Labs service - Create or replace an existing lab. This operation can take a while to complete.
errorCodes: []
