### YamlMime:RESTOperation
uid: management.azure.com.blueprints.assignments.createorupdate
name: Create Or Update
service: Blueprints
groupName: Assignments
apiVersion: 2018-11-01-preview
summary: Create or update a Blueprint assignment.
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://management.azure.com/{scope}/providers/Microsoft.Blueprint/blueprintAssignments/{assignmentName}?api-version=2018-11-01-preview
uriParameters:
- name: scope
  in: path
  isRequired: true
  description: "The scope of the resource. Valid scopes are: management group (format: '/providers/Microsoft.Management/managementGroups/{managementGroup}'), subscription (format: '/subscriptions/{subscriptionId}')."
  types:
  - uid: string
- name: assignmentName
  in: path
  isRequired: true
  description: name of the assignment.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: Client Api Version.
  types:
  - uid: string
responses:
- name: 201 Created
  description: Created - Blueprint assignment saved
  types:
  - uid: Assignment
requestBody:
- name: default
  parameters:
  - name: identity
    in: body
    isRequired: true
    description: Managed Service Identity for this Blueprint assignment
    types:
    - uid: ManagedServiceIdentity
  - name: properties.blueprintId
    in: body
    description: ID of the Blueprint definition resource.
    types:
    - uid: string
  - name: properties.parameters
    in: body
    isRequired: true
    description: Blueprint parameter values.
    types:
    - uid: ParameterValueCollection
  - name: properties.resourceGroups
    in: body
    isRequired: true
    description: Names and locations of resource group placeholders.
    types:
    - uid: ResourceGroupValueCollection
  - name: properties.locks
    in: body
    description: Defines how Blueprint-managed resources will be locked.
    types:
    - uid: AssignmentLockSettings
  - name: location
    in: body
    isRequired: true
    description: The location of this Blueprint assignment.
    types:
    - uid: string
  - name: properties.displayName
    in: body
    description: One-liner string explain this resource.
    types:
    - uid: string
  - name: properties.description
    in: body
    description: Multi-line explain this resource.
    types:
    - uid: string
requestHeader: []
definitions:
- name: ManagedServiceIdentity
  description: Managed Service Identity
  kind: object
  properties:
  - name: type
    description: Type of the Managed Service Identity.
    types:
    - uid: ManagedServiceIdentityType
  - name: principalId
    description: Azure Active Directory principal ID associated with this Identity.
    types:
    - uid: string
  - name: tenantId
    description: ID of the Azure Active Directory.
    types:
    - uid: string
  - name: userAssignedIdentities
    description: The list of user identities associated with the resource, key will be Azure resource Id of the ManagedIdentity.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: UserAssignedIdentity
- name: ParameterValueCollection
  description: A dictionary for parameters and their corresponding values.
  kind: object
  properties: []
- name: ResourceGroupValueCollection
  description: A dictionary which maps resource group placeholders to the resource groups which will be created.
  kind: object
  properties: []
- name: AssignmentStatus
  description: The status of Blueprint assignment. This field is readonly.
  kind: object
  properties:
  - name: timeCreated
    isReadyOnly: true
    description: Creation time of this blueprint.
    types:
    - uid: string
  - name: lastModified
    isReadyOnly: true
    description: Last modified time of this blueprint.
    types:
    - uid: string
- name: AssignmentLockSettings
  description: Defines how Blueprint-managed resources will be locked.
  kind: object
  properties:
  - name: mode
    description: Lock mode.
    types:
    - uid: AssignmentLockMode
- name: Assignment
  description: Represents a Blueprint assignment.
  kind: object
  properties:
  - name: identity
    description: Managed Service Identity for this Blueprint assignment
    types:
    - uid: ManagedServiceIdentity
  - name: properties.blueprintId
    description: ID of the Blueprint definition resource.
    types:
    - uid: string
  - name: properties.parameters
    description: Blueprint parameter values.
    types:
    - uid: ParameterValueCollection
  - name: properties.resourceGroups
    description: Names and locations of resource group placeholders.
    types:
    - uid: ResourceGroupValueCollection
  - name: properties.status
    isReadyOnly: true
    description: Status of Blueprint assignment. This field is readonly.
    types:
    - uid: AssignmentStatus
  - name: properties.locks
    description: Defines how Blueprint-managed resources will be locked.
    types:
    - uid: AssignmentLockSettings
  - name: properties.provisioningState
    isReadyOnly: true
    description: State of the assignment.
    types:
    - uid: AssignmentProvisioningState
  - name: location
    description: The location of this Blueprint assignment.
    types:
    - uid: string
  - name: id
    isReadyOnly: true
    description: String Id used to locate any resource on Azure.
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: Type of this resource.
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: Name of this resource.
    types:
    - uid: string
  - name: properties.displayName
    description: One-liner string explain this resource.
    types:
    - uid: string
  - name: properties.description
    description: Multi-line explain this resource.
    types:
    - uid: string
- name: ManagedServiceIdentityType
  description: Type of the Managed Service Identity.
  kind: enum
  properties:
  - name: None
    types:
    - uid: string
  - name: SystemAssigned
    types:
    - uid: string
  - name: UserAssigned
    types:
    - uid: string
- name: UserAssignedIdentity
  description: User assigned Identity
  kind: object
  properties:
  - name: principalId
    description: Azure Active Directory principal ID associated with this Identity.
    types:
    - uid: string
  - name: clientId
    description: Client App Id associated with this identity.
    types:
    - uid: string
- name: AssignmentLockMode
  description: Lock mode.
  kind: enum
  properties:
  - name: None
    types:
    - uid: string
  - name: AllResources
    types:
    - uid: string
- name: AssignmentProvisioningState
  description: State of the assignment.
  kind: enum
  properties:
  - name: creating
    types:
    - uid: string
  - name: validating
    types:
    - uid: string
  - name: waiting
    types:
    - uid: string
  - name: deploying
    types:
    - uid: string
  - name: cancelling
    types:
    - uid: string
  - name: locking
    types:
    - uid: string
  - name: succeeded
    types:
    - uid: string
  - name: failed
    types:
    - uid: string
  - name: canceled
    types:
    - uid: string
  - name: deleting
    types:
    - uid: string
examples:
- name: Assignment
  request:
    uri: PUT https://management.azure.com/subscriptions/f8df94f2-2f5a-4f4a-bcaf-1bb992fb564b/providers/Microsoft.Blueprint/blueprintAssignments/assignSimpleBlueprint?api-version=2018-11-01-preview
    body: >-
      {
        "identity": {
          "type": "SystemAssigned"
        },
        "location": "eastus",
        "properties": {
          "description": "enforce pre-defined simpleBlueprint to this XXXXXXXX subscription.",
          "blueprintId": "/providers/Microsoft.Management/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprints/simpleBlueprint",
          "parameters": {
            "storageAccountType": {
              "value": "Standard_LRS"
            },
            "costCenter": {
              "value": "Contoso/Online/Shopping/Production"
            },
            "owners": {
              "value": [
                "johnDoe@contoso.com",
                "johnsteam@contoso.com"
              ]
            }
          },
          "resourceGroups": {
            "storageRG": {
              "name": "defaultRG",
              "location": "eastus"
            }
          }
        }
      }
  responses:
  - statusCode: "201"
    body: >-
      {
        "identity": {
          "type": "SystemAssigned",
          "tenantId": "00000000-0000-0000-0000-000000000000",
          "principalId": "00000000-0000-0000-0000-000000000000"
        },
        "location": "eastus",
        "properties": {
          "description": "enforce pre-defined simpleBlueprint to this XXXXXXXX subscription.",
          "provisioningState": "creating",
          "blueprintId": "/providers/Microsoft.Management/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprints/simpleBlueprint",
          "parameters": {
            "storageAccountType": {
              "value": "Standard_LRS"
            },
            "costCenter": {
              "value": "Contoso/Online/Shopping/Production"
            },
            "owners": {
              "value": [
                "johnDoe@contoso.com",
                "johnsteam@contoso.com"
              ]
            }
          },
          "resourceGroups": {
            "storageRG": {
              "name": "defaultRG",
              "location": "eastus"
            }
          }
        },
        "id": "/subscriptions/f8df94f2-2f5a-4f4a-bcaf-1bb992fb564b/providers/Microsoft.Blueprint/blueprintAssignments/assignSimpleBlueprint",
        "type": "Microsoft.Blueprint/Assignment",
        "name": "assignSimpleBlueprint"
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
errorCodes: []
