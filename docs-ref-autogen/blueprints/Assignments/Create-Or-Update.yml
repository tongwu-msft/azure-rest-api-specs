### YamlMime:RESTOperation
uid: management.azure.com.blueprints.assignments.createorupdate
name: Create Or Update
service: Blueprints
groupName: Assignments
apiVersion: 2018-11-01-preview
summary: Create or update a blueprint assignment.
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://management.azure.com/{resourceScope}/providers/Microsoft.Blueprint/blueprintAssignments/{assignmentName}?api-version=2018-11-01-preview
uriParameters:
- name: resourceScope
  in: path
  isRequired: true
  skipUrlEncoding: true
  description: "The scope of the resource. Valid scopes are: management group (format: '/providers/Microsoft.Management/managementGroups/{managementGroup}'), subscription (format: '/subscriptions/{subscriptionId}')."
  types:
  - uid: string
- name: assignmentName
  in: path
  isRequired: true
  description: Name of the blueprint assignment.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: Client API Version.
  types:
  - uid: string
responses:
- name: 201 Created
  description: Created -- blueprint assignment saved.
  types:
  - uid: Assignment
- name: Other Status Codes
  description: Blueprints error response.
  types:
  - uid: CloudError
requestBody:
- name: default
  parameters:
  - name: identity
    in: body
    isRequired: true
    description: Managed identity for this blueprint assignment.
    types:
    - uid: ManagedServiceIdentity
  - name: properties.blueprintId
    in: body
    description: ID of the published version of a blueprint definition.
    types:
    - uid: string
  - name: properties.scope
    in: body
    description: "The target subscription scope of the blueprint assignment (format: '/subscriptions/{subscriptionId}'). For management group level assignments, the property is required."
    types:
    - uid: string
  - name: properties.parameters
    in: body
    isRequired: true
    description: Blueprint assignment parameter values.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: ParameterValue
  - name: properties.resourceGroups
    in: body
    isRequired: true
    description: Names and locations of resource group placeholders.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: ResourceGroupValue
  - name: properties.locks
    in: body
    description: Defines how resources deployed by a blueprint assignment are locked.
    types:
    - uid: AssignmentLockSettings
  - name: location
    in: body
    isRequired: true
    description: The location of this blueprint assignment.
    types:
    - uid: string
  - name: properties.displayName
    in: body
    description: One-liner string explain this resource.
    types:
    - uid: string
  - name: properties.description
    in: body
    description: Multi-line explain this resource.
    types:
    - uid: string
requestHeader: []
definitions:
- name: ManagedServiceIdentity
  description: Managed identity generic object.
  kind: object
  properties:
  - name: type
    description: Type of the managed identity.
    types:
    - uid: ManagedServiceIdentityType
  - name: principalId
    description: Azure Active Directory principal ID associated with this Identity.
    types:
    - uid: string
  - name: tenantId
    description: ID of the Azure Active Directory.
    types:
    - uid: string
  - name: userAssignedIdentities
    description: The list of user-assigned managed identities associated with the resource. Key is the Azure resource Id of the managed identity.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: UserAssignedIdentity
- name: ParameterValue
  description: Value for the specified parameter. Can be either 'value' or 'reference' but not both.
  kind: object
  properties:
  - name: value
    description: Parameter value. Any valid JSON value is allowed including objects, arrays, strings, numbers and booleans.
    types:
    - uid: object
  - name: reference
    description: Parameter value as reference type.
    types:
    - uid: SecretValueReference
- name: ResourceGroupValue
  description: Represents an Azure resource group.
  kind: object
  properties:
  - name: name
    description: Name of the resource group.
    types:
    - uid: string
  - name: location
    description: Location of the resource group.
    types:
    - uid: string
- name: AssignmentStatus
  description: The status of a blueprint assignment. This field is readonly.
  kind: object
  properties:
  - name: managedResources
    isReadyOnly: true
    description: List of resources that were created by the blueprint assignment.
    types:
    - uid: string
      isArray: true
  - name: timeCreated
    isReadyOnly: true
    description: Creation time of this blueprint definition.
    types:
    - uid: string
  - name: lastModified
    isReadyOnly: true
    description: Last modified time of this blueprint definition.
    types:
    - uid: string
- name: AssignmentLockSettings
  description: Defines how resources deployed by a blueprint assignment are locked.
  kind: object
  properties:
  - name: mode
    description: Lock mode.
    types:
    - uid: AssignmentLockMode
  - name: excludedPrincipals
    description: List of AAD principals excluded from blueprint locks. Up to 5 principals are permitted.
    types:
    - uid: string
      isArray: true
  - name: excludedActions
    description: "List of management operations that are excluded from blueprint locks. Up to 200 actions are permitted. If the lock mode is set to 'AllResourcesReadOnly', then the following actions are automatically appended to 'excludedActions': '*/read', 'Microsoft.Network/virtualNetworks/subnets/join/action' and 'Microsoft.Authorization/locks/delete'. If the lock mode is set to 'AllResourcesDoNotDelete', then the following actions are automatically appended to 'excludedActions': 'Microsoft.Authorization/locks/delete'. Duplicate actions will get removed."
    types:
    - uid: string
      isArray: true
- name: Assignment
  description: Represents a blueprint assignment.
  kind: object
  properties:
  - name: identity
    description: Managed identity for this blueprint assignment.
    types:
    - uid: ManagedServiceIdentity
  - name: properties.blueprintId
    description: ID of the published version of a blueprint definition.
    types:
    - uid: string
  - name: properties.scope
    description: "The target subscription scope of the blueprint assignment (format: '/subscriptions/{subscriptionId}'). For management group level assignments, the property is required."
    types:
    - uid: string
  - name: properties.parameters
    description: Blueprint assignment parameter values.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: ParameterValue
  - name: properties.resourceGroups
    description: Names and locations of resource group placeholders.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: ResourceGroupValue
  - name: properties.status
    isReadyOnly: true
    description: Status of blueprint assignment. This field is readonly.
    types:
    - uid: AssignmentStatus
  - name: properties.locks
    description: Defines how resources deployed by a blueprint assignment are locked.
    types:
    - uid: AssignmentLockSettings
  - name: properties.provisioningState
    isReadyOnly: true
    description: State of the blueprint assignment.
    types:
    - uid: AssignmentProvisioningState
  - name: location
    description: The location of this blueprint assignment.
    types:
    - uid: string
  - name: id
    isReadyOnly: true
    description: String Id used to locate any resource on Azure.
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: Type of this resource.
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: Name of this resource.
    types:
    - uid: string
  - name: properties.displayName
    description: One-liner string explain this resource.
    types:
    - uid: string
  - name: properties.description
    description: Multi-line explain this resource.
    types:
    - uid: string
- name: CloudError
  kind: object
  properties:
  - name: error
    description: "Error Response  \nCommon error response for all Azure Resource Manager APIs to return error details for failed operations. (This also follows the OData error response format.)"
    types:
    - uid: ErrorResponse
- name: ManagedServiceIdentityType
  description: Type of the managed identity.
  kind: enum
  properties:
  - name: None
    types:
    - uid: string
  - name: SystemAssigned
    types:
    - uid: string
  - name: UserAssigned
    types:
    - uid: string
- name: UserAssignedIdentity
  description: User-assigned managed identity.
  kind: object
  properties:
  - name: principalId
    description: Azure Active Directory principal ID associated with this Identity.
    types:
    - uid: string
  - name: clientId
    description: Client App Id associated with this identity.
    types:
    - uid: string
- name: SecretValueReference
  description: Reference to a Key Vault secret.
  kind: object
  properties:
  - name: keyVault
    description: Specifies the reference to a given Azure Key Vault.
    types:
    - uid: keyVaultReference
  - name: secretName
    description: Name of the secret.
    types:
    - uid: string
  - name: secretVersion
    description: The version of the secret to use. If left blank, the latest version of the secret is used.
    types:
    - uid: string
- name: AssignmentLockMode
  description: Lock mode.
  kind: enum
  properties:
  - name: None
    types:
    - uid: string
  - name: AllResourcesReadOnly
    types:
    - uid: string
  - name: AllResourcesDoNotDelete
    types:
    - uid: string
- name: AssignmentProvisioningState
  description: State of the blueprint assignment.
  kind: enum
  properties:
  - name: creating
    types:
    - uid: string
  - name: validating
    types:
    - uid: string
  - name: waiting
    types:
    - uid: string
  - name: deploying
    types:
    - uid: string
  - name: cancelling
    types:
    - uid: string
  - name: locking
    types:
    - uid: string
  - name: succeeded
    types:
    - uid: string
  - name: failed
    types:
    - uid: string
  - name: canceled
    types:
    - uid: string
  - name: deleting
    types:
    - uid: string
- name: ErrorResponse
  description: Error Response
  kind: object
  properties:
  - name: code
    isReadyOnly: true
    description: The error code.
    types:
    - uid: string
  - name: message
    isReadyOnly: true
    description: The error message.
    types:
    - uid: string
  - name: target
    isReadyOnly: true
    description: The error target.
    types:
    - uid: string
  - name: details
    isReadyOnly: true
    description: The error details.
    types:
    - uid: ErrorResponse
      isArray: true
  - name: additionalInfo
    isReadyOnly: true
    description: The error additional info.
    types:
    - uid: ErrorAdditionalInfo
      isArray: true
- name: keyVaultReference
  description: Specifies the link to a Key Vault.
  kind: object
  properties:
  - name: id
    description: Azure resource ID of the Key Vault.
    types:
    - uid: string
- name: ErrorAdditionalInfo
  description: The resource management error additional info.
  kind: object
  properties:
  - name: type
    isReadyOnly: true
    description: The additional info type.
    types:
    - uid: string
  - name: info
    isReadyOnly: true
    description: The additional info.
    types:
    - uid: object
examples:
- name: Assignment with system-assigned managed identity at subscription scope
  request:
    uri: PUT https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Blueprint/blueprintAssignments/assignSimpleBlueprint?api-version=2018-11-01-preview
    body: >-
      {
        "identity": {
          "type": "SystemAssigned"
        },
        "location": "eastus",
        "properties": {
          "description": "enforce pre-defined simpleBlueprint to this XXXXXXXX subscription.",
          "blueprintId": "/providers/Microsoft.Management/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprints/simpleBlueprint",
          "parameters": {
            "storageAccountType": {
              "value": "Standard_LRS"
            },
            "costCenter": {
              "value": "Contoso/Online/Shopping/Production"
            },
            "owners": {
              "value": [
                "johnDoe@contoso.com",
                "johnsteam@contoso.com"
              ]
            }
          },
          "resourceGroups": {
            "storageRG": {
              "name": "defaultRG",
              "location": "eastus"
            }
          }
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Blueprint/blueprintAssignments/assignSimpleBlueprint?api-version=2018-11-01-preview

      {
        "identity": {
          "type": "SystemAssigned"
        },
        "location": "eastus",
        "properties": {
          "description": "enforce pre-defined simpleBlueprint to this XXXXXXXX subscription.",
          "blueprintId": "/providers/Microsoft.Management/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprints/simpleBlueprint",
          "parameters": {
            "storageAccountType": {
              "value": "Standard_LRS"
            },
            "costCenter": {
              "value": "Contoso/Online/Shopping/Production"
            },
            "owners": {
              "value": [
                "johnDoe@contoso.com",
                "johnsteam@contoso.com"
              ]
            }
          },
          "resourceGroups": {
            "storageRG": {
              "name": "defaultRG",
              "location": "eastus"
            }
          }
        }
      }

      ```

  responses:
  - statusCode: "201"
    body: >-
      {
        "identity": {
          "type": "SystemAssigned",
          "tenantId": "00000000-0000-0000-0000-000000000000",
          "principalId": "00000000-0000-0000-0000-000000000000"
        },
        "location": "eastus",
        "properties": {
          "description": "enforce pre-defined simpleBlueprint to this XXXXXXXX subscription.",
          "provisioningState": "creating",
          "blueprintId": "/providers/Microsoft.Management/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprints/simpleBlueprint",
          "parameters": {
            "storageAccountType": {
              "value": "Standard_LRS"
            },
            "costCenter": {
              "value": "Contoso/Online/Shopping/Production"
            },
            "owners": {
              "value": [
                "johnDoe@contoso.com",
                "johnsteam@contoso.com"
              ]
            }
          },
          "resourceGroups": {
            "storageRG": {
              "name": "defaultRG",
              "location": "eastus"
            }
          }
        },
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Blueprint/blueprintAssignments/assignSimpleBlueprint",
        "type": "Microsoft.Blueprint/Assignment",
        "name": "assignSimpleBlueprint"
      }
- name: Assignment with user-assigned managed identity at subscription scope
  request:
    uri: PUT https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Blueprint/blueprintAssignments/assignSimpleBlueprint?api-version=2018-11-01-preview
    body: >-
      {
        "identity": {
          "type": "UserAssigned",
          "userAssignedIdentities": {
            "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/contoso-resource-group/providers/Microsoft.ManagedIdentity/userAssignedIdentities/contoso-identity": {}
          }
        },
        "location": "eastus",
        "properties": {
          "description": "enforce pre-defined simpleBlueprint to this XXXXXXXX subscription.",
          "blueprintId": "/providers/Microsoft.Management/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprints/simpleBlueprint",
          "parameters": {
            "storageAccountType": {
              "value": "Standard_LRS"
            },
            "costCenter": {
              "value": "Contoso/Online/Shopping/Production"
            },
            "owners": {
              "value": [
                "johnDoe@contoso.com",
                "johnsteam@contoso.com"
              ]
            }
          },
          "resourceGroups": {
            "storageRG": {
              "name": "defaultRG",
              "location": "eastus"
            }
          }
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Blueprint/blueprintAssignments/assignSimpleBlueprint?api-version=2018-11-01-preview

      {
        "identity": {
          "type": "UserAssigned",
          "userAssignedIdentities": {
            "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/contoso-resource-group/providers/Microsoft.ManagedIdentity/userAssignedIdentities/contoso-identity": {}
          }
        },
        "location": "eastus",
        "properties": {
          "description": "enforce pre-defined simpleBlueprint to this XXXXXXXX subscription.",
          "blueprintId": "/providers/Microsoft.Management/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprints/simpleBlueprint",
          "parameters": {
            "storageAccountType": {
              "value": "Standard_LRS"
            },
            "costCenter": {
              "value": "Contoso/Online/Shopping/Production"
            },
            "owners": {
              "value": [
                "johnDoe@contoso.com",
                "johnsteam@contoso.com"
              ]
            }
          },
          "resourceGroups": {
            "storageRG": {
              "name": "defaultRG",
              "location": "eastus"
            }
          }
        }
      }

      ```

  responses:
  - statusCode: "201"
    body: >-
      {
        "identity": {
          "type": "UserAssigned",
          "tenantId": "00000000-0000-0000-0000-000000000000",
          "userAssignedIdentities": {
            "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/contoso-resource-group/providers/Microsoft.ManagedIdentity/userAssignedIdentities/contoso-identity": {
              "principalId": "00000000-0000-0000-0000-000000000000",
              "clientId": "00000000-0000-0000-0000-000000000000"
            }
          }
        },
        "location": "eastus",
        "properties": {
          "description": "enforce pre-defined simpleBlueprint to this XXXXXXXX subscription.",
          "provisioningState": "creating",
          "blueprintId": "/providers/Microsoft.Management/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprints/simpleBlueprint",
          "parameters": {
            "storageAccountType": {
              "value": "Standard_LRS"
            },
            "costCenter": {
              "value": "Contoso/Online/Shopping/Production"
            },
            "owners": {
              "value": [
                "johnDoe@contoso.com",
                "johnsteam@contoso.com"
              ]
            }
          },
          "resourceGroups": {
            "storageRG": {
              "name": "defaultRG",
              "location": "eastus"
            }
          }
        },
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Blueprint/blueprintAssignments/assignSimpleBlueprint",
        "type": "Microsoft.Blueprint/Assignment",
        "name": "assignSimpleBlueprint"
      }
- name: Assignment with system-assigned managed identity at management group scope
  request:
    uri: PUT https://management.azure.com/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprintAssignments/assignSimpleBlueprint?api-version=2018-11-01-preview
    body: >-
      {
        "identity": {
          "type": "SystemAssigned"
        },
        "location": "eastus",
        "properties": {
          "description": "enforce pre-defined simpleBlueprint to this XXXXXXXX subscription.",
          "blueprintId": "/providers/Microsoft.Management/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprints/simpleBlueprint",
          "scope": "subscriptions/00000000-0000-0000-0000-000000000000",
          "parameters": {
            "storageAccountType": {
              "value": "Standard_LRS"
            },
            "costCenter": {
              "value": "Contoso/Online/Shopping/Production"
            },
            "owners": {
              "value": [
                "johnDoe@contoso.com",
                "johnsteam@contoso.com"
              ]
            }
          },
          "resourceGroups": {
            "storageRG": {
              "name": "defaultRG",
              "location": "eastus"
            }
          }
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprintAssignments/assignSimpleBlueprint?api-version=2018-11-01-preview

      {
        "identity": {
          "type": "SystemAssigned"
        },
        "location": "eastus",
        "properties": {
          "description": "enforce pre-defined simpleBlueprint to this XXXXXXXX subscription.",
          "blueprintId": "/providers/Microsoft.Management/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprints/simpleBlueprint",
          "scope": "subscriptions/00000000-0000-0000-0000-000000000000",
          "parameters": {
            "storageAccountType": {
              "value": "Standard_LRS"
            },
            "costCenter": {
              "value": "Contoso/Online/Shopping/Production"
            },
            "owners": {
              "value": [
                "johnDoe@contoso.com",
                "johnsteam@contoso.com"
              ]
            }
          },
          "resourceGroups": {
            "storageRG": {
              "name": "defaultRG",
              "location": "eastus"
            }
          }
        }
      }

      ```

      # [Go](#tab/Go)
      ``` go
      package armblueprint_test

      import (
      	"context"
      	"log"

      	"github.com/Azure/azure-sdk-for-go/sdk/azcore/to"
      	"github.com/Azure/azure-sdk-for-go/sdk/azidentity"
      	"github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/blueprint/armblueprint"
      )

      // Generated from example definition: https://github.com/Azure/azure-rest-api-specs/tree/main/specification/blueprint/resource-manager/Microsoft.Blueprint/preview/2018-11-01-preview/examples/managementGroupBPAssignment/BlueprintAssignment_Create_SystemAssignedMSI.json
      func ExampleAssignmentsClient_CreateOrUpdate() {
      	cred, err := azidentity.NewDefaultAzureCredential(nil)
      	if err != nil {
      		log.Fatalf("failed to obtain a credential: %v", err)
      	}
      	ctx := context.Background()
      	client, err := armblueprint.NewAssignmentsClient(cred, nil)
      	if err != nil {
      		log.Fatalf("failed to create client: %v", err)
      	}
      	_, err = client.CreateOrUpdate(ctx,
      		"managementGroups/ContosoOnlineGroup",
      		"assignSimpleBlueprint",
      		armblueprint.Assignment{
      			Location: to.Ptr("eastus"),
      			Identity: &armblueprint.ManagedServiceIdentity{
      				Type: to.Ptr(armblueprint.ManagedServiceIdentityTypeSystemAssigned),
      			},
      			Properties: &armblueprint.AssignmentProperties{
      				Description: to.Ptr("enforce pre-defined simpleBlueprint to this XXXXXXXX subscription."),
      				BlueprintID: to.Ptr("/providers/Microsoft.Management/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprints/simpleBlueprint"),
      				Parameters: map[string]*armblueprint.ParameterValue{
      					"costCenter": {
      						Value: "Contoso/Online/Shopping/Production",
      					},
      					"owners": {
      						Value: []interface{}{
      							"johnDoe@contoso.com",
      							"johnsteam@contoso.com",
      						},
      					},
      					"storageAccountType": {
      						Value: "Standard_LRS",
      					},
      				},
      				ResourceGroups: map[string]*armblueprint.ResourceGroupValue{
      					"storageRG": {
      						Name:     to.Ptr("defaultRG"),
      						Location: to.Ptr("eastus"),
      					},
      				},
      				Scope: to.Ptr("subscriptions/00000000-0000-0000-0000-000000000000"),
      			},
      		},
      		nil)
      	if err != nil {
      		log.Fatalf("failed to finish the request: %v", err)
      	}
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-go/blob/sdk%2Fresourcemanager%2Fblueprint%2Farmblueprint%2Fv0.5.0/sdk/resourcemanager/blueprint/armblueprint/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "201"
    body: >-
      {
        "identity": {
          "type": "SystemAssigned",
          "tenantId": "00000000-0000-0000-0000-000000000000",
          "principalId": "00000000-0000-0000-0000-000000000000"
        },
        "location": "eastus",
        "properties": {
          "description": "enforce pre-defined simpleBlueprint to this XXXXXXXX subscription.",
          "provisioningState": "creating",
          "blueprintId": "/providers/Microsoft.Management/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprints/simpleBlueprint",
          "scope": "subscriptions/00000000-0000-0000-0000-000000000000",
          "parameters": {
            "storageAccountType": {
              "value": "Standard_LRS"
            },
            "costCenter": {
              "value": "Contoso/Online/Shopping/Production"
            },
            "owners": {
              "value": [
                "johnDoe@contoso.com",
                "johnsteam@contoso.com"
              ]
            }
          },
          "resourceGroups": {
            "storageRG": {
              "name": "defaultRG",
              "location": "eastus"
            }
          }
        },
        "id": "/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprintAssignments/assignSimpleBlueprint",
        "type": "Microsoft.Blueprint/Assignment",
        "name": "assignSimpleBlueprint"
      }
- name: Assignment with user-assigned managed identity at management group scope
  request:
    uri: PUT https://management.azure.com/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprintAssignments/assignSimpleBlueprint?api-version=2018-11-01-preview
    body: >-
      {
        "identity": {
          "type": "UserAssigned",
          "userAssignedIdentities": {
            "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/contoso-resource-group/providers/Microsoft.ManagedIdentity/userAssignedIdentities/contoso-identity": {}
          }
        },
        "location": "eastus",
        "properties": {
          "description": "enforce pre-defined simpleBlueprint to this XXXXXXXX subscription.",
          "blueprintId": "/providers/Microsoft.Management/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprints/simpleBlueprint",
          "scope": "subscriptions/00000000-0000-0000-0000-000000000000",
          "parameters": {
            "storageAccountType": {
              "value": "Standard_LRS"
            },
            "costCenter": {
              "value": "Contoso/Online/Shopping/Production"
            },
            "owners": {
              "value": [
                "johnDoe@contoso.com",
                "johnsteam@contoso.com"
              ]
            }
          },
          "resourceGroups": {
            "storageRG": {
              "name": "defaultRG",
              "location": "eastus"
            }
          }
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprintAssignments/assignSimpleBlueprint?api-version=2018-11-01-preview

      {
        "identity": {
          "type": "UserAssigned",
          "userAssignedIdentities": {
            "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/contoso-resource-group/providers/Microsoft.ManagedIdentity/userAssignedIdentities/contoso-identity": {}
          }
        },
        "location": "eastus",
        "properties": {
          "description": "enforce pre-defined simpleBlueprint to this XXXXXXXX subscription.",
          "blueprintId": "/providers/Microsoft.Management/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprints/simpleBlueprint",
          "scope": "subscriptions/00000000-0000-0000-0000-000000000000",
          "parameters": {
            "storageAccountType": {
              "value": "Standard_LRS"
            },
            "costCenter": {
              "value": "Contoso/Online/Shopping/Production"
            },
            "owners": {
              "value": [
                "johnDoe@contoso.com",
                "johnsteam@contoso.com"
              ]
            }
          },
          "resourceGroups": {
            "storageRG": {
              "name": "defaultRG",
              "location": "eastus"
            }
          }
        }
      }

      ```

  responses:
  - statusCode: "201"
    body: >-
      {
        "identity": {
          "type": "UserAssigned",
          "tenantId": "00000000-0000-0000-0000-000000000000",
          "userAssignedIdentities": {
            "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/contoso-resource-group/providers/Microsoft.ManagedIdentity/userAssignedIdentities/contoso-identity": {
              "principalId": "00000000-0000-0000-0000-000000000000",
              "clientId": "00000000-0000-0000-0000-000000000000"
            }
          }
        },
        "location": "eastus",
        "properties": {
          "description": "enforce pre-defined simpleBlueprint to this XXXXXXXX subscription.",
          "provisioningState": "creating",
          "blueprintId": "/providers/Microsoft.Management/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprints/simpleBlueprint",
          "scope": "subscriptions/00000000-0000-0000-0000-000000000000",
          "parameters": {
            "storageAccountType": {
              "value": "Standard_LRS"
            },
            "costCenter": {
              "value": "Contoso/Online/Shopping/Production"
            },
            "owners": {
              "value": [
                "johnDoe@contoso.com",
                "johnsteam@contoso.com"
              ]
            }
          },
          "resourceGroups": {
            "storageRG": {
              "name": "defaultRG",
              "location": "eastus"
            }
          }
        },
        "id": "/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprintAssignments/assignSimpleBlueprint",
        "type": "Microsoft.Blueprint/Assignment",
        "name": "assignSimpleBlueprint"
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: >
    Learn more about Blueprints service - Create or update a blueprint assignment.
errorCodes: []
