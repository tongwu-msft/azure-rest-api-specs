### YamlMime:RESTOperation
uid: management.azure.com.azureml.machinelearningcompute.update
name: Update
service: Machine Learning
groupName: Machine Learning Compute
apiVersion: 2019-05-01
summary: Updates properties of a compute. This call will overwrite a compute if it exists. This is a nonrecoverable operation.
consumes:
- application/json
produces:
- application/json
paths:
- content: PATCH https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.MachineLearningServices/workspaces/{workspaceName}/computes/{computeName}?api-version=2019-05-01
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: Azure subscription identifier.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: Name of the resource group in which workspace is located.
  types:
  - uid: string
- name: workspaceName
  in: path
  isRequired: true
  description: Name of Azure Machine Learning workspace.
  types:
  - uid: string
- name: computeName
  in: path
  isRequired: true
  description: Name of the Azure Machine Learning compute.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: Version of Azure Machine Learning resource provider API.
  types:
  - uid: string
responses:
- name: 200 OK
  description: Compute update initiated.
  types:
  - uid: ComputeResource
- name: Other Status Codes
  description: Error response describing why the request failed.
  types:
  - uid: MachineLearningServiceError
requestBody:
- name: default
  parameters:
  - name: properties.scaleSettings
    in: body
    description: "Scale settings.  \nDesired scale settings for the amlCompute."
    types:
    - uid: ScaleSettings
requestHeader: []
definitions:
- name: ScaleSettings
  description: scale settings for AML Compute
  kind: object
  properties:
  - name: maxNodeCount
    description: Max number of nodes to use
    types:
    - uid: integer
  - name: minNodeCount
    description: Min number of nodes to use
    types:
    - uid: integer
  - name: nodeIdleTimeBeforeScaleDown
    description: Node Idle Time before scaling down amlCompute
    types:
    - uid: string
- name: ComputeResource
  description: Machine Learning compute object wrapped into ARM resource envelope.
  kind: object
  properties:
  - name: id
    isReadyOnly: true
    description: Specifies the resource ID.
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: Specifies the name of the resource.
    types:
    - uid: string
  - name: identity
    isReadyOnly: true
    description: The identity of the resource.
    types:
    - uid: Identity
  - name: location
    description: Specifies the location of the resource.
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: Specifies the type of the resource.
    types:
    - uid: string
  - name: tags
    description: Contains resource tags defined as key/value pairs.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: properties
    description: Compute properties
    types:
    - uid: AKS
    - uid: AmlCompute
    - uid: VirtualMachine
    - uid: HDInsight
    - uid: DataFactory
    - uid: Databricks
    - uid: DataLakeAnalytics
    typesTitle: Compute
- name: MachineLearningServiceError
  description: Wrapper for error response to follow ARM guidelines.
  kind: object
  properties:
  - name: error
    isReadyOnly: true
    description: The error response.
    types:
    - uid: ErrorResponse
- name: ClusterUpdateParameters
  description: AmlCompute update parameters.
  kind: object
  properties:
  - name: properties.scaleSettings
    description: "Scale settings.  \nDesired scale settings for the amlCompute."
    types:
    - uid: ScaleSettings
- name: Identity
  description: Identity for the resource.
  kind: object
  properties:
  - name: principalId
    isReadyOnly: true
    description: The principal ID of resource identity.
    types:
    - uid: string
  - name: tenantId
    isReadyOnly: true
    description: The tenant ID of resource.
    types:
    - uid: string
  - name: type
    description: The identity type.
    types:
    - uid: ResourceIdentityType
- name: ErrorResponse
  description: Error response information.
  kind: object
  properties:
  - name: code
    isReadyOnly: true
    description: Error code.
    types:
    - uid: string
  - name: message
    isReadyOnly: true
    description: Error message.
    types:
    - uid: string
  - name: details
    isReadyOnly: true
    description: An array of error detail objects.
    types:
    - uid: ErrorDetail
      isArray: true
- name: ResourceIdentityType
  description: The identity type.
  kind: enum
  properties:
  - name: SystemAssigned
    types:
    - uid: string
- name: AKS
  description: A Machine Learning compute based on AKS.
  kind: object
  properties:
  - name: computeType
    description: The type of compute
    types:
    - uid: AKS
    typesTitle: string
  - name: computeLocation
    description: Location for the underlying compute
    types:
    - uid: string
  - name: provisioningState
    isReadyOnly: true
    description: The provision state of the cluster. Valid values are Unknown, Updating, Provisioning, Succeeded, and Failed.
    types:
    - uid: ProvisioningState
  - name: description
    description: The description of the Machine Learning compute.
    types:
    - uid: string
  - name: createdOn
    isReadyOnly: true
    description: The date and time when the compute was created.
    types:
    - uid: string
  - name: modifiedOn
    isReadyOnly: true
    description: The date and time when the compute was last modified.
    types:
    - uid: string
  - name: resourceId
    description: ARM resource id of the underlying compute
    types:
    - uid: string
  - name: provisioningErrors
    isReadyOnly: true
    description: Errors during provisioning
    types:
    - uid: MachineLearningServiceError
      isArray: true
  - name: isAttachedCompute
    isReadyOnly: true
    description: Indicating whether the compute was provisioned by user and brought from outside if true, or machine learning service provisioned it if false.
    types:
    - uid: boolean
  - name: properties
    description: AKS properties
    types:
    - uid: Properties
- name: AmlCompute
  description: An Azure Machine Learning compute.
  kind: object
  properties:
  - name: computeType
    description: The type of compute
    types:
    - uid: AmlCompute
    typesTitle: string
  - name: computeLocation
    description: Location for the underlying compute
    types:
    - uid: string
  - name: provisioningState
    isReadyOnly: true
    description: The provision state of the cluster. Valid values are Unknown, Updating, Provisioning, Succeeded, and Failed.
    types:
    - uid: ProvisioningState
  - name: description
    description: The description of the Machine Learning compute.
    types:
    - uid: string
  - name: createdOn
    isReadyOnly: true
    description: The date and time when the compute was created.
    types:
    - uid: string
  - name: modifiedOn
    isReadyOnly: true
    description: The date and time when the compute was last modified.
    types:
    - uid: string
  - name: resourceId
    description: ARM resource id of the underlying compute
    types:
    - uid: string
  - name: provisioningErrors
    isReadyOnly: true
    description: Errors during provisioning
    types:
    - uid: MachineLearningServiceError
      isArray: true
  - name: isAttachedCompute
    isReadyOnly: true
    description: Indicating whether the compute was provisioned by user and brought from outside if true, or machine learning service provisioned it if false.
    types:
    - uid: boolean
  - name: properties
    description: AML Compute properties
    types:
    - uid: Properties
- name: VirtualMachine
  description: A Machine Learning compute based on Azure Virtual Machines.
  kind: object
  properties:
  - name: computeType
    description: The type of compute
    types:
    - uid: VirtualMachine
    typesTitle: string
  - name: computeLocation
    description: Location for the underlying compute
    types:
    - uid: string
  - name: provisioningState
    isReadyOnly: true
    description: The provision state of the cluster. Valid values are Unknown, Updating, Provisioning, Succeeded, and Failed.
    types:
    - uid: ProvisioningState
  - name: description
    description: The description of the Machine Learning compute.
    types:
    - uid: string
  - name: createdOn
    isReadyOnly: true
    description: The date and time when the compute was created.
    types:
    - uid: string
  - name: modifiedOn
    isReadyOnly: true
    description: The date and time when the compute was last modified.
    types:
    - uid: string
  - name: resourceId
    description: ARM resource id of the underlying compute
    types:
    - uid: string
  - name: provisioningErrors
    isReadyOnly: true
    description: Errors during provisioning
    types:
    - uid: MachineLearningServiceError
      isArray: true
  - name: isAttachedCompute
    isReadyOnly: true
    description: Indicating whether the compute was provisioned by user and brought from outside if true, or machine learning service provisioned it if false.
    types:
    - uid: boolean
  - name: properties
    description: ''
    types:
    - uid: Properties
- name: HDInsight
  description: A HDInsight compute.
  kind: object
  properties:
  - name: computeType
    description: The type of compute
    types:
    - uid: HDInsight
    typesTitle: string
  - name: computeLocation
    description: Location for the underlying compute
    types:
    - uid: string
  - name: provisioningState
    isReadyOnly: true
    description: The provision state of the cluster. Valid values are Unknown, Updating, Provisioning, Succeeded, and Failed.
    types:
    - uid: ProvisioningState
  - name: description
    description: The description of the Machine Learning compute.
    types:
    - uid: string
  - name: createdOn
    isReadyOnly: true
    description: The date and time when the compute was created.
    types:
    - uid: string
  - name: modifiedOn
    isReadyOnly: true
    description: The date and time when the compute was last modified.
    types:
    - uid: string
  - name: resourceId
    description: ARM resource id of the underlying compute
    types:
    - uid: string
  - name: provisioningErrors
    isReadyOnly: true
    description: Errors during provisioning
    types:
    - uid: MachineLearningServiceError
      isArray: true
  - name: isAttachedCompute
    isReadyOnly: true
    description: Indicating whether the compute was provisioned by user and brought from outside if true, or machine learning service provisioned it if false.
    types:
    - uid: boolean
  - name: properties
    description: ''
    types:
    - uid: Properties
- name: DataFactory
  description: A DataFactory compute.
  kind: object
  properties:
  - name: computeType
    description: The type of compute
    types:
    - uid: DataFactory
    typesTitle: string
  - name: computeLocation
    description: Location for the underlying compute
    types:
    - uid: string
  - name: provisioningState
    isReadyOnly: true
    description: The provision state of the cluster. Valid values are Unknown, Updating, Provisioning, Succeeded, and Failed.
    types:
    - uid: ProvisioningState
  - name: description
    description: The description of the Machine Learning compute.
    types:
    - uid: string
  - name: createdOn
    isReadyOnly: true
    description: The date and time when the compute was created.
    types:
    - uid: string
  - name: modifiedOn
    isReadyOnly: true
    description: The date and time when the compute was last modified.
    types:
    - uid: string
  - name: resourceId
    description: ARM resource id of the underlying compute
    types:
    - uid: string
  - name: provisioningErrors
    isReadyOnly: true
    description: Errors during provisioning
    types:
    - uid: MachineLearningServiceError
      isArray: true
  - name: isAttachedCompute
    isReadyOnly: true
    description: Indicating whether the compute was provisioned by user and brought from outside if true, or machine learning service provisioned it if false.
    types:
    - uid: boolean
- name: Databricks
  description: A DataFactory compute.
  kind: object
  properties:
  - name: computeType
    description: The type of compute
    types:
    - uid: Databricks
    typesTitle: string
  - name: computeLocation
    description: Location for the underlying compute
    types:
    - uid: string
  - name: provisioningState
    isReadyOnly: true
    description: The provision state of the cluster. Valid values are Unknown, Updating, Provisioning, Succeeded, and Failed.
    types:
    - uid: ProvisioningState
  - name: description
    description: The description of the Machine Learning compute.
    types:
    - uid: string
  - name: createdOn
    isReadyOnly: true
    description: The date and time when the compute was created.
    types:
    - uid: string
  - name: modifiedOn
    isReadyOnly: true
    description: The date and time when the compute was last modified.
    types:
    - uid: string
  - name: resourceId
    description: ARM resource id of the underlying compute
    types:
    - uid: string
  - name: provisioningErrors
    isReadyOnly: true
    description: Errors during provisioning
    types:
    - uid: MachineLearningServiceError
      isArray: true
  - name: isAttachedCompute
    isReadyOnly: true
    description: Indicating whether the compute was provisioned by user and brought from outside if true, or machine learning service provisioned it if false.
    types:
    - uid: boolean
  - name: properties
    description: ''
    types:
    - uid: Properties
- name: DataLakeAnalytics
  description: A DataLakeAnalytics compute.
  kind: object
  properties:
  - name: computeType
    description: The type of compute
    types:
    - uid: DataLakeAnalytics
    typesTitle: string
  - name: computeLocation
    description: Location for the underlying compute
    types:
    - uid: string
  - name: provisioningState
    isReadyOnly: true
    description: The provision state of the cluster. Valid values are Unknown, Updating, Provisioning, Succeeded, and Failed.
    types:
    - uid: ProvisioningState
  - name: description
    description: The description of the Machine Learning compute.
    types:
    - uid: string
  - name: createdOn
    isReadyOnly: true
    description: The date and time when the compute was created.
    types:
    - uid: string
  - name: modifiedOn
    isReadyOnly: true
    description: The date and time when the compute was last modified.
    types:
    - uid: string
  - name: resourceId
    description: ARM resource id of the underlying compute
    types:
    - uid: string
  - name: provisioningErrors
    isReadyOnly: true
    description: Errors during provisioning
    types:
    - uid: MachineLearningServiceError
      isArray: true
  - name: isAttachedCompute
    isReadyOnly: true
    description: Indicating whether the compute was provisioned by user and brought from outside if true, or machine learning service provisioned it if false.
    types:
    - uid: boolean
  - name: properties
    description: ''
    types:
    - uid: Properties
- name: ErrorDetail
  description: Error detail information.
  kind: object
  properties:
  - name: code
    description: Error code.
    types:
    - uid: string
  - name: message
    description: Error message.
    types:
    - uid: string
- name: ComputeType
  description: The type of compute
  kind: enum
  properties:
  - name: AKS
    types:
    - uid: string
  - name: AmlCompute
    types:
    - uid: string
  - name: DataFactory
    types:
    - uid: string
  - name: VirtualMachine
    types:
    - uid: string
  - name: HDInsight
    types:
    - uid: string
  - name: Databricks
    types:
    - uid: string
  - name: DataLakeAnalytics
    types:
    - uid: string
- name: ProvisioningState
  description: The current deployment state of workspace resource. The provisioningState is to indicate states for resource provisioning.
  kind: enum
  properties:
  - name: Unknown
    types:
    - uid: string
  - name: Updating
    types:
    - uid: string
  - name: Creating
    types:
    - uid: string
  - name: Deleting
    types:
    - uid: string
  - name: Succeeded
    types:
    - uid: string
  - name: Failed
    types:
    - uid: string
  - name: Canceled
    types:
    - uid: string
- name: Properties
  description: AKS properties
  kind: object
  properties:
  - name: clusterFqdn
    description: Cluster full qualified domain name
    types:
    - uid: string
  - name: systemServices
    isReadyOnly: true
    description: System services
    types:
    - uid: SystemService
      isArray: true
  - name: agentCount
    description: Number of agents
    types:
    - uid: integer
  - name: agentVMSize
    description: Agent virtual machine size
    types:
    - uid: string
  - name: sslConfiguration
    description: SSL configuration
    types:
    - uid: SslConfiguration
  - name: aksNetworkingConfiguration
    description: AKS networking configuration for vnet
    types:
    - uid: AksNetworkingConfiguration
- name: SystemService
  description: A system service running on a compute.
  kind: object
  properties:
  - name: systemServiceType
    isReadyOnly: true
    description: The type of this system service.
    types:
    - uid: string
  - name: publicIpAddress
    isReadyOnly: true
    description: Public IP address
    types:
    - uid: string
  - name: version
    isReadyOnly: true
    description: The version for this type.
    types:
    - uid: string
- name: SslConfiguration
  description: The ssl configuration for scoring
  kind: object
  properties:
  - name: status
    description: Enable or disable ssl for scoring
    types:
    - uid: Disabled
    - uid: Enabled
    typesTitle: enum
  - name: cert
    description: Cert data
    types:
    - uid: string
  - name: key
    description: Key data
    types:
    - uid: string
  - name: cname
    description: CNAME of the cert
    types:
    - uid: string
- name: AksNetworkingConfiguration
  description: Advance configuration for AKS networking
  kind: object
  properties:
  - name: subnetId
    description: Virtual network subnet resource ID the compute nodes belong to
    types:
    - uid: string
  - name: serviceCidr
    description: A CIDR notation IP range from which to assign service cluster IPs. It must not overlap with any Subnet IP ranges.
    types:
    - uid: string
  - name: dnsServiceIP
    description: An IP address assigned to the Kubernetes DNS service. It must be within the Kubernetes service address range specified in serviceCidr.
    types:
    - uid: string
  - name: dockerBridgeCidr
    description: A CIDR notation IP range assigned to the Docker bridge network. It must not overlap with any Subnet IP ranges or the Kubernetes service address range.
    types:
    - uid: string
examples:
- name: Update a AmlCompute Compute
  request:
    uri: PATCH https://management.azure.com/subscriptions/34adfa4f-cedf-4dc0-ba29-b6d1a69ab345/resourceGroups/testrg123/providers/Microsoft.MachineLearningServices/workspaces/workspaces123/computes/compute123?api-version=2019-05-01
    body: >-
      {
        "properties": {
          "scaleSettings": {
            "maxNodeCount": 4,
            "minNodeCount": 4,
            "nodeIdleTimeBeforeScaleDown": "PT5M"
          }
        }
      }
  responses:
  - statusCode: "200"
    headers:
    - name: Azure-AsyncOperation
      value: https://management.azure.com/subscriptions/...pathToOperationStatus...
    body: >-
      {
        "id": "/subscriptions/34adfa4f-cedf-4dc0-ba29-b6d1a69ab345/resourceGroups/testrg123/providers/Microsoft.MachineLearningServices/workspaces/workspaces123/computes/compute123",
        "type": "Microsoft.MachineLearningServices/workspaces/computes",
        "name": "compute123",
        "location": "eastus2",
        "properties": {
          "description": "some compute",
          "computeType": "AmlCompute",
          "provisioningState": "Updating"
        }
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow.
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
errorCodes: []
