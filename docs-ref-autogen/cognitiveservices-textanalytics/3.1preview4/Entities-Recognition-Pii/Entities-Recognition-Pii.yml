### YamlMime:RESTOperation
uid: cognitiveservices-textanalytics.3.1preview4.entitiesrecognitionpii.entitiesrecognitionpii
name: Entities Recognition Pii
service: Cognitive Services - Text Analytics
groupName: Entities Recognition Pii
apiVersion: v3.1-preview.4
summary: "Entities containing personal information  \nThe API returns a list of entities with personal information (\\\"SSN\\\", \\\"Bank Account\\\" etc) in the document. For the list of supported entity types, check <a href=\"https://aka.ms/tanerpii\">Supported Entity Types in Text Analytics API</a>. See the <a href=\"https://aka.ms/talangs\">Supported languages in Text Analytics API</a> for the list of enabled languages."
consumes:
- application/json
- text/json
produces:
- application/json
- text/json
paths:
- content: POST {Endpoint}/text/analytics/v3.1-preview.4/entities/recognition/pii
- content: POST {Endpoint}/text/analytics/v3.1-preview.4/entities/recognition/pii?model-version={model-version}&showStats={showStats}&domain={domain}&stringIndexType={stringIndexType}&piiCategories={piiCategories}
  isOptional: true
uriParameters:
- name: Endpoint
  in: path
  isRequired: true
  skipUrlEncoding: true
  description: 'Supported Cognitive Services endpoints (protocol and hostname, for example: https://westus.api.cognitive.microsoft.com).'
  types:
  - uid: string
- name: model-version
  in: query
  description: '(Optional) This value indicates which model will be used for scoring. If a model-version is not specified, the API should default to the latest, non-preview version. '
  types:
  - uid: string
- name: showStats
  in: query
  description: (Optional) if set to true, response will contain request and document level statistics.
  types:
  - uid: boolean
- name: domain
  in: query
  description: "(Optional) if specified, will set the PII domain to include only a subset of the entity categories. Possible values include: 'PHI', 'none'."
  types:
  - uid: string
- name: stringIndexType
  in: query
  description: (Optional) Specifies the method used to interpret string offsets.  Defaults to Text Elements (Graphemes) according to Unicode v8.0.0. For additional information see https://aka.ms/text-analytics-offsets
  types:
  - uid: StringIndexType
- name: piiCategories
  in: query
  description: (Optional) describes the PII categories to return
  types:
  - uid: array
responses:
- name: 200 OK
  description: A successful call results in a list of entities containing personal information returned for each valid document
  types:
  - uid: PiiResult
- name: 400 Bad Request
  description: Bad Request.
  types:
  - uid: ErrorResponse
- name: 500 Internal Server Error
  description: Internal error response
  types:
  - uid: ErrorResponse
requestBody:
- name: default
  parameters:
  - name: documents
    in: body
    isRequired: true
    description: The set of documents to process as part of this batch.
    types:
    - uid: MultiLanguageInput
      isArray: true
requestHeader:
- name: Ocp-Apim-Subscription-Key
  in: header
  isRequired: true
  types:
  - uid: string
definitions:
- name: StringIndexType
  kind: enum
  properties:
  - name: TextElements_v8
    description: Returned offset and length values will correspond to TextElements (Graphemes and Grapheme clusters) confirming to the Unicode 8.0.0 standard. Use this option if your application is written in .Net Framework or .Net Core and you will be using StringInfo.
    types:
    - uid: string
  - name: UnicodeCodePoint
    description: Returned offset and length values will correspond to Unicode code points. Use this option if your application is written in a language that support Unicode, for example Python.
    types:
    - uid: string
  - name: Utf16CodeUnit
    description: Returned offset and length values will correspond to UTF-16 code units. Use this option if your application is written in a language that support Unicode, for example Java, JavaScript.
    types:
    - uid: string
- name: MultiLanguageInput
  description: Contains an input document to be analyzed by the service.
  kind: object
  properties:
  - name: id
    description: A unique, non-empty document identifier.
    types:
    - uid: string
  - name: text
    description: The input text to process.
    types:
    - uid: string
  - name: language
    description: (Optional) This is the 2 letter ISO 639-1 representation of a language. For example, use "en" for English; "es" for Spanish etc. If not set, use "en" for English as default.
    types:
    - uid: string
- name: PiiResult
  kind: object
  properties:
  - name: documents
    description: Response by document
    types:
    - uid: PiiDocumentEntities
      isArray: true
  - name: errors
    description: Errors by document id.
    types:
    - uid: DocumentError
      isArray: true
  - name: statistics
    description: if showStats=true was specified in the request this field will contain information about the request payload.
    types:
    - uid: RequestStatistics
  - name: modelVersion
    description: This field indicates which model is used for scoring.
    types:
    - uid: string
- name: ErrorResponse
  kind: object
  properties:
  - name: error
    description: Document Error.
    types:
    - uid: TextAnalyticsError
- name: MultiLanguageBatchInput
  description: Contains a set of input documents to be analyzed by the service.
  kind: object
  properties:
  - name: documents
    description: The set of documents to process as part of this batch.
    types:
    - uid: MultiLanguageInput
      isArray: true
- name: PiiDocumentEntities
  kind: object
  properties:
  - name: id
    description: Unique, non-empty document identifier.
    types:
    - uid: string
  - name: redactedText
    description: Returns redacted text.
    types:
    - uid: string
  - name: entities
    description: Recognized entities in the document.
    types:
    - uid: Entity
      isArray: true
  - name: warnings
    description: Warnings encountered while processing document.
    types:
    - uid: TextAnalyticsWarning
      isArray: true
  - name: statistics
    description: if showStats=true was specified in the request this field will contain information about the document payload.
    types:
    - uid: DocumentStatistics
- name: DocumentError
  kind: object
  properties:
  - name: id
    description: Document Id.
    types:
    - uid: string
  - name: error
    description: Document Error.
    types:
    - uid: TextAnalyticsError
- name: RequestStatistics
  description: if showStats=true was specified in the request this field will contain information about the request payload.
  kind: object
  properties:
  - name: documentsCount
    description: Number of documents submitted in the request.
    types:
    - uid: integer
  - name: validDocumentsCount
    description: Number of valid documents. This excludes empty, over-size limit or non-supported languages documents.
    types:
    - uid: integer
  - name: erroneousDocumentsCount
    description: Number of invalid documents. This includes empty, over-size limit or non-supported languages documents.
    types:
    - uid: integer
  - name: transactionsCount
    description: Number of transactions for the request.
    types:
    - uid: integer
- name: TextAnalyticsError
  kind: object
  properties:
  - name: code
    description: Error code.
    types:
    - uid: ErrorCodeValue
  - name: message
    description: Error message.
    types:
    - uid: string
  - name: target
    description: Error target.
    types:
    - uid: string
  - name: innererror
    description: Inner error contains more specific information.
    types:
    - uid: InnerError
  - name: details
    description: Details about specific errors that led to this reported error.
    types:
    - uid: TextAnalyticsError
      isArray: true
- name: Entity
  kind: object
  properties:
  - name: text
    description: Entity text as appears in the request.
    types:
    - uid: string
  - name: category
    description: Entity type.
    types:
    - uid: string
  - name: subcategory
    description: (Optional) Entity sub type.
    types:
    - uid: string
  - name: offset
    description: Start position for the entity text. Use of different 'stringIndexType' values can affect the offset returned.
    types:
    - uid: integer
  - name: length
    description: Length for the entity text. Use of different 'stringIndexType' values can affect the length returned.
    types:
    - uid: integer
  - name: confidenceScore
    description: Confidence score between 0 and 1 of the extracted entity.
    types:
    - uid: number
- name: TextAnalyticsWarning
  kind: object
  properties:
  - name: code
    description: Error code.
    types:
    - uid: WarningCodeValue
  - name: message
    description: Warning message.
    types:
    - uid: string
  - name: targetRef
    description: A JSON pointer reference indicating the target object.
    types:
    - uid: string
- name: DocumentStatistics
  description: if showStats=true was specified in the request this field will contain information about the document payload.
  kind: object
  properties:
  - name: charactersCount
    description: Number of text elements recognized in the document.
    types:
    - uid: integer
  - name: transactionsCount
    description: Number of transactions for the document.
    types:
    - uid: integer
- name: ErrorCodeValue
  description: Error code.
  kind: enum
  properties:
  - name: InvalidRequest
    types:
    - uid: string
  - name: InvalidArgument
    types:
    - uid: string
  - name: InternalServerError
    types:
    - uid: string
  - name: ServiceUnavailable
    types:
    - uid: string
  - name: NotFound
    types:
    - uid: string
- name: InnerError
  kind: object
  properties:
  - name: code
    description: Error code.
    types:
    - uid: InnerErrorCodeValue
  - name: message
    description: Error message.
    types:
    - uid: string
  - name: details
    description: Error details.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: target
    description: Error target.
    types:
    - uid: string
  - name: innererror
    description: Inner error contains more specific information.
    types:
    - uid: InnerError
- name: WarningCodeValue
  description: Error code.
  kind: enum
  properties:
  - name: LongWordsInDocument
    types:
    - uid: string
  - name: DocumentTruncated
    types:
    - uid: string
- name: InnerErrorCodeValue
  description: Error code.
  kind: enum
  properties:
  - name: InvalidParameterValue
    types:
    - uid: string
  - name: InvalidRequestBodyFormat
    types:
    - uid: string
  - name: EmptyRequest
    types:
    - uid: string
  - name: MissingInputRecords
    types:
    - uid: string
  - name: InvalidDocument
    types:
    - uid: string
  - name: ModelVersionIncorrect
    types:
    - uid: string
  - name: InvalidDocumentBatch
    types:
    - uid: string
  - name: UnsupportedLanguageCode
    types:
    - uid: string
  - name: InvalidCountryHint
    types:
    - uid: string
examples:
- name: Successful Entity PII request
  request:
    uri: POST {Endpoint}/text/analytics/v3.1-preview.4/entities/recognition/pii
    body: >-
      {
        "documents": [
          {
            "id": "1",
            "language": "en",
            "text": "My SSN is 859-98-0987"
          },
          {
            "id": "2",
            "language": "en",
            "text": "Your ABA number - 111000025 - is the first 9 digits in the lower left hand corner of your personal check."
          },
          {
            "id": "3",
            "language": "en",
            "text": "Is 998.214.865-68 your Brazilian CPF number?"
          }
        ]
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      POST {Endpoint}/text/analytics/v3.1-preview.4/entities/recognition/pii


      {
        "documents": [
          {
            "id": "1",
            "language": "en",
            "text": "My SSN is 859-98-0987"
          },
          {
            "id": "2",
            "language": "en",
            "text": "Your ABA number - 111000025 - is the first 9 digits in the lower left hand corner of your personal check."
          },
          {
            "id": "3",
            "language": "en",
            "text": "Is 998.214.865-68 your Brazilian CPF number?"
          }
        ]
      }

      ```

    headers:
    - name: Ocp-Apim-Subscription-Key
      value: '{API key}'
  responses:
  - statusCode: "200"
    body: >-
      {
        "documents": [
          {
            "id": "1",
            "redactedText": "My SSN is ***********",
            "entities": [
              {
                "category": "U.S. Social Security Number (SSN)",
                "confidenceScore": 0.65,
                "length": 11,
                "offset": 28,
                "text": "859-98-0987"
              }
            ],
            "warnings": []
          },
          {
            "id": "2",
            "redactedText": "Your ABA number - ********* - is the first 9 digits in the lower left hand corner of your personal check.",
            "entities": [
              {
                "category": "ABA Routing Number",
                "confidenceScore": 0.75,
                "length": 9,
                "offset": 18,
                "text": "111000025"
              }
            ],
            "warnings": []
          },
          {
            "id": "3",
            "redactedText": "Is ************** your Brazilian CPF number?",
            "entities": [
              {
                "category": "Brazil CPF Number",
                "confidenceScore": 0.85,
                "length": 14,
                "offset": 3,
                "text": "998.214.865-68"
              }
            ],
            "warnings": []
          }
        ],
        "errors": [],
        "modelVersion": "2019-10-01"
      }
  - statusCode: "400"
    body: >-
      {
        "error": {
          "code": "InvalidRequest",
          "message": "Invalid Request.",
          "innererror": {
            "code": "MissingInputRecords",
            "message": "Missing input records."
          }
        }
      }
  - statusCode: "500"
    body: >-
      {
        "error": {
          "code": "InternalServerError",
          "message": "Internal Server Error"
        }
      }
security:
- name: Ocp-Apim-Subscription-Key
  type: apiKey
  in: header
metadata:
  description: >-
    Entities containing personal information

    The API returns a list of entities with personal information ("SSN", "Bank Account" etc) in the document.
errorCodes: []
