### YamlMime:RESTOperation
uid: management.azure.com.cosmos-db-resource-provider.2021-11-15-preview.sqlresources.createupdatesqlroleassignment
name: Create Update Sql Role Assignment
service: Cosmos DB Resource Provider
groupName: Sql Resources
apiVersion: 2021-11-15-preview
summary: Creates or updates an Azure Cosmos DB SQL Role Assignment.
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.DocumentDB/databaseAccounts/{accountName}/sqlRoleAssignments/{roleAssignmentId}?api-version=2021-11-15-preview
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: The ID of the target subscription.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group. The name is case insensitive.
  types:
  - uid: string
- name: accountName
  in: path
  isRequired: true
  description: Cosmos DB database account name.
  types:
  - uid: string
  pattern: ^[a-z0-9]+(-[a-z0-9]+)*
- name: roleAssignmentId
  in: path
  isRequired: true
  description: The GUID for the Role Assignment.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: The API version to use for this operation.
  types:
  - uid: string
responses:
- name: 200 OK
  description: The Role Assignment create or update operation was completed successfully.
  types:
  - uid: SqlRoleAssignmentGetResults
- name: 202 Accepted
  description: The Role Assignment create or update request was accepted and will complete asynchronously.
- name: Other Status Codes
  description: Error response describing why the operation failed.
  types:
  - uid: CloudError
requestBody:
- name: default
  parameters:
  - name: properties.roleDefinitionId
    in: body
    description: The unique identifier for the associated Role Definition.
    types:
    - uid: string
  - name: properties.scope
    in: body
    description: The data plane resource path for which access is being granted through this Role Assignment.
    types:
    - uid: string
  - name: properties.principalId
    in: body
    description: The unique identifier for the associated AAD principal in the AAD graph to which access is being granted through this Role Assignment. Tenant ID for the principal is inferred using the tenant associated with the subscription.
    types:
    - uid: string
requestHeader: []
definitions:
- name: SqlRoleAssignmentGetResults
  description: An Azure Cosmos DB Role Assignment
  kind: object
  properties:
  - name: properties.roleDefinitionId
    description: The unique identifier for the associated Role Definition.
    types:
    - uid: string
  - name: properties.scope
    description: The data plane resource path for which access is being granted through this Role Assignment.
    types:
    - uid: string
  - name: properties.principalId
    description: The unique identifier for the associated AAD principal in the AAD graph to which access is being granted through this Role Assignment. Tenant ID for the principal is inferred using the tenant associated with the subscription.
    types:
    - uid: string
  - name: id
    isReadyOnly: true
    description: The unique resource identifier of the database account.
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: The name of the database account.
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: The type of Azure resource.
    types:
    - uid: string
- name: CloudError
  description: An error response from the service.
  kind: object
  properties:
  - name: error
    description: Error Response.
    types:
    - uid: ErrorResponse
- name: SqlRoleAssignmentCreateUpdateParameters
  description: Parameters to create and update an Azure Cosmos DB SQL Role Assignment.
  kind: object
  properties:
  - name: properties.roleDefinitionId
    description: The unique identifier for the associated Role Definition.
    types:
    - uid: string
  - name: properties.scope
    description: The data plane resource path for which access is being granted through this Role Assignment.
    types:
    - uid: string
  - name: properties.principalId
    description: The unique identifier for the associated AAD principal in the AAD graph to which access is being granted through this Role Assignment. Tenant ID for the principal is inferred using the tenant associated with the subscription.
    types:
    - uid: string
- name: ErrorResponse
  description: Error Response.
  kind: object
  properties:
  - name: code
    description: Error code.
    types:
    - uid: string
  - name: message
    description: Error message indicating why the operation failed.
    types:
    - uid: string
examples:
- name: CosmosDBSqlRoleAssignmentCreateUpdate
  request:
    uri: PUT https://management.azure.com/subscriptions/mySubscriptionId/resourceGroups/myResourceGroupName/providers/Microsoft.DocumentDB/databaseAccounts/myAccountName/sqlRoleAssignments/myRoleAssignmentId?api-version=2021-11-15-preview
    body: >-
      {
        "properties": {
          "roleDefinitionId": "/subscriptions/mySubscriptionId/resourceGroups/myResourceGroupName/providers/Microsoft.DocumentDB/databaseAccounts/myAccountName/sqlRoleDefinitions/myRoleDefinitionId",
          "scope": "/subscriptions/mySubscriptionId/resourceGroups/myResourceGroupName/providers/Microsoft.DocumentDB/databaseAccounts/myAccountName/dbs/purchases/colls/redmond-purchases",
          "principalId": "myPrincipalId"
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/mySubscriptionId/resourceGroups/myResourceGroupName/providers/Microsoft.DocumentDB/databaseAccounts/myAccountName/sqlRoleAssignments/myRoleAssignmentId?api-version=2021-11-15-preview

      {
        "properties": {
          "roleDefinitionId": "/subscriptions/mySubscriptionId/resourceGroups/myResourceGroupName/providers/Microsoft.DocumentDB/databaseAccounts/myAccountName/sqlRoleDefinitions/myRoleDefinitionId",
          "scope": "/subscriptions/mySubscriptionId/resourceGroups/myResourceGroupName/providers/Microsoft.DocumentDB/databaseAccounts/myAccountName/dbs/purchases/colls/redmond-purchases",
          "principalId": "myPrincipalId"
        }
      }

      ```

  responses:
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/mySubscriptionId/resourceGroups/myResourceGroupName/providers/Microsoft.DocumentDB/databaseAccounts/myAccountName/sqlRoleAssignments/myRoleAssignmentId",
        "name": "myRoleAssignmentId",
        "type": "Microsoft.DocumentDB/databaseAccounts/sqlRoleAssignments",
        "properties": {
          "roleDefinitionId": "/subscriptions/mySubscriptionId/resourceGroups/myResourceGroupName/providers/Microsoft.DocumentDB/databaseAccounts/myAccountName/sqlRoleDefinitions/myRoleDefinitionId",
          "scope": "/subscriptions/mySubscriptionId/resourceGroups/myResourceGroupName/providers/Microsoft.DocumentDB/databaseAccounts/myAccountName/dbs/purchases/colls/redmond-purchases",
          "principalId": "myPrincipalId"
        }
      }
  - statusCode: "202"
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: Impersonate your user account
metadata:
  description: >
    Learn more about Cosmos DB Resource Provider service - Creates or updates an Azure Cosmos DB SQL Role Assignment.
errorCodes: []
