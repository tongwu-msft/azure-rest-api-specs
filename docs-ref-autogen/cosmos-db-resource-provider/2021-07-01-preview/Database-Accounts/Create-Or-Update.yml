### YamlMime:RESTOperation
uid: management.azure.com.cosmos-db-resource-provider.2021-07-01-preview.databaseaccounts.createorupdate
name: Create Or Update
service: Cosmos DB Resource Provider
groupName: Database Accounts
apiVersion: 2021-07-01-preview
summary: Creates or updates an Azure Cosmos DB database account. The "Update" method is preferred when performing updates on an account.
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.DocumentDB/databaseAccounts/{accountName}?api-version=2021-07-01-preview
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: The ID of the target subscription.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group. The name is case insensitive.
  types:
  - uid: string
- name: accountName
  in: path
  isRequired: true
  description: Cosmos DB database account name.
  types:
  - uid: string
  pattern: ^[a-z0-9]+(-[a-z0-9]+)*
- name: api-version
  in: query
  isRequired: true
  description: The API version to use for this operation.
  types:
  - uid: string
responses:
- name: 200 OK
  description: The database account create or update operation will complete asynchronously.
  types:
  - uid: DatabaseAccountGetResults
requestBody:
- name: default
  parameters:
  - name: kind
    in: body
    description: Indicates the type of database account. This can only be set at database account creation.
    types:
    - uid: DatabaseAccountKind
  - name: identity
    in: body
    description: Identity for the resource.
    types:
    - uid: ManagedServiceIdentity
  - name: properties.consistencyPolicy
    in: body
    description: The consistency policy for the Cosmos DB account.
    types:
    - uid: ConsistencyPolicy
  - name: properties.locations
    in: body
    isRequired: true
    description: An array that contains the georeplication locations enabled for the Cosmos DB account.
    types:
    - uid: Location
      isArray: true
  - name: properties.databaseAccountOfferType
    in: body
    isRequired: true
    description: The offer type for the database
    types:
    - uid: DatabaseAccountOfferType
  - name: properties.ipRules
    in: body
    description: List of IpRules.
    types:
    - uid: IpAddressOrRange
      isArray: true
  - name: properties.isVirtualNetworkFilterEnabled
    in: body
    description: Flag to indicate whether to enable/disable Virtual Network ACL rules.
    types:
    - uid: boolean
  - name: properties.enableAutomaticFailover
    in: body
    description: Enables automatic failover of the write region in the rare event that the region is unavailable due to an outage. Automatic failover will result in a new write region for the account and is chosen based on the failover priorities configured for the account.
    types:
    - uid: boolean
  - name: properties.capabilities
    in: body
    description: List of Cosmos DB capabilities for the account
    types:
    - uid: Capability
      isArray: true
  - name: properties.virtualNetworkRules
    in: body
    description: List of Virtual Network ACL rules configured for the Cosmos DB account.
    types:
    - uid: VirtualNetworkRule
      isArray: true
  - name: properties.enableMultipleWriteLocations
    in: body
    description: Enables the account to write in multiple locations
    types:
    - uid: boolean
  - name: properties.enableCassandraConnector
    in: body
    description: Enables the cassandra connector on the Cosmos DB C* account
    types:
    - uid: boolean
  - name: properties.connectorOffer
    in: body
    description: The cassandra connector offer type for the Cosmos DB database C* account.
    types:
    - uid: ConnectorOffer
  - name: properties.disableKeyBasedMetadataWriteAccess
    in: body
    description: Disable write operations on metadata resources (databases, containers, throughput) via account keys
    types:
    - uid: boolean
  - name: properties.keyVaultKeyUri
    in: body
    description: The URI of the key vault
    types:
    - uid: string
  - name: properties.defaultIdentity
    in: body
    description: The default identity for accessing key vault used in features like customer managed keys. The default identity needs to be explicitly set by the users. It can be "FirstPartyIdentity", "SystemAssignedIdentity" and more.
    types:
    - uid: string
  - name: properties.publicNetworkAccess
    in: body
    description: Whether requests from Public Network are allowed
    types:
    - uid: PublicNetworkAccess
  - name: properties.enableFreeTier
    in: body
    description: Flag to indicate whether Free Tier is enabled.
    types:
    - uid: boolean
  - name: properties.apiProperties
    in: body
    description: API specific properties. Currently, supported only for MongoDB API.
    types:
    - uid: ApiProperties
  - name: properties.enableAnalyticalStorage
    in: body
    description: Flag to indicate whether to enable storage analytics.
    types:
    - uid: boolean
  - name: properties.analyticalStorageConfiguration
    in: body
    description: Analytical storage specific properties.
    types:
    - uid: AnalyticalStorageConfiguration
  - name: properties.createMode
    in: body
    isRequired: true
    description: Enum to indicate the mode of account creation.
    types:
    - uid: CreateMode
  - name: properties.backupPolicy
    in: body
    description: The object representing the policy for taking backups on an account.
    types:
    - uid: PeriodicModeBackupPolicy
    - uid: ContinuousModeBackupPolicy
    typesTitle: BackupPolicy
  - name: properties.cors
    in: body
    description: The CORS policy for the Cosmos DB database account.
    types:
    - uid: CorsPolicy
      isArray: true
  - name: properties.networkAclBypass
    in: body
    description: Indicates what services are allowed to bypass firewall checks.
    types:
    - uid: NetworkAclBypass
  - name: properties.networkAclBypassResourceIds
    in: body
    description: An array that contains the Resource Ids for Network Acl Bypass for the Cosmos DB account.
    types:
    - uid: string
      isArray: true
  - name: properties.diagnosticLogSettings
    in: body
    description: The Object representing the different Diagnostic log settings for the Cosmos DB Account.
    types:
    - uid: DiagnosticLogSettings
  - name: properties.disableLocalAuth
    in: body
    description: Opt-out of local authentication and ensure only MSI and AAD can be used exclusively for authentication.
    types:
    - uid: boolean
  - name: properties.restoreParameters
    in: body
    description: Parameters to indicate the information about the restore.
    types:
    - uid: RestoreParameters
  - name: location
    in: body
    description: The location of the resource group to which the resource belongs.
    types:
    - uid: string
  - name: tags
    in: body
    description: 'Tags are a list of key-value pairs that describe the resource. These tags can be used in viewing and grouping this resource (across resource groups). A maximum of 15 tags can be provided for a resource. Each tag must have a key no greater than 128 characters and value no greater than 256 characters. For example, the default experience for a template type is set with "defaultExperience": "Cassandra". Current "defaultExperience" values also include "Table", "Graph", "DocumentDB", and "MongoDB".'
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
requestHeader: []
definitions:
- name: ManagedServiceIdentity
  description: Identity for the resource.
  kind: object
  properties:
  - name: principalId
    isReadyOnly: true
    description: The principal id of the system assigned identity. This property will only be provided for a system assigned identity.
    types:
    - uid: string
  - name: tenantId
    isReadyOnly: true
    description: The tenant id of the system assigned identity. This property will only be provided for a system assigned identity.
    types:
    - uid: string
  - name: type
    description: The type of identity used for the resource. The type 'SystemAssigned,UserAssigned' includes both an implicitly created identity and a set of user assigned identities. The type 'None' will remove any identities from the service.
    types:
    - uid: ResourceIdentityType
  - name: userAssignedIdentities
    description: "The list of user identities associated with resource. The user identity dictionary key references will be ARM resource ids in the form: '/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.ManagedIdentity/userAssignedIdentities/{identityName}'."
    types:
    - uid: UserAssignedIdentities
- name: ConsistencyPolicy
  description: The consistency policy for the Cosmos DB database account.
  kind: object
  properties:
  - name: defaultConsistencyLevel
    description: The default consistency level and configuration settings of the Cosmos DB account.
    types:
    - uid: DefaultConsistencyLevel
  - name: maxStalenessPrefix
    description: When used with the Bounded Staleness consistency level, this value represents the number of stale requests tolerated. Accepted range for this value is 1 – 2,147,483,647. Required when defaultConsistencyPolicy is set to 'BoundedStaleness'.
    types:
    - uid: integer
  - name: maxIntervalInSeconds
    description: When used with the Bounded Staleness consistency level, this value represents the time amount of staleness (in seconds) tolerated. Accepted range for this value is 5 - 86400. Required when defaultConsistencyPolicy is set to 'BoundedStaleness'.
    types:
    - uid: integer
- name: Location
  description: A region in which the Azure Cosmos DB database account is deployed.
  kind: object
  properties:
  - name: id
    isReadyOnly: true
    description: 'The unique identifier of the region within the database account. Example: &lt;accountName&gt;-&lt;locationName&gt;.'
    types:
    - uid: string
  - name: locationName
    description: The name of the region.
    types:
    - uid: string
  - name: documentEndpoint
    isReadyOnly: true
    description: 'The connection endpoint for the specific region. Example: https://&lt;accountName&gt;-&lt;locationName&gt;.documents.azure.com:443/'
    types:
    - uid: string
  - name: provisioningState
    isReadyOnly: true
    description: The status of the Cosmos DB account at the time the operation was called. The status can be one of following. 'Creating' – the Cosmos DB account is being created. When an account is in Creating state, only properties that are specified as input for the Create Cosmos DB account operation are returned. 'Succeeded' – the Cosmos DB account is active for use. 'Updating' – the Cosmos DB account is being updated. 'Deleting' – the Cosmos DB account is being deleted. 'Failed' – the Cosmos DB account failed creation. 'DeletionFailed' – the Cosmos DB account deletion failed.
    types:
    - uid: string
  - name: failoverPriority
    description: The failover priority of the region. A failover priority of 0 indicates a write region. The maximum value for a failover priority = (total number of regions - 1). Failover priority values must be unique for each of the regions in which the database account exists.
    types:
    - uid: integer
  - name: isZoneRedundant
    description: Flag to indicate whether or not this region is an AvailabilityZone region
    types:
    - uid: boolean
- name: IpAddressOrRange
  description: IpAddressOrRange object
  kind: object
  properties:
  - name: ipAddressOrRange
    description: 'A single IPv4 address or a single IPv4 address range in CIDR format. Provided IPs must be well-formatted and cannot be contained in one of the following ranges: 10.0.0.0/8, 100.64.0.0/10, 172.16.0.0/12, 192.168.0.0/16, since these are not enforceable by the IP address filter. Example of valid inputs: “23.40.210.245” or “23.40.210.0/8”.'
    types:
    - uid: string
- name: Capability
  description: Cosmos DB capability object
  kind: object
  properties:
  - name: name
    description: 'Name of the Cosmos DB capability. For example, "name": "EnableCassandra". Current values also include "EnableTable" and "EnableGremlin".'
    types:
    - uid: string
- name: VirtualNetworkRule
  description: Virtual Network ACL Rule object
  kind: object
  properties:
  - name: id
    description: 'Resource ID of a subnet, for example: /subscriptions/{subscriptionId}/resourceGroups/{groupName}/providers/Microsoft.Network/virtualNetworks/{virtualNetworkName}/subnets/{subnetName}.'
    types:
    - uid: string
  - name: ignoreMissingVNetServiceEndpoint
    description: Create firewall rule before the virtual network has vnet service endpoint enabled.
    types:
    - uid: boolean
- name: ApiProperties
  kind: object
  properties:
  - name: serverVersion
    description: Describes the ServerVersion of an a MongoDB account.
    types:
    - uid: ServerVersion
- name: AnalyticalStorageConfiguration
  description: Analytical storage specific properties.
  kind: object
  properties:
  - name: schemaType
    description: Describes the types of schema for analytical storage.
    types:
    - uid: AnalyticalStorageSchemaType
- name: CorsPolicy
  description: The CORS policy for the Cosmos DB database account.
  kind: object
  properties:
  - name: allowedOrigins
    description: The origin domains that are permitted to make a request against the service via CORS.
    types:
    - uid: string
  - name: allowedMethods
    description: The methods (HTTP request verbs) that the origin domain may use for a CORS request.
    types:
    - uid: string
  - name: allowedHeaders
    description: The request headers that the origin domain may specify on the CORS request.
    types:
    - uid: string
  - name: exposedHeaders
    description: The response headers that may be sent in the response to the CORS request and exposed by the browser to the request issuer.
    types:
    - uid: string
  - name: maxAgeInSeconds
    description: The maximum amount time that a browser should cache the preflight OPTIONS request.
    types:
    - uid: integer
- name: DiagnosticLogSettings
  description: Indicates what diagnostic log settings are to be enabled.
  kind: object
  properties:
  - name: enableFullTextQuery
    description: Describe the level of detail with which queries are to be logged.
    types:
    - uid: EnableFullTextQuery
- name: RestoreParameters
  description: Parameters to indicate the information about the restore.
  kind: object
  properties:
  - name: restoreMode
    description: Describes the mode of the restore.
    types:
    - uid: RestoreMode
  - name: restoreSource
    description: 'The id of the restorable database account from which the restore has to be initiated. For example: /subscriptions/{subscriptionId}/providers/Microsoft.DocumentDB/locations/{location}/restorableDatabaseAccounts/{restorableDatabaseAccountName}'
    types:
    - uid: string
  - name: restoreTimestampInUtc
    description: Time to which the account has to be restored (ISO-8601 format).
    types:
    - uid: string
  - name: databasesToRestore
    description: List of specific databases available for restore.
    types:
    - uid: DatabaseRestoreResource
      isArray: true
- name: DatabaseAccountGetResults
  description: An Azure Cosmos DB database account.
  kind: object
  properties:
  - name: kind
    description: Indicates the type of database account. This can only be set at database account creation.
    types:
    - uid: DatabaseAccountKind
  - name: identity
    description: Identity for the resource.
    types:
    - uid: ManagedServiceIdentity
  - name: systemData
    isReadyOnly: true
    description: The system meta data relating to this resource.
    types:
    - uid: systemData
  - name: properties.provisioningState
    isReadyOnly: true
    description: The status of the Cosmos DB account at the time the operation was called. The status can be one of following. 'Creating' – the Cosmos DB account is being created. When an account is in Creating state, only properties that are specified as input for the Create Cosmos DB account operation are returned. 'Succeeded' – the Cosmos DB account is active for use. 'Updating' – the Cosmos DB account is being updated. 'Deleting' – the Cosmos DB account is being deleted. 'Failed' – the Cosmos DB account failed creation. 'DeletionFailed' – the Cosmos DB account deletion failed.
    types:
    - uid: string
  - name: properties.documentEndpoint
    isReadyOnly: true
    description: The connection endpoint for the Cosmos DB database account.
    types:
    - uid: string
  - name: properties.databaseAccountOfferType
    isReadyOnly: true
    description: 'The offer type for the Cosmos DB database account. Default value: Standard.'
    types:
    - uid: DatabaseAccountOfferType
  - name: properties.ipRules
    description: List of IpRules.
    types:
    - uid: IpAddressOrRange
      isArray: true
  - name: properties.isVirtualNetworkFilterEnabled
    description: Flag to indicate whether to enable/disable Virtual Network ACL rules.
    types:
    - uid: boolean
  - name: properties.enableAutomaticFailover
    description: Enables automatic failover of the write region in the rare event that the region is unavailable due to an outage. Automatic failover will result in a new write region for the account and is chosen based on the failover priorities configured for the account.
    types:
    - uid: boolean
  - name: properties.consistencyPolicy
    description: The consistency policy for the Cosmos DB database account.
    types:
    - uid: ConsistencyPolicy
  - name: properties.capabilities
    description: List of Cosmos DB capabilities for the account
    types:
    - uid: Capability
      isArray: true
  - name: properties.writeLocations
    isReadyOnly: true
    description: An array that contains the write location for the Cosmos DB account.
    types:
    - uid: Location
      isArray: true
  - name: properties.readLocations
    isReadyOnly: true
    description: An array that contains of the read locations enabled for the Cosmos DB account.
    types:
    - uid: Location
      isArray: true
  - name: properties.locations
    isReadyOnly: true
    description: An array that contains all of the locations enabled for the Cosmos DB account.
    types:
    - uid: Location
      isArray: true
  - name: properties.failoverPolicies
    isReadyOnly: true
    description: An array that contains the regions ordered by their failover priorities.
    types:
    - uid: FailoverPolicy
      isArray: true
  - name: properties.virtualNetworkRules
    description: List of Virtual Network ACL rules configured for the Cosmos DB account.
    types:
    - uid: VirtualNetworkRule
      isArray: true
  - name: properties.privateEndpointConnections
    isReadyOnly: true
    description: List of Private Endpoint Connections configured for the Cosmos DB account.
    types:
    - uid: PrivateEndpointConnection
      isArray: true
  - name: properties.enableMultipleWriteLocations
    description: Enables the account to write in multiple locations
    types:
    - uid: boolean
  - name: properties.enableCassandraConnector
    description: Enables the cassandra connector on the Cosmos DB C* account
    types:
    - uid: boolean
  - name: properties.connectorOffer
    description: The cassandra connector offer type for the Cosmos DB database C* account.
    types:
    - uid: ConnectorOffer
  - name: properties.disableKeyBasedMetadataWriteAccess
    description: Disable write operations on metadata resources (databases, containers, throughput) via account keys
    types:
    - uid: boolean
  - name: properties.keyVaultKeyUri
    description: The URI of the key vault
    types:
    - uid: string
  - name: properties.defaultIdentity
    description: The default identity for accessing key vault used in features like customer managed keys. The default identity needs to be explicitly set by the users. It can be "FirstPartyIdentity", "SystemAssignedIdentity" and more.
    types:
    - uid: string
  - name: properties.publicNetworkAccess
    description: Whether requests from Public Network are allowed
    types:
    - uid: PublicNetworkAccess
  - name: properties.enableFreeTier
    description: Flag to indicate whether Free Tier is enabled.
    types:
    - uid: boolean
  - name: properties.apiProperties
    description: API specific properties.
    types:
    - uid: ApiProperties
  - name: properties.enableAnalyticalStorage
    description: Flag to indicate whether to enable storage analytics.
    types:
    - uid: boolean
  - name: properties.analyticalStorageConfiguration
    description: Analytical storage specific properties.
    types:
    - uid: AnalyticalStorageConfiguration
  - name: properties.instanceId
    isReadyOnly: true
    description: A unique identifier assigned to the database account
    types:
    - uid: string
  - name: properties.createMode
    description: Enum to indicate the mode of account creation.
    types:
    - uid: CreateMode
  - name: properties.restoreParameters
    description: Parameters to indicate the information about the restore.
    types:
    - uid: RestoreParameters
  - name: properties.backupPolicy
    description: The object representing the policy for taking backups on an account.
    types:
    - uid: PeriodicModeBackupPolicy
    - uid: ContinuousModeBackupPolicy
    typesTitle: BackupPolicy
  - name: properties.cors
    description: The CORS policy for the Cosmos DB database account.
    types:
    - uid: CorsPolicy
      isArray: true
  - name: properties.networkAclBypass
    description: Indicates what services are allowed to bypass firewall checks.
    types:
    - uid: NetworkAclBypass
  - name: properties.networkAclBypassResourceIds
    description: An array that contains the Resource Ids for Network Acl Bypass for the Cosmos DB account.
    types:
    - uid: string
      isArray: true
  - name: properties.diagnosticLogSettings
    description: The Object representing the different Diagnostic log settings for the Cosmos DB Account.
    types:
    - uid: DiagnosticLogSettings
  - name: properties.disableLocalAuth
    description: Opt-out of local authentication and ensure only MSI and AAD can be used exclusively for authentication.
    types:
    - uid: boolean
  - name: id
    isReadyOnly: true
    description: The unique resource identifier of the ARM resource.
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: The name of the ARM resource.
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: The type of Azure resource.
    types:
    - uid: string
  - name: location
    description: The location of the resource group to which the resource belongs.
    types:
    - uid: string
  - name: tags
    description: 'Tags are a list of key-value pairs that describe the resource. These tags can be used in viewing and grouping this resource (across resource groups). A maximum of 15 tags can be provided for a resource. Each tag must have a key no greater than 128 characters and value no greater than 256 characters. For example, the default experience for a template type is set with "defaultExperience": "Cassandra". Current "defaultExperience" values also include "Table", "Graph", "DocumentDB", and "MongoDB".'
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
- name: DatabaseAccountCreateUpdateParameters
  description: Parameters to create and update Cosmos DB database accounts.
  kind: object
  properties:
  - name: kind
    description: Indicates the type of database account. This can only be set at database account creation.
    types:
    - uid: DatabaseAccountKind
  - name: identity
    description: Identity for the resource.
    types:
    - uid: ManagedServiceIdentity
  - name: properties.consistencyPolicy
    description: The consistency policy for the Cosmos DB account.
    types:
    - uid: ConsistencyPolicy
  - name: properties.locations
    description: An array that contains the georeplication locations enabled for the Cosmos DB account.
    types:
    - uid: Location
      isArray: true
  - name: properties.databaseAccountOfferType
    description: The offer type for the database
    types:
    - uid: DatabaseAccountOfferType
  - name: properties.ipRules
    description: List of IpRules.
    types:
    - uid: IpAddressOrRange
      isArray: true
  - name: properties.isVirtualNetworkFilterEnabled
    description: Flag to indicate whether to enable/disable Virtual Network ACL rules.
    types:
    - uid: boolean
  - name: properties.enableAutomaticFailover
    description: Enables automatic failover of the write region in the rare event that the region is unavailable due to an outage. Automatic failover will result in a new write region for the account and is chosen based on the failover priorities configured for the account.
    types:
    - uid: boolean
  - name: properties.capabilities
    description: List of Cosmos DB capabilities for the account
    types:
    - uid: Capability
      isArray: true
  - name: properties.virtualNetworkRules
    description: List of Virtual Network ACL rules configured for the Cosmos DB account.
    types:
    - uid: VirtualNetworkRule
      isArray: true
  - name: properties.enableMultipleWriteLocations
    description: Enables the account to write in multiple locations
    types:
    - uid: boolean
  - name: properties.enableCassandraConnector
    description: Enables the cassandra connector on the Cosmos DB C* account
    types:
    - uid: boolean
  - name: properties.connectorOffer
    description: The cassandra connector offer type for the Cosmos DB database C* account.
    types:
    - uid: ConnectorOffer
  - name: properties.disableKeyBasedMetadataWriteAccess
    description: Disable write operations on metadata resources (databases, containers, throughput) via account keys
    types:
    - uid: boolean
  - name: properties.keyVaultKeyUri
    description: The URI of the key vault
    types:
    - uid: string
  - name: properties.defaultIdentity
    description: The default identity for accessing key vault used in features like customer managed keys. The default identity needs to be explicitly set by the users. It can be "FirstPartyIdentity", "SystemAssignedIdentity" and more.
    types:
    - uid: string
  - name: properties.publicNetworkAccess
    description: Whether requests from Public Network are allowed
    types:
    - uid: PublicNetworkAccess
  - name: properties.enableFreeTier
    description: Flag to indicate whether Free Tier is enabled.
    types:
    - uid: boolean
  - name: properties.apiProperties
    description: API specific properties. Currently, supported only for MongoDB API.
    types:
    - uid: ApiProperties
  - name: properties.enableAnalyticalStorage
    description: Flag to indicate whether to enable storage analytics.
    types:
    - uid: boolean
  - name: properties.analyticalStorageConfiguration
    description: Analytical storage specific properties.
    types:
    - uid: AnalyticalStorageConfiguration
  - name: properties.createMode
    description: Enum to indicate the mode of account creation.
    types:
    - uid: CreateMode
  - name: properties.backupPolicy
    description: The object representing the policy for taking backups on an account.
    types:
    - uid: PeriodicModeBackupPolicy
    - uid: ContinuousModeBackupPolicy
    typesTitle: BackupPolicy
  - name: properties.cors
    description: The CORS policy for the Cosmos DB database account.
    types:
    - uid: CorsPolicy
      isArray: true
  - name: properties.networkAclBypass
    description: Indicates what services are allowed to bypass firewall checks.
    types:
    - uid: NetworkAclBypass
  - name: properties.networkAclBypassResourceIds
    description: An array that contains the Resource Ids for Network Acl Bypass for the Cosmos DB account.
    types:
    - uid: string
      isArray: true
  - name: properties.diagnosticLogSettings
    description: The Object representing the different Diagnostic log settings for the Cosmos DB Account.
    types:
    - uid: DiagnosticLogSettings
  - name: properties.disableLocalAuth
    description: Opt-out of local authentication and ensure only MSI and AAD can be used exclusively for authentication.
    types:
    - uid: boolean
  - name: properties.restoreParameters
    description: Parameters to indicate the information about the restore.
    types:
    - uid: RestoreParameters
  - name: id
    isReadyOnly: true
    description: The unique resource identifier of the ARM resource.
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: The name of the ARM resource.
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: The type of Azure resource.
    types:
    - uid: string
  - name: location
    description: The location of the resource group to which the resource belongs.
    types:
    - uid: string
  - name: tags
    description: 'Tags are a list of key-value pairs that describe the resource. These tags can be used in viewing and grouping this resource (across resource groups). A maximum of 15 tags can be provided for a resource. Each tag must have a key no greater than 128 characters and value no greater than 256 characters. For example, the default experience for a template type is set with "defaultExperience": "Cassandra". Current "defaultExperience" values also include "Table", "Graph", "DocumentDB", and "MongoDB".'
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
- name: ResourceIdentityType
  description: The type of identity used for the resource. The type 'SystemAssigned,UserAssigned' includes both an implicitly created identity and a set of user assigned identities. The type 'None' will remove any identities from the service.
  kind: enum
  properties:
  - name: SystemAssigned
    types:
    - uid: string
  - name: UserAssigned
    types:
    - uid: string
  - name: SystemAssigned,UserAssigned
    types:
    - uid: string
  - name: None
    types:
    - uid: string
- name: UserAssignedIdentities
  description: "The list of user identities associated with resource. The user identity dictionary key references will be ARM resource ids in the form: '/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.ManagedIdentity/userAssignedIdentities/{identityName}'."
  kind: object
  properties:
  - name: ''
    description: ''
    types:
    - uid: ''
- name: DefaultConsistencyLevel
  description: The default consistency level and configuration settings of the Cosmos DB account.
  kind: enum
  properties:
  - name: Eventual
    types:
    - uid: string
  - name: Session
    types:
    - uid: string
  - name: BoundedStaleness
    types:
    - uid: string
  - name: Strong
    types:
    - uid: string
  - name: ConsistentPrefix
    types:
    - uid: string
- name: ServerVersion
  description: Describes the ServerVersion of an a MongoDB account.
  kind: enum
  properties:
  - name: "3.2"
    types:
    - uid: string
  - name: "3.6"
    types:
    - uid: string
  - name: "4.0"
    types:
    - uid: string
- name: AnalyticalStorageSchemaType
  description: Describes the types of schema for analytical storage.
  kind: enum
  properties:
  - name: WellDefined
    types:
    - uid: string
  - name: FullFidelity
    types:
    - uid: string
- name: PeriodicModeBackupPolicy
  description: The object representing periodic mode backup policy.
  kind: object
  properties:
  - name: periodicModeProperties
    description: Configuration values for periodic mode backup
    types:
    - uid: PeriodicModeProperties
  - name: type
    description: Describes the mode of backups.
    types:
    - uid: Periodic
    typesTitle: string
  - name: migrationState
    description: The object representing the state of the migration between the backup policies.
    types:
    - uid: BackupPolicyMigrationState
- name: ContinuousModeBackupPolicy
  description: The object representing continuous mode backup policy.
  kind: object
  properties:
  - name: type
    description: Describes the mode of backups.
    types:
    - uid: Continuous
    typesTitle: string
  - name: migrationState
    description: The object representing the state of the migration between the backup policies.
    types:
    - uid: BackupPolicyMigrationState
- name: EnableFullTextQuery
  description: Describe the level of detail with which queries are to be logged.
  kind: enum
  properties:
  - name: None
    types:
    - uid: string
  - name: "True"
    types:
    - uid: string
  - name: "False"
    types:
    - uid: string
- name: RestoreMode
  description: Describes the mode of the restore.
  kind: enum
  properties:
  - name: PointInTime
    types:
    - uid: string
- name: DatabaseRestoreResource
  description: Specific Databases to restore.
  kind: object
  properties:
  - name: databaseName
    description: The name of the database available for restore.
    types:
    - uid: string
  - name: collectionNames
    description: The names of the collections available for restore.
    types:
    - uid: string
      isArray: true
- name: DatabaseAccountKind
  description: Indicates the type of database account. This can only be set at database account creation.
  kind: enum
  properties:
  - name: GlobalDocumentDB
    types:
    - uid: string
  - name: MongoDB
    types:
    - uid: string
  - name: Parse
    types:
    - uid: string
- name: systemData
  description: Metadata pertaining to creation and last modification of the resource.
  kind: object
  properties:
  - name: createdBy
    description: The identity that created the resource.
    types:
    - uid: string
  - name: createdByType
    description: The type of identity that created the resource.
    types:
    - uid: createdByType
  - name: createdAt
    description: The timestamp of resource creation (UTC).
    types:
    - uid: string
  - name: lastModifiedBy
    description: The identity that last modified the resource.
    types:
    - uid: string
  - name: lastModifiedByType
    description: The type of identity that last modified the resource.
    types:
    - uid: createdByType
  - name: lastModifiedAt
    description: The timestamp of resource last modification (UTC)
    types:
    - uid: string
- name: DatabaseAccountOfferType
  description: The offer type for the Cosmos DB database account.
  kind: enum
  properties:
  - name: Standard
    types:
    - uid: string
- name: FailoverPolicy
  description: The failover policy for a given region of a database account.
  kind: object
  properties:
  - name: id
    isReadyOnly: true
    description: 'The unique identifier of the region in which the database account replicates to. Example: &lt;accountName&gt;-&lt;locationName&gt;.'
    types:
    - uid: string
  - name: locationName
    description: The name of the region in which the database account exists.
    types:
    - uid: string
  - name: failoverPriority
    description: The failover priority of the region. A failover priority of 0 indicates a write region. The maximum value for a failover priority = (total number of regions - 1). Failover priority values must be unique for each of the regions in which the database account exists.
    types:
    - uid: integer
- name: PrivateEndpointConnection
  description: A private endpoint connection
  kind: object
  properties:
  - name: properties.privateEndpoint
    description: Private endpoint which the connection belongs to.
    types:
    - uid: PrivateEndpointProperty
  - name: properties.privateLinkServiceConnectionState
    description: Connection State of the Private Endpoint Connection.
    types:
    - uid: PrivateLinkServiceConnectionStateProperty
  - name: properties.groupId
    description: Group id of the private endpoint.
    types:
    - uid: string
  - name: properties.provisioningState
    description: Provisioning state of the private endpoint.
    types:
    - uid: string
  - name: id
    isReadyOnly: true
    description: Fully qualified resource ID for the resource. Ex - /subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/{resourceProviderNamespace}/{resourceType}/{resourceName}
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: The name of the resource
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: The type of the resource. E.g. "Microsoft.Compute/virtualMachines" or "Microsoft.Storage/storageAccounts"
    types:
    - uid: string
- name: ConnectorOffer
  description: The cassandra connector offer type for the Cosmos DB C* database account.
  kind: enum
  properties:
  - name: Small
    types:
    - uid: string
- name: PublicNetworkAccess
  description: Whether requests from Public Network are allowed
  kind: enum
  properties:
  - name: Enabled
    types:
    - uid: string
  - name: Disabled
    types:
    - uid: string
- name: CreateMode
  description: Enum to indicate the mode of account creation.
  kind: enum
  properties:
  - name: Default
    types:
    - uid: string
  - name: Restore
    types:
    - uid: string
- name: NetworkAclBypass
  description: Indicates what services are allowed to bypass firewall checks.
  kind: enum
  properties:
  - name: None
    types:
    - uid: string
  - name: AzureServices
    types:
    - uid: string
- name: PeriodicModeProperties
  description: Configuration values for periodic mode backup
  kind: object
  properties:
  - name: backupIntervalInMinutes
    description: An integer representing the interval in minutes between two backups
    types:
    - uid: integer
  - name: backupRetentionIntervalInHours
    description: An integer representing the time (in hours) that each backup is retained
    types:
    - uid: integer
  - name: backupStorageRedundancy
    description: Enum to indicate type of backup residency
    types:
    - uid: BackupStorageRedundancy
- name: BackupPolicyType
  description: Describes the mode of backups.
  kind: enum
  properties:
  - name: Periodic
    types:
    - uid: string
  - name: Continuous
    types:
    - uid: string
- name: BackupPolicyMigrationState
  description: The object representing the state of the migration between the backup policies.
  kind: object
  properties:
  - name: status
    description: Describes the status of migration between backup policy types.
    types:
    - uid: BackupPolicyMigrationStatus
  - name: targetType
    description: Describes the target backup policy type of the backup policy migration.
    types:
    - uid: BackupPolicyType
  - name: startTime
    description: Time at which the backup policy migration started (ISO-8601 format).
    types:
    - uid: string
- name: createdByType
  description: The type of identity that created the resource.
  kind: enum
  properties:
  - name: User
    types:
    - uid: string
  - name: Application
    types:
    - uid: string
  - name: ManagedIdentity
    types:
    - uid: string
  - name: Key
    types:
    - uid: string
- name: PrivateEndpointProperty
  description: Private endpoint which the connection belongs to.
  kind: object
  properties:
  - name: id
    description: Resource id of the private endpoint.
    types:
    - uid: string
- name: PrivateLinkServiceConnectionStateProperty
  description: Connection State of the Private Endpoint Connection.
  kind: object
  properties:
  - name: status
    description: The private link service connection status.
    types:
    - uid: string
  - name: description
    description: The private link service connection description.
    types:
    - uid: string
  - name: actionsRequired
    isReadyOnly: true
    description: Any action that is required beyond basic workflow (approve/ reject/ disconnect)
    types:
    - uid: string
- name: BackupStorageRedundancy
  description: Enum to indicate type of backup storage redundancy.
  kind: enum
  properties:
  - name: Geo
    types:
    - uid: string
  - name: Local
    types:
    - uid: string
  - name: Zone
    types:
    - uid: string
- name: BackupPolicyMigrationStatus
  description: Describes the status of migration between backup policy types.
  kind: enum
  properties:
  - name: Invalid
    types:
    - uid: string
  - name: InProgress
    types:
    - uid: string
  - name: Completed
    types:
    - uid: string
  - name: Failed
    types:
    - uid: string
examples:
- name: CosmosDBDatabaseAccountCreateMin
  request:
    uri: PUT https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.DocumentDB/databaseAccounts/ddb1?api-version=2021-07-01-preview
    body: >-
      {
        "location": "westus",
        "properties": {
          "databaseAccountOfferType": "Standard",
          "locations": [
            {
              "failoverPriority": 0,
              "locationName": "southcentralus",
              "isZoneRedundant": false
            }
          ],
          "createMode": "Default"
        }
      }
  responses:
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.DocumentDB/databaseAccounts/ddb1",
        "name": "ddb1",
        "location": "West US",
        "type": "Microsoft.DocumentDB/databaseAccounts",
        "kind": "GlobalDocumentDB",
        "tags": {},
        "properties": {
          "provisioningState": "Initializing",
          "ipRules": [],
          "databaseAccountOfferType": "Standard",
          "disableKeyBasedMetadataWriteAccess": false,
          "consistencyPolicy": {
            "defaultConsistencyLevel": "Session",
            "maxIntervalInSeconds": 5,
            "maxStalenessPrefix": 100
          },
          "writeLocations": [
            {
              "id": "ddb1-southcentralus",
              "locationName": "South Central US",
              "provisioningState": "Initializing",
              "failoverPriority": 0,
              "isZoneRedundant": false
            }
          ],
          "readLocations": [
            {
              "id": "ddb1-southcentralus",
              "locationName": "South Central US",
              "provisioningState": "Initializing",
              "failoverPriority": 0,
              "isZoneRedundant": false
            }
          ],
          "locations": [
            {
              "id": "ddb1-southcentralus",
              "locationName": "South Central US",
              "provisioningState": "Initializing",
              "failoverPriority": 0,
              "isZoneRedundant": false
            }
          ],
          "failoverPolicies": [
            {
              "id": "ddb1-southcentralus",
              "locationName": "South Central US",
              "failoverPriority": 0
            }
          ],
          "cors": [],
          "enableFreeTier": false,
          "apiProperties": {},
          "enableAnalyticalStorage": false,
          "analyticalStorageConfiguration": null,
          "networkAclBypass": "None",
          "networkAclBypassResourceIds": [],
          "instanceId": "d9b26648-2f53-4541-b3d8-3044f4f9810d",
          "createMode": "Default",
          "backupPolicy": {
            "type": "Periodic",
            "periodicModeProperties": {
              "backupIntervalInMinutes": 240,
              "backupRetentionIntervalInHours": 720,
              "backupStorageRedundancy": "Geo"
            }
          }
        },
        "systemData": {
          "createdAt": "2021-03-12T22:05:09Z"
        }
      }
- name: CosmosDBDatabaseAccountCreateMax
  request:
    uri: PUT https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.DocumentDB/databaseAccounts/ddb1?api-version=2021-07-01-preview
    body: >-
      {
        "location": "westus",
        "tags": {},
        "kind": "MongoDB",
        "identity": {
          "type": "SystemAssigned,UserAssigned",
          "userAssignedIdentities": {
            "/subscriptions/fa5fc227-a624-475e-b696-cdd604c735bc/resourceGroups/eu2cgroup/providers/Microsoft.ManagedIdentity/userAssignedIdentities/id1": {}
          }
        },
        "properties": {
          "databaseAccountOfferType": "Standard",
          "ipRules": [
            {
              "ipAddressOrRange": "23.43.230.120"
            },
            {
              "ipAddressOrRange": "110.12.240.0/12"
            }
          ],
          "isVirtualNetworkFilterEnabled": true,
          "virtualNetworkRules": [
            {
              "id": "/subscriptions/subId/resourceGroups/rg/providers/Microsoft.Network/virtualNetworks/vnet1/subnets/subnet1",
              "ignoreMissingVNetServiceEndpoint": false
            }
          ],
          "publicNetworkAccess": "Enabled",
          "locations": [
            {
              "failoverPriority": 0,
              "locationName": "southcentralus",
              "isZoneRedundant": false
            },
            {
              "failoverPriority": 1,
              "locationName": "eastus",
              "isZoneRedundant": false
            }
          ],
          "createMode": "Default",
          "consistencyPolicy": {
            "defaultConsistencyLevel": "BoundedStaleness",
            "maxIntervalInSeconds": 10,
            "maxStalenessPrefix": 200
          },
          "keyVaultKeyUri": "https://myKeyVault.vault.azure.net",
          "defaultIdentity": "FirstPartyIdentity",
          "enableFreeTier": false,
          "apiProperties": {
            "serverVersion": "3.2"
          },
          "enableAnalyticalStorage": true,
          "analyticalStorageConfiguration": {
            "schemaType": "WellDefined"
          },
          "backupPolicy": {
            "type": "Periodic",
            "periodicModeProperties": {
              "backupIntervalInMinutes": 240,
              "backupRetentionIntervalInHours": 8,
              "backupStorageRedundancy": "Geo"
            }
          },
          "cors": [
            {
              "allowedOrigins": "https://test"
            }
          ],
          "networkAclBypass": "AzureServices",
          "networkAclBypassResourceIds": [
            "/subscriptions/subId/resourcegroups/rgName/providers/Microsoft.Synapse/workspaces/workspaceName"
          ]
        }
      }
  responses:
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.DocumentDB/databaseAccounts/ddb1",
        "name": "ddb1",
        "location": "West US",
        "type": "Microsoft.DocumentDB/databaseAccounts",
        "kind": "MongoDB",
        "tags": {},
        "identity": {
          "type": "SystemAssigned,UserAssigned",
          "principalId": "52f4fef3-3c3f-4ff3-b52e-b5c9eeb68656",
          "tenantId": "33e01921-4d64-4f8c-a055-5bdaffd5e33d",
          "userAssignedIdentities": {
            "/subscriptions/fa5fc227-a624-475e-b696-cdd604c735bc/resourceGroups/eu2cgroup/providers/Microsoft.ManagedIdentity/userAssignedIdentities/id1": {
              "clientId": "fbe75b66-01c5-4f87-a220-233af3270436",
              "principalId": "075a0ca6-43f6-4434-9abf-c9b1b79f9219"
            }
          }
        },
        "properties": {
          "provisioningState": "Initializing",
          "isVirtualNetworkFilterEnabled": true,
          "databaseAccountOfferType": "Standard",
          "disableKeyBasedMetadataWriteAccess": false,
          "consistencyPolicy": {
            "defaultConsistencyLevel": "BoundedStaleness",
            "maxIntervalInSeconds": 10,
            "maxStalenessPrefix": 200
          },
          "writeLocations": [
            {
              "id": "ddb1-southcentralus",
              "locationName": "South Central US",
              "provisioningState": "Initializing",
              "failoverPriority": 0,
              "isZoneRedundant": false
            }
          ],
          "readLocations": [
            {
              "id": "ddb1-southcentralus",
              "locationName": "South Central US",
              "provisioningState": "Initializing",
              "failoverPriority": 0,
              "isZoneRedundant": false
            },
            {
              "id": "ddb1-eastus",
              "locationName": "East US",
              "provisioningState": "Initializing",
              "failoverPriority": 1,
              "isZoneRedundant": false
            }
          ],
          "locations": [
            {
              "id": "ddb1-southcentralus",
              "locationName": "South Central US",
              "provisioningState": "Initializing",
              "failoverPriority": 0,
              "isZoneRedundant": false
            },
            {
              "id": "ddb1-eastus",
              "locationName": "East US",
              "provisioningState": "Initializing",
              "failoverPriority": 1,
              "isZoneRedundant": false
            }
          ],
          "failoverPolicies": [
            {
              "id": "ddb1-southcentralus",
              "locationName": "South Central US",
              "failoverPriority": 0
            },
            {
              "id": "ddb1-eastus",
              "locationName": "East US",
              "failoverPriority": 1
            }
          ],
          "virtualNetworkRules": [
            {
              "id": "/subscriptions/subId/resourceGroups/rg/providers/Microsoft.Network/virtualNetworks/vnet1/subnets/subnet1"
            }
          ],
          "publicNetworkAccess": "Enabled",
          "keyVaultKeyUri": "https://myKeyVault.vault.azure.net",
          "defaultIdentity": "FirstPartyIdentity",
          "enableFreeTier": false,
          "ipRules": [
            {
              "ipAddressOrRange": "23.43.230.120"
            },
            {
              "ipAddressOrRange": "110.12.240.0/12"
            }
          ],
          "apiProperties": {
            "serverVersion": "3.2"
          },
          "enableAnalyticalStorage": true,
          "analyticalStorageConfiguration": {
            "schemaType": "WellDefined"
          },
          "createMode": "Default",
          "instanceId": "d9b26648-2f53-4541-b3d8-3044f4f9810d",
          "backupPolicy": {
            "type": "Periodic",
            "periodicModeProperties": {
              "backupIntervalInMinutes": 240,
              "backupRetentionIntervalInHours": 8,
              "backupStorageRedundancy": "Geo"
            }
          },
          "cors": [
            {
              "allowedOrigins": "https://test"
            }
          ],
          "networkAclBypass": "AzureServices",
          "networkAclBypassResourceIds": [
            "/subscriptions/subId/resourcegroups/rgName/providers/Microsoft.Synapse/workspaces/workspaceName"
          ]
        },
        "systemData": {
          "createdAt": "2021-03-12T22:05:09Z"
        }
      }
- name: CosmosDBRestoreDatabaseAccountCreateUpdate.json
  request:
    uri: PUT https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.DocumentDB/databaseAccounts/ddb1?api-version=2021-07-01-preview
    body: >-
      {
        "location": "westus",
        "tags": {},
        "kind": "GlobalDocumentDB",
        "properties": {
          "databaseAccountOfferType": "Standard",
          "locations": [
            {
              "failoverPriority": 0,
              "locationName": "southcentralus",
              "isZoneRedundant": false
            }
          ],
          "createMode": "Restore",
          "restoreParameters": {
            "restoreMode": "PointInTime",
            "restoreSource": "/subscriptions/subid/providers/Microsoft.DocumentDB/locations/westus/restorableDatabaseAccounts/1a97b4bb-f6a0-430e-ade1-638d781830cc",
            "restoreTimestampInUtc": "2021-03-11T22:05:09Z",
            "databasesToRestore": [
              {
                "databaseName": "db1",
                "collectionNames": [
                  "collection1",
                  "collection2"
                ]
              },
              {
                "databaseName": "db2",
                "collectionNames": [
                  "collection3",
                  "collection4"
                ]
              }
            ]
          },
          "backupPolicy": {
            "type": "Continuous"
          },
          "consistencyPolicy": {
            "defaultConsistencyLevel": "BoundedStaleness",
            "maxIntervalInSeconds": 10,
            "maxStalenessPrefix": 200
          },
          "keyVaultKeyUri": "https://myKeyVault.vault.azure.net",
          "enableFreeTier": false,
          "apiProperties": {
            "serverVersion": "3.2"
          },
          "enableAnalyticalStorage": true
        }
      }
  responses:
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.DocumentDB/databaseAccounts/ddb1",
        "name": "ddb1",
        "location": "West US",
        "type": "Microsoft.DocumentDB/databaseAccounts",
        "kind": "GlobalDocumentDB",
        "tags": {},
        "properties": {
          "provisioningState": "Initializing",
          "ipRules": [],
          "databaseAccountOfferType": "Standard",
          "disableKeyBasedMetadataWriteAccess": false,
          "instanceId": "d9b26648-2f53-4541-b3d8-3044f4f9810d",
          "createMode": "Restore",
          "consistencyPolicy": {
            "defaultConsistencyLevel": "Session",
            "maxIntervalInSeconds": 5,
            "maxStalenessPrefix": 100
          },
          "writeLocations": [
            {
              "id": "ddb1-southcentralus",
              "locationName": "South Central US",
              "provisioningState": "Initializing",
              "failoverPriority": 0,
              "isZoneRedundant": false
            }
          ],
          "readLocations": [
            {
              "id": "ddb1-southcentralus",
              "locationName": "South Central US",
              "provisioningState": "Initializing",
              "failoverPriority": 0,
              "isZoneRedundant": false
            }
          ],
          "locations": [
            {
              "id": "ddb1-southcentralus",
              "locationName": "South Central US",
              "provisioningState": "Initializing",
              "failoverPriority": 0,
              "isZoneRedundant": false
            }
          ],
          "failoverPolicies": [
            {
              "id": "ddb1-southcentralus",
              "locationName": "South Central US",
              "failoverPriority": 0
            }
          ],
          "enableFreeTier": false,
          "apiProperties": {},
          "enableAnalyticalStorage": false
        },
        "systemData": {
          "createdAt": "2021-03-12T22:05:09Z"
        }
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: Impersonate your user account
metadata:
  description: Creates or updates an Azure Cosmos DB database account. The "Update" method is preferred when performing updates on an account.
errorCodes: []
