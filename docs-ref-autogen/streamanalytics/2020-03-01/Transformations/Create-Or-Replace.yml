### YamlMime:RESTOperation
uid: management.azure.com.streamanalytics.2020-03-01.transformations.createorreplace
name: Create Or Replace
service: Stream Analytics
groupName: Transformations
apiVersion: 2020-03-01
summary: Creates a transformation or replaces an already existing transformation under an existing streaming job.
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://management.azure.com/subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/Microsoft.StreamAnalytics/streamingjobs/{jobName}/transformations/{transformationName}?api-version=2020-03-01
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: The ID of the target subscription.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group. The name is case insensitive.
  types:
  - uid: string
  pattern: ^[-\w\._\(\)]+$
- name: jobName
  in: path
  isRequired: true
  description: The name of the streaming job.
  types:
  - uid: string
- name: transformationName
  in: path
  isRequired: true
  description: The name of the transformation.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: The API version to use for this operation.
  types:
  - uid: string
responses:
- name: 200 OK
  headers:
  - name: ETag
    value: string
  description: The transformation was successfully created or replaced.
  types:
  - uid: Transformation
- name: 201 Created
  headers:
  - name: ETag
    value: string
  description: The transformation was successfully created or replaced.
  types:
  - uid: Transformation
- name: Other Status Codes
  description: Error.
  types:
  - uid: Error
requestBody:
- name: default
  parameters:
  - name: properties.streamingUnits
    in: body
    description: Specifies the number of streaming units that the streaming job uses.
    types:
    - uid: integer
  - name: properties.validStreamingUnits
    in: body
    description: Specifies the valid streaming units a streaming job can scale to.
    types:
    - uid: integer
      isArray: true
  - name: properties.query
    in: body
    description: 'Specifies the query that will be run in the streaming job. You can learn more about the Stream Analytics Query Language (SAQL) here: https://msdn.microsoft.com/library/azure/dn834998 . Required on PUT (CreateOrReplace) requests.'
    types:
    - uid: string
  - name: name
    in: body
    description: Resource name
    types:
    - uid: string
requestHeader:
- name: If-Match
  in: header
  description: The ETag of the transformation. Omit this value to always overwrite the current transformation. Specify the last-seen ETag value to prevent accidentally overwriting concurrent changes.
  types:
  - uid: string
- name: If-None-Match
  in: header
  description: Set to '*' to allow a new transformation to be created, but to prevent updating an existing transformation. Other values will result in a 412 Pre-condition Failed response.
  types:
  - uid: string
definitions:
- name: Transformation
  description: A transformation object, containing all information associated with the named transformation. All transformations are contained under a streaming job.
  kind: object
  properties:
  - name: properties.streamingUnits
    description: Specifies the number of streaming units that the streaming job uses.
    types:
    - uid: integer
    defaultValue: 3
  - name: properties.validStreamingUnits
    description: Specifies the valid streaming units a streaming job can scale to.
    types:
    - uid: integer
      isArray: true
  - name: properties.query
    description: 'Specifies the query that will be run in the streaming job. You can learn more about the Stream Analytics Query Language (SAQL) here: https://msdn.microsoft.com/library/azure/dn834998 . Required on PUT (CreateOrReplace) requests.'
    types:
    - uid: string
  - name: properties.etag
    isReadyOnly: true
    description: The current entity tag for the transformation. This is an opaque string. You can use it to detect whether the resource has changed between requests. You can also use it in the If-Match or If-None-Match headers for write operations for optimistic concurrency.
    types:
    - uid: string
  - name: id
    isReadyOnly: true
    description: Resource Id
    types:
    - uid: string
  - name: name
    description: Resource name
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: Resource type
    types:
    - uid: string
- name: Error
  description: Common error representation.
  kind: object
  properties:
  - name: error
    description: Error definition properties.
    types:
    - uid: Error
examples:
- name: Create a transformation
  request:
    uri: PUT https://management.azure.com/subscriptions/56b5e0a9-b645-407d-99b0-c64f86013e3d/resourcegroups/sjrg4423/providers/Microsoft.StreamAnalytics/streamingjobs/sj8374/transformations/transformation952?api-version=2020-03-01
    body: >-
      {
        "properties": {
          "streamingUnits": 6,
          "query": "Select Id, Name from inputtest"
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/56b5e0a9-b645-407d-99b0-c64f86013e3d/resourcegroups/sjrg4423/providers/Microsoft.StreamAnalytics/streamingjobs/sj8374/transformations/transformation952?api-version=2020-03-01

      {
        "properties": {
          "streamingUnits": 6,
          "query": "Select Id, Name from inputtest"
        }
      }

      ```

      # [Java](#tab/Java)
      ``` java
      /** Samples for Transformations CreateOrReplace. */
      public final class Main {
          /*
           * x-ms-original-file: specification/streamanalytics/resource-manager/Microsoft.StreamAnalytics/stable/2020-03-01/examples/Transformation_Create.json
           */
          /**
           * Sample code: Create a transformation.
           *
           * @param manager Entry point to StreamAnalyticsManager.
           */
          public static void createATransformation(com.azure.resourcemanager.streamanalytics.StreamAnalyticsManager manager) {
              manager
                  .transformations()
                  .define("transformation952")
                  .withExistingStreamingjob("sjrg4423", "sj8374")
                  .withStreamingUnits(6)
                  .withQuery("Select Id, Name from inputtest")
                  .create();
          }
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-java/blob/azure-resourcemanager-streamanalytics_1.0.0-beta.2/sdk/streamanalytics/azure-resourcemanager-streamanalytics/README.md) on how to add the SDK to your project and authenticate.
      # [Go](#tab/Go)
      ``` go
      package armstreamanalytics_test

      import (
      	"context"
      	"log"

      	"github.com/Azure/azure-sdk-for-go/sdk/azcore/to"
      	"github.com/Azure/azure-sdk-for-go/sdk/azidentity"
      	"github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/streamanalytics/armstreamanalytics"
      )

      // Generated from example definition: https://github.com/Azure/azure-rest-api-specs/tree/main/specification/streamanalytics/resource-manager/Microsoft.StreamAnalytics/stable/2020-03-01/examples/Transformation_Create.json
      func ExampleTransformationsClient_CreateOrReplace() {
      	cred, err := azidentity.NewDefaultAzureCredential(nil)
      	if err != nil {
      		log.Fatalf("failed to obtain a credential: %v", err)
      	}
      	ctx := context.Background()
      	client, err := armstreamanalytics.NewTransformationsClient("56b5e0a9-b645-407d-99b0-c64f86013e3d", cred, nil)
      	if err != nil {
      		log.Fatalf("failed to create client: %v", err)
      	}
      	res, err := client.CreateOrReplace(ctx,
      		"sjrg4423",
      		"sj8374",
      		"transformation952",
      		armstreamanalytics.Transformation{
      			Properties: &armstreamanalytics.TransformationProperties{
      				Query:          to.Ptr("Select Id, Name from inputtest"),
      				StreamingUnits: to.Ptr[int32](6),
      			},
      		},
      		&armstreamanalytics.TransformationsClientCreateOrReplaceOptions{IfMatch: nil,
      			IfNoneMatch: nil,
      		})
      	if err != nil {
      		log.Fatalf("failed to finish the request: %v", err)
      	}
      	// TODO: use response item
      	_ = res
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-go/blob/sdk%2Fresourcemanager%2Fstreamanalytics%2Farmstreamanalytics%2Fv1.0.0/sdk/resourcemanager/streamanalytics/armstreamanalytics/README.md) on how to add the SDK to your project and authenticate.
      # [JavsScirpt](#tab/JavsScirpt)
      ``` js
      const { StreamAnalyticsManagementClient } = require("@azure/arm-streamanalytics");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to Creates a transformation or replaces an already existing transformation under an existing streaming job.
       *
       * @summary Creates a transformation or replaces an already existing transformation under an existing streaming job.
       * x-ms-original-file: specification/streamanalytics/resource-manager/Microsoft.StreamAnalytics/stable/2020-03-01/examples/Transformation_Create.json
       */
      async function createATransformation() {
        const subscriptionId = "56b5e0a9-b645-407d-99b0-c64f86013e3d";
        const resourceGroupName = "sjrg4423";
        const jobName = "sj8374";
        const transformationName = "transformation952";
        const transformation = {
          query: "Select Id, Name from inputtest",
          streamingUnits: 6,
        };
        const credential = new DefaultAzureCredential();
        const client = new StreamAnalyticsManagementClient(credential, subscriptionId);
        const result = await client.transformations.createOrReplace(
          resourceGroupName,
          jobName,
          transformationName,
          transformation
        );
        console.log(result);
      }

      createATransformation().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-streamanalytics_4.0.1/sdk/streamanalytics/arm-streamanalytics/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "201"
    headers:
    - name: ETag
      value: be3cfaa2-3d02-4624-92d7-a26766306c8b
    body: >-
      {
        "id": "/subscriptions/56b5e0a9-b645-407d-99b0-c64f86013e3d/resourceGroups/sjrg4423/providers/Microsoft.StreamAnalytics/streamingjobs/sj8374/transformations/transformation952",
        "name": "transformation952",
        "type": "Microsoft.StreamAnalytics/streamingjobs/transformations",
        "properties": {
          "streamingUnits": 6,
          "query": "Select Id, Name from inputtest"
        }
      }
  - statusCode: "200"
    headers:
    - name: ETag
      value: be3cfaa2-3d02-4624-92d7-a26766306c8b
    body: >-
      {
        "id": "/subscriptions/56b5e0a9-b645-407d-99b0-c64f86013e3d/resourceGroups/sjrg4423/providers/Microsoft.StreamAnalytics/streamingjobs/sj8374/transformations/transformation952",
        "name": "transformation952",
        "type": "Microsoft.StreamAnalytics/streamingjobs/transformations",
        "properties": {
          "streamingUnits": 6,
          "query": "Select Id, Name from inputtest"
        }
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: Creates a transformation or replaces an already existing transformation under an existing streaming job.
errorCodes: []
