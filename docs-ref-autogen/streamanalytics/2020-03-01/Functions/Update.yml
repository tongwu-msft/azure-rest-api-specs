### YamlMime:RESTOperation
uid: management.azure.com.streamanalytics.2020-03-01.functions.update
name: Update
service: Stream Analytics
groupName: Functions
apiVersion: 2020-03-01
summary: Updates an existing function under an existing streaming job. This can be used to partially update (ie. update one or two properties) a function without affecting the rest the job or function definition.
consumes:
- application/json
produces:
- application/json
paths:
- content: PATCH https://management.azure.com/subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/Microsoft.StreamAnalytics/streamingjobs/{jobName}/functions/{functionName}?api-version=2020-03-01
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: The ID of the target subscription.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group. The name is case insensitive.
  types:
  - uid: string
  pattern: ^[-\w\._\(\)]+$
- name: jobName
  in: path
  isRequired: true
  description: The name of the streaming job.
  types:
  - uid: string
- name: functionName
  in: path
  isRequired: true
  description: The name of the function.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: The API version to use for this operation.
  types:
  - uid: string
responses:
- name: 200 OK
  headers:
  - name: ETag
    value: string
  description: The function was successfully updated.
  types:
  - uid: Function
- name: Other Status Codes
  description: Error.
  types:
  - uid: Error
requestBody:
- name: default
  parameters:
  - name: properties
    in: body
    description: The properties that are associated with a function.
    types:
    - uid: ScalarFunctionProperties
    - uid: AggregateFunctionProperties
    typesTitle: FunctionProperties
  - name: name
    in: body
    description: Resource name
    types:
    - uid: string
requestHeader:
- name: If-Match
  in: header
  description: The ETag of the function. Omit this value to always overwrite the current function. Specify the last-seen ETag value to prevent accidentally overwriting concurrent changes.
  types:
  - uid: string
definitions:
- name: Function
  description: A function object, containing all information associated with the named function. All functions are contained under a streaming job.
  kind: object
  properties:
  - name: properties
    description: The properties that are associated with a function.
    types:
    - uid: ScalarFunctionProperties
    - uid: AggregateFunctionProperties
    typesTitle: FunctionProperties
  - name: id
    isReadyOnly: true
    description: Resource Id
    types:
    - uid: string
  - name: name
    description: Resource name
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: Resource type
    types:
    - uid: string
- name: Error
  description: Common error representation.
  kind: object
  properties:
  - name: error
    description: Error definition properties.
    types:
    - uid: Error
- name: ScalarFunctionProperties
  description: The properties that are associated with a scalar function.
  kind: object
  properties:
  - name: type
    description: Indicates the type of function.
    types:
    - uid: Scalar
    typesTitle: string
  - name: etag
    isReadyOnly: true
    description: The current entity tag for the function. This is an opaque string. You can use it to detect whether the resource has changed between requests. You can also use it in the If-Match or If-None-Match headers for write operations for optimistic concurrency.
    types:
    - uid: string
  - name: properties.inputs
    description: Describes one input parameter of a function.
    types:
    - uid: FunctionInput
      isArray: true
  - name: properties.output
    description: Describes the output of a function.
    types:
    - uid: FunctionOutput
  - name: properties.binding
    description: The physical binding of the function. For example, in the Azure Machine Learning web service’s case, this describes the endpoint.
    types:
    - uid: AzureMachineLearningWebServiceFunctionBinding
    - uid: JavaScriptFunctionBinding
    typesTitle: FunctionBinding
- name: AggregateFunctionProperties
  description: The properties that are associated with an aggregate function.
  kind: object
  properties:
  - name: type
    description: Indicates the type of function.
    types:
    - uid: Aggregate
    typesTitle: string
  - name: etag
    isReadyOnly: true
    description: The current entity tag for the function. This is an opaque string. You can use it to detect whether the resource has changed between requests. You can also use it in the If-Match or If-None-Match headers for write operations for optimistic concurrency.
    types:
    - uid: string
  - name: properties.inputs
    description: Describes one input parameter of a function.
    types:
    - uid: FunctionInput
      isArray: true
  - name: properties.output
    description: Describes the output of a function.
    types:
    - uid: FunctionOutput
  - name: properties.binding
    description: The physical binding of the function. For example, in the Azure Machine Learning web service’s case, this describes the endpoint.
    types:
    - uid: AzureMachineLearningWebServiceFunctionBinding
    - uid: JavaScriptFunctionBinding
    typesTitle: FunctionBinding
- name: FunctionInput
  description: Describes one input parameter of a function.
  kind: object
  properties:
  - name: dataType
    description: The (Azure Stream Analytics supported) data type of the function input parameter. A list of valid Azure Stream Analytics data types are described at https://msdn.microsoft.com/en-us/library/azure/dn835065.aspx
    types:
    - uid: string
  - name: isConfigurationParameter
    description: A flag indicating if the parameter is a configuration parameter. True if this input parameter is expected to be a constant. Default is false.
    types:
    - uid: boolean
- name: FunctionOutput
  description: Describes the output of a function.
  kind: object
  properties:
  - name: dataType
    description: The (Azure Stream Analytics supported) data type of the function output. A list of valid Azure Stream Analytics data types are described at https://msdn.microsoft.com/en-us/library/azure/dn835065.aspx
    types:
    - uid: string
- name: AzureMachineLearningWebServiceFunctionBinding
  description: The binding to an Azure Machine Learning web service.
  kind: object
  properties:
  - name: properties.endpoint
    description: 'The Request-Response execute endpoint of the Azure Machine Learning web service. Find out more here: https://docs.microsoft.com/en-us/azure/machine-learning/machine-learning-consume-web-services#request-response-service-rrs'
    types:
    - uid: string
  - name: properties.apiKey
    description: The API key used to authenticate with Request-Response endpoint.
    types:
    - uid: string
  - name: properties.inputs
    description: The inputs for the Azure Machine Learning web service endpoint.
    types:
    - uid: AzureMachineLearningWebServiceInputs
  - name: properties.outputs
    description: A list of outputs from the Azure Machine Learning web service endpoint execution.
    types:
    - uid: AzureMachineLearningWebServiceOutputColumn
      isArray: true
  - name: properties.batchSize
    description: Number between 1 and 10000 describing maximum number of rows for every Azure ML RRS execute request. Default is 1000.
    types:
    - uid: integer
  - name: type
    description: Indicates the function binding type.
    types:
    - uid: Microsoft.MachineLearning/WebService
    typesTitle: string
- name: JavaScriptFunctionBinding
  description: The binding to a JavaScript function.
  kind: object
  properties:
  - name: properties.script
    description: "The JavaScript code containing a single function definition. For example: 'function (x, y) { return x + y; }'"
    types:
    - uid: string
  - name: type
    description: Indicates the function binding type.
    types:
    - uid: Microsoft.StreamAnalytics/JavascriptUdf
    typesTitle: string
- name: AzureMachineLearningWebServiceInputs
  description: The inputs for the Azure Machine Learning web service endpoint.
  kind: object
  properties:
  - name: name
    description: The name of the input. This is the name provided while authoring the endpoint.
    types:
    - uid: string
  - name: columnNames
    description: A list of input columns for the Azure Machine Learning web service endpoint.
    types:
    - uid: AzureMachineLearningWebServiceInputColumn
      isArray: true
- name: AzureMachineLearningWebServiceOutputColumn
  description: Describes an output column for the Azure Machine Learning web service endpoint.
  kind: object
  properties:
  - name: name
    description: The name of the output column.
    types:
    - uid: string
  - name: dataType
    description: The (Azure Machine Learning supported) data type of the output column. A list of valid  Azure Machine Learning data types are described at https://msdn.microsoft.com/en-us/library/azure/dn905923.aspx .
    types:
    - uid: string
- name: AzureMachineLearningWebServiceInputColumn
  description: Describes an input column for the Azure Machine Learning web service endpoint.
  kind: object
  properties:
  - name: name
    description: The name of the input column.
    types:
    - uid: string
  - name: dataType
    description: The (Azure Machine Learning supported) data type of the input column. A list of valid  Azure Machine Learning data types are described at https://msdn.microsoft.com/en-us/library/azure/dn905923.aspx .
    types:
    - uid: string
  - name: mapTo
    description: The zero based index of the function parameter this input maps to.
    types:
    - uid: integer
examples:
- name: Update an Azure ML function
  request:
    uri: PATCH https://management.azure.com/subscriptions/56b5e0a9-b645-407d-99b0-c64f86013e3d/resourcegroups/sjrg7/providers/Microsoft.StreamAnalytics/streamingjobs/sj9093/functions/function588?api-version=2020-03-01
    body: >-
      {
        "properties": {
          "type": "Scalar",
          "properties": {
            "binding": {
              "type": "Microsoft.MachineLearning/WebService",
              "properties": {
                "batchSize": 5000
              }
            }
          }
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PATCH https://management.azure.com/subscriptions/56b5e0a9-b645-407d-99b0-c64f86013e3d/resourcegroups/sjrg7/providers/Microsoft.StreamAnalytics/streamingjobs/sj9093/functions/function588?api-version=2020-03-01

      {
        "properties": {
          "type": "Scalar",
          "properties": {
            "binding": {
              "type": "Microsoft.MachineLearning/WebService",
              "properties": {
                "batchSize": 5000
              }
            }
          }
        }
      }

      ```

      # [Java](#tab/Java)
      ``` java
      import com.azure.core.util.Context;
      import com.azure.resourcemanager.streamanalytics.models.AzureMachineLearningWebServiceFunctionBinding;
      import com.azure.resourcemanager.streamanalytics.models.Function;
      import com.azure.resourcemanager.streamanalytics.models.ScalarFunctionProperties;

      /** Samples for Functions Update. */
      public final class Main {
          /*
           * x-ms-original-file: specification/streamanalytics/resource-manager/Microsoft.StreamAnalytics/stable/2020-03-01/examples/Function_Update_AzureML.json
           */
          /**
           * Sample code: Update an Azure ML function.
           *
           * @param manager Entry point to StreamAnalyticsManager.
           */
          public static void updateAnAzureMLFunction(
              com.azure.resourcemanager.streamanalytics.StreamAnalyticsManager manager) {
              Function resource =
                  manager.functions().getWithResponse("sjrg7", "sj9093", "function588", Context.NONE).getValue();
              resource
                  .update()
                  .withProperties(
                      new ScalarFunctionProperties()
                          .withBinding(new AzureMachineLearningWebServiceFunctionBinding().withBatchSize(5000)))
                  .apply();
          }
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-java/blob/azure-resourcemanager-streamanalytics_1.0.0-beta.2/sdk/streamanalytics/azure-resourcemanager-streamanalytics/README.md) on how to add the SDK to your project and authenticate.
      # [JavaScript](#tab/JavaScript)
      ``` js
      const { StreamAnalyticsManagementClient } = require("@azure/arm-streamanalytics");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to Updates an existing function under an existing streaming job. This can be used to partially update (ie. update one or two properties) a function without affecting the rest the job or function definition.
       *
       * @summary Updates an existing function under an existing streaming job. This can be used to partially update (ie. update one or two properties) a function without affecting the rest the job or function definition.
       * x-ms-original-file: specification/streamanalytics/resource-manager/Microsoft.StreamAnalytics/stable/2020-03-01/examples/Function_Update_AzureML.json
       */
      async function updateAnAzureMlFunction() {
        const subscriptionId = "56b5e0a9-b645-407d-99b0-c64f86013e3d";
        const resourceGroupName = "sjrg7";
        const jobName = "sj9093";
        const functionName = "function588";
        const functionParam = {
          properties: {
            type: "Scalar",
            binding: { type: "Microsoft.MachineLearning/WebService", batchSize: 5000 },
          },
        };
        const credential = new DefaultAzureCredential();
        const client = new StreamAnalyticsManagementClient(credential, subscriptionId);
        const result = await client.functions.update(
          resourceGroupName,
          jobName,
          functionName,
          functionParam
        );
        console.log(result);
      }

      updateAnAzureMlFunction().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-streamanalytics_4.0.1/sdk/streamanalytics/arm-streamanalytics/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    headers:
    - name: ETag
      value: 281cbf11-cd50-4a44-b833-cf170ce74748
    body: >-
      {
        "id": "/subscriptions/56b5e0a9-b645-407d-99b0-c64f86013e3d/resourceGroups/sjrg7/providers/Microsoft.StreamAnalytics/streamingjobs/sj9093/functions/function588",
        "name": "function588",
        "type": "Microsoft.StreamAnalytics/streamingjobs/functions",
        "properties": {
          "type": "Scalar",
          "properties": {
            "inputs": [
              {
                "dataType": "nvarchar(max)"
              }
            ],
            "output": {
              "dataType": "nvarchar(max)"
            },
            "binding": {
              "type": "Microsoft.MachineLearning/WebService",
              "properties": {
                "endpoint": "someAzureMLEndpointURL",
                "inputs": {
                  "name": "input1",
                  "columnNames": [
                    {
                      "name": "tweet",
                      "dataType": "string",
                      "mapTo": 0
                    }
                  ]
                },
                "outputs": [
                  {
                    "name": "Sentiment",
                    "dataType": "string"
                  }
                ],
                "batchSize": 5000
              }
            }
          }
        }
      }
- name: Update a JavaScript function
  request:
    uri: PATCH https://management.azure.com/subscriptions/56b5e0a9-b645-407d-99b0-c64f86013e3d/resourcegroups/sjrg1637/providers/Microsoft.StreamAnalytics/streamingjobs/sj8653/functions/function8197?api-version=2020-03-01
    body: >-
      {
        "properties": {
          "type": "Scalar",
          "properties": {
            "binding": {
              "type": "Microsoft.StreamAnalytics/JavascriptUdf",
              "properties": {
                "script": "function (a, b) { return a * b; }"
              }
            }
          }
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PATCH https://management.azure.com/subscriptions/56b5e0a9-b645-407d-99b0-c64f86013e3d/resourcegroups/sjrg1637/providers/Microsoft.StreamAnalytics/streamingjobs/sj8653/functions/function8197?api-version=2020-03-01

      {
        "properties": {
          "type": "Scalar",
          "properties": {
            "binding": {
              "type": "Microsoft.StreamAnalytics/JavascriptUdf",
              "properties": {
                "script": "function (a, b) { return a * b; }"
              }
            }
          }
        }
      }

      ```

      # [Java](#tab/Java)
      ``` java
      import com.azure.core.util.Context;
      import com.azure.resourcemanager.streamanalytics.models.Function;
      import com.azure.resourcemanager.streamanalytics.models.JavaScriptFunctionBinding;
      import com.azure.resourcemanager.streamanalytics.models.ScalarFunctionProperties;

      /** Samples for Functions Update. */
      public final class Main {
          /*
           * x-ms-original-file: specification/streamanalytics/resource-manager/Microsoft.StreamAnalytics/stable/2020-03-01/examples/Function_Update_JavaScript.json
           */
          /**
           * Sample code: Update a JavaScript function.
           *
           * @param manager Entry point to StreamAnalyticsManager.
           */
          public static void updateAJavaScriptFunction(
              com.azure.resourcemanager.streamanalytics.StreamAnalyticsManager manager) {
              Function resource =
                  manager.functions().getWithResponse("sjrg1637", "sj8653", "function8197", Context.NONE).getValue();
              resource
                  .update()
                  .withProperties(
                      new ScalarFunctionProperties()
                          .withBinding(new JavaScriptFunctionBinding().withScript("function (a, b) { return a * b; }")))
                  .apply();
          }
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-java/blob/azure-resourcemanager-streamanalytics_1.0.0-beta.2/sdk/streamanalytics/azure-resourcemanager-streamanalytics/README.md) on how to add the SDK to your project and authenticate.
      # [Go](#tab/Go)
      ``` go
      package armstreamanalytics_test

      import (
      	"context"
      	"log"

      	"github.com/Azure/azure-sdk-for-go/sdk/azcore/to"
      	"github.com/Azure/azure-sdk-for-go/sdk/azidentity"
      	"github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/streamanalytics/armstreamanalytics"
      )

      // Generated from example definition: https://github.com/Azure/azure-rest-api-specs/tree/main/specification/streamanalytics/resource-manager/Microsoft.StreamAnalytics/stable/2020-03-01/examples/Function_Update_JavaScript.json
      func ExampleFunctionsClient_Update() {
      	cred, err := azidentity.NewDefaultAzureCredential(nil)
      	if err != nil {
      		log.Fatalf("failed to obtain a credential: %v", err)
      	}
      	ctx := context.Background()
      	client, err := armstreamanalytics.NewFunctionsClient("56b5e0a9-b645-407d-99b0-c64f86013e3d", cred, nil)
      	if err != nil {
      		log.Fatalf("failed to create client: %v", err)
      	}
      	res, err := client.Update(ctx,
      		"sjrg1637",
      		"sj8653",
      		"function8197",
      		armstreamanalytics.Function{
      			Properties: &armstreamanalytics.ScalarFunctionProperties{
      				Type: to.Ptr("Scalar"),
      				Properties: &armstreamanalytics.FunctionConfiguration{
      					Binding: &armstreamanalytics.JavaScriptFunctionBinding{
      						Type: to.Ptr("Microsoft.StreamAnalytics/JavascriptUdf"),
      						Properties: &armstreamanalytics.JavaScriptFunctionBindingProperties{
      							Script: to.Ptr("function (a, b) { return a * b; }"),
      						},
      					},
      				},
      			},
      		},
      		&armstreamanalytics.FunctionsClientUpdateOptions{IfMatch: nil})
      	if err != nil {
      		log.Fatalf("failed to finish the request: %v", err)
      	}
      	// TODO: use response item
      	_ = res
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-go/blob/sdk%2Fresourcemanager%2Fstreamanalytics%2Farmstreamanalytics%2Fv1.0.0/sdk/resourcemanager/streamanalytics/armstreamanalytics/README.md) on how to add the SDK to your project and authenticate.
      # [JavaScript](#tab/JavaScript)
      ``` js
      const { StreamAnalyticsManagementClient } = require("@azure/arm-streamanalytics");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to Updates an existing function under an existing streaming job. This can be used to partially update (ie. update one or two properties) a function without affecting the rest the job or function definition.
       *
       * @summary Updates an existing function under an existing streaming job. This can be used to partially update (ie. update one or two properties) a function without affecting the rest the job or function definition.
       * x-ms-original-file: specification/streamanalytics/resource-manager/Microsoft.StreamAnalytics/stable/2020-03-01/examples/Function_Update_JavaScript.json
       */
      async function updateAJavaScriptFunction() {
        const subscriptionId = "56b5e0a9-b645-407d-99b0-c64f86013e3d";
        const resourceGroupName = "sjrg1637";
        const jobName = "sj8653";
        const functionName = "function8197";
        const functionParam = {
          properties: {
            type: "Scalar",
            binding: {
              type: "Microsoft.StreamAnalytics/JavascriptUdf",
              script: "function (a, b) { return a * b; }",
            },
          },
        };
        const credential = new DefaultAzureCredential();
        const client = new StreamAnalyticsManagementClient(credential, subscriptionId);
        const result = await client.functions.update(
          resourceGroupName,
          jobName,
          functionName,
          functionParam
        );
        console.log(result);
      }

      updateAJavaScriptFunction().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-streamanalytics_4.0.1/sdk/streamanalytics/arm-streamanalytics/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    headers:
    - name: ETag
      value: 94a512d5-2f59-4e39-b9c8-bca4abd74b7e
    body: >-
      {
        "id": "/subscriptions/56b5e0a9-b645-407d-99b0-c64f86013e3d/resourceGroups/sjrg1637/providers/Microsoft.StreamAnalytics/streamingjobs/sj8653/functions/function8197",
        "name": "function8197",
        "type": "Microsoft.StreamAnalytics/streamingjobs/functions",
        "properties": {
          "type": "Scalar",
          "properties": {
            "inputs": [
              {
                "dataType": "Any"
              }
            ],
            "output": {
              "dataType": "Any"
            },
            "binding": {
              "type": "Microsoft.StreamAnalytics/JavascriptUdf",
              "properties": {
                "script": "function (a, b) { return a * b; }"
              }
            }
          }
        }
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: Updates an existing function under an existing streaming job. This can be used to partially update (ie.
errorCodes: []
