### YamlMime:RESTOperation
uid: management.azure.com.streamanalytics.2020-03-01-preview.clusters.createorupdate
name: Create Or Update
service: Stream Analytics
groupName: Clusters
apiVersion: 2020-03-01-preview
summary: Creates a Stream Analytics Cluster or replaces an already existing cluster.
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.StreamAnalytics/clusters/{clusterName}?api-version=2020-03-01-preview
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: The ID of the target subscription.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group. The name is case insensitive.
  types:
  - uid: string
  pattern: ^[-\w\._\(\)]+$
- name: clusterName
  in: path
  isRequired: true
  description: The name of the cluster.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: The API version to use for this operation.
  types:
  - uid: string
responses:
- name: 200 OK
  description: The cluster was successfully created or replaced.
  types:
  - uid: Cluster
- name: 201 Created
  description: The cluster was successfully created or replaced.
  types:
  - uid: Cluster
- name: Other Status Codes
  description: Error.
  types:
  - uid: Error
requestBody:
- name: default
  parameters:
  - name: sku
    in: body
    description: The SKU of the cluster. This determines the size/capacity of the cluster. Required on PUT (CreateOrUpdate) requests.
    types:
    - uid: ClusterSku
  - name: properties
    in: body
    description: The properties associated with a Stream Analytics cluster.
    types:
    - uid: ClusterProperties
  - name: tags
    in: body
    description: Resource tags.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: location
    in: body
    description: The geo-location where the resource lives
    types:
    - uid: string
requestHeader:
- name: If-Match
  in: header
  description: The ETag of the resource. Omit this value to always overwrite the current record set. Specify the last-seen ETag value to prevent accidentally overwriting concurrent changes.
  types:
  - uid: string
- name: If-None-Match
  in: header
  description: Set to '*' to allow a new resource to be created, but to prevent updating an existing record set. Other values will result in a 412 Pre-condition Failed response.
  types:
  - uid: string
definitions:
- name: ClusterSku
  description: The SKU of the cluster. This determines the size/capacity of the cluster. Required on PUT (CreateOrUpdate) requests.
  kind: object
  properties:
  - name: name
    description: Specifies the SKU name of the cluster. Required on PUT (CreateOrUpdate) requests.
    types:
    - uid: ClusterSkuName
  - name: capacity
    description: Denotes the number of streaming units the cluster can support. Valid values for this property are multiples of 36 with a minimum value of 36 and maximum value of 216. Required on PUT (CreateOrUpdate) requests.
    types:
    - uid: integer
- name: ClusterProperties
  description: The properties associated with a Stream Analytics cluster.
  kind: object
  properties:
  - name: createdDate
    isReadyOnly: true
    description: The date this cluster was created.
    types:
    - uid: string
  - name: clusterId
    isReadyOnly: true
    description: Unique identifier for the cluster.
    types:
    - uid: string
  - name: provisioningState
    isReadyOnly: true
    description: 'The status of the cluster provisioning. The three terminal states are: Succeeded, Failed and Canceled'
    types:
    - uid: ClusterProvisioningState
  - name: capacityAllocated
    isReadyOnly: true
    description: Represents the number of streaming units currently being used on the cluster.
    types:
    - uid: integer
  - name: capacityAssigned
    isReadyOnly: true
    description: Represents the sum of the SUs of all streaming jobs associated with the cluster. If all of the jobs were running, this would be the capacity allocated.
    types:
    - uid: integer
- name: Cluster
  description: A Stream Analytics Cluster object
  kind: object
  properties:
  - name: sku
    description: The SKU of the cluster. This determines the size/capacity of the cluster. Required on PUT (CreateOrUpdate) requests.
    types:
    - uid: ClusterSku
  - name: etag
    isReadyOnly: true
    description: The current entity tag for the cluster. This is an opaque string. You can use it to detect whether the resource has changed between requests. You can also use it in the If-Match or If-None-Match headers for write operations for optimistic concurrency.
    types:
    - uid: string
  - name: properties
    description: The properties associated with a Stream Analytics cluster.
    types:
    - uid: ClusterProperties
  - name: tags
    description: Resource tags.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: location
    description: The geo-location where the resource lives
    types:
    - uid: string
  - name: id
    isReadyOnly: true
    description: Fully qualified resource Id for the resource. Ex - /subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/{resourceProviderNamespace}/{resourceType}/{resourceName}
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: The name of the resource
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: The type of the resource. Ex- Microsoft.Compute/virtualMachines or Microsoft.Storage/storageAccounts.
    types:
    - uid: string
- name: Error
  description: Common error representation.
  kind: object
  properties:
  - name: error
    description: Error definition properties.
    types:
    - uid: Error
- name: ClusterSkuName
  description: Specifies the SKU name of the cluster. Required on PUT (CreateOrUpdate) requests.
  kind: enum
  properties:
  - name: Default
    description: The default SKU.
    types:
    - uid: string
- name: ClusterProvisioningState
  description: 'The status of the cluster provisioning. The three terminal states are: Succeeded, Failed and Canceled'
  kind: enum
  properties:
  - name: Succeeded
    description: The cluster provisioning succeeded.
    types:
    - uid: string
  - name: Failed
    description: The cluster provisioning failed.
    types:
    - uid: string
  - name: Canceled
    description: The cluster provisioning was canceled.
    types:
    - uid: string
  - name: InProgress
    description: The cluster provisioning was inprogress.
    types:
    - uid: string
examples:
- name: Create a new cluster
  request:
    uri: PUT https://management.azure.com/subscriptions/34adfa4f-cedf-4dc0-ba29-b6d1a69ab345/resourceGroups/sjrg/providers/Microsoft.StreamAnalytics/clusters/An Example Cluster?api-version=2020-03-01-preview
    body: >-
      {
        "location": "North US",
        "tags": {
          "key": "value"
        },
        "sku": {
          "name": "Default",
          "capacity": 48
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/34adfa4f-cedf-4dc0-ba29-b6d1a69ab345/resourceGroups/sjrg/providers/Microsoft.StreamAnalytics/clusters/An Example Cluster?api-version=2020-03-01-preview

      {
        "location": "North US",
        "tags": {
          "key": "value"
        },
        "sku": {
          "name": "Default",
          "capacity": 48
        }
      }

      ```

  responses:
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/34adfa4f-cedf-4dc0-ba29-b6d1a69ab345/resourceGroups/sjrg/providers/Microsoft.StreamAnalytics/clusters/AnExampleStreamingCluster",
        "name": "An Example Cluster",
        "type": "Microsoft.StreamAnalytics/clusters",
        "location": "North US",
        "tags": {
          "key": "value"
        },
        "sku": {
          "name": "Default",
          "capacity": 48
        },
        "properties": {
          "createdDate": "2020-01-25T01:00:00Z",
          "clusterId": "B01C67EF-4739-4DDD-9FB2-427EB43DE839",
          "provisioningState": "Succeeded",
          "capacityAllocated": 0,
          "capacityAssigned": 0
        },
        "etag": "F86B9B70-D5B1-451D-AFC8-0B42D4729B8C"
      }
  - statusCode: "201"
    body: >-
      {
        "id": "/subscriptions/34adfa4f-cedf-4dc0-ba29-b6d1a69ab345/resourceGroups/sjrg/providers/Microsoft.StreamAnalytics/clusters/AnExampleStreamingCluster",
        "name": "An Example Cluster",
        "type": "Microsoft.StreamAnalytics/clusters",
        "location": "North US",
        "tags": {
          "key": "value"
        },
        "sku": {
          "name": "Default",
          "capacity": 48
        },
        "properties": {
          "createdDate": "2020-01-25T01:00:00Z",
          "clusterId": "B01C67EF-4739-4DDD-9FB2-427EB43DE839",
          "provisioningState": "Succeeded",
          "capacityAllocated": 0,
          "capacityAssigned": 0
        },
        "etag": "F86B9B70-D5B1-451D-AFC8-0B42D4729B8C"
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: Learn more about Stream Analytics service - Creates a Stream Analytics Cluster or replaces an already existing cluster.
errorCodes: []
