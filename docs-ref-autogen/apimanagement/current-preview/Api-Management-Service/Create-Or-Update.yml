### YamlMime:RESTOperation
uid: management.azure.com.apimanagement.current-preview.apimanagementservice.createorupdate
name: Create Or Update
service: API Management
groupName: Api Management Service
apiVersion: 2021-12-01-preview
summary: Creates or updates an API Management service. This is long running operation and could take several minutes to complete.
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.ApiManagement/service/{serviceName}?api-version=2021-12-01-preview
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: Subscription credentials which uniquely identify Microsoft Azure subscription. The subscription ID forms part of the URI for every service call.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group.
  types:
  - uid: string
- name: serviceName
  in: path
  isRequired: true
  description: The name of the API Management service.
  types:
  - uid: string
  pattern: ^[a-zA-Z](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?$
- name: api-version
  in: query
  isRequired: true
  description: Version of the API to be used with the client request.
  types:
  - uid: string
responses:
- name: 200 OK
  description: The service was successfully set up.
  types:
  - uid: ApiManagementServiceResource
- name: 201 Created
  description: Created
  types:
  - uid: ApiManagementServiceResource
- name: 202 Accepted
  description: Accepted the configuration change when updating the service.
- name: Other Status Codes
  description: Error response describing why the operation failed.
  types:
  - uid: ErrorResponse
requestBody:
- name: default
  parameters:
  - name: sku
    in: body
    isRequired: true
    description: SKU properties of the API Management service.
    types:
    - uid: ApiManagementServiceSkuProperties
  - name: identity
    in: body
    description: Managed service identity of the Api Management service.
    types:
    - uid: ApiManagementServiceIdentity
  - name: location
    in: body
    isRequired: true
    description: Resource location.
    types:
    - uid: string
  - name: zones
    in: body
    description: A list of availability zones denoting where the resource needs to come from.
    types:
    - uid: string
      isArray: true
  - name: properties.publisherEmail
    in: body
    isRequired: true
    description: Publisher email.
    types:
    - uid: string
  - name: properties.publisherName
    in: body
    isRequired: true
    description: Publisher name.
    types:
    - uid: string
  - name: tags
    in: body
    description: Resource tags.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: properties.notificationSenderEmail
    in: body
    description: Email address from which the notification will be sent.
    types:
    - uid: string
  - name: properties.hostnameConfigurations
    in: body
    description: Custom hostname configuration of the API Management service.
    types:
    - uid: HostnameConfiguration
      isArray: true
  - name: properties.publicIpAddressId
    in: body
    description: Public Standard SKU IP V4 based IP address to be associated with Virtual Network deployed service in the region. Supported only for Developer and Premium SKU being deployed in Virtual Network.
    types:
    - uid: string
  - name: properties.publicNetworkAccess
    in: body
    description: Whether or not public endpoint access is allowed for this API Management service.  Value is optional but if passed in, must be 'Enabled' or 'Disabled'. If 'Disabled', private endpoints are the exclusive access method. Default value is 'Enabled'
    types:
    - uid: PublicNetworkAccess
  - name: properties.virtualNetworkConfiguration
    in: body
    description: Virtual network configuration of the API Management service.
    types:
    - uid: VirtualNetworkConfiguration
  - name: properties.additionalLocations
    in: body
    description: Additional datacenter locations of the API Management service.
    types:
    - uid: AdditionalLocation
      isArray: true
  - name: properties.customProperties
    in: body
    description: "Custom properties of the API Management service.</br>Setting `Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Ciphers.TripleDes168` will disable the cipher TLS_RSA_WITH_3DES_EDE_CBC_SHA for all TLS(1.0, 1.1 and 1.2).</br>Setting `Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Protocols.Tls11` can be used to disable just TLS 1.1.</br>Setting `Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Protocols.Tls10` can be used to disable TLS 1.0 on an API Management service.</br>Setting `Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Backend.Protocols.Tls11` can be used to disable just TLS 1.1 for communications with backends.</br>Setting `Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Backend.Protocols.Tls10` can be used to disable TLS 1.0 for communications with backends.</br>Setting `Microsoft.WindowsAzure.ApiManagement.Gateway.Protocols.Server.Http2` can be used to enable HTTP2 protocol on an API Management service.</br>Not specifying any of these properties on PATCH operation will reset omitted properties' values to their defaults. For all the settings except Http2 the default value is `True` if the service was created on or before April 1st 2018 and `False` otherwise. Http2 setting's default value is `False`.</br></br>You can disable any of next ciphers by using settings `Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Ciphers.[cipher_name]`: TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_128_GCM_SHA256, TLS_RSA_WITH_AES_256_CBC_SHA256, TLS_RSA_WITH_AES_128_CBC_SHA256, TLS_RSA_WITH_AES_256_CBC_SHA, TLS_RSA_WITH_AES_128_CBC_SHA. For example, `Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Ciphers.TLS_RSA_WITH_AES_128_CBC_SHA256`:`false`. The default value is `true` for them.  Note: next ciphers can't be disabled since they are required by Azure CloudService internal components: TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384,TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256,TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384,TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256,TLS_RSA_WITH_AES_256_GCM_SHA384"
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: properties.certificates
    in: body
    description: List of Certificates that need to be installed in the API Management service. Max supported certificates that can be installed is 10.
    types:
    - uid: CertificateConfiguration
      isArray: true
  - name: properties.enableClientCertificate
    in: body
    description: Property only meant to be used for Consumption SKU Service. This enforces a client certificate to be presented on each request to the gateway. This also enables the ability to authenticate the certificate in the policy on the gateway.
    types:
    - uid: boolean
  - name: properties.disableGateway
    in: body
    description: Property only valid for an Api Management service deployed in multiple locations. This can be used to disable the gateway in master region.
    types:
    - uid: boolean
  - name: properties.virtualNetworkType
    in: body
    description: The type of VPN in which API Management service needs to be configured in. None (Default Value) means the API Management service is not part of any Virtual Network, External means the API Management deployment is set up inside a Virtual Network having an Internet Facing Endpoint, and Internal means that API Management deployment is setup inside a Virtual Network having an Intranet Facing Endpoint only.
    types:
    - uid: VirtualNetworkType
  - name: properties.apiVersionConstraint
    in: body
    description: Control Plane Apis version constraint for the API Management service.
    types:
    - uid: ApiVersionConstraint
  - name: properties.restore
    in: body
    description: Undelete Api Management Service if it was previously soft-deleted. If this flag is specified and set to True all other properties will be ignored.
    types:
    - uid: boolean
  - name: properties.privateEndpointConnections
    in: body
    description: List of Private Endpoint Connections of this service.
    types:
    - uid: RemotePrivateEndpointConnectionWrapper
      isArray: true
requestHeader: []
definitions:
- name: ApiManagementServiceSkuProperties
  description: API Management service resource SKU properties.
  kind: object
  properties:
  - name: name
    description: Name of the Sku.
    types:
    - uid: SkuType
  - name: capacity
    description: Capacity of the SKU (number of deployed units of the SKU). For Consumption SKU capacity must be specified as 0.
    types:
    - uid: integer
- name: ApiManagementServiceIdentity
  description: Identity properties of the Api Management service resource.
  kind: object
  properties:
  - name: type
    description: The type of identity used for the resource. The type 'SystemAssigned, UserAssigned' includes both an implicitly created identity and a set of user assigned identities. The type 'None' will remove any identities from the service.
    types:
    - uid: ApimIdentityType
  - name: principalId
    isReadyOnly: true
    description: The principal id of the identity.
    types:
    - uid: string
  - name: tenantId
    isReadyOnly: true
    description: The client tenant id of the identity.
    types:
    - uid: string
  - name: userAssignedIdentities
    description: "The list of user identities associated with the resource. The user identity \ndictionary key references will be ARM resource ids in the form: \n'/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/\n    providers/Microsoft.ManagedIdentity/userAssignedIdentities/{identityName}'."
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: UserIdentityProperties
- name: systemData
  description: Metadata pertaining to creation and last modification of the resource.
  kind: object
  properties:
  - name: createdBy
    description: The identity that created the resource.
    types:
    - uid: string
  - name: createdByType
    description: The type of identity that created the resource.
    types:
    - uid: createdByType
  - name: createdAt
    description: The timestamp of resource creation (UTC).
    types:
    - uid: string
  - name: lastModifiedBy
    description: The identity that last modified the resource.
    types:
    - uid: string
  - name: lastModifiedByType
    description: The type of identity that last modified the resource.
    types:
    - uid: createdByType
  - name: lastModifiedAt
    description: The timestamp of resource last modification (UTC)
    types:
    - uid: string
- name: HostnameConfiguration
  description: Custom hostname configuration.
  kind: object
  properties:
  - name: type
    description: Hostname type.
    types:
    - uid: HostnameType
  - name: hostName
    description: Hostname to configure on the Api Management service.
    types:
    - uid: string
  - name: keyVaultId
    description: Url to the KeyVault Secret containing the Ssl Certificate. If absolute Url containing version is provided, auto-update of ssl certificate will not work. This requires Api Management service to be configured with aka.ms/apimmsi. The secret should be of type *application/x-pkcs12*
    types:
    - uid: string
  - name: identityClientId
    description: System or User Assigned Managed identity clientId as generated by Azure AD, which has GET access to the keyVault containing the SSL certificate.
    types:
    - uid: string
  - name: encodedCertificate
    description: Base64 Encoded certificate.
    types:
    - uid: string
  - name: certificatePassword
    description: Certificate Password.
    types:
    - uid: string
  - name: defaultSslBinding
    description: Specify true to setup the certificate associated with this Hostname as the Default SSL Certificate. If a client does not send the SNI header, then this will be the certificate that will be challenged. The property is useful if a service has multiple custom hostname enabled and it needs to decide on the default ssl certificate. The setting only applied to Proxy Hostname Type.
    types:
    - uid: boolean
    defaultValue: false
  - name: negotiateClientCertificate
    description: Specify true to always negotiate client certificate on the hostname. Default Value is false.
    types:
    - uid: boolean
    defaultValue: false
  - name: certificate
    description: Certificate information.
    types:
    - uid: CertificateInformation
  - name: certificateSource
    description: Certificate Source.
    types:
    - uid: CertificateSource
  - name: certificateStatus
    description: Certificate Status.
    types:
    - uid: CertificateStatus
- name: VirtualNetworkConfiguration
  description: Configuration of a virtual network to which API Management service is deployed.
  kind: object
  properties:
  - name: vnetid
    isReadyOnly: true
    description: The virtual network ID. This is typically a GUID. Expect a null GUID by default.
    types:
    - uid: string
  - name: subnetname
    isReadyOnly: true
    description: The name of the subnet.
    types:
    - uid: string
  - name: subnetResourceId
    description: The full resource ID of a subnet in a virtual network to deploy the API Management service in.
    types:
    - uid: string
- name: AdditionalLocation
  description: Description of an additional API Management resource location.
  kind: object
  properties:
  - name: location
    description: The location name of the additional region among Azure Data center regions.
    types:
    - uid: string
  - name: sku
    description: SKU properties of the API Management service.
    types:
    - uid: ApiManagementServiceSkuProperties
  - name: zones
    description: A list of availability zones denoting where the resource needs to come from.
    types:
    - uid: string
      isArray: true
  - name: publicIPAddresses
    isReadyOnly: true
    description: Public Static Load Balanced IP addresses of the API Management service in the additional location. Available only for Basic, Standard, Premium and Isolated SKU.
    types:
    - uid: string
      isArray: true
  - name: privateIPAddresses
    isReadyOnly: true
    description: Private Static Load Balanced IP addresses of the API Management service which is deployed in an Internal Virtual Network in a particular additional location. Available only for Basic, Standard, Premium and Isolated SKU.
    types:
    - uid: string
      isArray: true
  - name: publicIpAddressId
    description: Public Standard SKU IP V4 based IP address to be associated with Virtual Network deployed service in the location. Supported only for Premium SKU being deployed in Virtual Network.
    types:
    - uid: string
  - name: virtualNetworkConfiguration
    description: Virtual network configuration for the location.
    types:
    - uid: VirtualNetworkConfiguration
  - name: gatewayRegionalUrl
    isReadyOnly: true
    description: Gateway URL of the API Management service in the Region.
    types:
    - uid: string
  - name: disableGateway
    description: Property only valid for an Api Management service deployed in multiple locations. This can be used to disable the gateway in this additional location.
    types:
    - uid: boolean
    defaultValue: false
  - name: platformVersion
    isReadyOnly: true
    description: Compute Platform Version running the service.
    types:
    - uid: PlatformVersion
- name: CertificateConfiguration
  description: Certificate configuration which consist of non-trusted intermediates and root certificates.
  kind: object
  properties:
  - name: encodedCertificate
    description: Base64 Encoded certificate.
    types:
    - uid: string
  - name: certificatePassword
    description: Certificate Password.
    types:
    - uid: string
  - name: storeName
    description: The System.Security.Cryptography.x509certificates.StoreName certificate store location. Only Root and CertificateAuthority are valid locations.
    types:
    - uid: CertificateAuthority
    - uid: Root
    typesTitle: enum
  - name: certificate
    description: Certificate information.
    types:
    - uid: CertificateInformation
- name: ApiVersionConstraint
  description: Control Plane Apis version constraint for the API Management service.
  kind: object
  properties:
  - name: minApiVersion
    description: Limit control plane API calls to API Management service with version equal to or newer than this value.
    types:
    - uid: string
- name: RemotePrivateEndpointConnectionWrapper
  description: Remote Private Endpoint Connection resource.
  kind: object
  properties:
  - name: id
    description: Private Endpoint connection resource id
    types:
    - uid: string
  - name: name
    description: Private Endpoint Connection Name
    types:
    - uid: string
  - name: type
    description: Private Endpoint Connection Resource Type
    types:
    - uid: string
  - name: properties.privateEndpoint
    description: The resource of private end point.
    types:
    - uid: ArmIdWrapper
  - name: properties.privateLinkServiceConnectionState
    description: A collection of information about the state of the connection between service consumer and provider.
    types:
    - uid: PrivateLinkServiceConnectionState
  - name: properties.provisioningState
    isReadyOnly: true
    description: The provisioning state of the private endpoint connection resource.
    types:
    - uid: string
  - name: properties.groupIds
    isReadyOnly: true
    description: All the Group ids.
    types:
    - uid: string
      isArray: true
- name: ApiManagementServiceResource
  description: A single API Management service resource in List or Get response.
  kind: object
  properties:
  - name: sku
    description: SKU properties of the API Management service.
    types:
    - uid: ApiManagementServiceSkuProperties
  - name: identity
    description: Managed service identity of the Api Management service.
    types:
    - uid: ApiManagementServiceIdentity
  - name: systemData
    isReadyOnly: true
    description: Metadata pertaining to creation and last modification of the resource.
    types:
    - uid: systemData
  - name: location
    description: Resource location.
    types:
    - uid: string
  - name: etag
    isReadyOnly: true
    description: ETag of the resource.
    types:
    - uid: string
  - name: zones
    description: A list of availability zones denoting where the resource needs to come from.
    types:
    - uid: string
      isArray: true
  - name: properties.publisherEmail
    description: Publisher email.
    types:
    - uid: string
  - name: properties.publisherName
    description: Publisher name.
    types:
    - uid: string
  - name: id
    isReadyOnly: true
    description: Resource ID.
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: Resource name.
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: Resource type for API Management resource is set to Microsoft.ApiManagement.
    types:
    - uid: string
  - name: tags
    description: Resource tags.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: properties.notificationSenderEmail
    description: Email address from which the notification will be sent.
    types:
    - uid: string
  - name: properties.provisioningState
    isReadyOnly: true
    description: 'The current provisioning state of the API Management service which can be one of the following: Created/Activating/Succeeded/Updating/Failed/Stopped/Terminating/TerminationFailed/Deleted.'
    types:
    - uid: string
  - name: properties.targetProvisioningState
    isReadyOnly: true
    description: The provisioning state of the API Management service, which is targeted by the long running operation started on the service.
    types:
    - uid: string
  - name: properties.createdAtUtc
    isReadyOnly: true
    description: 'Creation UTC date of the API Management service.The date conforms to the following format: `yyyy-MM-ddTHH:mm:ssZ` as specified by the ISO 8601 standard.'
    types:
    - uid: string
  - name: properties.gatewayUrl
    isReadyOnly: true
    description: Gateway URL of the API Management service.
    types:
    - uid: string
  - name: properties.gatewayRegionalUrl
    isReadyOnly: true
    description: Gateway URL of the API Management service in the Default Region.
    types:
    - uid: string
  - name: properties.portalUrl
    isReadyOnly: true
    description: Publisher portal endpoint Url of the API Management service.
    types:
    - uid: string
  - name: properties.managementApiUrl
    isReadyOnly: true
    description: Management API endpoint URL of the API Management service.
    types:
    - uid: string
  - name: properties.scmUrl
    isReadyOnly: true
    description: SCM endpoint URL of the API Management service.
    types:
    - uid: string
  - name: properties.developerPortalUrl
    isReadyOnly: true
    description: DEveloper Portal endpoint URL of the API Management service.
    types:
    - uid: string
  - name: properties.hostnameConfigurations
    description: Custom hostname configuration of the API Management service.
    types:
    - uid: HostnameConfiguration
      isArray: true
  - name: properties.publicIPAddresses
    isReadyOnly: true
    description: Public Static Load Balanced IP addresses of the API Management service in Primary region. Available only for Basic, Standard, Premium and Isolated SKU.
    types:
    - uid: string
      isArray: true
  - name: properties.privateIPAddresses
    isReadyOnly: true
    description: Private Static Load Balanced IP addresses of the API Management service in Primary region which is deployed in an Internal Virtual Network. Available only for Basic, Standard, Premium and Isolated SKU.
    types:
    - uid: string
      isArray: true
  - name: properties.publicIpAddressId
    description: Public Standard SKU IP V4 based IP address to be associated with Virtual Network deployed service in the region. Supported only for Developer and Premium SKU being deployed in Virtual Network.
    types:
    - uid: string
  - name: properties.publicNetworkAccess
    description: Whether or not public endpoint access is allowed for this API Management service.  Value is optional but if passed in, must be 'Enabled' or 'Disabled'. If 'Disabled', private endpoints are the exclusive access method. Default value is 'Enabled'
    types:
    - uid: PublicNetworkAccess
  - name: properties.virtualNetworkConfiguration
    description: Virtual network configuration of the API Management service.
    types:
    - uid: VirtualNetworkConfiguration
  - name: properties.additionalLocations
    description: Additional datacenter locations of the API Management service.
    types:
    - uid: AdditionalLocation
      isArray: true
  - name: properties.customProperties
    description: "Custom properties of the API Management service.</br>Setting `Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Ciphers.TripleDes168` will disable the cipher TLS_RSA_WITH_3DES_EDE_CBC_SHA for all TLS(1.0, 1.1 and 1.2).</br>Setting `Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Protocols.Tls11` can be used to disable just TLS 1.1.</br>Setting `Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Protocols.Tls10` can be used to disable TLS 1.0 on an API Management service.</br>Setting `Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Backend.Protocols.Tls11` can be used to disable just TLS 1.1 for communications with backends.</br>Setting `Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Backend.Protocols.Tls10` can be used to disable TLS 1.0 for communications with backends.</br>Setting `Microsoft.WindowsAzure.ApiManagement.Gateway.Protocols.Server.Http2` can be used to enable HTTP2 protocol on an API Management service.</br>Not specifying any of these properties on PATCH operation will reset omitted properties' values to their defaults. For all the settings except Http2 the default value is `True` if the service was created on or before April 1st 2018 and `False` otherwise. Http2 setting's default value is `False`.</br></br>You can disable any of next ciphers by using settings `Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Ciphers.[cipher_name]`: TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_128_GCM_SHA256, TLS_RSA_WITH_AES_256_CBC_SHA256, TLS_RSA_WITH_AES_128_CBC_SHA256, TLS_RSA_WITH_AES_256_CBC_SHA, TLS_RSA_WITH_AES_128_CBC_SHA. For example, `Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Ciphers.TLS_RSA_WITH_AES_128_CBC_SHA256`:`false`. The default value is `true` for them.  Note: next ciphers can't be disabled since they are required by Azure CloudService internal components: TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384,TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256,TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384,TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256,TLS_RSA_WITH_AES_256_GCM_SHA384"
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: properties.certificates
    description: List of Certificates that need to be installed in the API Management service. Max supported certificates that can be installed is 10.
    types:
    - uid: CertificateConfiguration
      isArray: true
  - name: properties.enableClientCertificate
    description: Property only meant to be used for Consumption SKU Service. This enforces a client certificate to be presented on each request to the gateway. This also enables the ability to authenticate the certificate in the policy on the gateway.
    types:
    - uid: boolean
    defaultValue: false
  - name: properties.disableGateway
    description: Property only valid for an Api Management service deployed in multiple locations. This can be used to disable the gateway in master region.
    types:
    - uid: boolean
    defaultValue: false
  - name: properties.virtualNetworkType
    description: The type of VPN in which API Management service needs to be configured in. None (Default Value) means the API Management service is not part of any Virtual Network, External means the API Management deployment is set up inside a Virtual Network having an Internet Facing Endpoint, and Internal means that API Management deployment is setup inside a Virtual Network having an Intranet Facing Endpoint only.
    types:
    - uid: VirtualNetworkType
    defaultValue: None
  - name: properties.apiVersionConstraint
    description: Control Plane Apis version constraint for the API Management service.
    types:
    - uid: ApiVersionConstraint
  - name: properties.restore
    description: Undelete Api Management Service if it was previously soft-deleted. If this flag is specified and set to True all other properties will be ignored.
    types:
    - uid: boolean
    defaultValue: false
  - name: properties.privateEndpointConnections
    description: List of Private Endpoint Connections of this service.
    types:
    - uid: RemotePrivateEndpointConnectionWrapper
      isArray: true
  - name: properties.platformVersion
    isReadyOnly: true
    description: Compute Platform Version running the service in this location.
    types:
    - uid: PlatformVersion
- name: ErrorResponse
  description: Error Response.
  kind: object
  properties:
  - name: error.code
    description: Service-defined error code. This code serves as a sub-status for the HTTP error code specified in the response.
    types:
    - uid: string
  - name: error.message
    description: Human-readable representation of the error.
    types:
    - uid: string
  - name: error.details
    description: The list of invalid fields send in request, in case of validation error.
    types:
    - uid: ErrorFieldContract
      isArray: true
- name: SkuType
  description: Name of the Sku.
  kind: enum
  properties:
  - name: Developer
    description: Developer SKU of Api Management.
    types:
    - uid: string
  - name: Standard
    description: Standard SKU of Api Management.
    types:
    - uid: string
  - name: Premium
    description: Premium SKU of Api Management.
    types:
    - uid: string
  - name: Basic
    description: Basic SKU of Api Management.
    types:
    - uid: string
  - name: Consumption
    description: Consumption SKU of Api Management.
    types:
    - uid: string
  - name: Isolated
    description: Isolated SKU of Api Management.
    types:
    - uid: string
- name: ApimIdentityType
  description: The type of identity used for the resource. The type 'SystemAssigned, UserAssigned' includes both an implicitly created identity and a set of user assigned identities. The type 'None' will remove any identities from the service.
  kind: enum
  properties:
  - name: SystemAssigned
    types:
    - uid: string
  - name: UserAssigned
    types:
    - uid: string
  - name: SystemAssigned, UserAssigned
    types:
    - uid: string
  - name: None
    types:
    - uid: string
- name: UserIdentityProperties
  kind: object
  properties:
  - name: principalId
    description: The principal id of user assigned identity.
    types:
    - uid: string
  - name: clientId
    description: The client id of user assigned identity.
    types:
    - uid: string
- name: createdByType
  description: The type of identity that created the resource.
  kind: enum
  properties:
  - name: User
    types:
    - uid: string
  - name: Application
    types:
    - uid: string
  - name: ManagedIdentity
    types:
    - uid: string
  - name: Key
    types:
    - uid: string
- name: HostnameType
  description: Hostname type.
  kind: enum
  properties:
  - name: Proxy
    types:
    - uid: string
  - name: Portal
    types:
    - uid: string
  - name: Management
    types:
    - uid: string
  - name: Scm
    types:
    - uid: string
  - name: DeveloperPortal
    types:
    - uid: string
- name: CertificateInformation
  description: SSL certificate information.
  kind: object
  properties:
  - name: expiry
    description: 'Expiration date of the certificate. The date conforms to the following format: `yyyy-MM-ddTHH:mm:ssZ` as specified by the ISO 8601 standard.'
    types:
    - uid: string
  - name: thumbprint
    description: Thumbprint of the certificate.
    types:
    - uid: string
  - name: subject
    description: Subject of the certificate.
    types:
    - uid: string
- name: CertificateSource
  description: Certificate Source.
  kind: enum
  properties:
  - name: Managed
    types:
    - uid: string
  - name: KeyVault
    types:
    - uid: string
  - name: Custom
    types:
    - uid: string
  - name: BuiltIn
    types:
    - uid: string
- name: CertificateStatus
  description: Certificate Status.
  kind: enum
  properties:
  - name: Completed
    types:
    - uid: string
  - name: Failed
    types:
    - uid: string
  - name: InProgress
    types:
    - uid: string
- name: PlatformVersion
  description: Compute Platform Version running the service.
  kind: enum
  properties:
  - name: undetermined
    description: Platform version cannot be determined, as compute platform is not deployed.
    types:
    - uid: string
  - name: stv1
    description: Platform running the service on Single Tenant V1 platform.
    types:
    - uid: string
  - name: stv2
    description: Platform running the service on Single Tenant V2 platform.
    types:
    - uid: string
  - name: mtv1
    description: Platform running the service on Multi Tenant V1 platform.
    types:
    - uid: string
- name: ArmIdWrapper
  description: A wrapper for an ARM resource id
  kind: object
  properties:
  - name: id
    isReadyOnly: true
    description: ''
    types:
    - uid: string
- name: PrivateLinkServiceConnectionState
  description: A collection of information about the state of the connection between service consumer and provider.
  kind: object
  properties:
  - name: status
    description: Indicates whether the connection has been Approved/Rejected/Removed by the owner of the service.
    types:
    - uid: PrivateEndpointServiceConnectionStatus
  - name: description
    description: The reason for approval/rejection of the connection.
    types:
    - uid: string
  - name: actionsRequired
    description: A message indicating if changes on the service provider require any updates on the consumer.
    types:
    - uid: string
- name: PublicNetworkAccess
  description: Whether or not public endpoint access is allowed for this API Management service.  Value is optional but if passed in, must be 'Enabled' or 'Disabled'. If 'Disabled', private endpoints are the exclusive access method. Default value is 'Enabled'
  kind: enum
  properties:
  - name: Enabled
    types:
    - uid: string
  - name: Disabled
    types:
    - uid: string
- name: VirtualNetworkType
  description: The type of VPN in which API Management service needs to be configured in. None (Default Value) means the API Management service is not part of any Virtual Network, External means the API Management deployment is set up inside a Virtual Network having an Internet Facing Endpoint, and Internal means that API Management deployment is setup inside a Virtual Network having an Intranet Facing Endpoint only.
  kind: enum
  properties:
  - name: None
    description: The service is not part of any Virtual Network.
    types:
    - uid: string
  - name: External
    description: The service is part of Virtual Network and it is accessible from Internet.
    types:
    - uid: string
  - name: Internal
    description: The service is part of Virtual Network and it is only accessible from within the virtual network.
    types:
    - uid: string
- name: ErrorFieldContract
  description: Error Field contract.
  kind: object
  properties:
  - name: code
    description: Property level error code.
    types:
    - uid: string
  - name: message
    description: Human-readable representation of property-level error.
    types:
    - uid: string
  - name: target
    description: Property name.
    types:
    - uid: string
- name: PrivateEndpointServiceConnectionStatus
  description: The private endpoint connection status.
  kind: enum
  properties:
  - name: Pending
    types:
    - uid: string
  - name: Approved
    types:
    - uid: string
  - name: Rejected
    types:
    - uid: string
examples:
- name: ApiManagementCreateService
  request:
    uri: PUT https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1?api-version=2021-12-01-preview
    body: >-
      {
        "properties": {
          "publisherEmail": "foo@contoso.com",
          "publisherName": "foo"
        },
        "sku": {
          "name": "Developer",
          "capacity": 1
        },
        "location": "South Central US",
        "tags": {
          "Name": "Contoso",
          "Test": "User"
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1?api-version=2021-12-01-preview

      {
        "properties": {
          "publisherEmail": "foo@contoso.com",
          "publisherName": "foo"
        },
        "sku": {
          "name": "Developer",
          "capacity": 1
        },
        "location": "South Central US",
        "tags": {
          "Name": "Contoso",
          "Test": "User"
        }
      }

      ```

  responses:
  - statusCode: "201"
    headers:
    - name: location
      value: https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/operationresults/dGVjaGVkX01hbmFnZVJvbGVfNWRiNGI3Ng==?api-version=2021-12-01-preview
    body: >-
      {
        "id": "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1",
        "name": "apimService1",
        "type": "Microsoft.ApiManagement/service",
        "tags": {
          "Name": "Contoso",
          "Test": "User"
        },
        "location": "South Central US",
        "etag": "AAAAAAAp3P0=",
        "properties": {
          "publisherEmail": "foo@contoso.com",
          "publisherName": "foo",
          "notificationSenderEmail": "apimgmt-noreply@mail.windowsazure.com",
          "provisioningState": "Created",
          "targetProvisioningState": "Activating",
          "createdAtUtc": "2019-12-18T06:10:56.0327105Z",
          "hostnameConfigurations": [
            {
              "type": "Proxy",
              "hostName": "apimService1.azure-api.net",
              "negotiateClientCertificate": false,
              "defaultSslBinding": true
            }
          ],
          "virtualNetworkType": "None",
          "disableGateway": false,
          "apiVersionConstraint": {}
        },
        "sku": {
          "name": "Developer",
          "capacity": 1
        },
        "systemData": {
          "createdBy": "string",
          "createdByType": "Application",
          "createdAt": "2020-02-01T01:01:01.1075056Z",
          "lastModifiedBy": "string",
          "lastModifiedByType": "Application",
          "lastModifiedAt": "2020-02-02T02:03:01.1974346Z"
        }
      }
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1",
        "name": "apimService1",
        "type": "Microsoft.ApiManagement/service",
        "tags": {
          "Name": "Contoso",
          "Test": "User"
        },
        "location": "South Central US",
        "etag": "AAAAAAAp3T4=",
        "properties": {
          "publisherEmail": "foo@contoso.com",
          "publisherName": "foo",
          "notificationSenderEmail": "apimgmt-noreply@mail.windowsazure.com",
          "provisioningState": "Succeeded",
          "targetProvisioningState": "",
          "createdAtUtc": "2019-12-18T06:10:56.0327105Z",
          "gatewayUrl": "https://apimService1.azure-api.net",
          "gatewayRegionalUrl": "https://apimService1-southcentralus-01.regional.azure-api.net",
          "portalUrl": "https://apimService1.portal.azure-api.net",
          "developerPortalUrl": "https://apimService1.developer.azure-api.net",
          "managementApiUrl": "https://apimService1.management.azure-api.net",
          "scmUrl": "https://apimService1.scm.azure-api.net",
          "hostnameConfigurations": [
            {
              "type": "Proxy",
              "hostName": "apimService1.azure-api.net",
              "negotiateClientCertificate": false,
              "defaultSslBinding": true,
              "certificateSource": "BuiltIn"
            }
          ],
          "publicIPAddresses": [
            "23.102.171.124"
          ],
          "customProperties": {
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Protocols.Tls10": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Protocols.Tls11": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Protocols.Ssl30": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Ciphers.TripleDes168": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Backend.Protocols.Tls10": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Backend.Protocols.Tls11": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Backend.Protocols.Ssl30": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Protocols.Server.Http2": "False"
          },
          "virtualNetworkType": "None",
          "disableGateway": false,
          "apiVersionConstraint": {}
        },
        "sku": {
          "name": "Developer",
          "capacity": 1
        },
        "systemData": {
          "createdBy": "string",
          "createdByType": "Application",
          "createdAt": "2020-02-01T01:01:01.1075056Z",
          "lastModifiedBy": "string",
          "lastModifiedByType": "Application",
          "lastModifiedAt": "2020-02-02T02:03:01.1974346Z"
        }
      }
  - statusCode: "202"
    headers:
    - name: location
      value: https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/operationresults/c2RrdGVzdGFwaW0xNTkxX0FjdF9jZTkyMmNmOQ==?api-version=2021-12-01-preview
- name: ApiManagementCreateServiceInVnetWithPublicIP
  request:
    uri: PUT https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1?api-version=2021-12-01-preview
    body: >-
      {
        "properties": {
          "publisherEmail": "apim@autorestsdk.com",
          "publisherName": "autorestsdk",
          "virtualNetworkConfiguration": {
            "subnetResourceId": "/subscriptions/subid/resourceGroups/rgName/providers/Microsoft.Network/virtualNetworks/apimcus/subnets/tenant"
          },
          "publicIpAddressId": "/subscriptions/subid/resourceGroups/rgName/providers/Microsoft.Network/publicIPAddresses/apimazvnet",
          "virtualNetworkType": "External"
        },
        "sku": {
          "name": "Premium",
          "capacity": 2
        },
        "zones": [
          "1",
          "2"
        ],
        "location": "East US 2 EUAP",
        "tags": {
          "tag1": "value1",
          "tag2": "value2",
          "tag3": "value3"
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1?api-version=2021-12-01-preview

      {
        "properties": {
          "publisherEmail": "apim@autorestsdk.com",
          "publisherName": "autorestsdk",
          "virtualNetworkConfiguration": {
            "subnetResourceId": "/subscriptions/subid/resourceGroups/rgName/providers/Microsoft.Network/virtualNetworks/apimcus/subnets/tenant"
          },
          "publicIpAddressId": "/subscriptions/subid/resourceGroups/rgName/providers/Microsoft.Network/publicIPAddresses/apimazvnet",
          "virtualNetworkType": "External"
        },
        "sku": {
          "name": "Premium",
          "capacity": 2
        },
        "zones": [
          "1",
          "2"
        ],
        "location": "East US 2 EUAP",
        "tags": {
          "tag1": "value1",
          "tag2": "value2",
          "tag3": "value3"
        }
      }

      ```

  responses:
  - statusCode: "201"
    headers:
    - name: location
      value: https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/operationresults/dGVjaGVkX01hbmFnZVJvbGVfNWRiNGI3Ng==?api-version=2021-12-01-preview
    body: >-
      {
        "id": "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1",
        "name": "apimService1",
        "type": "Microsoft.ApiManagement/service",
        "tags": {
          "tag1": "value1",
          "tag2": "value2",
          "tag3": "value3"
        },
        "location": "East US 2 EUAP",
        "etag": "AAAAAAAiXto=",
        "properties": {
          "publisherEmail": "apim@autorestsdk.com",
          "publisherName": "autorestsdk",
          "notificationSenderEmail": "apimgmt-noreply@mail.windowsazure.com",
          "provisioningState": "Created",
          "targetProvisioningState": "Activating",
          "createdAtUtc": "2020-07-28T23:18:14.6562474Z",
          "hostnameConfigurations": [
            {
              "type": "Proxy",
              "hostName": "apimService1.azure-api.net",
              "negotiateClientCertificate": false,
              "defaultSslBinding": true,
              "certificateSource": "BuiltIn"
            }
          ],
          "publicIpAddressId": "/subscriptions/subid/resourceGroups/rgName/providers/Microsoft.Network/publicIPAddresses/apimazvnet",
          "virtualNetworkConfiguration": {
            "subnetResourceId": "/subscriptions/subid/resourceGroups/rgName/providers/Microsoft.Network/virtualNetworks/apimcus/subnets/tenant"
          },
          "virtualNetworkType": "External",
          "disableGateway": false,
          "platformVersion": "stv2"
        },
        "sku": {
          "name": "Premium",
          "capacity": 2
        },
        "zones": [
          "1",
          "2"
        ],
        "systemData": {
          "createdBy": "string",
          "createdByType": "Application",
          "createdAt": "2020-02-01T01:01:01.1075056Z",
          "lastModifiedBy": "string",
          "lastModifiedByType": "Application",
          "lastModifiedAt": "2020-02-02T02:03:01.1974346Z"
        }
      }
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/subid/resourceGroups/rgName/providers/Microsoft.ApiManagement/service/apimService1",
        "name": "apimService1",
        "type": "Microsoft.ApiManagement/service",
        "tags": {
          "tag1": "value1",
          "tag2": "value2",
          "tag3": "value3"
        },
        "location": "East US 2 EUAP",
        "etag": "AAAAAAAGTAs=",
        "properties": {
          "publisherEmail": "apim@autorestsdk.com",
          "publisherName": "autorestsdk",
          "notificationSenderEmail": "apimgmt-noreply@mail.windowsazure.com",
          "provisioningState": "Succeeded",
          "targetProvisioningState": "",
          "createdAtUtc": "2021-02-22T06:53:46.6409875Z",
          "gatewayUrl": "https://apimService1.azure-api.net",
          "gatewayRegionalUrl": "https://apimService1-eastus2euap-01.regional.azure-api.net",
          "portalUrl": "https://apimService1.portal.azure-api.net",
          "developerPortalUrl": "https://apimService1.developer.azure-api.net",
          "managementApiUrl": "https://apimService1.management.azure-api.net",
          "scmUrl": "https://apimService1.scm.azure-api.net",
          "hostnameConfigurations": [
            {
              "type": "Proxy",
              "hostName": "apimService1.azure-api.net",
              "negotiateClientCertificate": false,
              "defaultSslBinding": true
            }
          ],
          "publicIPAddresses": [
            "20.47.137.XXX"
          ],
          "publicIpAddressId": "/subscriptions/subid/resourceGroups/rgName/providers/Microsoft.Network/publicIPAddresses/apimazvnet",
          "virtualNetworkConfiguration": {
            "subnetResourceId": "/subscriptions/subid/resourceGroups/rgName/providers/Microsoft.Network/virtualNetworks/apimcus/subnets/tenant"
          },
          "customProperties": {
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Protocols.Tls10": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Protocols.Tls11": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Protocols.Ssl30": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Ciphers.TripleDes168": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Backend.Protocols.Tls10": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Backend.Protocols.Tls11": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Backend.Protocols.Ssl30": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Protocols.Server.Http2": "False"
          },
          "virtualNetworkType": "External",
          "disableGateway": false,
          "platformVersion": "stv2"
        },
        "sku": {
          "name": "Premium",
          "capacity": 2
        },
        "zones": [
          "1",
          "2"
        ],
        "systemData": {
          "createdBy": "string",
          "createdByType": "Application",
          "createdAt": "2020-02-01T01:01:01.1075056Z",
          "lastModifiedBy": "string",
          "lastModifiedByType": "Application",
          "lastModifiedAt": "2020-02-02T02:03:01.1974346Z"
        }
      }
  - statusCode: "202"
    headers:
    - name: location
      value: https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/operationresults/dGVjaGVkX01hbmFnZVJvbGVfNWRiNGI3Ng==?api-version=2021-12-01-preview
- name: ApiManagementCreateMultiRegionServiceWithCustomHostname
  request:
    uri: PUT https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1?api-version=2021-12-01-preview
    body: >-
      {
        "properties": {
          "hostnameConfigurations": [
            {
              "type": "Proxy",
              "hostName": "gateway1.msitesting.net",
              "encodedCertificate": "****** Base 64 Encoded Certificate ************",
              "certificatePassword": "Password",
              "defaultSslBinding": true
            },
            {
              "type": "Management",
              "hostName": "mgmt.msitesting.net",
              "encodedCertificate": "****** Base 64 Encoded Certificate ************",
              "certificatePassword": "Password"
            },
            {
              "type": "Portal",
              "hostName": "portal1.msitesting.net",
              "encodedCertificate": "****** Base 64 Encoded Certificate ************",
              "certificatePassword": "Password"
            }
          ],
          "publisherEmail": "apim@autorestsdk.com",
          "publisherName": "autorestsdk",
          "additionalLocations": [
            {
              "location": "East US",
              "sku": {
                "name": "Premium",
                "capacity": 1
              },
              "disableGateway": true
            }
          ],
          "virtualNetworkType": "None",
          "apiVersionConstraint": {
            "minApiVersion": "2019-01-01"
          }
        },
        "sku": {
          "name": "Premium",
          "capacity": 1
        },
        "location": "West US",
        "tags": {
          "tag1": "value1",
          "tag2": "value2",
          "tag3": "value3"
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1?api-version=2021-12-01-preview

      {
        "properties": {
          "hostnameConfigurations": [
            {
              "type": "Proxy",
              "hostName": "gateway1.msitesting.net",
              "encodedCertificate": "****** Base 64 Encoded Certificate ************",
              "certificatePassword": "Password",
              "defaultSslBinding": true
            },
            {
              "type": "Management",
              "hostName": "mgmt.msitesting.net",
              "encodedCertificate": "****** Base 64 Encoded Certificate ************",
              "certificatePassword": "Password"
            },
            {
              "type": "Portal",
              "hostName": "portal1.msitesting.net",
              "encodedCertificate": "****** Base 64 Encoded Certificate ************",
              "certificatePassword": "Password"
            }
          ],
          "publisherEmail": "apim@autorestsdk.com",
          "publisherName": "autorestsdk",
          "additionalLocations": [
            {
              "location": "East US",
              "sku": {
                "name": "Premium",
                "capacity": 1
              },
              "disableGateway": true
            }
          ],
          "virtualNetworkType": "None",
          "apiVersionConstraint": {
            "minApiVersion": "2019-01-01"
          }
        },
        "sku": {
          "name": "Premium",
          "capacity": 1
        },
        "location": "West US",
        "tags": {
          "tag1": "value1",
          "tag2": "value2",
          "tag3": "value3"
        }
      }

      ```

  responses:
  - statusCode: "201"
    headers:
    - name: location
      value: https://management.azure.com/subscriptions/subid/resourcegroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/operationresults/bXVsdGlob3N0bmFtZW11bHRpcmVnaW9uc2VydmljZV9BY3RfZjFiOTZhMjc=?api-version=2021-12-01-preview
    body: >-
      {
        "id": "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1",
        "name": "apimService1",
        "type": "Microsoft.ApiManagement/service",
        "tags": {
          "tag1": "value1",
          "tag2": "value2",
          "tag3": "value3"
        },
        "location": "West US",
        "etag": "AAAAAAACXoo=",
        "properties": {
          "publisherEmail": "apim@autorestsdk.com",
          "publisherName": "autorestsdk",
          "notificationSenderEmail": "apimgmt-noreply@mail.windowsazure.com",
          "provisioningState": "Created",
          "targetProvisioningState": "Activating",
          "createdAtUtc": "2019-12-18T08:04:26.9492661Z",
          "hostnameConfigurations": [
            {
              "type": "Proxy",
              "hostName": "apimService1.azure-api.net",
              "negotiateClientCertificate": false,
              "defaultSslBinding": false
            },
            {
              "type": "Proxy",
              "hostName": "gateway1.msitesting.net",
              "negotiateClientCertificate": false,
              "certificate": {
                "expiry": "2036-01-01T07:00:00+00:00",
                "thumbprint": "8E989XXXXXXXXXXXXXXXXF1D174FDB3A2",
                "subject": "CN=*.msitesting.net"
              },
              "defaultSslBinding": true
            },
            {
              "type": "Management",
              "hostName": "mgmt.msitesting.net",
              "negotiateClientCertificate": false,
              "certificate": {
                "expiry": "2036-01-01T07:00:00+00:00",
                "thumbprint": "8E989XXXXXXXXXXXXXXXXF1D174FDB3A2",
                "subject": "CN=*.msitesting.net"
              },
              "defaultSslBinding": false
            },
            {
              "type": "Portal",
              "hostName": "portal1.msitesting.net",
              "negotiateClientCertificate": false,
              "certificate": {
                "expiry": "2036-01-01T07:00:00+00:00",
                "thumbprint": "8E989XXXXXXXXXXXXXXXXF1D174FDB3A2",
                "subject": "CN=*.msitesting.net"
              },
              "defaultSslBinding": false
            }
          ],
          "additionalLocations": [
            {
              "location": "East US",
              "sku": {
                "name": "Premium",
                "capacity": 1
              },
              "disableGateway": true
            }
          ],
          "virtualNetworkType": "None",
          "disableGateway": false,
          "apiVersionConstraint": {
            "minApiVersion": "2019-01-01"
          }
        },
        "sku": {
          "name": "Premium",
          "capacity": 1
        }
      }
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1",
        "name": "apimService1",
        "type": "Microsoft.ApiManagement/service",
        "tags": {
          "tag1": "value1",
          "tag2": "value2",
          "tag3": "value3"
        },
        "location": "West US",
        "etag": "AAAAAAACXok=",
        "properties": {
          "publisherEmail": "apim@autorestsdk.com",
          "publisherName": "autorestsdk",
          "notificationSenderEmail": "apimgmt-noreply@mail.windowsazure.com",
          "provisioningState": "Succeeded",
          "targetProvisioningState": "",
          "createdAtUtc": "2019-12-18T06:26:20.3348609Z",
          "gatewayUrl": "https://apimService1.azure-api.net",
          "gatewayRegionalUrl": "https://apimService1-westus-01.regional.azure-api.net",
          "portalUrl": "https://apimService1.portal.azure-api.net",
          "developerPortalUrl": "https://apimService1.developer.azure-api.net",
          "managementApiUrl": "https://apimService1.management.azure-api.net",
          "scmUrl": "https://apimService1.scm.azure-api.net",
          "hostnameConfigurations": [
            {
              "type": "Proxy",
              "hostName": "apimService1.azure-api.net",
              "negotiateClientCertificate": false,
              "defaultSslBinding": false
            },
            {
              "type": "Proxy",
              "hostName": "gateway1.msitesting.net",
              "negotiateClientCertificate": false,
              "certificate": {
                "expiry": "2036-01-01T07:00:00+00:00",
                "thumbprint": "8E989XXXXXXXXXXXXXXXXF1D174FDB3A2",
                "subject": "CN=*.msitesting.net"
              },
              "defaultSslBinding": true
            },
            {
              "type": "Management",
              "hostName": "mgmt.msitesting.net",
              "negotiateClientCertificate": false,
              "certificate": {
                "expiry": "2036-01-01T07:00:00+00:00",
                "thumbprint": "8E989XXXXXXXXXXXXXXXXF1D174FDB3A2",
                "subject": "CN=*.msitesting.net"
              },
              "defaultSslBinding": false
            },
            {
              "type": "Portal",
              "hostName": "portal1.msitesting.net",
              "negotiateClientCertificate": false,
              "certificate": {
                "expiry": "2036-01-01T07:00:00+00:00",
                "thumbprint": "8E989XXXXXXXXXXXXXXXXF1D174FDB3A2",
                "subject": "CN=*.msitesting.net"
              },
              "defaultSslBinding": false
            }
          ],
          "publicIPAddresses": [
            "13.91.32.113"
          ],
          "additionalLocations": [
            {
              "location": "East US",
              "sku": {
                "name": "Premium",
                "capacity": 1
              },
              "publicIPAddresses": [
                "23.101.138.153"
              ],
              "gatewayRegionalUrl": "https://apimService1-eastus-01.regional.azure-api.net",
              "disableGateway": true
            }
          ],
          "customProperties": {
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Protocols.Tls10": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Protocols.Tls11": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Protocols.Ssl30": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Ciphers.TripleDes168": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Backend.Protocols.Tls10": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Backend.Protocols.Tls11": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Backend.Protocols.Ssl30": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Protocols.Server.Http2": "False"
          },
          "virtualNetworkType": "None",
          "disableGateway": false,
          "apiVersionConstraint": {
            "minApiVersion": "2019-01-01"
          }
        },
        "sku": {
          "name": "Premium",
          "capacity": 1
        }
      }
  - statusCode: "202"
    headers:
    - name: location
      value: https://management.azure.com/subscriptions/subid/resourcegroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/operationresults/bXVsdGlob3N0bmFtZW11bHRpcmVnaW9uc2VydmljZV9BY3RfZjFiOTZhMjc=?api-version=2021-12-01-preview
- name: ApiManagementCreateServiceHavingMsi
  request:
    uri: PUT https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1?api-version=2021-12-01-preview
    body: >-
      {
        "properties": {
          "publisherEmail": "apim@autorestsdk.com",
          "publisherName": "autorestsdk"
        },
        "sku": {
          "name": "Consumption",
          "capacity": 0
        },
        "identity": {
          "type": "SystemAssigned"
        },
        "location": "West US",
        "tags": {
          "tag1": "value1",
          "tag2": "value2",
          "tag3": "value3"
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1?api-version=2021-12-01-preview

      {
        "properties": {
          "publisherEmail": "apim@autorestsdk.com",
          "publisherName": "autorestsdk"
        },
        "sku": {
          "name": "Consumption",
          "capacity": 0
        },
        "identity": {
          "type": "SystemAssigned"
        },
        "location": "West US",
        "tags": {
          "tag1": "value1",
          "tag2": "value2",
          "tag3": "value3"
        }
      }

      ```

  responses:
  - statusCode: "201"
    headers:
    - name: location
      value: https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/operationresults/dGVjaGVkX01hbmFnZVJvbGVfNWRiNGI3Ng==?api-version=2021-12-01-preview
    body: >-
      {
        "id": "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1",
        "name": "apimService1",
        "type": "Microsoft.ApiManagement/service",
        "tags": {
          "tag1": "value1",
          "tag2": "value2",
          "tag3": "value3"
        },
        "location": "West US",
        "etag": "AAAAAAAAWiE=",
        "properties": {
          "publisherEmail": "apim@autorestsdk.com",
          "publisherName": "autorestsdk",
          "notificationSenderEmail": "apimgmt-noreply@mail.windowsazure.com",
          "provisioningState": "Created",
          "targetProvisioningState": "Activating",
          "createdAtUtc": "2019-04-11T16:29:29.9711098Z",
          "hostnameConfigurations": [
            {
              "type": "Proxy",
              "hostName": "apimService1.azure-api.net",
              "negotiateClientCertificate": false,
              "defaultSslBinding": true
            }
          ],
          "virtualNetworkType": "None"
        },
        "sku": {
          "name": "Consumption",
          "capacity": 0
        },
        "identity": {
          "type": "SystemAssigned",
          "principalId": "dfb9a757-df69-4966-a8d0-711a9cd8ffb4",
          "tenantId": "00000000-86f1-41af-91ab-2d7cd011db47"
        },
        "systemData": {
          "createdBy": "string",
          "createdByType": "Application",
          "createdAt": "2020-02-01T01:01:01.1075056Z",
          "lastModifiedBy": "string",
          "lastModifiedByType": "Application",
          "lastModifiedAt": "2020-02-02T02:03:01.1974346Z"
        }
      }
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1",
        "name": "apimService1",
        "type": "Microsoft.ApiManagement/service",
        "tags": {
          "tag1": "value1",
          "tag2": "value2",
          "tag3": "value3"
        },
        "location": "West US",
        "etag": "AAAAAAAAWiU=",
        "properties": {
          "publisherEmail": "apim@autorestsdk.com",
          "publisherName": "autorestsdk",
          "notificationSenderEmail": "apimgmt-noreply@mail.windowsazure.com",
          "provisioningState": "Succeeded",
          "targetProvisioningState": "",
          "createdAtUtc": "2019-04-11T16:29:29.9711098Z",
          "gatewayUrl": "https://apimService1.azure-api.net",
          "hostnameConfigurations": [
            {
              "type": "Proxy",
              "hostName": "apimService1.azure-api.net",
              "negotiateClientCertificate": false,
              "defaultSslBinding": true,
              "certificateSource": "BuiltIn"
            }
          ],
          "virtualNetworkType": "None",
          "enableClientCertificate": false,
          "platformVersion": "mtv1"
        },
        "sku": {
          "name": "Consumption",
          "capacity": 0
        },
        "identity": {
          "type": "SystemAssigned",
          "principalId": "dfb9a757-df69-4966-a8d0-711a9cd8ffb4",
          "tenantId": "00000000-86f1-41af-91ab-2d7cd011db47"
        },
        "systemData": {
          "createdBy": "string",
          "createdByType": "Application",
          "createdAt": "2020-02-01T01:01:01.1075056Z",
          "lastModifiedBy": "string",
          "lastModifiedByType": "Application",
          "lastModifiedAt": "2020-02-02T02:03:01.1974346Z"
        }
      }
  - statusCode: "202"
    headers:
    - name: location
      value: https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/operationresults/dGVjaGVkX01hbmFnZVJvbGVfNWRiNGI3Ng==?api-version=2021-12-01-preview
- name: ApiManagementCreateServiceWithSystemCertificates
  request:
    uri: PUT https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1?api-version=2021-12-01-preview
    body: >-
      {
        "properties": {
          "certificates": [
            {
              "encodedCertificate": "*******Base64 encoded Certificate******************",
              "certificatePassword": "Password",
              "storeName": "CertificateAuthority"
            }
          ],
          "publisherEmail": "apim@autorestsdk.com",
          "publisherName": "autorestsdk"
        },
        "sku": {
          "name": "Basic",
          "capacity": 1
        },
        "location": "Central US",
        "tags": {
          "tag1": "value1",
          "tag2": "value2",
          "tag3": "value3"
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1?api-version=2021-12-01-preview

      {
        "properties": {
          "certificates": [
            {
              "encodedCertificate": "*******Base64 encoded Certificate******************",
              "certificatePassword": "Password",
              "storeName": "CertificateAuthority"
            }
          ],
          "publisherEmail": "apim@autorestsdk.com",
          "publisherName": "autorestsdk"
        },
        "sku": {
          "name": "Basic",
          "capacity": 1
        },
        "location": "Central US",
        "tags": {
          "tag1": "value1",
          "tag2": "value2",
          "tag3": "value3"
        }
      }

      ```

  responses:
  - statusCode: "201"
    headers:
    - name: location
      value: https://management.azure.com/subscriptions/subid/resourcegroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/operationresults/bXVsdGlob3N0bmFtZW11bHRpcmVnaW9uc2VydmljZV9BY3RfZjFiOTZhMjc=?api-version=2021-12-01-preview
    body: >-
      {
        "id": "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1",
        "name": "apimService1",
        "type": "Microsoft.ApiManagement/service",
        "tags": {
          "tag1": "value1",
          "tag2": "value2",
          "tag3": "value3"
        },
        "location": "Central US",
        "etag": "AAAAAAAp3TM=",
        "properties": {
          "publisherEmail": "apim@autorestsdk.com",
          "publisherName": "autorestsdk",
          "notificationSenderEmail": "apimgmt-noreply@mail.windowsazure.com",
          "provisioningState": "Created",
          "targetProvisioningState": "Activating",
          "createdAtUtc": "2019-12-18T06:33:28.0906918Z",
          "hostnameConfigurations": [
            {
              "type": "Proxy",
              "hostName": "apimService1.azure-api.net",
              "negotiateClientCertificate": false,
              "defaultSslBinding": true
            }
          ],
          "virtualNetworkType": "None",
          "certificates": [
            {
              "storeName": "CertificateAuthority",
              "certificate": {
                "expiry": "2036-01-01T07:00:00+00:00",
                "thumbprint": "8E989652CABCF585ACBFCB9C2C91F1D174FDB3A2",
                "subject": "CN=*.msitesting.net"
              }
            }
          ],
          "disableGateway": false,
          "platformVersion": "stv2",
          "apiVersionConstraint": {}
        },
        "sku": {
          "name": "Basic",
          "capacity": 1
        },
        "systemData": {
          "createdBy": "string",
          "createdByType": "Application",
          "createdAt": "2020-02-01T01:01:01.1075056Z",
          "lastModifiedBy": "string",
          "lastModifiedByType": "Application",
          "lastModifiedAt": "2020-02-02T02:03:01.1974346Z"
        }
      }
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1",
        "name": "apimService1",
        "type": "Microsoft.ApiManagement/service",
        "tags": {
          "tag1": "value1",
          "tag2": "value2",
          "tag3": "value3"
        },
        "location": "Central US",
        "etag": "AAAAAAAp3UM=",
        "properties": {
          "publisherEmail": "apim@autorestsdk.com",
          "publisherName": "autorestsdk",
          "notificationSenderEmail": "apimgmt-noreply@mail.windowsazure.com",
          "provisioningState": "Succeeded",
          "targetProvisioningState": "",
          "createdAtUtc": "2019-12-18T06:33:28.0906918Z",
          "gatewayUrl": "https://apimService1.azure-api.net",
          "gatewayRegionalUrl": "https://apimService1-centralus-01.regional.azure-api.net",
          "portalUrl": "https://apimService1.portal.azure-api.net",
          "developerPortalUrl": "https://apimService1.developer.azure-api.net",
          "managementApiUrl": "https://apimService1.management.azure-api.net",
          "scmUrl": "https://apimService1.scm.azure-api.net",
          "hostnameConfigurations": [
            {
              "type": "Proxy",
              "hostName": "apimService1.azure-api.net",
              "negotiateClientCertificate": false,
              "defaultSslBinding": true,
              "certificateSource": "BuiltIn"
            }
          ],
          "publicIPAddresses": [
            "40.113.223.117"
          ],
          "customProperties": {
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Protocols.Tls10": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Protocols.Tls11": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Protocols.Ssl30": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Ciphers.TripleDes168": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Backend.Protocols.Tls10": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Backend.Protocols.Tls11": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Backend.Protocols.Ssl30": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Protocols.Server.Http2": "False"
          },
          "virtualNetworkType": "None",
          "certificates": [
            {
              "storeName": "CertificateAuthority",
              "certificate": {
                "expiry": "2036-01-01T07:00:00+00:00",
                "thumbprint": "8E989652CABCF585ACBFCB9C2C91F1D174FDB3A2",
                "subject": "CN=*.msitesting.net"
              }
            }
          ],
          "disableGateway": false,
          "platformVersion": "stv2",
          "apiVersionConstraint": {}
        },
        "sku": {
          "name": "Basic",
          "capacity": 1
        },
        "systemData": {
          "createdBy": "string",
          "createdByType": "Application",
          "createdAt": "2020-02-01T01:01:01.1075056Z",
          "lastModifiedBy": "string",
          "lastModifiedByType": "Application",
          "lastModifiedAt": "2020-02-02T02:03:01.1974346Z"
        }
      }
  - statusCode: "202"
    headers:
    - name: location
      value: https://management.azure.com/subscriptions/subid/resourcegroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/operationresults/bXVsdGlob3N0bmFtZW11bHRpcmVnaW9uc2VydmljZV9BY3RfZjFiOTZhMjc=?api-version=2021-12-01-preview
- name: ApiManagementCreateServiceWithUserAssignedIdentity
  request:
    uri: PUT https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1?api-version=2021-12-01-preview
    body: >-
      {
        "properties": {
          "publisherEmail": "apim@autorestsdk.com",
          "publisherName": "autorestsdk"
        },
        "sku": {
          "name": "Consumption",
          "capacity": 0
        },
        "identity": {
          "type": "UserAssigned",
          "userAssignedIdentities": {
            "/subscriptions/subid/resourcegroups/rg1/providers/Microsoft.ManagedIdentity/userAssignedIdentities/apimService1": {}
          }
        },
        "location": "West US",
        "tags": {
          "tag1": "value1",
          "tag2": "value2",
          "tag3": "value3"
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1?api-version=2021-12-01-preview

      {
        "properties": {
          "publisherEmail": "apim@autorestsdk.com",
          "publisherName": "autorestsdk"
        },
        "sku": {
          "name": "Consumption",
          "capacity": 0
        },
        "identity": {
          "type": "UserAssigned",
          "userAssignedIdentities": {
            "/subscriptions/subid/resourcegroups/rg1/providers/Microsoft.ManagedIdentity/userAssignedIdentities/apimService1": {}
          }
        },
        "location": "West US",
        "tags": {
          "tag1": "value1",
          "tag2": "value2",
          "tag3": "value3"
        }
      }

      ```

  responses:
  - statusCode: "201"
    headers:
    - name: location
      value: https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/operationresults/dGVjaGVkX01hbmFnZVJvbGVfNWRiNGI3Ng==?api-version=2021-12-01-preview
    body: >-
      {
        "id": "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1",
        "name": "apimService1",
        "type": "Microsoft.ApiManagement/service",
        "tags": {
          "tag1": "value1",
          "tag2": "value2",
          "tag3": "value3"
        },
        "location": "West US",
        "etag": "AAAAAAAFzyQ=",
        "properties": {
          "publisherEmail": "apim@autorestsdk.com",
          "publisherName": "autorestsdk",
          "notificationSenderEmail": "apimgmt-noreply@mail.windowsazure.com",
          "provisioningState": "Created",
          "targetProvisioningState": "Activating",
          "createdAtUtc": "2020-03-12T01:05:33.4573398Z",
          "hostnameConfigurations": [
            {
              "type": "Proxy",
              "hostName": "apimService1.azure-api.net",
              "negotiateClientCertificate": false,
              "defaultSslBinding": true,
              "certificateSource": "BuiltIn"
            }
          ],
          "virtualNetworkType": "None",
          "platformVersion": "mtv1"
        },
        "sku": {
          "name": "Consumption",
          "capacity": 0
        },
        "identity": {
          "type": "UserAssigned",
          "userAssignedIdentities": {
            "/subscriptions/subid/resourcegroups/rg1/providers/Microsoft.ManagedIdentity/userAssignedIdentities/apimService1": {}
          }
        },
        "systemData": {
          "createdBy": "string",
          "createdByType": "Application",
          "createdAt": "2020-02-01T01:01:01.1075056Z",
          "lastModifiedBy": "string",
          "lastModifiedByType": "Application",
          "lastModifiedAt": "2020-02-02T02:03:01.1974346Z"
        }
      }
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1",
        "name": "apimService1",
        "type": "Microsoft.ApiManagement/service",
        "tags": {
          "tag1": "value1",
          "tag2": "value2",
          "tag3": "value3"
        },
        "location": "West US",
        "etag": "AAAAAAAFzyk=",
        "properties": {
          "publisherEmail": "apim@autorestsdk.com",
          "publisherName": "autorestsdk",
          "notificationSenderEmail": "apimgmt-noreply@mail.windowsazure.com",
          "provisioningState": "Succeeded",
          "targetProvisioningState": "",
          "createdAtUtc": "2020-03-12T01:05:33.4573398Z",
          "gatewayUrl": "https://apimService1.azure-api.net",
          "hostnameConfigurations": [
            {
              "type": "Proxy",
              "hostName": "apimService1.azure-api.net",
              "negotiateClientCertificate": false,
              "defaultSslBinding": true,
              "certificateSource": "BuiltIn"
            }
          ],
          "customProperties": {
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Protocols.Tls10": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Protocols.Tls11": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Backend.Protocols.Tls10": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Backend.Protocols.Tls11": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Backend.Protocols.Ssl30": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Protocols.Server.Http2": "False"
          },
          "virtualNetworkType": "None",
          "disableGateway": false,
          "platformVersion": "mtv1"
        },
        "sku": {
          "name": "Consumption",
          "capacity": 0
        },
        "identity": {
          "type": "UserAssigned",
          "tenantId": "00000000-86f1-41af-0000-2d7cd011db47",
          "userAssignedIdentities": {
            "/subscriptions/subid/resourcegroups/rg1/providers/Microsoft.ManagedIdentity/userAssignedIdentities/apimService1": {
              "principalId": "00000000-6e62-4649-9f54-a119fc1ba85e",
              "clientId": "5a2c6b8e-0905-0000-a772-993c9418137f"
            }
          }
        },
        "systemData": {
          "createdBy": "string",
          "createdByType": "Application",
          "createdAt": "2020-02-01T01:01:01.1075056Z",
          "lastModifiedBy": "string",
          "lastModifiedByType": "Application",
          "lastModifiedAt": "2020-02-02T02:03:01.1974346Z"
        }
      }
  - statusCode: "202"
    headers:
    - name: location
      value: https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/operationresults/dGVjaGVkX01hbmFnZVJvbGVfNWRiNGI3Ng==?api-version=2021-12-01-preview
- name: ApiManagementCreateServiceInZones
  request:
    uri: PUT https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1?api-version=2021-12-01-preview
    body: >-
      {
        "properties": {
          "publisherEmail": "apim@autorestsdk.com",
          "publisherName": "autorestsdk"
        },
        "sku": {
          "name": "Premium",
          "capacity": 2
        },
        "zones": [
          "1",
          "2"
        ],
        "location": "North europe",
        "tags": {
          "tag1": "value1",
          "tag2": "value2",
          "tag3": "value3"
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1?api-version=2021-12-01-preview

      {
        "properties": {
          "publisherEmail": "apim@autorestsdk.com",
          "publisherName": "autorestsdk"
        },
        "sku": {
          "name": "Premium",
          "capacity": 2
        },
        "zones": [
          "1",
          "2"
        ],
        "location": "North europe",
        "tags": {
          "tag1": "value1",
          "tag2": "value2",
          "tag3": "value3"
        }
      }

      ```

  responses:
  - statusCode: "201"
    headers:
    - name: location
      value: https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/operationresults/dGVjaGVkX01hbmFnZVJvbGVfNWRiNGI3Ng==?api-version=2021-12-01-preview
    body: >-
      {
        "id": "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1",
        "name": "apimService1",
        "type": "Microsoft.ApiManagement/service",
        "tags": {
          "tag1": "value1",
          "tag2": "value2",
          "tag3": "value3"
        },
        "location": "North Europe",
        "etag": "AAAAAAAiXto=",
        "properties": {
          "publisherEmail": "apim@autorestsdk.com",
          "publisherName": "autorestsdk",
          "notificationSenderEmail": "apimgmt-noreply@mail.windowsazure.com",
          "provisioningState": "Created",
          "targetProvisioningState": "Activating",
          "createdAtUtc": "2020-07-28T23:18:14.6562474Z",
          "hostnameConfigurations": [
            {
              "type": "Proxy",
              "hostName": "apimService1.azure-api.net",
              "negotiateClientCertificate": false,
              "defaultSslBinding": true,
              "certificateSource": "BuiltIn"
            }
          ],
          "virtualNetworkType": "None",
          "disableGateway": false,
          "platformVersion": "stv2"
        },
        "sku": {
          "name": "Premium",
          "capacity": 2
        },
        "zones": [
          "1",
          "2"
        ],
        "systemData": {
          "createdBy": "string",
          "createdByType": "Application",
          "createdAt": "2020-02-01T01:01:01.1075056Z",
          "lastModifiedBy": "string",
          "lastModifiedByType": "Application",
          "lastModifiedAt": "2020-02-02T02:03:01.1974346Z"
        }
      }
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1",
        "name": "apimService1",
        "type": "Microsoft.ApiManagement/service",
        "tags": {
          "tag1": "value1",
          "tag2": "value2",
          "tag3": "value3"
        },
        "location": "North Europe",
        "etag": "AAAAAAAiXvE=",
        "properties": {
          "publisherEmail": "apim@autorestsdk.com",
          "publisherName": "autorestsdk",
          "notificationSenderEmail": "apimgmt-noreply@mail.windowsazure.com",
          "provisioningState": "Succeeded",
          "targetProvisioningState": "",
          "createdAtUtc": "2020-07-28T23:18:14.6562474Z",
          "gatewayUrl": "https://apimService1.azure-api.net",
          "gatewayRegionalUrl": "https://apimService1-northeurope-01.regional.azure-api.net",
          "portalUrl": "https://apimService1.portal.azure-api.net",
          "developerPortalUrl": "https://apimService1.developer.azure-api.net",
          "managementApiUrl": "https://apimService1.management.azure-api.net",
          "scmUrl": "https://apimService1.scm.azure-api.net",
          "hostnameConfigurations": [
            {
              "type": "Proxy",
              "hostName": "apimService1.azure-api.net",
              "negotiateClientCertificate": false,
              "defaultSslBinding": true
            }
          ],
          "publicIPAddresses": [
            "20.54.34.66"
          ],
          "customProperties": {
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Protocols.Tls10": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Protocols.Tls11": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Protocols.Ssl30": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Ciphers.TripleDes168": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Backend.Protocols.Tls10": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Backend.Protocols.Tls11": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Backend.Protocols.Ssl30": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Protocols.Server.Http2": "False"
          },
          "virtualNetworkType": "None",
          "disableGateway": false,
          "platformVersion": "stv2"
        },
        "sku": {
          "name": "Premium",
          "capacity": 2
        },
        "zones": [
          "1",
          "2"
        ],
        "systemData": {
          "createdBy": "string",
          "createdByType": "Application",
          "createdAt": "2020-02-01T01:01:01.1075056Z",
          "lastModifiedBy": "string",
          "lastModifiedByType": "Application",
          "lastModifiedAt": "2020-02-02T02:03:01.1974346Z"
        }
      }
  - statusCode: "202"
    headers:
    - name: location
      value: https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/operationresults/dGVjaGVkX01hbmFnZVJvbGVfNWRiNGI3Ng==?api-version=2021-12-01-preview
- name: ApiManagementUndelete
  request:
    uri: PUT https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1?api-version=2021-12-01-preview
    body: >-
      {
        "properties": {
          "publisherEmail": "foo@contoso.com",
          "publisherName": "foo",
          "restore": true
        },
        "sku": {
          "name": "Developer",
          "capacity": 1
        },
        "location": "South Central US"
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1?api-version=2021-12-01-preview

      {
        "properties": {
          "publisherEmail": "foo@contoso.com",
          "publisherName": "foo",
          "restore": true
        },
        "sku": {
          "name": "Developer",
          "capacity": 1
        },
        "location": "South Central US"
      }

      ```

  responses:
  - statusCode: "201"
    headers:
    - name: location
      value: https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/operationresults/dGVjaGVkX01hbmFnZVJvbGVfNWRiNGI3Ng==?api-version=2021-12-01-preview
    body: >-
      {
        "id": "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1",
        "name": "apimService1",
        "type": "Microsoft.ApiManagement/service",
        "location": "South Central US",
        "etag": "AAAAAAAp3P0=",
        "properties": {
          "publisherEmail": "foo@contoso.com",
          "publisherName": "foo",
          "notificationSenderEmail": "apimgmt-noreply@mail.windowsazure.com",
          "provisioningState": "Created",
          "targetProvisioningState": "Activating",
          "createdAtUtc": "2019-12-18T06:10:56.0327105Z",
          "hostnameConfigurations": [
            {
              "type": "Proxy",
              "hostName": "apimService1.azure-api.net",
              "negotiateClientCertificate": false,
              "defaultSslBinding": true
            }
          ],
          "virtualNetworkType": "None",
          "disableGateway": false,
          "apiVersionConstraint": {}
        },
        "sku": {
          "name": "Developer",
          "capacity": 1
        }
      }
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1",
        "name": "apimService1",
        "type": "Microsoft.ApiManagement/service",
        "location": "South Central US",
        "etag": "AAAAAAAp3T4=",
        "properties": {
          "publisherEmail": "foo@contoso.com",
          "publisherName": "foo",
          "notificationSenderEmail": "apimgmt-noreply@mail.windowsazure.com",
          "provisioningState": "Succeeded",
          "targetProvisioningState": "",
          "createdAtUtc": "2019-12-18T06:10:56.0327105Z",
          "gatewayUrl": "https://apimService1.azure-api.net",
          "gatewayRegionalUrl": "https://apimService1-southcentralus-01.regional.azure-api.net",
          "portalUrl": "https://apimService1.portal.azure-api.net",
          "developerPortalUrl": "https://apimService1.developer.azure-api.net",
          "managementApiUrl": "https://apimService1.management.azure-api.net",
          "scmUrl": "https://apimService1.scm.azure-api.net",
          "hostnameConfigurations": [
            {
              "type": "Proxy",
              "hostName": "apimService1.azure-api.net",
              "negotiateClientCertificate": false,
              "defaultSslBinding": true
            }
          ],
          "publicIPAddresses": [
            "23.102.171.124"
          ],
          "customProperties": {
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Protocols.Tls10": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Protocols.Tls11": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Protocols.Ssl30": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Ciphers.TripleDes168": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Backend.Protocols.Tls10": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Backend.Protocols.Tls11": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Backend.Protocols.Ssl30": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Protocols.Server.Http2": "False"
          },
          "virtualNetworkType": "None",
          "disableGateway": false,
          "apiVersionConstraint": {}
        },
        "sku": {
          "name": "Developer",
          "capacity": 1
        }
      }
  - statusCode: "202"
    headers:
    - name: location
      value: https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/operationresults/c2RrdGVzdGFwaW0xNTkxX0FjdF9jZTkyMmNmOQ==?api-version=2021-12-01-preview
- name: ApiManagementCreateServiceWithCustomHostnameKeyVault
  request:
    uri: PUT https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1?api-version=2021-12-01-preview
    body: >-
      {
        "properties": {
          "hostnameConfigurations": [
            {
              "type": "Proxy",
              "hostName": "gateway1.msitesting.net",
              "keyVaultId": "https://rpbvtkeyvaultintegration.vault.azure.net/secrets/msitestingCert",
              "identityClientId": "329419bc-adec-4dce-9568-25a6d486e468",
              "defaultSslBinding": true
            },
            {
              "type": "Management",
              "hostName": "mgmt.msitesting.net",
              "keyVaultId": "https://rpbvtkeyvaultintegration.vault.azure.net/secrets/msitestingCert",
              "identityClientId": "329419bc-adec-4dce-9568-25a6d486e468"
            },
            {
              "type": "Portal",
              "hostName": "portal1.msitesting.net",
              "keyVaultId": "https://rpbvtkeyvaultintegration.vault.azure.net/secrets/msitestingCert",
              "identityClientId": "329419bc-adec-4dce-9568-25a6d486e468"
            }
          ],
          "publisherEmail": "apim@autorestsdk.com",
          "publisherName": "autorestsdk",
          "virtualNetworkType": "None",
          "apiVersionConstraint": {
            "minApiVersion": "2019-01-01"
          }
        },
        "sku": {
          "name": "Premium",
          "capacity": 1
        },
        "identity": {
          "type": "UserAssigned",
          "userAssignedIdentities": {
            "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ManagedIdentity/userAssignedIdentities/id1": {}
          }
        },
        "location": "North Europe",
        "tags": {
          "tag1": "value1",
          "tag2": "value2",
          "tag3": "value3"
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1?api-version=2021-12-01-preview

      {
        "properties": {
          "hostnameConfigurations": [
            {
              "type": "Proxy",
              "hostName": "gateway1.msitesting.net",
              "keyVaultId": "https://rpbvtkeyvaultintegration.vault.azure.net/secrets/msitestingCert",
              "identityClientId": "329419bc-adec-4dce-9568-25a6d486e468",
              "defaultSslBinding": true
            },
            {
              "type": "Management",
              "hostName": "mgmt.msitesting.net",
              "keyVaultId": "https://rpbvtkeyvaultintegration.vault.azure.net/secrets/msitestingCert",
              "identityClientId": "329419bc-adec-4dce-9568-25a6d486e468"
            },
            {
              "type": "Portal",
              "hostName": "portal1.msitesting.net",
              "keyVaultId": "https://rpbvtkeyvaultintegration.vault.azure.net/secrets/msitestingCert",
              "identityClientId": "329419bc-adec-4dce-9568-25a6d486e468"
            }
          ],
          "publisherEmail": "apim@autorestsdk.com",
          "publisherName": "autorestsdk",
          "virtualNetworkType": "None",
          "apiVersionConstraint": {
            "minApiVersion": "2019-01-01"
          }
        },
        "sku": {
          "name": "Premium",
          "capacity": 1
        },
        "identity": {
          "type": "UserAssigned",
          "userAssignedIdentities": {
            "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ManagedIdentity/userAssignedIdentities/id1": {}
          }
        },
        "location": "North Europe",
        "tags": {
          "tag1": "value1",
          "tag2": "value2",
          "tag3": "value3"
        }
      }

      ```

  responses:
  - statusCode: "201"
    headers:
    - name: location
      value: https://management.azure.com/subscriptions/subid/resourcegroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/operationresults/bXVsdGlob3N0bmFtZW11bHRpcmVnaW9uc2VydmljZV9BY3RfZjFiOTZhMjc=?api-version=2021-12-01-preview
    body: >-
      {
        "id": "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1",
        "name": "apimService1",
        "type": "Microsoft.ApiManagement/service",
        "tags": {
          "tag1": "value1",
          "tag2": "value2",
          "tag3": "value3"
        },
        "location": "North Europe",
        "etag": "AAAAAAAigi8=",
        "properties": {
          "publisherEmail": "apim@autorestsdk.com",
          "publisherName": "autorestsdk",
          "notificationSenderEmail": "apimgmt-noreply@mail.windowsazure.com",
          "provisioningState": "Created",
          "targetProvisioningState": "Activating",
          "createdAtUtc": "2020-09-13T22:30:20.7759747Z",
          "hostnameConfigurations": [
            {
              "type": "Proxy",
              "hostName": "apimService1.azure-api.net",
              "negotiateClientCertificate": false,
              "defaultSslBinding": false,
              "certificateSource": "BuiltIn"
            },
            {
              "type": "Proxy",
              "hostName": "gateway1.msitesting.net",
              "keyVaultId": "https://rpbvtkeyvaultintegration.vault.azure.net/secrets/msitestingCert",
              "negotiateClientCertificate": false,
              "certificate": {
                "expiry": "2037-01-01T07:00:00+00:00",
                "thumbprint": "EA276907917CB5XXXXXXXXXXX690",
                "subject": "CN=*.msitesting.net"
              },
              "defaultSslBinding": true,
              "identityClientId": "329419bc-adec-4dce-9568-25a6d486e468",
              "certificateSource": "KeyVault"
            },
            {
              "type": "Management",
              "hostName": "mgmt.msitesting.net",
              "keyVaultId": "https://rpbvtkeyvaultintegration.vault.azure.net/secrets/msitestingCert",
              "negotiateClientCertificate": false,
              "certificate": {
                "expiry": "2037-01-01T07:00:00+00:00",
                "thumbprint": "EA276907917CB5XXXXXXXXXXX690",
                "subject": "CN=*.msitesting.net"
              },
              "defaultSslBinding": false,
              "identityClientId": "329419bc-adec-4dce-9568-25a6d486e468",
              "certificateSource": "KeyVault"
            },
            {
              "type": "Portal",
              "hostName": "portal1.msitesting.net",
              "keyVaultId": "https://rpbvtkeyvaultintegration.vault.azure.net/secrets/msitestingCert",
              "negotiateClientCertificate": false,
              "certificate": {
                "expiry": "2037-01-01T07:00:00+00:00",
                "thumbprint": "EA276907917CB5XXXXXXXXXXX690",
                "subject": "CN=*.msitesting.net"
              },
              "defaultSslBinding": false,
              "identityClientId": "329419bc-adec-4dce-9568-25a6d486e468",
              "certificateSource": "KeyVault"
            }
          ],
          "virtualNetworkType": "None",
          "disableGateway": false,
          "platformVersion": "stv2",
          "apiVersionConstraint": {
            "minApiVersion": "2019-01-01"
          }
        },
        "sku": {
          "name": "Premium",
          "capacity": 1
        },
        "identity": {
          "type": "UserAssigned",
          "userAssignedIdentities": {
            "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ManagedIdentity/userAssignedIdentities/id1": {}
          }
        },
        "systemData": {
          "createdBy": "string",
          "createdByType": "Application",
          "createdAt": "2020-02-01T01:01:01.1075056Z",
          "lastModifiedBy": "string",
          "lastModifiedByType": "Application",
          "lastModifiedAt": "2020-02-02T02:03:01.1974346Z"
        }
      }
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1",
        "name": "apimService1",
        "type": "Microsoft.ApiManagement/service",
        "tags": {
          "tag1": "value1",
          "tag2": "value2",
          "tag3": "value3"
        },
        "location": "North Europe",
        "etag": "AAAAAAAigjU=",
        "properties": {
          "publisherEmail": "apim@autorestsdk.com",
          "publisherName": "autorestsdk",
          "notificationSenderEmail": "apimgmt-noreply@mail.windowsazure.com",
          "provisioningState": "Succeeded",
          "targetProvisioningState": "",
          "createdAtUtc": "2020-09-13T22:30:20.7759747Z",
          "gatewayUrl": "https://apimService1.azure-api.net",
          "gatewayRegionalUrl": "https://apimService1-northeurope-01.regional.azure-api.net",
          "portalUrl": "https://apimService1.portal.azure-api.net",
          "developerPortalUrl": "https://apimService1.developer.azure-api.net",
          "managementApiUrl": "https://apimService1.management.azure-api.net",
          "scmUrl": "https://apimService1.scm.azure-api.net",
          "hostnameConfigurations": [
            {
              "type": "Proxy",
              "hostName": "apimService1.azure-api.net",
              "negotiateClientCertificate": false,
              "defaultSslBinding": false,
              "certificateSource": "BuiltIn"
            },
            {
              "type": "Proxy",
              "hostName": "gateway1.msitesting.net",
              "keyVaultId": "https://rpbvtkeyvaultintegration.vault.azure.net/secrets/msitestingCert",
              "negotiateClientCertificate": false,
              "certificate": {
                "expiry": "2037-01-01T07:00:00+00:00",
                "thumbprint": "EA276907917CB5XXXXXXXXXXX690",
                "subject": "CN=*.msitesting.net"
              },
              "defaultSslBinding": true,
              "identityClientId": "329419bc-adec-4dce-9568-25a6d486e468",
              "certificateSource": "KeyVault"
            },
            {
              "type": "Management",
              "hostName": "mgmt.msitesting.net",
              "keyVaultId": "https://rpbvtkeyvaultintegration.vault.azure.net/secrets/msitestingCert",
              "negotiateClientCertificate": false,
              "certificate": {
                "expiry": "2037-01-01T07:00:00+00:00",
                "thumbprint": "EA276907917CB5XXXXXXXXXXX690",
                "subject": "CN=*.msitesting.net"
              },
              "defaultSslBinding": false,
              "identityClientId": "329419bc-adec-4dce-9568-25a6d486e468",
              "certificateSource": "KeyVault"
            },
            {
              "type": "Portal",
              "hostName": "portal1.msitesting.net",
              "keyVaultId": "https://rpbvtkeyvaultintegration.vault.azure.net/secrets/msitestingCert",
              "negotiateClientCertificate": false,
              "certificate": {
                "expiry": "2037-01-01T07:00:00+00:00",
                "thumbprint": "EA276907917CB5XXXXXXXXXXX690",
                "subject": "CN=*.msitesting.net"
              },
              "defaultSslBinding": false,
              "identityClientId": "329419bc-adec-4dce-9568-25a6d486e468",
              "certificateSource": "KeyVault"
            }
          ],
          "publicIPAddresses": [
            "40.112.74.192"
          ],
          "customProperties": {
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Protocols.Tls10": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Protocols.Tls11": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Protocols.Ssl30": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Ciphers.TripleDes168": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Backend.Protocols.Tls10": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Backend.Protocols.Tls11": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Backend.Protocols.Ssl30": "False",
            "Microsoft.WindowsAzure.ApiManagement.Gateway.Protocols.Server.Http2": "False"
          },
          "virtualNetworkType": "None",
          "disableGateway": false,
          "platformVersion": "stv2",
          "apiVersionConstraint": {
            "minApiVersion": "2019-01-01"
          }
        },
        "sku": {
          "name": "Premium",
          "capacity": 1
        },
        "identity": {
          "type": "UserAssigned",
          "tenantId": "f686d426-8d16-0000-0000-ab578e110ccd",
          "userAssignedIdentities": {
            "/subscriptions/subid/resourcegroups/rg1/providers/Microsoft.ManagedIdentity/userAssignedIdentities/id1": {
              "principalId": "15e769b2-0000-0000-0000-3fd9a923ac3a",
              "clientId": "329419bc-adec-4dce-9568-25a6d486e468"
            }
          }
        },
        "systemData": {
          "createdBy": "string",
          "createdByType": "Application",
          "createdAt": "2020-02-01T01:01:01.1075056Z",
          "lastModifiedBy": "string",
          "lastModifiedByType": "Application",
          "lastModifiedAt": "2020-02-02T02:03:01.1974346Z"
        }
      }
  - statusCode: "202"
    headers:
    - name: location
      value: https://management.azure.com/subscriptions/subid/resourcegroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/operationresults/bXVsdGlob3N0bmFtZW11bHRpcmVnaW9uc2VydmljZV9BY3RfZjFiOTZhMjc=?api-version=2021-12-01-preview
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow.
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: >
    Creates or updates an API Management service. This is long running operation and could take several minutes to complete.
errorCodes: []
