### YamlMime:RESTOperation
summary: Creates new or updates existing specified API of the API Management service instance.
service: API Management
apiVersion: 2017-03-01
groupName: Api
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.ApiManagement/service/{serviceName}/apis/{apiId}?api-version=2017-03-01
uriParameters:
- in: path
  isRequired: true
  description: Subscription credentials which uniquely identify Microsoft Azure subscription. The subscription ID forms part of the URI for every service call.
  types:
  - uid: string
  name: subscriptionId
- in: path
  isRequired: true
  description: The name of the resource group.
  types:
  - uid: string
  name: resourceGroupName
- in: path
  isRequired: true
  description: The name of the API Management service.
  types:
  - uid: string
  pattern: ^[a-zA-Z](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?$
  name: serviceName
- in: path
  isRequired: true
  description: API identifier. Must be unique in the current API Management service instance.
  types:
  - uid: string
  pattern: ^[^*#&+:<>?]+$
  name: apiId
- in: query
  isRequired: true
  description: Version of the API to be used with the client request.
  types:
  - uid: string
  name: api-version
responses:
- headers:
  - value: string
    name: ETag
  description: API was successfully created.
  types:
  - uid: ApiContract
  name: 201 Created
- headers:
  - value: string
    name: ETag
  description: API was successfully updated.
  types:
  - uid: ApiContract
  name: 200 OK
- description: Error response describing why the operation failed.
  types:
  - uid: ErrorResponse
  name: Other Status Codes
requestBody:
- parameters:
  - in: body
    description: Content value when Importing an API.
    types:
    - uid: string
    name: properties.contentValue
  - in: body
    description: Format of the Content in which the API is getting imported.
    types:
    - uid: ContentFormat
    name: properties.contentFormat
  - in: body
    description: Criteria to limit import of WSDL to a subset of the document.
    types:
    - uid: WsdlSelector
    name: properties.wsdlSelector
  - in: body
    description: API name.
    types:
    - uid: string
    name: properties.displayName
  - in: body
    description: Absolute URL of the backend service implementing this API.
    types:
    - uid: string
    name: properties.serviceUrl
  - in: body
    isRequired: true
    description: Relative URL uniquely identifying this API and all of its resource paths within the API Management service instance. It is appended to the API endpoint base URL specified during the service instance creation to form a public URL for this API.
    types:
    - uid: string
    name: properties.path
  - in: body
    description: Describes on which protocols the operations in this API can be invoked.
    types:
    - isArray: true
      uid: string
    name: properties.protocols
  - in: body
    description: Description of the API. May include HTML formatting tags.
    types:
    - uid: string
    name: description
  - in: body
    description: Collection of authentication settings included into this API.
    types:
    - uid: AuthenticationSettingsContract
    name: authenticationSettings
  - in: body
    description: Protocols over which API is made available.
    types:
    - uid: SubscriptionKeyParameterNamesContract
    name: subscriptionKeyParameterNames
  - in: body
    description: Type of API.
    types:
    - uid: ApiType
    name: type
  - in: body
    description: Describes the Revision of the Api. If no value is provided, default revision 1 is created
    types:
    - uid: string
    name: apiRevision
  - in: body
    description: Indicates if API revision is current api revision.
    types:
    - uid: boolean
    name: isCurrent
  - in: body
    description: Indicates if API revision is accessible via the gateway.
    types:
    - uid: boolean
    name: isOnline
requestHeader:
- in: header
  description: ETag of the Api Entity. For Create Api Etag should not be specified. For Update Etag should match the existing Entity or it can be * for unconditional update.
  types:
  - uid: string
  name: If-Match
definitions:
- name: WsdlSelector
  description: Criteria to limit import of WSDL to a subset of the document.
  kind: object
  properties:
  - description: Name of service to import from WSDL
    types:
    - uid: string
    name: wsdlServiceName
  - description: Name of endpoint(port) to import from WSDL
    types:
    - uid: string
    name: wsdlEndpointName
- name: AuthenticationSettingsContract
  description: Collection of authentication settings included into this API.
  kind: object
  properties:
  - description: OAuth2 Authentication settings
    types:
    - uid: OAuth2AuthenticationSettingsContract
    name: oAuth2
- name: SubscriptionKeyParameterNamesContract
  description: Protocols over which API is made available.
  kind: object
  properties:
  - description: Subscription key header name.
    types:
    - uid: string
    name: header
  - description: Subscription key query string parameter name.
    types:
    - uid: string
    name: query
- name: ApiContract
  description: Page values.
  kind: object
  properties:
  - description: API name.
    types:
    - uid: string
    name: properties.displayName
  - description: Absolute URL of the backend service implementing this API.
    types:
    - uid: string
    name: properties.serviceUrl
  - description: Relative URL uniquely identifying this API and all of its resource paths within the API Management service instance. It is appended to the API endpoint base URL specified during the service instance creation to form a public URL for this API.
    types:
    - uid: string
    name: properties.path
  - description: Describes on which protocols the operations in this API can be invoked.
    types:
    - isArray: true
      uid: string
    name: properties.protocols
  - isReadyOnly: true
    description: Resource ID.
    types:
    - uid: string
    name: id
  - isReadyOnly: true
    description: Resource name.
    types:
    - uid: string
    name: name
  - isReadyOnly: true
    description: Resource type for API Management resource.
    types:
    - uid: string
    name: type
  - description: Description of the API. May include HTML formatting tags.
    types:
    - uid: string
    name: properties.description
  - description: Collection of authentication settings included into this API.
    types:
    - uid: AuthenticationSettingsContract
    name: properties.authenticationSettings
  - description: Protocols over which API is made available.
    types:
    - uid: SubscriptionKeyParameterNamesContract
    name: properties.subscriptionKeyParameterNames
  - description: Type of API.
    types:
    - uid: ApiType
    name: properties.type
  - description: Describes the Revision of the Api. If no value is provided, default revision 1 is created
    types:
    - uid: string
    name: properties.apiRevision
  - description: Indicates if API revision is current api revision.
    types:
    - uid: boolean
    name: properties.isCurrent
  - description: Indicates if API revision is accessible via the gateway.
    types:
    - uid: boolean
    name: properties.isOnline
- name: ErrorResponse
  description: Error Body contract.
  kind: object
  properties:
  - description: Service-defined error code. This code serves as a sub-status for the HTTP error code specified in the response.
    types:
    - uid: string
    name: code
  - description: Human-readable representation of the error.
    types:
    - uid: string
    name: message
  - description: Error Field contract.
    types:
    - isArray: true
      uid: ErrorFieldContract
    name: details
- name: ApiCreateOrUpdateParameter
  description: API Create or Update Parameters.
  kind: object
  properties:
  - description: Content value when Importing an API.
    types:
    - uid: string
    name: properties.contentValue
  - description: Format of the Content in which the API is getting imported.
    types:
    - uid: ContentFormat
    name: properties.contentFormat
  - description: Criteria to limit import of WSDL to a subset of the document.
    types:
    - uid: WsdlSelector
    name: properties.wsdlSelector
  - description: API name.
    types:
    - uid: string
    name: properties.displayName
  - description: Absolute URL of the backend service implementing this API.
    types:
    - uid: string
    name: properties.serviceUrl
  - description: Relative URL uniquely identifying this API and all of its resource paths within the API Management service instance. It is appended to the API endpoint base URL specified during the service instance creation to form a public URL for this API.
    types:
    - uid: string
    name: properties.path
  - description: Describes on which protocols the operations in this API can be invoked.
    types:
    - isArray: true
      uid: string
    name: properties.protocols
  - description: Description of the API. May include HTML formatting tags.
    types:
    - uid: string
    name: description
  - description: Collection of authentication settings included into this API.
    types:
    - uid: AuthenticationSettingsContract
    name: authenticationSettings
  - description: Protocols over which API is made available.
    types:
    - uid: SubscriptionKeyParameterNamesContract
    name: subscriptionKeyParameterNames
  - description: Type of API.
    types:
    - uid: ApiType
    name: type
  - description: Describes the Revision of the Api. If no value is provided, default revision 1 is created
    types:
    - uid: string
    name: apiRevision
  - description: Indicates if API revision is current api revision.
    types:
    - uid: boolean
    name: isCurrent
  - description: Indicates if API revision is accessible via the gateway.
    types:
    - uid: boolean
    name: isOnline
- name: OAuth2AuthenticationSettingsContract
  description: OAuth2 Authentication settings
  kind: object
  properties:
  - description: OAuth authorization server identifier.
    types:
    - uid: string
    name: authorizationServerId
  - description: operations scope.
    types:
    - uid: string
    name: scope
- name: ApiType
  description: Type of API.
  kind: enum
  properties:
  - types:
    - uid: string
    name: http
  - types:
    - uid: string
    name: soap
- name: ErrorFieldContract
  description: Error Field contract.
  kind: object
  properties:
  - description: Property level error code.
    types:
    - uid: string
    name: code
  - description: Human-readable representation of property-level error.
    types:
    - uid: string
    name: message
  - description: Property name.
    types:
    - uid: string
    name: target
- name: ContentFormat
  description: Format of the Content in which the API is getting imported.
  kind: enum
  properties:
  - description: The contents are inline and Content type is a WADL document.
    types:
    - uid: string
    name: wadl-xml
  - description: The WADL document is hosted on a publicly accessible internet address.
    types:
    - uid: string
    name: wadl-link-json
  - description: The contents are inline and Content Type if a OpenApi 2.0 Document.
    types:
    - uid: string
    name: swagger-json
  - description: The Open Api 2.0 document is hosted on a publicly accessible internet address.
    types:
    - uid: string
    name: swagger-link-json
  - description: The contents are inline and the document is a WSDL/Soap document.
    types:
    - uid: string
    name: wsdl
  - description: The WSDL document is hosted on a publicly accessible internet address.
    types:
    - uid: string
    name: wsdl-link
examples:
- request:
    uri: PUT https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/apis/petstore?api-version=2017-03-01
    body: >-
      {
        "properties": {
          "contentFormat": "swagger-link-json",
          "contentValue": "http://petstore.swagger.io/v2/swagger.json",
          "path": "petstore"
        }
      }
  responses:
  - statusCode: "201"
    body: >-
      {
        "id": "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/apis/petstoreapi",
        "type": "Microsoft.ApiManagement/service/apis",
        "name": "petstoreapi",
        "properties": {
          "displayName": "Swagger Petstore",
          "apiRevision": "1",
          "description": "This is a sample server Petstore server.  You can find out more about Swagger at [http://swagger.io](http://swagger.io) or on [irc.freenode.net, #swagger](http://swagger.io/irc/).  For this sample, you can use the api key `special-key` to test the authorization filters.",
          "serviceUrl": "http://petstore.swagger.io/v2",
          "path": "petstore",
          "protocols": [
            "http"
          ],
          "subscriptionKeyParameterNames": {
            "header": "Ocp-Apim-Subscription-Key",
            "query": "subscription-key"
          },
          "isCurrent": true
        }
      }
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/apis/petstoreapi",
        "type": "Microsoft.ApiManagement/service/apis",
        "name": "petstoreapi",
        "properties": {
          "displayName": "Swagger Petstore",
          "apiRevision": "1",
          "description": "This is a sample server Petstore server.  You can find out more about Swagger at [http://swagger.io](http://swagger.io) or on [irc.freenode.net, #swagger](http://swagger.io/irc/).  For this sample, you can use the api key `special-key` to test the authorization filters.",
          "serviceUrl": "http://petstore.swagger.io/v2",
          "path": "petstore",
          "protocols": [
            "http"
          ],
          "subscriptionKeyParameterNames": {
            "header": "Ocp-Apim-Subscription-Key",
            "query": "subscription-key"
          },
          "isCurrent": true
        }
      }
  name: ApiManagementCreateApiUsingSwaggerImport
- request:
    uri: PUT https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/apis/petstore?api-version=2017-03-01
    body: >-
      {
        "properties": {
          "contentFormat": "wadl-link-json",
          "contentValue": "https://developer.cisco.com/media/wae-release-6-2-api-reference/wae-collector-rest-api/application.wadl",
          "path": "collector"
        }
      }
  responses:
  - statusCode: "201"
    body: >-
      {
        "id": "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/apis/collectorwadl",
        "type": "Microsoft.ApiManagement/service/apis",
        "name": "collectorwadl",
        "properties": {
          "displayName": "http://localhost:8080/collector-northbound",
          "apiRevision": "1",
          "description": "",
          "serviceUrl": "http://localhost:8080/collector-northbound",
          "path": "collector",
          "protocols": [
            "https"
          ],
          "subscriptionKeyParameterNames": {
            "header": "Ocp-Apim-Subscription-Key",
            "query": "subscription-key"
          },
          "isCurrent": true
        }
      }
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/apis/collectorwadl",
        "type": "Microsoft.ApiManagement/service/apis",
        "name": "collectorwadl",
        "properties": {
          "displayName": "http://localhost:8080/collector-northbound",
          "apiRevision": "1",
          "description": "",
          "serviceUrl": "http://localhost:8080/collector-northbound",
          "path": "collector",
          "protocols": [
            "https"
          ],
          "subscriptionKeyParameterNames": {
            "header": "Ocp-Apim-Subscription-Key",
            "query": "subscription-key"
          },
          "isCurrent": true
        }
      }
  name: ApiManagementCreateApiUsingWadlImport
- request:
    uri: PUT https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/apis/soapApi?api-version=2017-03-01
    body: >-
      {
        "properties": {
          "contentFormat": "wsdl-link",
          "contentValue": "http://www.webservicex.net/CurrencyConvertor.asmx?WSDL",
          "path": "currency",
          "wsdlSelector": {
            "wsdlServiceName": "CurrencyConvertor",
            "wsdlEndpointName": "CurrencyConvertorSoap"
          }
        }
      }
  responses:
  - statusCode: "201"
    body: >-
      {
        "id": "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/apis/soapApi",
        "type": "Microsoft.ApiManagement/service/apis",
        "name": "soapApi",
        "properties": {
          "displayName": "CurrencyConvertor",
          "apiRevision": "1",
          "serviceUrl": "http://www.webservicex.net",
          "path": "currency",
          "protocols": [
            "https"
          ],
          "subscriptionKeyParameterNames": {
            "header": "Ocp-Apim-Subscription-Key",
            "query": "subscription-key"
          },
          "isCurrent": true
        }
      }
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/apis/soapApi",
        "type": "Microsoft.ApiManagement/service/apis",
        "name": "soapApi",
        "properties": {
          "displayName": "CurrencyConvertor",
          "apiRevision": "1",
          "serviceUrl": "http://www.webservicex.net",
          "path": "currency",
          "protocols": [
            "https"
          ],
          "subscriptionKeyParameterNames": {
            "header": "Ocp-Apim-Subscription-Key",
            "query": "subscription-key"
          },
          "isCurrent": true
        }
      }
  name: ApiManagementCreateApiUsingWsdlImport
- request:
    uri: PUT https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/apis/tempgroup?api-version=2017-03-01
    body: >-
      {
        "properties": {
          "description": "apidescription5200",
          "authenticationSettings": {
            "oAuth2": {
              "authorizationServerId": "authorizationServerId2283",
              "scope": "oauth2scope2580"
            }
          },
          "subscriptionKeyParameterNames": {
            "header": "header4520",
            "query": "query3037"
          },
          "displayName": "apiname1463",
          "serviceUrl": "http://newechoapi.cloudapp.net/api",
          "path": "newapiPath",
          "protocols": [
            "https",
            "http"
          ]
        }
      }
  responses:
  - statusCode: "201"
    body: >-
      {
        "id": "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/apis/apiid9419",
        "type": "Microsoft.ApiManagement/service/apis",
        "name": "apiid9419",
        "properties": {
          "displayName": "apiname1463",
          "apiRevision": "1",
          "description": "apidescription5200",
          "serviceUrl": "http://newechoapi.cloudapp.net/api",
          "path": "newapiPath",
          "protocols": [
            "http",
            "https"
          ],
          "authenticationSettings": {
            "oAuth2": {
              "authorizationServerId": "authorizationServerId2283",
              "scope": "oauth2scope2580"
            }
          },
          "subscriptionKeyParameterNames": {
            "header": "header4520",
            "query": "query3037"
          },
          "isCurrent": true,
          "isOnline": true
        }
      }
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/apis/apiid9419",
        "type": "Microsoft.ApiManagement/service/apis",
        "name": "apiid9419",
        "properties": {
          "displayName": "apiname1463",
          "apiRevision": "1",
          "description": "apidescription5200",
          "serviceUrl": "http://newechoapi.cloudapp.net/api",
          "path": "newapiPath",
          "protocols": [
            "http",
            "https"
          ],
          "authenticationSettings": {
            "oAuth2": {
              "authorizationServerId": "authorizationServerId2283",
              "scope": "oauth2scope2580"
            }
          },
          "subscriptionKeyParameterNames": {
            "header": "header4520",
            "query": "query3037"
          },
          "isCurrent": true,
          "isOnline": true
        }
      }
  name: ApiManagementCreateApi
security:
- type: oauth2
  description: Azure Active Directory OAuth2 Flow.
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - description: impersonate your user account
    name: user_impersonation
name: Create Or Update
uid: management.azure.com.apimanagement.api.createorupdate
