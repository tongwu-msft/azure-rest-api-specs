### YamlMime:RESTOperation
uid: management.azure.com.apimanagement.current-ga.networkstatus.listbylocation
name: List By Location
service: API Management
groupName: Network Status
apiVersion: 2021-08-01
summary: Gets the Connectivity Status to the external resources on which the Api Management service depends from inside the Cloud Service. This also returns the DNS Servers as visible to the CloudService.
consumes:
- application/json
produces:
- application/json
paths:
- content: GET https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.ApiManagement/service/{serviceName}/locations/{locationName}/networkstatus?api-version=2021-08-01
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: Subscription credentials which uniquely identify Microsoft Azure subscription. The subscription ID forms part of the URI for every service call.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group.
  types:
  - uid: string
- name: serviceName
  in: path
  isRequired: true
  description: The name of the API Management service.
  types:
  - uid: string
  pattern: ^[a-zA-Z](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?$
- name: locationName
  in: path
  isRequired: true
  description: Location in which the API Management service is deployed. This is one of the Azure Regions like West US, East US, South Central US.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: Version of the API to be used with the client request.
  types:
  - uid: string
responses:
- name: 200 OK
  description: Gets the Network status details.
  types:
  - uid: NetworkStatusContract
- name: Other Status Codes
  description: Error response describing why the operation failed.
  types:
  - uid: ErrorResponse
requestHeader: []
definitions:
- name: NetworkStatusContract
  description: Network Status details.
  kind: object
  properties:
  - name: dnsServers
    description: Gets the list of DNS servers IPV4 addresses.
    types:
    - uid: string
      isArray: true
  - name: connectivityStatus
    description: Gets the list of Connectivity Status to the Resources on which the service depends upon.
    types:
    - uid: ConnectivityStatusContract
      isArray: true
- name: ErrorResponse
  description: Error Response.
  kind: object
  properties:
  - name: error.code
    description: Service-defined error code. This code serves as a sub-status for the HTTP error code specified in the response.
    types:
    - uid: string
  - name: error.message
    description: Human-readable representation of the error.
    types:
    - uid: string
  - name: error.details
    description: The list of invalid fields send in request, in case of validation error.
    types:
    - uid: ErrorFieldContract
      isArray: true
- name: ConnectivityStatusContract
  description: Details about connectivity to a resource.
  kind: object
  properties:
  - name: name
    description: The hostname of the resource which the service depends on. This can be the database, storage or any other azure resource on which the service depends upon.
    types:
    - uid: string
  - name: status
    description: Resource Connectivity Status Type identifier.
    types:
    - uid: ConnectivityStatusType
  - name: error
    description: Error details of the connectivity to the resource.
    types:
    - uid: string
  - name: lastUpdated
    description: 'The date when the resource connectivity status was last updated. This status should be updated every 15 minutes. If this status has not been updated, then it means that the service has lost network connectivity to the resource, from inside the Virtual Network.The date conforms to the following format: `yyyy-MM-ddTHH:mm:ssZ` as specified by the ISO 8601 standard.'
    types:
    - uid: string
  - name: lastStatusChange
    description: 'The date when the resource connectivity status last Changed from success to failure or vice-versa. The date conforms to the following format: `yyyy-MM-ddTHH:mm:ssZ` as specified by the ISO 8601 standard.'
    types:
    - uid: string
  - name: resourceType
    description: Resource Type.
    types:
    - uid: string
  - name: isOptional
    description: Whether this is optional.
    types:
    - uid: boolean
- name: ErrorFieldContract
  description: Error Field contract.
  kind: object
  properties:
  - name: code
    description: Property level error code.
    types:
    - uid: string
  - name: message
    description: Human-readable representation of property-level error.
    types:
    - uid: string
  - name: target
    description: Property name.
    types:
    - uid: string
- name: ConnectivityStatusType
  description: Resource Connectivity Status Type identifier.
  kind: enum
  properties:
  - name: initializing
    types:
    - uid: string
  - name: success
    types:
    - uid: string
  - name: failure
    types:
    - uid: string
examples:
- name: ApiManagementServiceGetNetworkStatusByLocation
  request:
    uri: GET https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/locations/North Central US/networkstatus?api-version=2021-08-01
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      GET https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/locations/North Central US/networkstatus?api-version=2021-08-01
      ```

      # [Java](#tab/Java)
      ``` java
      import com.azure.core.util.Context;

      /** Samples for NetworkStatus ListByLocation. */
      public final class Main {
          /*
           * x-ms-original-file: specification/apimanagement/resource-manager/Microsoft.ApiManagement/stable/2021-08-01/examples/ApiManagementServiceGetNetworkStatusByLocation.json
           */
          /**
           * Sample code: ApiManagementServiceGetNetworkStatusByLocation.
           *
           * @param manager Entry point to ApiManagementManager.
           */
          public static void apiManagementServiceGetNetworkStatusByLocation(
              com.azure.resourcemanager.apimanagement.ApiManagementManager manager) {
              manager.networkStatus().listByLocationWithResponse("rg1", "apimService1", "North Central US", Context.NONE);
          }
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-java/blob/azure-resourcemanager-apimanagement_1.0.0-beta.3/sdk/apimanagement/azure-resourcemanager-apimanagement/README.md) on how to add the SDK to your project and authenticate.
      # [Go](#tab/Go)
      ``` go
      package armapimanagement_test

      import (
      	"context"
      	"log"

      	"github.com/Azure/azure-sdk-for-go/sdk/azidentity"
      	"github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/apimanagement/armapimanagement"
      )

      // Generated from example definition: https://github.com/Azure/azure-rest-api-specs/tree/main/specification/apimanagement/resource-manager/Microsoft.ApiManagement/stable/2021-08-01/examples/ApiManagementServiceGetNetworkStatusByLocation.json
      func ExampleNetworkStatusClient_ListByLocation() {
      	cred, err := azidentity.NewDefaultAzureCredential(nil)
      	if err != nil {
      		log.Fatalf("failed to obtain a credential: %v", err)
      	}
      	ctx := context.Background()
      	client, err := armapimanagement.NewNetworkStatusClient("subid", cred, nil)
      	if err != nil {
      		log.Fatalf("failed to create client: %v", err)
      	}
      	res, err := client.ListByLocation(ctx,
      		"rg1",
      		"apimService1",
      		"North Central US",
      		nil)
      	if err != nil {
      		log.Fatalf("failed to finish the request: %v", err)
      	}
      	// TODO: use response item
      	_ = res
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-go/blob/sdk%2Fresourcemanager%2Fapimanagement%2Farmapimanagement%2Fv1.0.0/sdk/resourcemanager/apimanagement/armapimanagement/README.md) on how to add the SDK to your project and authenticate.
      # [JavaScript](#tab/JavaScript)
      ``` js
      const { ApiManagementClient } = require("@azure/arm-apimanagement");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to Gets the Connectivity Status to the external resources on which the Api Management service depends from inside the Cloud Service. This also returns the DNS Servers as visible to the CloudService.
       *
       * @summary Gets the Connectivity Status to the external resources on which the Api Management service depends from inside the Cloud Service. This also returns the DNS Servers as visible to the CloudService.
       * x-ms-original-file: specification/apimanagement/resource-manager/Microsoft.ApiManagement/stable/2021-08-01/examples/ApiManagementServiceGetNetworkStatusByLocation.json
       */
      async function apiManagementServiceGetNetworkStatusByLocation() {
        const subscriptionId = "subid";
        const resourceGroupName = "rg1";
        const serviceName = "apimService1";
        const locationName = "North Central US";
        const credential = new DefaultAzureCredential();
        const client = new ApiManagementClient(credential, subscriptionId);
        const result = await client.networkStatus.listByLocation(
          resourceGroupName,
          serviceName,
          locationName
        );
        console.log(result);
      }

      apiManagementServiceGetNetworkStatusByLocation().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-apimanagement_8.1.1/sdk/apimanagement/arm-apimanagement/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "dnsServers": [
          "10.82.98.10"
        ],
        "connectivityStatus": [
          {
            "name": "apimgmtst6tnxxxxxxxxxxx.blob.core.windows.net",
            "status": "success",
            "error": "",
            "lastUpdated": "2020-11-24T22:55:14.7035899Z",
            "lastStatusChange": "2020-11-20T07:54:55.9365931Z",
            "resourceType": "BlobStorage",
            "isOptional": false
          },
          {
            "name": "apimgmtst6tnxxxxxxxxxxx.file.core.windows.net",
            "status": "success",
            "error": "",
            "lastUpdated": "2020-11-24T22:55:41.5322463Z",
            "lastStatusChange": "2020-11-20T07:54:55.9265938Z",
            "resourceType": "FileStorage",
            "isOptional": true
          },
          {
            "name": "apimgmtst6tnxxxxxxxxxxx.queue.core.windows.net",
            "status": "success",
            "error": "",
            "lastUpdated": "2020-11-24T22:55:30.645994Z",
            "lastStatusChange": "2020-11-20T07:54:55.8410477Z",
            "resourceType": "Queue",
            "isOptional": true
          },
          {
            "name": "apimgmtst6tnxxxxxxxxxxx.table.core.windows.net",
            "status": "success",
            "error": "",
            "lastUpdated": "2020-11-24T22:55:23.8789171Z",
            "lastStatusChange": "2020-11-20T07:54:55.9365931Z",
            "resourceType": "TableStorage",
            "isOptional": false
          },
          {
            "name": "gcs.prod.monitoring.core.windows.net",
            "status": "success",
            "error": "",
            "lastUpdated": "2020-11-24T22:57:34.8666833Z",
            "lastStatusChange": "2020-11-20T08:07:37.5486932Z",
            "resourceType": "Monitoring",
            "isOptional": true
          },
          {
            "name": "https://gcs.ppe.warm.ingestion.monitoring.azure.com",
            "status": "success",
            "error": "",
            "lastUpdated": "2020-11-24T22:56:26.1870188Z",
            "lastStatusChange": "2020-11-20T07:54:56.1060523Z",
            "resourceType": "Monitoring",
            "isOptional": true
          },
          {
            "name": "https://global.metrics.nsatc.net/",
            "status": "success",
            "error": "",
            "lastUpdated": "2020-11-24T22:56:35.9620612Z",
            "lastStatusChange": "2020-11-20T07:54:56.0510519Z",
            "resourceType": "Monitoring",
            "isOptional": true
          },
          {
            "name": "https://login.windows.net",
            "status": "success",
            "error": "",
            "lastUpdated": "2020-11-24T22:56:30.8047708Z",
            "lastStatusChange": "2020-11-20T07:54:56.1060523Z",
            "resourceType": "AzureActiveDirectory",
            "isOptional": true
          },
          {
            "name": "https://prod2.metrics.nsatc.net:1886/RecoveryService",
            "status": "success",
            "error": "",
            "lastUpdated": "2020-11-24T22:56:45.2095302Z",
            "lastStatusChange": "2020-11-20T07:54:56.2796235Z",
            "resourceType": "Metrics",
            "isOptional": true
          },
          {
            "name": "LocalGatewayRedis",
            "status": "success",
            "error": "",
            "lastUpdated": "2020-11-24T22:55:15.1345836Z",
            "lastStatusChange": "2020-11-20T07:54:55.9365931Z",
            "resourceType": "InternalCache",
            "isOptional": true
          },
          {
            "name": "prod.warmpath.msftcloudes.com",
            "status": "success",
            "error": "",
            "lastUpdated": "2020-11-24T22:55:57.8992141Z",
            "lastStatusChange": "2020-11-20T07:54:55.8410477Z",
            "resourceType": "Monitoring",
            "isOptional": false
          },
          {
            "name": "Scm",
            "status": "success",
            "error": "",
            "lastUpdated": "2020-11-24T23:03:57.6187917Z",
            "lastStatusChange": "2020-11-20T07:54:57.325384Z",
            "resourceType": "SourceControl",
            "isOptional": true
          },
          {
            "name": "smtpi-xxx.msn.com:25028",
            "status": "success",
            "error": "",
            "lastUpdated": "2020-11-24T22:58:22.2430074Z",
            "lastStatusChange": "2020-11-20T07:54:56.3510577Z",
            "resourceType": "Email",
            "isOptional": true
          },
          {
            "name": "zwcvuxxxx.database.windows.net",
            "status": "success",
            "error": "",
            "lastUpdated": "2020-11-24T22:55:44.3582171Z",
            "lastStatusChange": "2020-11-20T07:54:56.0410467Z",
            "resourceType": "SQLDatabase",
            "isOptional": false
          }
        ]
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow.
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: Gets the Connectivity Status to the external resources on which the Api Management service depends from inside the Cloud Service.
errorCodes: []
