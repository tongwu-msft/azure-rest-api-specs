### YamlMime:RESTOperation
uid: management.azure.com.apimanagement.current-ga.reports.listbyrequest
name: List By Request
service: API Management
groupName: Reports
apiVersion: 2021-08-01
summary: Lists report records by Request.
consumes:
- application/json
produces:
- application/json
paths:
- content: GET https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.ApiManagement/service/{serviceName}/reports/byRequest?$filter={$filter}&api-version=2021-08-01
- content: GET https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.ApiManagement/service/{serviceName}/reports/byRequest?$filter={$filter}&$top={$top}&$skip={$skip}&api-version=2021-08-01
  isOptional: true
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: Subscription credentials which uniquely identify Microsoft Azure subscription. The subscription ID forms part of the URI for every service call.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group.
  types:
  - uid: string
- name: serviceName
  in: path
  isRequired: true
  description: The name of the API Management service.
  types:
  - uid: string
  pattern: ^[a-zA-Z](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?$
- name: $filter
  in: query
  isRequired: true
  description: '|   Field     |     Usage     |     Supported operators     |     Supported functions     |</br>|-------------|-------------|-------------|-------------|</br>| timestamp | filter | ge, le |     | </br>| apiId | filter | eq |     | </br>| operationId | filter | eq |     | </br>| productId | filter | eq |     | </br>| userId | filter | eq |     | </br>| apiRegion | filter | eq |     | </br>| subscriptionId | filter | eq |     | </br>'
  types:
  - uid: string
- name: $top
  in: query
  description: Number of records to return.
  types:
  - uid: integer
  format: int32
- name: $skip
  in: query
  description: Number of records to skip.
  types:
  - uid: integer
  format: int32
- name: api-version
  in: query
  isRequired: true
  description: Version of the API to be used with the client request.
  types:
  - uid: string
responses:
- name: 200 OK
  description: Lists a collection of Report record.
  types:
  - uid: RequestReportCollection
- name: Other Status Codes
  description: Error response describing why the operation failed.
  types:
  - uid: ErrorResponse
requestHeader: []
definitions:
- name: RequestReportCollection
  description: Paged Report records list representation.
  kind: object
  properties:
  - name: value
    description: Page values.
    types:
    - uid: RequestReportRecordContract
      isArray: true
  - name: count
    description: Total record count number across all pages.
    types:
    - uid: integer
- name: ErrorResponse
  description: Error Response.
  kind: object
  properties:
  - name: error.code
    description: Service-defined error code. This code serves as a sub-status for the HTTP error code specified in the response.
    types:
    - uid: string
  - name: error.message
    description: Human-readable representation of the error.
    types:
    - uid: string
  - name: error.details
    description: The list of invalid fields send in request, in case of validation error.
    types:
    - uid: ErrorFieldContract
      isArray: true
- name: RequestReportRecordContract
  description: Request Report data.
  kind: object
  properties:
  - name: apiId
    description: API identifier path. /apis/{apiId}
    types:
    - uid: string
  - name: operationId
    description: Operation identifier path. /apis/{apiId}/operations/{operationId}
    types:
    - uid: string
  - name: productId
    isReadyOnly: true
    description: Product identifier path. /products/{productId}
    types:
    - uid: string
  - name: userId
    isReadyOnly: true
    description: User identifier path. /users/{userId}
    types:
    - uid: string
  - name: method
    description: The HTTP method associated with this request..
    types:
    - uid: string
  - name: url
    description: The full URL associated with this request.
    types:
    - uid: string
  - name: ipAddress
    description: The client IP address associated with this request.
    types:
    - uid: string
  - name: backendResponseCode
    description: The HTTP status code received by the gateway as a result of forwarding this request to the backend.
    types:
    - uid: string
  - name: responseCode
    description: The HTTP status code returned by the gateway.
    types:
    - uid: integer
  - name: responseSize
    description: The size of the response returned by the gateway.
    types:
    - uid: integer
  - name: timestamp
    description: The date and time when this request was received by the gateway in ISO 8601 format.
    types:
    - uid: string
  - name: cache
    description: Specifies if response cache was involved in generating the response. If the value is none, the cache was not used. If the value is hit, cached response was returned. If the value is miss, the cache was used but lookup resulted in a miss and request was fulfilled by the backend.
    types:
    - uid: string
  - name: apiTime
    description: The total time it took to process this request.
    types:
    - uid: number
  - name: serviceTime
    description: he time it took to forward this request to the backend and get the response back.
    types:
    - uid: number
  - name: apiRegion
    description: Azure region where the gateway that processed this request is located.
    types:
    - uid: string
  - name: subscriptionId
    description: Subscription identifier path. /subscriptions/{subscriptionId}
    types:
    - uid: string
  - name: requestId
    description: Request Identifier.
    types:
    - uid: string
  - name: requestSize
    description: The size of this request..
    types:
    - uid: integer
- name: ErrorFieldContract
  description: Error Field contract.
  kind: object
  properties:
  - name: code
    description: Property level error code.
    types:
    - uid: string
  - name: message
    description: Human-readable representation of property-level error.
    types:
    - uid: string
  - name: target
    description: Property name.
    types:
    - uid: string
examples:
- name: ApiManagementGetReportsByRequest
  request:
    uri: GET https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/reports/byRequest?$filter=timestamp ge datetime'2017-06-01T00:00:00' and timestamp le datetime'2017-06-04T00:00:00'&api-version=2021-08-01
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      GET https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/reports/byRequest?$filter=timestamp ge datetime'2017-06-01T00:00:00' and timestamp le datetime'2017-06-04T00:00:00'&api-version=2021-08-01
      ```

      # [Java](#tab/Java)
      ``` java
      import com.azure.core.util.Context;

      /** Samples for Reports ListByRequest. */
      public final class Main {
          /*
           * x-ms-original-file: specification/apimanagement/resource-manager/Microsoft.ApiManagement/stable/2021-08-01/examples/ApiManagementGetReportsByRequest.json
           */
          /**
           * Sample code: ApiManagementGetReportsByRequest.
           *
           * @param manager Entry point to ApiManagementManager.
           */
          public static void apiManagementGetReportsByRequest(
              com.azure.resourcemanager.apimanagement.ApiManagementManager manager) {
              manager
                  .reports()
                  .listByRequest(
                      "rg1",
                      "apimService1",
                      "timestamp ge datetime'2017-06-01T00:00:00' and timestamp le datetime'2017-06-04T00:00:00'",
                      null,
                      null,
                      Context.NONE);
          }
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-java/blob/azure-resourcemanager-apimanagement_1.0.0-beta.3/sdk/apimanagement/azure-resourcemanager-apimanagement/README.md) on how to add the SDK to your project and authenticate.
      # [Go](#tab/Go)
      ``` go
      package armapimanagement_test

      import (
      	"context"
      	"log"

      	"github.com/Azure/azure-sdk-for-go/sdk/azidentity"
      	"github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/apimanagement/armapimanagement"
      )

      // Generated from example definition: https://github.com/Azure/azure-rest-api-specs/tree/main/specification/apimanagement/resource-manager/Microsoft.ApiManagement/stable/2021-08-01/examples/ApiManagementGetReportsByRequest.json
      func ExampleReportsClient_NewListByRequestPager() {
      	cred, err := azidentity.NewDefaultAzureCredential(nil)
      	if err != nil {
      		log.Fatalf("failed to obtain a credential: %v", err)
      	}
      	ctx := context.Background()
      	client, err := armapimanagement.NewReportsClient("subid", cred, nil)
      	if err != nil {
      		log.Fatalf("failed to create client: %v", err)
      	}
      	pager := client.NewListByRequestPager("rg1",
      		"apimService1",
      		"timestamp ge datetime'2017-06-01T00:00:00' and timestamp le datetime'2017-06-04T00:00:00'",
      		&armapimanagement.ReportsClientListByRequestOptions{Top: nil,
      			Skip: nil,
      		})
      	for pager.More() {
      		nextResult, err := pager.NextPage(ctx)
      		if err != nil {
      			log.Fatalf("failed to advance page: %v", err)
      		}
      		for _, v := range nextResult.Value {
      			// TODO: use page item
      			_ = v
      		}
      	}
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-go/blob/sdk%2Fresourcemanager%2Fapimanagement%2Farmapimanagement%2Fv1.0.0/sdk/resourcemanager/apimanagement/armapimanagement/README.md) on how to add the SDK to your project and authenticate.
      # [JavaScript](#tab/JavaScript)
      ``` js
      const { ApiManagementClient } = require("@azure/arm-apimanagement");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to Lists report records by Request.
       *
       * @summary Lists report records by Request.
       * x-ms-original-file: specification/apimanagement/resource-manager/Microsoft.ApiManagement/stable/2021-08-01/examples/ApiManagementGetReportsByRequest.json
       */
      async function apiManagementGetReportsByRequest() {
        const subscriptionId = "subid";
        const resourceGroupName = "rg1";
        const serviceName = "apimService1";
        const filter =
          "timestamp ge datetime'2017-06-01T00:00:00' and timestamp le datetime'2017-06-04T00:00:00'";
        const credential = new DefaultAzureCredential();
        const client = new ApiManagementClient(credential, subscriptionId);
        const resArray = new Array();
        for await (let item of client.reports.listByRequest(resourceGroupName, serviceName, filter)) {
          resArray.push(item);
        }
        console.log(resArray);
      }

      apiManagementGetReportsByRequest().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-apimanagement_8.1.1/sdk/apimanagement/arm-apimanagement/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "value": [
          {
            "apiId": "/apis/5931a75ae4bbd512a88c680b",
            "operationId": "/apis/5931a75ae4bbd512a88c680b/operations/-",
            "productId": "/products/-",
            "userId": "/users/1",
            "method": "GET",
            "url": "https://apimService1.azure-api.net/echo/resource?param1=sample",
            "ipAddress": "207.xx.155.xx",
            "responseCode": 404,
            "responseSize": 405,
            "timestamp": "2017-06-03T00:17:00.1649134Z",
            "cache": "none",
            "apiTime": 221.1544,
            "serviceTime": 0,
            "apiRegion": "East Asia",
            "subscriptionId": "/subscriptions/5600b59475ff190048070002",
            "requestId": "63e7119c-26aa-433c-96d7-f6f3267ff52f",
            "requestSize": 0
          },
          {
            "apiId": "/apis/5931a75ae4bbd512a88c680b",
            "operationId": "/apis/5931a75ae4bbd512a88c680b/operations/-",
            "productId": "/products/-",
            "userId": "/users/1",
            "method": "POST",
            "url": "https://apimService1.azure-api.net/echo/resource",
            "ipAddress": "207.xx.155.xx",
            "responseCode": 404,
            "responseSize": 403,
            "timestamp": "2017-06-03T00:17:20.5255131Z",
            "cache": "none",
            "apiTime": 6.675400000000001,
            "serviceTime": 0,
            "apiRegion": "East Asia",
            "subscriptionId": "/subscriptions/5600b59475ff190048070002",
            "requestId": "e581b7f7-c9ec-4fc6-8ab9-3855d9b00b04",
            "requestSize": 0
          }
        ],
        "count": 2
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow.
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: >
    Learn more about API Management service - Lists report records by Request.
errorCodes: []
