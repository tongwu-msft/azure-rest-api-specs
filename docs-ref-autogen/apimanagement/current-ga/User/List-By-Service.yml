### YamlMime:RESTOperation
uid: management.azure.com.apimanagement.current-ga.user.listbyservice
name: List By Service
service: API Management
groupName: User
apiVersion: 2021-08-01
summary: Lists a collection of registered users in the specified service instance.
consumes:
- application/json
produces:
- application/json
paths:
- content: GET https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.ApiManagement/service/{serviceName}/users?api-version=2021-08-01
- content: GET https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.ApiManagement/service/{serviceName}/users?$filter={$filter}&$top={$top}&$skip={$skip}&expandGroups={expandGroups}&api-version=2021-08-01
  isOptional: true
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: Subscription credentials which uniquely identify Microsoft Azure subscription. The subscription ID forms part of the URI for every service call.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group.
  types:
  - uid: string
- name: serviceName
  in: path
  isRequired: true
  description: The name of the API Management service.
  types:
  - uid: string
  pattern: ^[a-zA-Z](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?$
- name: $filter
  in: query
  description: '|     Field     |     Usage     |     Supported operators     |     Supported functions     |</br>|-------------|-------------|-------------|-------------|</br>| name | filter | ge, le, eq, ne, gt, lt | substringof, contains, startswith, endswith |</br>| firstName | filter | ge, le, eq, ne, gt, lt | substringof, contains, startswith, endswith |</br>| lastName | filter | ge, le, eq, ne, gt, lt | substringof, contains, startswith, endswith |</br>| email | filter | ge, le, eq, ne, gt, lt | substringof, contains, startswith, endswith |</br>| state | filter | eq |     |</br>| registrationDate | filter | ge, le, eq, ne, gt, lt |     |</br>| note | filter | ge, le, eq, ne, gt, lt | substringof, contains, startswith, endswith |</br>| groups | expand |     |     |</br>'
  types:
  - uid: string
- name: $top
  in: query
  description: Number of records to return.
  types:
  - uid: integer
  format: int32
- name: $skip
  in: query
  description: Number of records to skip.
  types:
  - uid: integer
  format: int32
- name: expandGroups
  in: query
  description: Detailed Group in response.
  types:
  - uid: boolean
- name: api-version
  in: query
  isRequired: true
  description: Version of the API to be used with the client request.
  types:
  - uid: string
responses:
- name: 200 OK
  description: Lists a collection of User entities.
  types:
  - uid: UserCollection
- name: Other Status Codes
  description: Error response describing why the operation failed.
  types:
  - uid: ErrorResponse
requestHeader: []
definitions:
- name: UserCollection
  description: Paged Users list representation.
  kind: object
  properties:
  - name: value
    description: Page values.
    types:
    - uid: UserContract
      isArray: true
  - name: count
    description: Total record count number across all pages.
    types:
    - uid: integer
  - name: nextLink
    description: Next page link if any.
    types:
    - uid: string
- name: ErrorResponse
  description: Error Response.
  kind: object
  properties:
  - name: error.code
    description: Service-defined error code. This code serves as a sub-status for the HTTP error code specified in the response.
    types:
    - uid: string
  - name: error.message
    description: Human-readable representation of the error.
    types:
    - uid: string
  - name: error.details
    description: The list of invalid fields send in request, in case of validation error.
    types:
    - uid: ErrorFieldContract
      isArray: true
- name: UserContract
  description: User details.
  kind: object
  properties:
  - name: properties.firstName
    description: First name.
    types:
    - uid: string
  - name: properties.lastName
    description: Last name.
    types:
    - uid: string
  - name: properties.email
    description: Email address.
    types:
    - uid: string
  - name: properties.registrationDate
    description: 'Date of user registration. The date conforms to the following format: `yyyy-MM-ddTHH:mm:ssZ` as specified by the ISO 8601 standard.'
    types:
    - uid: string
  - name: properties.groups
    isReadyOnly: true
    description: Collection of groups user is part of.
    types:
    - uid: GroupContractProperties
      isArray: true
  - name: id
    isReadyOnly: true
    description: Fully qualified resource ID for the resource. Ex - /subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/{resourceProviderNamespace}/{resourceType}/{resourceName}
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: The name of the resource
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: The type of the resource. E.g. "Microsoft.Compute/virtualMachines" or "Microsoft.Storage/storageAccounts"
    types:
    - uid: string
  - name: properties.state
    description: Account state. Specifies whether the user is active or not. Blocked users are unable to sign into the developer portal or call any APIs of subscribed products. Default state is Active.
    types:
    - uid: UserState
    defaultValue: active
  - name: properties.note
    description: Optional note about a user set by the administrator.
    types:
    - uid: string
  - name: properties.identities
    description: Collection of user identities.
    types:
    - uid: UserIdentityContract
      isArray: true
- name: ErrorFieldContract
  description: Error Field contract.
  kind: object
  properties:
  - name: code
    description: Property level error code.
    types:
    - uid: string
  - name: message
    description: Human-readable representation of property-level error.
    types:
    - uid: string
  - name: target
    description: Property name.
    types:
    - uid: string
- name: GroupContractProperties
  description: Group contract Properties.
  kind: object
  properties:
  - name: displayName
    description: Group name.
    types:
    - uid: string
  - name: description
    description: Group description. Can contain HTML formatting tags.
    types:
    - uid: string
  - name: builtIn
    isReadyOnly: true
    description: true if the group is one of the three system groups (Administrators, Developers, or Guests); otherwise false.
    types:
    - uid: boolean
  - name: type
    description: Group type.
    types:
    - uid: GroupType
  - name: externalId
    description: For external groups, this property contains the id of the group from the external identity provider, e.g. for Azure Active Directory `aad://<tenant>.onmicrosoft.com/groups/<group object id>`; otherwise the value is null.
    types:
    - uid: string
- name: UserState
  description: Account state. Specifies whether the user is active or not. Blocked users are unable to sign into the developer portal or call any APIs of subscribed products. Default state is Active.
  kind: enum
  properties:
  - name: active
    description: User state is active.
    types:
    - uid: string
  - name: blocked
    description: User is blocked. Blocked users cannot authenticate at developer portal or call API.
    types:
    - uid: string
  - name: pending
    description: User account is pending. Requires identity confirmation before it can be made active.
    types:
    - uid: string
  - name: deleted
    description: User account is closed. All identities and related entities are removed.
    types:
    - uid: string
- name: UserIdentityContract
  description: User identity details.
  kind: object
  properties:
  - name: provider
    description: Identity provider name.
    types:
    - uid: string
  - name: id
    description: Identifier value within provider.
    types:
    - uid: string
- name: GroupType
  description: Group type.
  kind: enum
  properties:
  - name: custom
    types:
    - uid: string
  - name: system
    types:
    - uid: string
  - name: external
    types:
    - uid: string
examples:
- name: ApiManagementListUsers
  request:
    uri: GET https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/users?api-version=2021-08-01
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      GET https://management.azure.com/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/users?api-version=2021-08-01
      ```

      # [Java](#tab/Java)
      ``` java
      import com.azure.core.util.Context;

      /** Samples for User ListByService. */
      public final class Main {
          /*
           * x-ms-original-file: specification/apimanagement/resource-manager/Microsoft.ApiManagement/stable/2021-08-01/examples/ApiManagementListUsers.json
           */
          /**
           * Sample code: ApiManagementListUsers.
           *
           * @param manager Entry point to ApiManagementManager.
           */
          public static void apiManagementListUsers(com.azure.resourcemanager.apimanagement.ApiManagementManager manager) {
              manager.users().listByService("rg1", "apimService1", null, null, null, null, Context.NONE);
          }
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-java/blob/azure-resourcemanager-apimanagement_1.0.0-beta.3/sdk/apimanagement/azure-resourcemanager-apimanagement/README.md) on how to add the SDK to your project and authenticate.
      # [Go](#tab/Go)
      ``` go
      package armapimanagement_test

      import (
      	"context"
      	"log"

      	"github.com/Azure/azure-sdk-for-go/sdk/azidentity"
      	"github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/apimanagement/armapimanagement"
      )

      // Generated from example definition: https://github.com/Azure/azure-rest-api-specs/tree/main/specification/apimanagement/resource-manager/Microsoft.ApiManagement/stable/2021-08-01/examples/ApiManagementListUsers.json
      func ExampleUserClient_NewListByServicePager() {
      	cred, err := azidentity.NewDefaultAzureCredential(nil)
      	if err != nil {
      		log.Fatalf("failed to obtain a credential: %v", err)
      	}
      	ctx := context.Background()
      	client, err := armapimanagement.NewUserClient("subid", cred, nil)
      	if err != nil {
      		log.Fatalf("failed to create client: %v", err)
      	}
      	pager := client.NewListByServicePager("rg1",
      		"apimService1",
      		&armapimanagement.UserClientListByServiceOptions{Filter: nil,
      			Top:          nil,
      			Skip:         nil,
      			ExpandGroups: nil,
      		})
      	for pager.More() {
      		nextResult, err := pager.NextPage(ctx)
      		if err != nil {
      			log.Fatalf("failed to advance page: %v", err)
      		}
      		for _, v := range nextResult.Value {
      			// TODO: use page item
      			_ = v
      		}
      	}
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-go/blob/sdk%2Fresourcemanager%2Fapimanagement%2Farmapimanagement%2Fv1.0.0/sdk/resourcemanager/apimanagement/armapimanagement/README.md) on how to add the SDK to your project and authenticate.
      # [JavaScript](#tab/JavaScript)
      ``` js
      const { ApiManagementClient } = require("@azure/arm-apimanagement");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to Lists a collection of registered users in the specified service instance.
       *
       * @summary Lists a collection of registered users in the specified service instance.
       * x-ms-original-file: specification/apimanagement/resource-manager/Microsoft.ApiManagement/stable/2021-08-01/examples/ApiManagementListUsers.json
       */
      async function apiManagementListUsers() {
        const subscriptionId = "subid";
        const resourceGroupName = "rg1";
        const serviceName = "apimService1";
        const credential = new DefaultAzureCredential();
        const client = new ApiManagementClient(credential, subscriptionId);
        const resArray = new Array();
        for await (let item of client.user.listByService(resourceGroupName, serviceName)) {
          resArray.push(item);
        }
        console.log(resArray);
      }

      apiManagementListUsers().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-apimanagement_8.1.2/sdk/apimanagement/arm-apimanagement/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "value": [
          {
            "id": "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/users/1",
            "type": "Microsoft.ApiManagement/service/users",
            "name": "1",
            "properties": {
              "firstName": "Administrator",
              "lastName": "",
              "email": "admin@live.com",
              "state": "active",
              "registrationDate": "2015-09-22T01:57:39.677Z",
              "identities": [
                {
                  "provider": "Azure",
                  "id": "admin@live.com"
                }
              ]
            }
          },
          {
            "id": "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/users/56eaec62baf08b06e46d27fd",
            "type": "Microsoft.ApiManagement/service/users",
            "name": "56eaec62baf08b06e46d27fd",
            "properties": {
              "firstName": "foo",
              "lastName": "bar",
              "email": "foo.bar.83@gmail.com",
              "state": "active",
              "registrationDate": "2016-03-17T17:41:56.327Z",
              "identities": [
                {
                  "provider": "Basic",
                  "id": "foo.bar.83@gmail.com"
                }
              ]
            }
          },
          {
            "id": "/subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/users/5931a75ae4bbd512a88c680b",
            "type": "Microsoft.ApiManagement/service/users",
            "name": "5931a75ae4bbd512a88c680b",
            "properties": {
              "firstName": "foo",
              "lastName": "bar",
              "email": "foobar@outlook.com",
              "state": "active",
              "registrationDate": "2017-06-02T17:58:50.357Z",
              "identities": [
                {
                  "provider": "Microsoft",
                  "id": "*************"
                }
              ]
            }
          }
        ],
        "count": 3,
        "nextLink": ""
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow.
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: >
    Learn more about API Management service - Lists a collection of registered users in the specified service instance.
errorCodes: []
