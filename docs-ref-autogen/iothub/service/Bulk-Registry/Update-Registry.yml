### YamlMime:RESTOperation
uid: fully-qualified-iothubname.azure-devices.net.iothub.service.bulkregistry.updateregistry
name: Update Registry
service: IoT Hub
groupName: Bulk Registry
apiVersion: 2020-05-31-preview
summary: Creates, updates, or deletes the identities of multiple devices from the IoT Hub identity registry. A device identity can be specified only once in the list. Different operations (create, update, delete) on different devices are allowed. A maximum of 100 devices can be specified per invocation. For large scale operations, use the import feature using blob storage (https://docs.microsoft.com/azure/iot-hub/iot-hub-devguide-identity-registry#import-and-export-device-identities).
consumes:
- application/json
produces:
- application/json
paths:
- content: POST https://fully-qualified-iothubname.azure-devices.net/devices?api-version=2020-05-31-preview
uriParameters:
- name: api-version
  in: query
  isRequired: true
  description: Version of the Api.
  types:
  - uid: string
responses:
- name: 200 OK
  description: OK.
  types:
  - uid: BulkRegistryOperationResult
- name: 400 Bad Request
  description: Bad Request.
  types:
  - uid: BulkRegistryOperationResult
requestBody:
- name: default
  parameters:
  - name: devices
    in: body
    description: The registry operations to perform.
    types:
    - uid: ExportImportDevice
      isArray: true
requestHeader: []
definitions:
- name: AuthenticationMechanism
  kind: object
  properties:
  - name: symmetricKey
    description: The primary and secondary keys used for SAS based authentication.
    types:
    - uid: SymmetricKey
  - name: x509Thumbprint
    description: The primary and secondary x509 thumbprints used for x509 based authentication.
    types:
    - uid: X509Thumbprint
  - name: type
    description: The type of authentication used to connect to the service.
    types:
    - uid: sas
    - uid: selfSigned
    - uid: certificateAuthority
    - uid: none
    typesTitle: enum
- name: PropertyContainer
  description: The desired and reported properties of the twin. The maximum depth of the object is 10.
  kind: object
  properties:
  - name: desired
    description: The collection of desired property key-value pairs. The keys are UTF-8 encoded, case-sensitive and up-to 1KB in length. Allowed characters exclude UNICODE control characters (segments C0 and C1), '.', '$' and space. The desired porperty values are JSON objects, up-to 4KB in length.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: object
  - name: reported
    description: The collection of reported property key-value pairs. The keys are UTF-8 encoded, case-sensitive and up-to 1KB in length. Allowed characters exclude UNICODE control characters (segments C0 and C1), '.', '$' and space. The reported property values are JSON objects, up-to 4KB in length.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: object
- name: DeviceCapabilities
  description: The status of capabilities enabled on the device.
  kind: object
  properties:
  - name: iotEdge
    description: The property that determines if the device is an edge device or not.
    types:
    - uid: boolean
- name: BulkRegistryOperationResult
  description: The result of the bulk registry operation.
  kind: object
  properties:
  - name: isSuccessful
    description: The operation result.
    types:
    - uid: boolean
  - name: errors
    description: The device registry operation errors.
    types:
    - uid: DeviceRegistryOperationError
      isArray: true
  - name: warnings
    description: The device registry operation warnings.
    types:
    - uid: DeviceRegistryOperationWarning
      isArray: true
- name: ExportImportDevice
  kind: object
  properties:
  - name: id
    description: The unique identifier of the device.
    types:
    - uid: string
  - name: moduleId
    description: The unique identifier of the module, if applicable.
    types:
    - uid: string
  - name: eTag
    description: The string representing a weak ETag for the device RFC7232. The value is only used if import mode is updateIfMatchETag, in that case the import operation is performed only if this ETag matches the value maintained by the server.
    types:
    - uid: string
  - name: importMode
    description: The type of registry operation and ETag preferences.
    types:
    - uid: create
    - uid: update
    - uid: updateIfMatchETag
    - uid: delete
    - uid: deleteIfMatchETag
    - uid: updateTwin
    - uid: updateTwinIfMatchETag
    typesTitle: enum
  - name: status
    description: The status of the module. If disabled, the module cannot connect to the service.
    types:
    - uid: enabled
    - uid: disabled
    typesTitle: enum
  - name: statusReason
    description: The 128 character-long string that stores the reason for the device identity status. All UTF-8 characters are allowed.
    types:
    - uid: string
  - name: authentication
    description: The authentication mechanism used by the module. This parameter is optional and defaults to SAS if not provided. In that case, primary/secondary access keys are auto-generated.
    types:
    - uid: AuthenticationMechanism
  - name: twinETag
    description: The string representing a weak ETag for the device twin RFC7232. The value is only used if import mode is updateIfMatchETag, in that case the import operation is performed only if this ETag matches the value maintained by the server.
    types:
    - uid: string
  - name: tags
    description: The JSON document read and written by the solution back end. The tags are not visible to device apps.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: object
  - name: properties
    description: The desired and reported properties for the device.
    types:
    - uid: PropertyContainer
  - name: capabilities
    description: The status of capabilities enabled on the device.
    types:
    - uid: DeviceCapabilities
  - name: deviceScope
    description: The scope of the device.
    types:
    - uid: string
- name: SymmetricKey
  kind: object
  properties:
  - name: primaryKey
    description: The base64 encoded primary key of the device.
    types:
    - uid: string
  - name: secondaryKey
    description: The base64 encoded secondary key of the device.
    types:
    - uid: string
- name: X509Thumbprint
  kind: object
  properties:
  - name: primaryThumbprint
    description: The X509 client certificate primary thumbprint.
    types:
    - uid: string
  - name: secondaryThumbprint
    description: The X509 client certificate secondary thumbprint.
    types:
    - uid: string
- name: DeviceRegistryOperationError
  description: The device registry operation error details.
  kind: object
  properties:
  - name: deviceId
    description: The unique identifier of the device.
    types:
    - uid: string
  - name: errorCode
    description: The error code.
    types:
    - uid: InvalidErrorCode
    - uid: GenericBadRequest
    - uid: InvalidProtocolVersion
    - uid: DeviceInvalidResultCount
    - uid: InvalidOperation
    - uid: ArgumentInvalid
    - uid: ArgumentNull
    - uid: IotHubFormatError
    - uid: DeviceStorageEntitySerializationError
    - uid: BlobContainerValidationError
    - uid: ImportWarningExistsError
    - uid: InvalidSchemaVersion
    - uid: DeviceDefinedMultipleTimes
    - uid: DeserializationError
    - uid: BulkRegistryOperationFailure
    - uid: DefaultStorageEndpointNotConfigured
    - uid: InvalidFileUploadCorrelationId
    - uid: ExpiredFileUploadCorrelationId
    - uid: InvalidStorageEndpoint
    - uid: InvalidMessagingEndpoint
    - uid: InvalidFileUploadCompletionStatus
    - uid: InvalidStorageEndpointOrBlob
    - uid: RequestCanceled
    - uid: InvalidStorageEndpointProperty
    - uid: EtagDoesNotMatch
    - uid: RequestTimedOut
    - uid: UnsupportedOperationOnReplica
    - uid: NullMessage
    - uid: ConnectionForcefullyClosedOnNewConnection
    - uid: InvalidDeviceScope
    - uid: ConnectionForcefullyClosedOnFaultInjection
    - uid: ConnectionRejectedOnFaultInjection
    - uid: InvalidEndpointAuthenticationType
    - uid: ManagedIdentityNotEnabled
    - uid: InvalidRouteTestInput
    - uid: InvalidSourceOnRoute
    - uid: RoutingNotEnabled
    - uid: InvalidContentEncodingOrType
    - uid: InvalidEndorsementKey
    - uid: InvalidRegistrationId
    - uid: InvalidStorageRootKey
    - uid: InvalidEnrollmentGroupId
    - uid: TooManyEnrollments
    - uid: RegistrationIdDefinedMultipleTimes
    - uid: CustomAllocationFailed
    - uid: CustomAllocationIotHubNotSpecified
    - uid: CustomAllocationUnauthorizedAccess
    - uid: CannotRegisterModuleToModule
    - uid: TenantHubRoutingNotEnabled
    - uid: InvalidConfigurationTargetCondition
    - uid: InvalidConfigurationContent
    - uid: CannotModifyImmutableConfigurationContent
    - uid: InvalidConfigurationCustomMetricsQuery
    - uid: InvalidPnPInterfaceDefinition
    - uid: InvalidPnPDesiredProperties
    - uid: InvalidPnPReportedProperties
    - uid: InvalidPnPWritableReportedProperties
    - uid: InvalidDigitalTwinJsonPatch
    - uid: InvalidDigitalTwinPayload
    - uid: InvalidDigitalTwinPatch
    - uid: InvalidDigitalTwinPatchPath
    - uid: GenericUnauthorized
    - uid: IotHubNotFound
    - uid: IotHubUnauthorizedAccess
    - uid: IotHubUnauthorized
    - uid: ElasticPoolNotFound
    - uid: SystemModuleModifyUnauthorizedAccess
    - uid: GenericForbidden
    - uid: IotHubSuspended
    - uid: IotHubQuotaExceeded
    - uid: JobQuotaExceeded
    - uid: DeviceMaximumQueueDepthExceeded
    - uid: IotHubMaxCbsTokenExceeded
    - uid: DeviceMaximumActiveFileUploadLimitExceeded
    - uid: DeviceMaximumQueueSizeExceeded
    - uid: RoutingEndpointResponseForbidden
    - uid: InvalidMessageExpiryTime
    - uid: OperationNotAvailableInCurrentTier
    - uid: KeyEncryptionKeyRevoked
    - uid: DeviceModelMaxPropertiesExceeded
    - uid: DeviceModelMaxIndexablePropertiesExceeded
    - uid: IotDpsSuspended
    - uid: IotDpsSuspending
    - uid: GenericNotFound
    - uid: DeviceNotFound
    - uid: JobNotFound
    - uid: QuotaMetricNotFound
    - uid: SystemPropertyNotFound
    - uid: AmqpAddressNotFound
    - uid: RoutingEndpointResponseNotFound
    - uid: CertificateNotFound
    - uid: ElasticPoolTenantHubNotFound
    - uid: ModuleNotFound
    - uid: AzureTableStoreNotFound
    - uid: IotHubFailingOver
    - uid: FeatureNotSupported
    - uid: DigitalTwinInterfaceNotFound
    - uid: QueryStoreClusterNotFound
    - uid: DeviceNotOnline
    - uid: DeviceConnectionClosedRemotely
    - uid: EnrollmentNotFound
    - uid: DeviceRegistrationNotFound
    - uid: AsyncOperationNotFound
    - uid: EnrollmentGroupNotFound
    - uid: DeviceRecordNotFound
    - uid: GroupRecordNotFound
    - uid: DeviceGroupNotFound
    - uid: ProvisioningSettingsNotFound
    - uid: ProvisioningRecordNotFound
    - uid: LinkedHubNotFound
    - uid: CertificateAuthorityNotFound
    - uid: ConfigurationNotFound
    - uid: GroupNotFound
    - uid: DigitalTwinModelNotFound
    - uid: InterfaceNameModelNotFound
    - uid: GenericMethodNotAllowed
    - uid: OperationNotAllowedInCurrentState
    - uid: ImportDevicesNotSupported
    - uid: BulkAddDevicesNotSupported
    - uid: GenericConflict
    - uid: DeviceAlreadyExists
    - uid: LinkCreationConflict
    - uid: CallbackSubscriptionConflict
    - uid: ModelAlreadyExists
    - uid: DeviceLocked
    - uid: DeviceJobAlreadyExists
    - uid: JobAlreadyExists
    - uid: EnrollmentConflict
    - uid: EnrollmentGroupConflict
    - uid: RegistrationStatusConflict
    - uid: DeviceRecordConflict
    - uid: GroupRecordConflict
    - uid: DeviceGroupConflict
    - uid: ProvisioningSettingsConflict
    - uid: ProvisioningRecordConflict
    - uid: LinkedHubConflict
    - uid: CertificateAuthorityConflict
    - uid: ModuleAlreadyExistsOnDevice
    - uid: ConfigurationAlreadyExists
    - uid: ApplyConfigurationAlreadyInProgressOnDevice
    - uid: DigitalTwinModelAlreadyExists
    - uid: DigitalTwinModelExistsWithOtherModelType
    - uid: InterfaceNameModelAlreadyExists
    - uid: GenericPreconditionFailed
    - uid: PreconditionFailed
    - uid: DeviceMessageLockLost
    - uid: JobRunPreconditionFailed
    - uid: InflightMessagesInLink
    - uid: GenericRequestEntityTooLarge
    - uid: MessageTooLarge
    - uid: TooManyDevices
    - uid: TooManyModulesOnDevice
    - uid: ConfigurationCountLimitExceeded
    - uid: DigitalTwinModelCountLimitExceeded
    - uid: InterfaceNameCompressionModelCountLimitExceeded
    - uid: GenericUnsupportedMediaType
    - uid: IncompatibleDataType
    - uid: GenericTooManyRequests
    - uid: ThrottlingException
    - uid: ThrottleBacklogLimitExceeded
    - uid: ThrottlingBacklogTimeout
    - uid: ThrottlingMaxActiveJobCountExceeded
    - uid: DeviceThrottlingLimitExceeded
    - uid: ClientClosedRequest
    - uid: GenericServerError
    - uid: ServerError
    - uid: JobCancelled
    - uid: StatisticsRetrievalError
    - uid: ConnectionForcefullyClosed
    - uid: InvalidBlobState
    - uid: BackupTimedOut
    - uid: AzureStorageTimeout
    - uid: GenericTimeout
    - uid: InvalidThrottleParameter
    - uid: EventHubLinkAlreadyClosed
    - uid: ReliableBlobStoreError
    - uid: RetryAttemptsExhausted
    - uid: AzureTableStoreError
    - uid: CheckpointStoreNotFound
    - uid: DocumentDbInvalidReturnValue
    - uid: ReliableDocDbStoreStoreError
    - uid: ReliableBlobStoreTimeoutError
    - uid: ConfigReadFailed
    - uid: InvalidContainerReceiveLink
    - uid: InvalidPartitionEpoch
    - uid: RestoreTimedOut
    - uid: StreamReservationFailure
    - uid: SerializationError
    - uid: UnexpectedPropertyValue
    - uid: OrchestrationOperationFailed
    - uid: ModelRepoEndpointError
    - uid: ResolutionError
    - uid: UnableToFetchCredentials
    - uid: UnableToFetchTenantInfo
    - uid: UnableToShareIdentity
    - uid: UnableToExpandDiscoveryInfo
    - uid: UnableToExpandComponentInfo
    - uid: UnableToCompressComponentInfo
    - uid: UnableToCompressDiscoveryInfo
    - uid: OrphanDiscoveryDocument
    - uid: GenericBadGateway
    - uid: InvalidResponseWhileProxying
    - uid: GenericServiceUnavailable
    - uid: ServiceUnavailable
    - uid: PartitionNotFound
    - uid: IotHubActivationFailed
    - uid: ServerBusy
    - uid: IotHubRestoring
    - uid: ReceiveLinkOpensThrottled
    - uid: ConnectionUnavailable
    - uid: DeviceUnavailable
    - uid: ConfigurationNotAvailable
    - uid: GroupNotAvailable
    - uid: HostingServiceNotAvailable
    - uid: GenericGatewayTimeout
    - uid: GatewayTimeout
    typesTitle: enum
  - name: errorStatus
    description: The details of the error.
    types:
    - uid: string
  - name: moduleId
    description: The unique identifier of the module, if applicable.
    types:
    - uid: string
  - name: operation
    description: The type of the operation that failed.
    types:
    - uid: string
- name: DeviceRegistryOperationWarning
  description: The device registry operation warning details.
  kind: object
  properties:
  - name: deviceId
    description: The unique identifier of the device.
    types:
    - uid: string
  - name: warningCode
    description: The warning code.
    types:
    - uid: DeviceRegisteredWithoutTwin
    typesTitle: enum
  - name: warningStatus
    description: The details of the warning.
    types:
    - uid: string
examples: []
security: []
metadata:
  description: Creates, updates, or deletes the identities of multiple devices from the IoT Hub identity registry. A device identity can be specified only once in the list.
errorCodes: []
