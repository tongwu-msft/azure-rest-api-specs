{
  "swagger": "2.0",
  "info": {
    "version": "2019-07-01-preview",
    "contact": {
      "name": "Â© Microsoft 2019",
      "url": "http://www.microsoft.com",
      "email": "support@microsoft.com"
    },
    "title": "DigitalTwin Repository Service.",
    "description": "DigitalTwin Model Repository Service."
  },
  "schemes": [
    "https"
  ],
  "paths": {
    "/models/{modelId}": {
      "put": {
        "tags": [
          "Models"
        ],
        "summary": "Creates or updates a DigitalTwin Model in a repository.",
        "operationId": "CreateOrUpdateModel",
        "consumes": [
          "application/ld+json",
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "modelId",
            "in": "path",
            "description": "Digital twin model id Ex: <example>urn:contoso:TemparatureSensor:1</example>",
            "required": true,
            "type": "string"
          },
          {
            "name": "repositoryId",
            "in": "query",
            "description": "Private repository id. To access global repository, caller should not specify this value.",
            "required": false,
            "type": "string"
          },
          {
            "name": "x-ms-client-request-id",
            "in": "header",
            "description": "Optional. Provides a client-generated opaque value that is recorded in the logs. Using this header is highly recommended for correlating client-side activities with requests received by the server.",
            "required": false,
            "type": "string"
          },
          {
            "name": "Authorization",
            "in": "header",
            "description": "Optional. Authorization header to access private repository. See https://aka.ms/iot-pnp-sas for more details.",
            "required": false,
            "type": "string"
          },
          {
            "name": "api-version",
            "in": "query",
            "description": "Api version string.",
            "required": true,
            "type": "string"
          },
          {
            "name": "If-Match",
            "in": "header",
            "description": "Used to make operation conditional for optimistic concurrency. That is, the document is updated only if the specified etag matches the current version in the database. The value should be set to the etag value of the resource.",
            "required": false,
            "type": "string"
          },
          {
            "name": "content",
            "in": "body",
            "description": "Model definition in Digital Twin Definition Language format.",
            "required": true,
            "schema": {
              "type": "object"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Success. See https://aka.ms/iot-pnp-rest for definitions of headers in response.",
            "headers": {
              "x-ms-request-id": {
                "description": "This header is generated by server and uniquely identifies the request that was made and can be used for troubleshooting the request.",
                "type": "string"
              },
              "ETag": {
                "description": "Etag of the model definition.",
                "type": "string"
              }
            }
          },
          "204": {
            "description": "Success. See https://aka.ms/iot-pnp-rest for definitions of headers of response.",
            "headers": {
              "x-ms-request-id": {
                "description": "This header is generated by server and uniquely identifies the request that was made and can be used for troubleshooting the request.",
                "type": "string"
              },
              "ETag": {
                "description": "Etag of the model definition.",
                "type": "string"
              }
            }
          },
          "412": {
            "description": "Success. See https://aka.ms/iot-pnp-rest for definitions of headers of response.",
            "headers": {
              "x-ms-request-id": {
                "description": "This header is generated by server and uniquely identifies the request that was made and can be used for troubleshooting the request.",
                "type": "string"
              }
            }
          }
        },
        "x-internal-toc-name": "Create Or Update Model"
      }
    }
  },
  "definitions": {
    "SearchOptions": {
      "type": "object",
      "properties": {
        "searchKeyword": {
          "type": "string"
        },
        "modelFilterType": {
          "enum": [
            "interface",
            "capabilityModel"
          ],
          "type": "string"
        },
        "continuationToken": {
          "type": "string"
        },
        "pageSize": {
          "format": "int32",
          "type": "integer"
        }
      }
    },
    "SearchResponse": {
      "type": "object",
      "properties": {
        "continuationToken": {
          "type": "string"
        },
        "results": {
          "uniqueItems": false,
          "type": "array",
          "items": {
            "$ref": "#/definitions/ModelInformation"
          }
        }
      }
    },
    "ModelInformation": {
      "type": "object",
      "properties": {
        "comment": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "displayName": {
          "type": "string"
        },
        "urnId": {
          "type": "string"
        },
        "modelName": {
          "type": "string"
        },
        "version": {
          "format": "int32",
          "type": "integer"
        },
        "type": {
          "enum": [
            "interface",
            "capabilityModel"
          ],
          "type": "string"
        },
        "etag": {
          "type": "string"
        },
        "publisherId": {
          "type": "string"
        },
        "publisherName": {
          "type": "string"
        },
        "createdOn": {
          "format": "date-time",
          "type": "string"
        },
        "updatedOn": {
          "format": "date-time",
          "type": "string"
        }
      }
    }
  },
  "x-internal-service-id": "iothub",
  "x-internal-service-name": "IoT Hub",
  "x-internal-toc-name": "Create Or Update Model",
  "x-internal-product-uid": null,
  "x-internal-split-type": "Operation",
  "x-internal-operation-id": "CreateOrUpdateModel",
  "x-internal-operation-name": "Create Or Update Model"
}