### YamlMime:RESTOperation
summary: Updates tags and desired properties of a device twin. Update a device twin. See https://docs.microsoft.com/azure/iot-hub/iot-hub-devguide-device-twins for more information.
service: IoT Hub
apiVersion: 2016-11-14
groupName: Device Twin Api
consumes:
- application/json
- text/json
produces:
- application/json
- text/json
paths:
- content: PATCH https://<fully-qualified IoT hub domain name>/twins/{id}?api-version=2016-11-14
uriParameters:
- in: query
  isRequired: true
  description: The version of the API.
  types:
  - uid: string
  name: api-version
responses:
- description: OK
  types:
  - uid: DeviceTwinInfo
  name: 200 OK
requestBody:
- parameters:
  - in: body
    description: The deviceId uniquely identifies the device in the IoT hub's identity registry. A case-sensitive string (up to 128 char long) of ASCII 7-bit alphanumeric chars + {'-', ':', '.', '+', '%', '_', '#', '*', '?', '!', '(', ')', ',', '=', '@', ';', '$', '''}.
    types:
    - uid: string
    name: DeviceId
  - in: body
    description: The last time the device connected, received or sent a message. In ISO8601 datetime format in UTC, for example, 2015-01-28T16:24:48.789Z. This does not update if the device uses the HTTP/1 protocol to perform messaging operations.
    types:
    - uid: VariantValueDateTime
    name: LastActivityTimeUtc
  - in: body
    description: Indicates if the device is currently connected to the IoT hub or not.
    types:
    - uid: boolean
    name: IsConnected
  - in: body
    description: The last time the device connected to the IoT hub. In ISO8601 datetime format in UTC, for example, 2015-01-28T16:24:48.789Z. This does not update if the device uses the HTTP/1 protocol to perform messaging operations.
    types:
    - uid: VariantValueDateTime
    name: LastConnectedTimeUtc
  - in: body
    description: Version for device twin, including tags and desired properties
    types:
    - uid: integer
    name: Version
  - in: body
    description: A JSON document read and written by the solution back end. Tags are not visible to device apps.
    types:
    - isDictionary: true
      additionalTypes:
      - uid: string
      - uid: object
      uid: object
    name: Tags
  - in: body
    description: Used in conjunction with reported properties to synchronize device configuration or condition. Desired properties can only be set by the solution back end and can be read by the device app. The device app can also be notified in real time of changes on the desired properties.
    types:
    - uid: DeviceTwinProperties
    name: DesiredProperties
  - in: body
    description: Used in conjunction with desired properties to synchronize device configuration or condition. Reported properties can only be set by the device app and can be read and queried by the solution back end.
    types:
    - uid: DeviceTwinProperties
    name: ReportedProperties
  - in: body
    description: Provisioning state of device twin.
    types:
    - uid: ProvisioningState
    name: ProvisioningState
requestHeader: []
definitions:
- name: VariantValueDateTime
  description: The last time the device connected, received or sent a message. In ISO8601 datetime format in UTC, for example, 2015-01-28T16:24:48.789Z. This does not update if the device uses the HTTP/1 protocol to perform messaging operations.
  kind: object
  properties:
  - isReadyOnly: true
    description: ''
    types:
    - uid: string
    name: Value
  - isReadyOnly: true
    description: ''
    types:
    - uid: object
    name: ObjectValue
  - isReadyOnly: true
    description: ''
    types:
    - uid: boolean
    name: IsNull
- name: DeviceTwinProperties
  description: Used in conjunction with reported properties to synchronize device configuration or condition. Desired properties can only be set by the solution back end and can be read by the device app. The device app can also be notified in real time of changes on the desired properties.
  kind: object
  properties:
  - description: Version of device twin properties.
    types:
    - uid: integer
    name: Version
  - description: Properties JSON element.
    types:
    - isDictionary: true
      additionalTypes:
      - uid: string
      - uid: object
      uid: object
    name: Properties
  - description: Metadata information for the properties JSON document.
    types:
    - uid: Metadata
    name: Metadata
- name: DeviceTwinInfo
  description: Container of IoT Hub device twin properties and their accessors.
  kind: object
  properties:
  - description: The deviceId uniquely identifies the device in the IoT hub's identity registry. A case-sensitive string (up to 128 char long) of ASCII 7-bit alphanumeric chars + {'-', ':', '.', '+', '%', '_', '#', '*', '?', '!', '(', ')', ',', '=', '@', ';', '$', '''}.
    types:
    - uid: string
    name: DeviceId
  - description: The last time the device connected, received or sent a message. In ISO8601 datetime format in UTC, for example, 2015-01-28T16:24:48.789Z. This does not update if the device uses the HTTP/1 protocol to perform messaging operations.
    types:
    - uid: VariantValueDateTime
    name: LastActivityTimeUtc
  - description: Indicates if the device is currently connected to the IoT hub or not.
    types:
    - uid: boolean
    name: IsConnected
  - description: The last time the device connected to the IoT hub. In ISO8601 datetime format in UTC, for example, 2015-01-28T16:24:48.789Z. This does not update if the device uses the HTTP/1 protocol to perform messaging operations.
    types:
    - uid: VariantValueDateTime
    name: LastConnectedTimeUtc
  - description: Version for device twin, including tags and desired properties
    types:
    - uid: integer
    name: Version
  - description: A JSON document read and written by the solution back end. Tags are not visible to device apps.
    types:
    - isDictionary: true
      additionalTypes:
      - uid: string
      - uid: object
      uid: object
    name: Tags
  - description: Used in conjunction with reported properties to synchronize device configuration or condition. Desired properties can only be set by the solution back end and can be read by the device app. The device app can also be notified in real time of changes on the desired properties.
    types:
    - uid: DeviceTwinProperties
    name: DesiredProperties
  - description: Used in conjunction with desired properties to synchronize device configuration or condition. Reported properties can only be set by the device app and can be read and queried by the solution back end.
    types:
    - uid: DeviceTwinProperties
    name: ReportedProperties
  - description: Provisioning state of device twin.
    types:
    - uid: ProvisioningState
    name: ProvisioningState
- name: Metadata
  description: Metadata information for the properties JSON document.
  kind: object
  properties:
  - description: The last time the properties were updated. In ISO8601 datetime format in UTC, for example, 2015-01-28T16:24:48.789Z.
    types:
    - uid: VariantValueDateTime
    name: LastUpdatedUtc
  - description: This SHOULD be null for Reported properties metadata and MUST not be null for Desired properties metadata.
    types:
    - uid: integer
    name: LastUpdatedVersion
  - isReadyOnly: true
    description: True if nested properies are present.
    types:
    - uid: boolean
    name: HasChildren
  - isReadyOnly: true
    description: Nested properties.
    types:
    - {}
    name: Nested
- name: ProvisioningState
  description: Provisioning state of device twin.
  kind: enum
  properties:
  - types:
    - uid: string
    name: Creating
  - types:
    - uid: string
    name: Deleting
  - types:
    - uid: string
    name: Active
  - types:
    - uid: string
    name: Deleted
examples: []
security: []
name: Update Device Twin
uid: <fully-qualifiediothubdomainname>.iothub.devicetwinapi.updatedevicetwin
