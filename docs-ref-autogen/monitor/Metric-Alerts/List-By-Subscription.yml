### YamlMime:RESTOperation
uid: management.azure.com.monitor.metricalerts.listbysubscription
name: List By Subscription
service: Monitor
groupName: Metric Alerts
apiVersion: 2018-03-01
summary: Retrieve alert rule definitions in a subscription.
consumes:
- application/json
produces:
- application/json
paths:
- content: GET https://management.azure.com/subscriptions/{subscriptionId}/providers/Microsoft.Insights/metricAlerts?api-version=2018-03-01
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: The ID of the target subscription.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: The API version to use for this operation.
  types:
  - uid: string
responses:
- name: 200 OK
  description: Successful request for a list of metric alerts
  types:
  - uid: MetricAlertResourceCollection
- name: Other Status Codes
  description: BadRequest
  types:
  - uid: ErrorResponse
requestHeader: []
definitions:
- name: MetricAlertResourceCollection
  description: Represents a collection of alert rule resources.
  kind: object
  properties:
  - name: value
    description: the values for the alert rule resources.
    types:
    - uid: MetricAlertResource
      isArray: true
- name: ErrorResponse
  description: Describes the format of Error response.
  kind: object
  properties:
  - name: code
    description: Error code
    types:
    - uid: string
  - name: message
    description: Error message indicating why the operation failed.
    types:
    - uid: string
- name: MetricAlertResource
  description: The metric alert resource.
  kind: object
  properties:
  - name: properties.description
    description: the description of the metric alert that will be included in the alert email.
    types:
    - uid: string
  - name: properties.severity
    description: Alert severity {0, 1, 2, 3, 4}
    types:
    - uid: integer
  - name: properties.enabled
    description: the flag that indicates whether the metric alert is enabled.
    types:
    - uid: boolean
  - name: properties.scopes
    description: the list of resource id's that this metric alert is scoped to.
    types:
    - uid: string
      isArray: true
  - name: properties.evaluationFrequency
    description: how often the metric alert is evaluated represented in ISO 8601 duration format.
    types:
    - uid: string
  - name: properties.windowSize
    description: the period of time (in ISO 8601 duration format) that is used to monitor alert activity based on the threshold.
    types:
    - uid: string
  - name: properties.targetResourceType
    description: the resource type of the target resource(s) on which the alert is created/updated. Mandatory if the scope contains a subscription, resource group, or more than one resource.
    types:
    - uid: string
  - name: properties.targetResourceRegion
    description: the region of the target resource(s) on which the alert is created/updated. Mandatory if the scope contains a subscription, resource group, or more than one resource.
    types:
    - uid: string
  - name: properties.criteria
    description: defines the specific alert criteria information.
    types:
    - uid: MetricAlertSingleResourceMultipleMetricCriteria
    - uid: WebtestLocationAvailabilityCriteria
    - uid: MetricAlertMultipleResourceMultipleMetricCriteria
    typesTitle: MetricAlertCriteria
  - name: properties.autoMitigate
    description: the flag that indicates whether the alert should be auto resolved or not. The default is true.
    types:
    - uid: boolean
  - name: properties.actions
    description: the array of actions that are performed when the alert rule becomes active, and when an alert condition is resolved.
    types:
    - uid: MetricAlertAction
      isArray: true
  - name: properties.lastUpdatedTime
    isReadyOnly: true
    description: Last time the rule was updated in ISO8601 format.
    types:
    - uid: string
  - name: properties.isMigrated
    isReadyOnly: true
    description: the value indicating whether this alert rule is migrated.
    types:
    - uid: boolean
  - name: id
    isReadyOnly: true
    description: Azure resource Id
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: Azure resource name
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: Azure resource type
    types:
    - uid: string
  - name: location
    description: Resource location
    types:
    - uid: string
  - name: tags
    description: Resource tags
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
- name: MetricAlertAction
  description: An alert action.
  kind: object
  properties:
  - name: actionGroupId
    description: the id of the action group to use.
    types:
    - uid: string
  - name: webHookProperties
    description: This field allows specifying custom properties, which would be appended to the alert payload sent as input to the webhook.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
- name: MetricAlertSingleResourceMultipleMetricCriteria
  description: Specifies the metric alert criteria for a single resource that has multiple metric criteria.
  kind: object
  properties:
  - name: allOf
    description: "The list of metric criteria for this 'all of' operation. "
    types:
    - uid: MetricCriteria
      isArray: true
  - name: odata.type
    description: specifies the type of the alert criteria.
    types:
    - uid: Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria
    typesTitle: string
- name: WebtestLocationAvailabilityCriteria
  description: Specifies the metric alert rule criteria for a web test resource.
  kind: object
  properties:
  - name: webTestId
    description: The Application Insights web test Id.
    types:
    - uid: string
  - name: componentId
    description: The Application Insights resource Id.
    types:
    - uid: string
  - name: failedLocationCount
    description: The number of failed locations.
    types:
    - uid: number
  - name: odata.type
    description: specifies the type of the alert criteria.
    types:
    - uid: Microsoft.Azure.Monitor.WebtestLocationAvailabilityCriteria
    typesTitle: string
- name: MetricAlertMultipleResourceMultipleMetricCriteria
  description: Specifies the metric alert criteria for multiple resource that has multiple metric criteria.
  kind: object
  properties:
  - name: allOf
    description: "the list of multiple metric criteria for this 'all of' operation. "
    types:
    - uid: MetricCriteria
      isArray: true
    - uid: DynamicMetricCriteria
      isArray: true
    typesTitle: MultiMetricCriteria[]
  - name: odata.type
    description: specifies the type of the alert criteria.
    types:
    - uid: Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria
    typesTitle: string
- name: MetricCriteria
  description: Criterion to filter metrics.
  kind: object
  properties:
  - name: operator
    description: the criteria operator.
    types:
    - uid: Operator
  - name: threshold
    description: the criteria threshold value that activates the alert.
    types:
    - uid: number
  - name: criterionType
    description: Specifies the type of threshold criteria
    types:
    - uid: StaticThresholdCriterion
    typesTitle: string
  - name: name
    description: Name of the criteria.
    types:
    - uid: string
  - name: metricName
    description: Name of the metric.
    types:
    - uid: string
  - name: metricNamespace
    description: Namespace of the metric.
    types:
    - uid: string
  - name: timeAggregation
    description: the criteria time aggregation types.
    types:
    - uid: AggregationTypeEnum
  - name: dimensions
    description: List of dimension conditions.
    types:
    - uid: MetricDimension
      isArray: true
  - name: skipMetricValidation
    description: Allows creating an alert rule on a custom metric that isn't yet emitted, by causing the metric validation to be skipped.
    types:
    - uid: boolean
- name: Operator
  description: the criteria operator.
  kind: enum
  properties:
  - name: Equals
    types:
    - uid: string
  - name: GreaterThan
    types:
    - uid: string
  - name: GreaterThanOrEqual
    types:
    - uid: string
  - name: LessThan
    types:
    - uid: string
  - name: LessThanOrEqual
    types:
    - uid: string
- name: AggregationTypeEnum
  description: the criteria time aggregation types.
  kind: enum
  properties:
  - name: Average
    types:
    - uid: string
  - name: Count
    types:
    - uid: string
  - name: Minimum
    types:
    - uid: string
  - name: Maximum
    types:
    - uid: string
  - name: Total
    types:
    - uid: string
- name: MetricDimension
  description: Specifies a metric dimension.
  kind: object
  properties:
  - name: name
    description: Name of the dimension.
    types:
    - uid: string
  - name: operator
    description: the dimension operator. Only 'Include' and 'Exclude' are supported
    types:
    - uid: string
  - name: values
    description: list of dimension values.
    types:
    - uid: string
      isArray: true
- name: DynamicMetricCriteria
  description: Criterion for dynamic threshold.
  kind: object
  properties:
  - name: operator
    description: The operator used to compare the metric value against the threshold.
    types:
    - uid: DynamicThresholdOperator
  - name: alertSensitivity
    description: The extent of deviation required to trigger an alert. This will affect how tight the threshold is to the metric series pattern.
    types:
    - uid: DynamicThresholdSensitivity
  - name: failingPeriods
    description: The minimum number of violations required within the selected lookback time window required to raise an alert.
    types:
    - uid: DynamicThresholdFailingPeriods
  - name: ignoreDataBefore
    description: Use this option to set the date from which to start learning the metric historical data and calculate the dynamic thresholds (in ISO8601 format)
    types:
    - uid: string
  - name: criterionType
    description: Specifies the type of threshold criteria
    types:
    - uid: DynamicThresholdCriterion
    typesTitle: string
  - name: name
    description: Name of the criteria.
    types:
    - uid: string
  - name: metricName
    description: Name of the metric.
    types:
    - uid: string
  - name: metricNamespace
    description: Namespace of the metric.
    types:
    - uid: string
  - name: timeAggregation
    description: the criteria time aggregation types.
    types:
    - uid: AggregationTypeEnum
  - name: dimensions
    description: List of dimension conditions.
    types:
    - uid: MetricDimension
      isArray: true
  - name: skipMetricValidation
    description: Allows creating an alert rule on a custom metric that isn't yet emitted, by causing the metric validation to be skipped.
    types:
    - uid: boolean
- name: DynamicThresholdOperator
  description: The operator used to compare the metric value against the threshold.
  kind: enum
  properties:
  - name: GreaterThan
    types:
    - uid: string
  - name: LessThan
    types:
    - uid: string
  - name: GreaterOrLessThan
    types:
    - uid: string
- name: DynamicThresholdSensitivity
  description: The extent of deviation required to trigger an alert. This will affect how tight the threshold is to the metric series pattern.
  kind: enum
  properties:
  - name: Low
    types:
    - uid: string
  - name: Medium
    types:
    - uid: string
  - name: High
    types:
    - uid: string
- name: DynamicThresholdFailingPeriods
  description: The minimum number of violations required within the selected lookback time window required to raise an alert.
  kind: object
  properties:
  - name: numberOfEvaluationPeriods
    description: The number of aggregated lookback points. The lookback time window is calculated based on the aggregation granularity (windowSize) and the selected number of aggregated points.
    types:
    - uid: number
  - name: minFailingPeriodsToAlert
    description: The number of violations to trigger an alert. Should be smaller or equal to numberOfEvaluationPeriods.
    types:
    - uid: number
examples:
- name: List metric alert rules
  request:
    uri: GET https://management.azure.com/subscriptions/14ddf0c5-77c5-4b53-84f6-e1fa43ad68f7/providers/Microsoft.Insights/metricAlerts?api-version=2018-03-01
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      GET https://management.azure.com/subscriptions/14ddf0c5-77c5-4b53-84f6-e1fa43ad68f7/providers/Microsoft.Insights/metricAlerts?api-version=2018-03-01
      ```

      # [Go](#tab/Go)
      ``` go
      package armmonitor_test

      import (
      	"context"
      	"log"

      	"github.com/Azure/azure-sdk-for-go/sdk/azidentity"
      	"github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/monitor/armmonitor"
      )

      // Generated from example definition: https://github.com/Azure/azure-rest-api-specs/tree/main/specification/monitor/resource-manager/Microsoft.Insights/stable/2018-03-01/examples/listMetricAlert.json
      func ExampleMetricAlertsClient_NewListByResourceGroupPager() {
      	cred, err := azidentity.NewDefaultAzureCredential(nil)
      	if err != nil {
      		log.Fatalf("failed to obtain a credential: %v", err)
      	}
      	ctx := context.Background()
      	client, err := armmonitor.NewMetricAlertsClient("14ddf0c5-77c5-4b53-84f6-e1fa43ad68f7", cred, nil)
      	if err != nil {
      		log.Fatalf("failed to create client: %v", err)
      	}
      	pager := client.NewListByResourceGroupPager("gigtest",
      		nil)
      	for pager.More() {
      		nextResult, err := pager.NextPage(ctx)
      		if err != nil {
      			log.Fatalf("failed to advance page: %v", err)
      		}
      		for _, v := range nextResult.Value {
      			// TODO: use page item
      			_ = v
      		}
      	}
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-go/blob/sdk%2Fresourcemanager%2Fmonitor%2Farmmonitor%2Fv0.7.0/sdk/resourcemanager/monitor/armmonitor/README.md) on how to add the SDK to your project and authenticate.
      # [JavaScript](#tab/JavaScript)
      ``` js
      const { MonitorClient } = require("@azure/arm-monitor");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to Retrieve alert rule definitions in a resource group.
       *
       * @summary Retrieve alert rule definitions in a resource group.
       * x-ms-original-file: specification/monitor/resource-manager/Microsoft.Insights/stable/2018-03-01/examples/listMetricAlert.json
       */
      async function listMetricAlertRules() {
        const subscriptionId = "14ddf0c5-77c5-4b53-84f6-e1fa43ad68f7";
        const resourceGroupName = "gigtest";
        const credential = new DefaultAzureCredential();
        const client = new MonitorClient(credential, subscriptionId);
        const resArray = new Array();
        for await (let item of client.metricAlerts.listByResourceGroup(resourceGroupName)) {
          resArray.push(item);
        }
        console.log(resArray);
      }

      listMetricAlertRules().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-monitor_8.0.0-beta.2/sdk/monitor/arm-monitor/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "value": [
          {
            "id": "/subscriptions/14ddf0c5-77c5-4b53-84f6-e1fa43ad68f7/resourceGroups/gigtest/providers/providers/microsoft.insights/metricalerts/highcpu",
            "type": "Microsoft.Insights/metricAlerts",
            "location": "global",
            "tags": {
              "hidden-link:/subscriptions/b67f7fec-69fc-4974-9099-a26bd6ffeda3/resourceGroups/Rac46PostSwapRG/providers/Microsoft.Web/sites/leoalerttest": "Resource"
            },
            "properties": {
              "description": "This is the description of the rule1",
              "severity": 3,
              "enabled": true,
              "scopes": [
                "/subscriptions/14ddf0c5-77c5-4b53-84f6-e1fa43ad68f7/resourceGroups/gigtest/providers/Microsoft.Compute/virtualMachines/gigwadme"
              ],
              "evaluationFrequency": "Pt1m",
              "windowSize": "Pt15m",
              "criteria": {
                "odata.type": "Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria",
                "allOf": [
                  {
                    "criterionType": "StaticThresholdCriterion",
                    "name": "High_CPU_80",
                    "metricName": "CustomMetric_\\Processor(_Total)\\% Processor Time",
                    "dimensions": [],
                    "operator": "GreaterThan",
                    "threshold": 80.5,
                    "timeAggregation": "Average"
                  }
                ]
              },
              "actions": [
                {
                  "actionGroupId": "/subscriptions/14ddf0c5-77c5-4b53-84f6-e1fa43ad68f7/resourcegroups/gigtest/providers/microsoft.insights/actiongroups/group2",
                  "webHookProperties": {
                    "key11": "value11",
                    "key12": "value12"
                  }
                }
              ]
            }
          },
          {
            "id": "/subscriptions/14ddf0c5-77c5-4b53-84f6-e1fa43ad68f7/resourceGroups/gigtest/providers/providers/microsoft.insights/metricalerts/mediumcpu",
            "type": "Microsoft.Insights/metricAlerts",
            "location": "global",
            "tags": {
              "hidden-link:/subscriptions/b67f7fec-69fc-4974-9099-a26bd6ffeda3/resourceGroups/Rac46PostSwapRG/providers/Microsoft.Web/sites/leoalerttest": "Resource"
            },
            "properties": {
              "description": "Med cpu alert",
              "severity": 4,
              "enabled": true,
              "scopes": [
                "/subscriptions/14ddf0c5-77c5-4b53-84f6-e1fa43ad68f7/resourceGroups/gigtest/providers/Microsoft.Compute/virtualMachines/gigwadme"
              ],
              "evaluationFrequency": "Pt1m",
              "windowSize": "Pt15m",
              "criteria": {
                "odata.type": "Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria",
                "allOf": [
                  {
                    "criterionType": "StaticThresholdCriterion",
                    "name": "Medium_CPU_50",
                    "metricName": "CustomMetric_\\Processor(_Total)\\% Processor Time",
                    "dimensions": [],
                    "operator": "GreaterThan",
                    "threshold": 50.5,
                    "timeAggregation": "Average"
                  }
                ]
              },
              "actions": [
                {
                  "actionGroupId": "/subscriptions/14ddf0c5-77c5-4b53-84f6-e1fa43ad68f7/resourcegroups/gigtest/providers/microsoft.insights/actiongroups/group2",
                  "webHookProperties": {
                    "key11": "value11",
                    "key12": "value12"
                  }
                }
              ]
            }
          }
        ]
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: Learn more about Monitor service - Retrieve alert rule definitions in a subscription.
errorCodes: []
