### YamlMime:RESTOperation
uid: management.azure.com.monitor.querypacks(preview).createorupdate
name: Create Or Update
service: Monitor
groupName: Query Packs (Preview)
apiVersion: 2019-09-01-preview
summary: 'Creates (or updates) a Log Analytics QueryPack. Note: You cannot specify a different value for InstrumentationKey nor AppId in the Put operation.'
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Insights/queryPacks/{queryPackName}?api-version=2019-09-01-preview
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: The ID of the target subscription.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group. The name is case insensitive.
  types:
  - uid: string
  pattern: ^[-\w\._\(\)]+$
- name: queryPackName
  in: path
  isRequired: true
  description: The name of the Log Analytics QueryPack resource.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: The API version to use for this operation.
  types:
  - uid: string
responses:
- name: Other Status Codes
  description: Error response describing why the operation failed.
  types:
  - uid: ErrorResponse
- name: 200 OK
  description: Successful request when creating or updating a Log Analytics QueryPack. The updated QueryPack is returned.
  types:
  - uid: LogAnalyticsQueryPack
requestBody:
- name: default
  parameters:
  - name: location
    in: body
    isRequired: true
    description: Resource location
    types:
    - uid: string
  - name: tags
    in: body
    description: Resource tags
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
requestHeader: []
definitions:
- name: ErrorResponse
  description: Describe the format of an Error response.
  kind: object
  properties:
  - name: error
    description: "The code and message for an error.  \nThe error details."
    types:
    - uid: ErrorInfo
- name: LogAnalyticsQueryPack
  description: An Log Analytics QueryPack definition.
  kind: object
  properties:
  - name: properties.queryPackId
    isReadyOnly: true
    description: The unique ID of your application. This field cannot be changed.
    types:
    - uid: string
  - name: properties.timeCreated
    isReadyOnly: true
    description: Creation Date for the Log Analytics QueryPack, in ISO 8601 format.
    types:
    - uid: string
  - name: properties.timeModified
    isReadyOnly: true
    description: Last modified date of the Log Analytics QueryPack, in ISO 8601 format.
    types:
    - uid: string
  - name: properties.provisioningState
    isReadyOnly: true
    description: 'Current state of this QueryPack: whether or not is has been provisioned within the resource group it is defined. Users cannot change this value but are able to read from it. Values will include Succeeded, Deploying, Canceled, and Failed.'
    types:
    - uid: string
  - name: id
    isReadyOnly: true
    description: Azure resource Id
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: Azure resource name
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: Azure resource type
    types:
    - uid: string
  - name: location
    description: Resource location
    types:
    - uid: string
  - name: tags
    description: Resource tags
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
- name: ErrorInfo
  description: The code and message for an error.
  kind: object
  properties:
  - name: code
    description: A machine readable error code.
    types:
    - uid: string
  - name: message
    description: A human readable error message.
    types:
    - uid: string
  - name: details
    description: error details.
    types:
    - uid: ErrorDetail
      isArray: true
  - name: innererror
    description: "The code and message for an error.  \nInner error details if they exist."
    types:
    - uid: ErrorInfo
  - name: additionalProperties
    description: Additional properties that can be provided on the error info object
    types:
    - uid: object
- name: ErrorDetail
  description: Error details.
  kind: object
  properties:
  - name: code
    description: The error's code.
    types:
    - uid: string
  - name: message
    description: A human readable error message.
    types:
    - uid: string
  - name: target
    description: Indicates which property in the request is responsible for the error.
    types:
    - uid: string
  - name: value
    description: Indicates which value in 'target' is responsible for the error.
    types:
    - uid: string
  - name: resources
    description: Indicates resources which were responsible for the error.
    types:
    - uid: string
      isArray: true
  - name: additionalProperties
    description: Additional properties that can be provided on the error details object
    types:
    - uid: object
examples:
- name: QueryPackCreate
  request:
    uri: PUT https://management.azure.com/subscriptions/86dc51d3-92ed-4d7e-947a-775ea79b4919/resourceGroups/my-resource-group/providers/Microsoft.Insights/queryPacks/my-querypack?api-version=2019-09-01-preview
    body: >-
      {
        "location": "South Central US",
        "properties": {}
      }
  responses:
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/86dc51d3-92ed-4d7e-947a-775ea79b4919/resourceGroups/my-resource-group/providers/microsoft.insights/queryPacks/my-querypack",
        "name": "my-querypack",
        "type": "microsoft.insights/querypacks",
        "location": "South Central US",
        "tags": {},
        "properties": {
          "queryPackId": "d1c8fc00-2b68-441e-8f9b-ded8748dc635",
          "timeCreated": "2019-08-04T12:37:56.8543652Z",
          "timeModified": "2019-08-04T12:37:56.8543652Z",
          "provisioningState": "Succeeded"
        }
      }
- name: QueryPackUpdate
  request:
    uri: PUT https://management.azure.com/subscriptions/86dc51d3-92ed-4d7e-947a-775ea79b4919/resourceGroups/my-resource-group/providers/Microsoft.Insights/queryPacks/my-querypack?api-version=2019-09-01-preview
    body: >-
      {
        "location": "South Central US",
        "tags": {
          "Tag1": "Value1"
        },
        "properties": {}
      }
  responses:
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/86dc51d3-92ed-4d7e-947a-775ea79b4919/resourceGroups/my-resource-group/providers/microsoft.insights/queryPacks/my-querypack",
        "name": "my-querypack",
        "type": "microsoft.insights/querypacks",
        "location": "South Central US",
        "tags": {
          "Tag1": "Value1"
        },
        "properties": {
          "queryPackId": "aac8fc00-2b68-441e-8f9b-ded8748dc635",
          "timeCreated": "2019-06-04T12:37:56.8543652Z",
          "timeModified": "2019-08-04T12:37:56.8543652Z",
          "provisioningState": "Succeeded"
        }
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow.
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
errorCodes: []
