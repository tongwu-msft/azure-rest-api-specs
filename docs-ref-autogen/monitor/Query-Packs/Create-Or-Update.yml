### YamlMime:RESTOperation
uid: management.azure.com.monitor.querypacks.createorupdate
name: Create Or Update
service: Monitor
groupName: Query Packs
apiVersion: 2019-09-01
summary: 'Creates (or updates) a Log Analytics QueryPack. Note: You cannot specify a different value for InstrumentationKey nor AppId in the Put operation.'
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.OperationalInsights/queryPacks/{queryPackName}?api-version=2019-09-01
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: The ID of the target subscription.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group. The name is case insensitive.
  types:
  - uid: string
- name: queryPackName
  in: path
  isRequired: true
  description: The name of the Log Analytics QueryPack resource.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: The API version to use for this operation.
  types:
  - uid: string
responses:
- name: Other Status Codes
  description: Error response describing why the operation failed.
  types:
  - uid: ErrorResponse
- name: 200 OK
  description: Successful request when creating or updating a Log Analytics QueryPack. The updated QueryPack is returned.
  types:
  - uid: LogAnalyticsQueryPack
requestBody:
- name: default
  parameters:
  - name: location
    in: body
    isRequired: true
    description: Resource location
    types:
    - uid: string
  - name: tags
    in: body
    description: Resource tags
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
requestHeader: []
definitions:
- name: ErrorResponse
  description: Error response
  kind: object
  properties:
  - name: error
    description: The error object.
    types:
    - uid: ErrorDetail
- name: LogAnalyticsQueryPack
  description: An Log Analytics QueryPack definition.
  kind: object
  properties:
  - name: properties.queryPackId
    isReadyOnly: true
    description: The unique ID of your application. This field cannot be changed.
    types:
    - uid: string
  - name: properties.timeCreated
    isReadyOnly: true
    description: Creation Date for the Log Analytics QueryPack, in ISO 8601 format.
    types:
    - uid: string
  - name: properties.timeModified
    isReadyOnly: true
    description: Last modified date of the Log Analytics QueryPack, in ISO 8601 format.
    types:
    - uid: string
  - name: properties.provisioningState
    isReadyOnly: true
    description: 'Current state of this QueryPack: whether or not is has been provisioned within the resource group it is defined. Users cannot change this value but are able to read from it. Values will include Succeeded, Deploying, Canceled, and Failed.'
    types:
    - uid: string
  - name: id
    isReadyOnly: true
    description: Azure resource Id
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: Azure resource name
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: Azure resource type
    types:
    - uid: string
  - name: location
    description: Resource location
    types:
    - uid: string
  - name: tags
    description: Resource tags
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
- name: ErrorDetail
  description: The error detail.
  kind: object
  properties:
  - name: code
    isReadyOnly: true
    description: The error code.
    types:
    - uid: string
  - name: message
    isReadyOnly: true
    description: The error message.
    types:
    - uid: string
  - name: target
    isReadyOnly: true
    description: The error target.
    types:
    - uid: string
  - name: details
    isReadyOnly: true
    description: The error details.
    types:
    - uid: ErrorDetail
      isArray: true
  - name: additionalInfo
    isReadyOnly: true
    description: The error additional info.
    types:
    - uid: ErrorAdditionalInfo
      isArray: true
- name: ErrorAdditionalInfo
  description: The resource management error additional info.
  kind: object
  properties:
  - name: type
    isReadyOnly: true
    description: The additional info type.
    types:
    - uid: string
  - name: info
    isReadyOnly: true
    description: The additional info.
    types:
    - uid: object
examples:
- name: QueryPackCreate
  request:
    uri: PUT https://management.azure.com/subscriptions/86dc51d3-92ed-4d7e-947a-775ea79b4919/resourceGroups/my-resource-group/providers/Microsoft.OperationalInsights/queryPacks/my-querypack?api-version=2019-09-01
    body: >-
      {
        "location": "South Central US",
        "properties": {}
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/86dc51d3-92ed-4d7e-947a-775ea79b4919/resourceGroups/my-resource-group/providers/Microsoft.OperationalInsights/queryPacks/my-querypack?api-version=2019-09-01

      {
        "location": "South Central US",
        "properties": {}
      }

      ```

      # [Java](#tab/Java)
      ``` java
      import java.util.HashMap;
      import java.util.Map;

      /** Samples for QueryPacks CreateOrUpdate. */
      public final class Main {
          /*
           * x-ms-original-file: specification/operationalinsights/resource-manager/Microsoft.OperationalInsights/stable/2019-09-01/examples/QueryPacksCreate.json
           */
          /**
           * Sample code: QueryPackCreate.
           *
           * @param manager Entry point to LogAnalyticsManager.
           */
          public static void queryPackCreate(com.azure.resourcemanager.loganalytics.LogAnalyticsManager manager) {
              manager
                  .queryPacks()
                  .define("my-querypack")
                  .withRegion("South Central US")
                  .withExistingResourceGroup("my-resource-group")
                  .create();
          }

          @SuppressWarnings("unchecked")
          private static <T> Map<String, T> mapOf(Object... inputs) {
              Map<String, T> map = new HashMap<>();
              for (int i = 0; i < inputs.length; i += 2) {
                  String key = (String) inputs[i];
                  T value = (T) inputs[i + 1];
                  map.put(key, value);
              }
              return map;
          }
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-java/blob/azure-resourcemanager-loganalytics_1.0.0-beta.3/sdk/loganalytics/azure-resourcemanager-loganalytics/README.md) on how to add the SDK to your project and authenticate.
      # [Go](#tab/Go)
      ``` go
      package armoperationalinsights_test

      import (
      	"context"
      	"log"

      	"github.com/Azure/azure-sdk-for-go/sdk/azcore/to"
      	"github.com/Azure/azure-sdk-for-go/sdk/azidentity"
      	"github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/operationalinsights/armoperationalinsights/v2"
      )

      // Generated from example definition: https://github.com/Azure/azure-rest-api-specs/tree/main/specification/operationalinsights/resource-manager/Microsoft.OperationalInsights/stable/2019-09-01/examples/QueryPacksCreate.json
      func ExampleQueryPacksClient_CreateOrUpdate() {
      	cred, err := azidentity.NewDefaultAzureCredential(nil)
      	if err != nil {
      		log.Fatalf("failed to obtain a credential: %v", err)
      	}
      	ctx := context.Background()
      	client, err := armoperationalinsights.NewQueryPacksClient("86dc51d3-92ed-4d7e-947a-775ea79b4919", cred, nil)
      	if err != nil {
      		log.Fatalf("failed to create client: %v", err)
      	}
      	res, err := client.CreateOrUpdate(ctx,
      		"my-resource-group",
      		"my-querypack",
      		armoperationalinsights.LogAnalyticsQueryPack{
      			Location:   to.Ptr("South Central US"),
      			Properties: &armoperationalinsights.LogAnalyticsQueryPackProperties{},
      		},
      		nil)
      	if err != nil {
      		log.Fatalf("failed to finish the request: %v", err)
      	}
      	// TODO: use response item
      	_ = res
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-go/blob/sdk%2Fresourcemanager%2Foperationalinsights%2Farmoperationalinsights%2Fv2.0.0-beta.2/sdk/resourcemanager/operationalinsights/armoperationalinsights/README.md) on how to add the SDK to your project and authenticate.
      # [JavaScript](#tab/JavaScript)
      ``` js
      const { OperationalInsightsManagementClient } = require("@azure/arm-operationalinsights");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to Creates (or updates) a Log Analytics QueryPack. Note: You cannot specify a different value for InstrumentationKey nor AppId in the Put operation.
       *
       * @summary Creates (or updates) a Log Analytics QueryPack. Note: You cannot specify a different value for InstrumentationKey nor AppId in the Put operation.
       * x-ms-original-file: specification/operationalinsights/resource-manager/Microsoft.OperationalInsights/stable/2019-09-01/examples/QueryPacksCreate.json
       */
      async function queryPackCreate() {
        const subscriptionId = "86dc51d3-92ed-4d7e-947a-775ea79b4919";
        const resourceGroupName = "my-resource-group";
        const queryPackName = "my-querypack";
        const logAnalyticsQueryPackPayload = {
          location: "South Central US",
        };
        const credential = new DefaultAzureCredential();
        const client = new OperationalInsightsManagementClient(credential, subscriptionId);
        const result = await client.queryPacks.createOrUpdate(
          resourceGroupName,
          queryPackName,
          logAnalyticsQueryPackPayload
        );
        console.log(result);
      }

      queryPackCreate().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-operationalinsights_9.0.0-beta.1/sdk/operationalinsights/arm-operationalinsights/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/86dc51d3-92ed-4d7e-947a-775ea79b4919/resourceGroups/my-resource-group/providers/microsoft.operationalinsights/queryPacks/my-querypack",
        "name": "my-querypack",
        "type": "microsoft.operationalinsights/querypacks",
        "location": "South Central US",
        "tags": {},
        "properties": {
          "queryPackId": "d1c8fc00-2b68-441e-8f9b-ded8748dc635",
          "timeCreated": "2019-08-04T12:37:56.8543652Z",
          "timeModified": "2019-08-04T12:37:56.8543652Z",
          "provisioningState": "Succeeded"
        }
      }
- name: QueryPackUpdate
  request:
    uri: PUT https://management.azure.com/subscriptions/86dc51d3-92ed-4d7e-947a-775ea79b4919/resourceGroups/my-resource-group/providers/Microsoft.OperationalInsights/queryPacks/my-querypack?api-version=2019-09-01
    body: >-
      {
        "location": "South Central US",
        "tags": {
          "Tag1": "Value1"
        },
        "properties": {}
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PUT https://management.azure.com/subscriptions/86dc51d3-92ed-4d7e-947a-775ea79b4919/resourceGroups/my-resource-group/providers/Microsoft.OperationalInsights/queryPacks/my-querypack?api-version=2019-09-01

      {
        "location": "South Central US",
        "tags": {
          "Tag1": "Value1"
        },
        "properties": {}
      }

      ```

      # [Java](#tab/Java)
      ``` java
      import java.util.HashMap;
      import java.util.Map;

      /** Samples for QueryPacks CreateOrUpdate. */
      public final class Main {
          /*
           * x-ms-original-file: specification/operationalinsights/resource-manager/Microsoft.OperationalInsights/stable/2019-09-01/examples/QueryPacksUpdate.json
           */
          /**
           * Sample code: QueryPackUpdate.
           *
           * @param manager Entry point to LogAnalyticsManager.
           */
          public static void queryPackUpdate(com.azure.resourcemanager.loganalytics.LogAnalyticsManager manager) {
              manager
                  .queryPacks()
                  .define("my-querypack")
                  .withRegion("South Central US")
                  .withExistingResourceGroup("my-resource-group")
                  .withTags(mapOf("Tag1", "Value1"))
                  .create();
          }

          @SuppressWarnings("unchecked")
          private static <T> Map<String, T> mapOf(Object... inputs) {
              Map<String, T> map = new HashMap<>();
              for (int i = 0; i < inputs.length; i += 2) {
                  String key = (String) inputs[i];
                  T value = (T) inputs[i + 1];
                  map.put(key, value);
              }
              return map;
          }
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-java/blob/azure-resourcemanager-loganalytics_1.0.0-beta.3/sdk/loganalytics/azure-resourcemanager-loganalytics/README.md) on how to add the SDK to your project and authenticate.
      # [JavaScript](#tab/JavaScript)
      ``` js
      const { OperationalInsightsManagementClient } = require("@azure/arm-operationalinsights");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to Creates (or updates) a Log Analytics QueryPack. Note: You cannot specify a different value for InstrumentationKey nor AppId in the Put operation.
       *
       * @summary Creates (or updates) a Log Analytics QueryPack. Note: You cannot specify a different value for InstrumentationKey nor AppId in the Put operation.
       * x-ms-original-file: specification/operationalinsights/resource-manager/Microsoft.OperationalInsights/stable/2019-09-01/examples/QueryPacksUpdate.json
       */
      async function queryPackUpdate() {
        const subscriptionId = "86dc51d3-92ed-4d7e-947a-775ea79b4919";
        const resourceGroupName = "my-resource-group";
        const queryPackName = "my-querypack";
        const logAnalyticsQueryPackPayload = {
          location: "South Central US",
          tags: { tag1: "Value1" },
        };
        const credential = new DefaultAzureCredential();
        const client = new OperationalInsightsManagementClient(credential, subscriptionId);
        const result = await client.queryPacks.createOrUpdate(
          resourceGroupName,
          queryPackName,
          logAnalyticsQueryPackPayload
        );
        console.log(result);
      }

      queryPackUpdate().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-operationalinsights_9.0.0-beta.1/sdk/operationalinsights/arm-operationalinsights/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/86dc51d3-92ed-4d7e-947a-775ea79b4919/resourceGroups/my-resource-group/providers/microsoft.operationalinsights/queryPacks/my-querypack",
        "name": "my-querypack",
        "type": "microsoft.operationalinsights/querypacks",
        "location": "South Central US",
        "tags": {
          "Tag1": "Value1"
        },
        "properties": {
          "queryPackId": "aac8fc00-2b68-441e-8f9b-ded8748dc635",
          "timeCreated": "2019-06-04T12:37:56.8543652Z",
          "timeModified": "2019-08-04T12:37:56.8543652Z",
          "provisioningState": "Succeeded"
        }
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: >
    Creates (or updates) a Log Analytics QueryPack. Note: You cannot specify a different value for InstrumentationKey nor AppId in the Put operation.
errorCodes: []
