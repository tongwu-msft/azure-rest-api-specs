### YamlMime:RESTOperation
uid: management.azure.com.monitor.metrics.list
name: List
service: Monitor
groupName: Metrics
apiVersion: 2018-01-01
summary: '**Lists the metric values for a resource**.'
consumes:
- application/json
produces:
- application/json
paths:
- content: GET https://management.azure.com/{resourceUri}/providers/Microsoft.Insights/metrics?api-version=2018-01-01
- content: GET https://management.azure.com/{resourceUri}/providers/Microsoft.Insights/metrics?timespan={timespan}&interval={interval}&metricnames={metricnames}&aggregation={aggregation}&top={top}&orderby={orderby}&$filter={$filter}&resultType={resultType}&api-version=2018-01-01&metricnamespace={metricnamespace}
  isOptional: true
uriParameters:
- name: resourceUri
  in: path
  isRequired: true
  skipUrlEncoding: true
  description: The identifier of the resource.
  types:
  - uid: string
- name: timespan
  in: query
  description: The timespan of the query. It is a string with the following format 'startDateTime_ISO/endDateTime_ISO'.
  types:
  - uid: string
- name: interval
  in: query
  description: The interval (i.e. timegrain) of the query.
  types:
  - uid: string
  format: duration
- name: metricnames
  in: query
  description: "The names of the metrics (comma separated) to retrieve. Special case: If a metricname itself has a comma in it then use %2 to indicate it. Eg: 'Metric,Name1' should be **'Metric%2Name1'**"
  types:
  - uid: string
- name: aggregation
  in: query
  description: The list of aggregation types (comma separated) to retrieve.
  types:
  - uid: string
- name: top
  in: query
  description: >-
    The maximum number of records to retrieve.

    Valid only if $filter is specified.

    Defaults to 10.
  types:
  - uid: integer
  format: int32
- name: orderby
  in: query
  description: >-
    The aggregation to use for sorting results and the direction of the sort.

    Only one order can be specified.

    Examples: sum asc.
  types:
  - uid: string
- name: $filter
  in: query
  description: "The **$filter** is used to reduce the set of metric data returned. Example: Metric contains metadata A, B and C. - Return all time series of C where A = a1 and B = b1 or b2 **$filter=A eq 'a1' and B eq 'b1' or B eq 'b2' and C eq '*'** - Invalid variant: **$filter=A eq 'a1' and B eq 'b1' and C eq '*' or B = 'b2'** This is invalid because the logical or operator cannot separate two different metadata names. - Return all time series where A = a1, B = b1 and C = c1: **$filter=A eq 'a1' and B eq 'b1' and C eq 'c1'** - Return all time series where A = a1 **$filter=A eq 'a1' and B eq '*' and C eq '*'**. Special case: When dimension name or dimension value uses round brackets. Eg: When dimension name is **dim (test) 1** Instead of using $filter= \"dim (test) 1 eq '*' \" use **$filter= \"dim %2528test%2529 1 eq '*' \"** When dimension name is **dim (test) 3** and dimension value is **dim3 (test) val** Instead of using $filter= \"dim (test) 3 eq 'dim3 (test) val' \" use **$filter= \"dim %2528test%2529 3 eq 'dim3 %2528test%2529 val' \"**"
  types:
  - uid: string
- name: resultType
  in: query
  description: Reduces the set of data collected. The syntax allowed depends on the operation. See the operation's description for details.
  types:
  - uid: ResultType
- name: api-version
  in: query
  isRequired: true
  description: The API version to use for this operation.
  types:
  - uid: string
- name: metricnamespace
  in: query
  description: Metric namespace to query metric definitions for.
  types:
  - uid: string
responses:
- name: Other Status Codes
  description: Error response describing why the operation failed.
  types:
  - uid: ErrorResponse
- name: 200 OK
  description: Successful request to get the list of metric values.
  types:
  - uid: Response
requestHeader: []
definitions:
- name: ResultType
  description: Reduces the set of data collected. The syntax allowed depends on the operation. See the operation's description for details.
  kind: enum
  properties:
  - name: Data
    types:
    - uid: string
  - name: Metadata
    types:
    - uid: string
- name: ErrorResponse
  description: Describes the format of Error response.
  kind: object
  properties:
  - name: code
    description: Error code
    types:
    - uid: string
  - name: message
    description: Error message indicating why the operation failed.
    types:
    - uid: string
- name: Response
  description: The response to a metrics query.
  kind: object
  properties:
  - name: cost
    description: The integer value representing the relative cost of the query.
    types:
    - uid: number
  - name: timespan
    description: The timespan for which the data was retrieved. Its value consists of two datetimes concatenated, separated by '/'.  This may be adjusted in the future and returned back from what was originally requested.
    types:
    - uid: string
  - name: interval
    description: The interval (window size) for which the metric data was returned in.  This may be adjusted in the future and returned back from what was originally requested.  This is not present if a metadata request was made.
    types:
    - uid: string
  - name: namespace
    description: The namespace of the metrics being queried
    types:
    - uid: string
  - name: resourceregion
    description: The region of the resource being queried for metrics.
    types:
    - uid: string
  - name: value
    description: the value of the collection.
    types:
    - uid: Metric
      isArray: true
- name: Metric
  description: The result data of a query.
  kind: object
  properties:
  - name: id
    description: the metric Id.
    types:
    - uid: string
  - name: type
    description: the resource type of the metric resource.
    types:
    - uid: string
  - name: name
    description: the name and the display name of the metric, i.e. it is localizable string.
    types:
    - uid: LocalizableString
  - name: displayDescription
    description: Detailed description of this metric.
    types:
    - uid: string
  - name: errorCode
    description: "'Success' or the error details on query failures for this metric."
    types:
    - uid: string
  - name: errorMessage
    description: Error message encountered querying this specific metric.
    types:
    - uid: string
  - name: unit
    description: The unit of the metric.
    types:
    - uid: MetricUnit
  - name: timeseries
    description: the time series returned when a data query is performed.
    types:
    - uid: TimeSeriesElement
      isArray: true
- name: LocalizableString
  description: The localizable string class.
  kind: object
  properties:
  - name: value
    description: the invariant value.
    types:
    - uid: string
  - name: localizedValue
    description: the locale specific value.
    types:
    - uid: string
- name: MetricUnit
  description: The unit of the metric.
  kind: enum
  properties:
  - name: Count
    types:
    - uid: string
  - name: Bytes
    types:
    - uid: string
  - name: Seconds
    types:
    - uid: string
  - name: CountPerSecond
    types:
    - uid: string
  - name: BytesPerSecond
    types:
    - uid: string
  - name: Percent
    types:
    - uid: string
  - name: MilliSeconds
    types:
    - uid: string
  - name: ByteSeconds
    types:
    - uid: string
  - name: Unspecified
    types:
    - uid: string
  - name: Cores
    types:
    - uid: string
  - name: MilliCores
    types:
    - uid: string
  - name: NanoCores
    types:
    - uid: string
  - name: BitsPerSecond
    types:
    - uid: string
- name: TimeSeriesElement
  description: A time series result type. The discriminator value is always TimeSeries in this case.
  kind: object
  properties:
  - name: metadatavalues
    description: the metadata values returned if $filter was specified in the call.
    types:
    - uid: MetadataValue
      isArray: true
  - name: data
    description: An array of data points representing the metric values.  This is only returned if a result type of data is specified.
    types:
    - uid: MetricValue
      isArray: true
- name: MetadataValue
  description: Represents a metric metadata value.
  kind: object
  properties:
  - name: name
    description: the name of the metadata.
    types:
    - uid: LocalizableString
  - name: value
    description: the value of the metadata.
    types:
    - uid: string
- name: MetricValue
  description: Represents a metric value.
  kind: object
  properties:
  - name: timeStamp
    description: the timestamp for the metric value in ISO 8601 format.
    types:
    - uid: string
  - name: average
    description: the average value in the time range.
    types:
    - uid: number
  - name: minimum
    description: the least value in the time range.
    types:
    - uid: number
  - name: maximum
    description: the greatest value in the time range.
    types:
    - uid: number
  - name: total
    description: the sum of all of the values in the time range.
    types:
    - uid: number
  - name: count
    description: the number of samples in the time range. Can be used to determine the number of values that contributed to the average value.
    types:
    - uid: number
examples:
- name: Get Metric for data
  request:
    uri: GET https://management.azure.com/subscriptions/b324c52b-4073-4807-93af-e07d289c093e/resourceGroups/test/providers/Microsoft.Storage/storageAccounts/larryshoebox/blobServices/default/providers/Microsoft.Insights/metrics?timespan=2017-04-14T02:20:00Z/2017-04-14T04:20:00Z&interval=PT1M&aggregation=Average,count&top=3&orderby=Average asc&$filter=BlobType eq '*'&api-version=2018-01-01&metricnamespace=Microsoft.Storage/storageAccounts/blobServices
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      GET https://management.azure.com/subscriptions/b324c52b-4073-4807-93af-e07d289c093e/resourceGroups/test/providers/Microsoft.Storage/storageAccounts/larryshoebox/blobServices/default/providers/Microsoft.Insights/metrics?timespan=2017-04-14T02:20:00Z/2017-04-14T04:20:00Z&interval=PT1M&aggregation=Average,count&top=3&orderby=Average asc&$filter=BlobType eq '*'&api-version=2018-01-01&metricnamespace=Microsoft.Storage/storageAccounts/blobServices
      ```

      # [Go](#tab/Go)
      ``` go
      package armmonitor_test

      import (
      	"context"
      	"log"

      	"github.com/Azure/azure-sdk-for-go/sdk/azcore/to"
      	"github.com/Azure/azure-sdk-for-go/sdk/azidentity"
      	"github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/monitor/armmonitor"
      )

      // Generated from example definition: https://github.com/Azure/azure-rest-api-specs/tree/main/specification/monitor/resource-manager/Microsoft.Insights/stable/2018-01-01/examples/GetMetric.json
      func ExampleMetricsClient_List() {
      	cred, err := azidentity.NewDefaultAzureCredential(nil)
      	if err != nil {
      		log.Fatalf("failed to obtain a credential: %v", err)
      	}
      	ctx := context.Background()
      	client, err := armmonitor.NewMetricsClient(cred, nil)
      	if err != nil {
      		log.Fatalf("failed to create client: %v", err)
      	}
      	res, err := client.List(ctx,
      		"subscriptions/b324c52b-4073-4807-93af-e07d289c093e/resourceGroups/test/providers/Microsoft.Storage/storageAccounts/larryshoebox/blobServices/default",
      		&armmonitor.MetricsClientListOptions{Timespan: to.Ptr("2017-04-14T02:20:00Z/2017-04-14T04:20:00Z"),
      			Interval:        to.Ptr("PT1M"),
      			Metricnames:     nil,
      			Aggregation:     to.Ptr("Average,count"),
      			Top:             to.Ptr[int32](3),
      			Orderby:         to.Ptr("Average asc"),
      			Filter:          to.Ptr("BlobType eq '*'"),
      			ResultType:      nil,
      			Metricnamespace: to.Ptr("Microsoft.Storage/storageAccounts/blobServices"),
      		})
      	if err != nil {
      		log.Fatalf("failed to finish the request: %v", err)
      	}
      	// TODO: use response item
      	_ = res
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-go/blob/sdk%2Fresourcemanager%2Fmonitor%2Farmmonitor%2Fv0.7.0/sdk/resourcemanager/monitor/armmonitor/README.md) on how to add the SDK to your project and authenticate.
      # [JavaScript](#tab/JavaScript)
      ``` js
      const { MonitorClient } = require("@azure/arm-monitor");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to **Lists the metric values for a resource**.
       *
       * @summary **Lists the metric values for a resource**.
       * x-ms-original-file: specification/monitor/resource-manager/Microsoft.Insights/stable/2018-01-01/examples/GetMetric.json
       */
      async function getMetricForData() {
        const subscriptionId = "00000000-0000-0000-0000-000000000000";
        const resourceUri =
          "subscriptions/b324c52b-4073-4807-93af-e07d289c093e/resourceGroups/test/providers/Microsoft.Storage/storageAccounts/larryshoebox/blobServices/default";
        const timespan = "2017-04-14T02:20:00Z/2017-04-14T04:20:00Z";
        const interval = "PT1M";
        const aggregation = "Average,count";
        const top = 3;
        const orderby = "Average asc";
        const filter = "BlobType eq '*'";
        const metricnamespace = "Microsoft.Storage/storageAccounts/blobServices";
        const options = {
          timespan,
          interval,
          aggregation,
          top,
          orderby,
          filter,
          metricnamespace,
        };
        const credential = new DefaultAzureCredential();
        const client = new MonitorClient(credential, subscriptionId);
        const result = await client.metrics.list(resourceUri, options);
        console.log(result);
      }

      getMetricForData().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-monitor_8.0.0-beta.2/sdk/monitor/arm-monitor/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "cost": 0,
        "timespan": "2017-04-14T02:20:00Z/2017-04-14T04:20:00Z",
        "interval": "PT1M",
        "namespace": "Microsoft.Storage/storageAccounts/blobServices",
        "resourceregion": "eastus2",
        "value": [
          {
            "id": "/subscriptions/b324c52b-4073-4807-93af-e07d289c093e/resourceGroups/test/providers/Microsoft.Storage/storageAccounts/larryshoebox/blobServices/default/providers/Microsoft.Insights/metrics/BlobCapacity",
            "type": "Microsoft.Insights/metrics",
            "displayDescription": "The amount of storage used by the storage account’s Blob service in bytes.",
            "name": {
              "value": "BlobCapacity",
              "localizedValue": "Blob Capacity"
            },
            "unit": "Bytes",
            "timeseries": [
              {
                "metadatavalues": [
                  {
                    "name": {
                      "value": "blobtype",
                      "localizedValue": "blobtype"
                    },
                    "value": "PageBlob"
                  }
                ],
                "data": [
                  {
                    "timeStamp": "2017-04-14T02:20:00Z",
                    "count": 0
                  },
                  {
                    "timeStamp": "2017-04-14T02:21:00Z",
                    "count": 0
                  },
                  {
                    "timeStamp": "2017-04-14T02:22:00Z",
                    "count": 0
                  },
                  {
                    "timeStamp": "2017-04-14T02:23:00Z",
                    "count": 1,
                    "average": 0
                  }
                ]
              },
              {
                "metadatavalues": [
                  {
                    "name": {
                      "value": "blobtype",
                      "localizedValue": "blobtype"
                    },
                    "value": "BlockBlob"
                  }
                ],
                "data": [
                  {
                    "timeStamp": "2017-04-14T02:20:00Z",
                    "count": 0
                  },
                  {
                    "timeStamp": "2017-04-14T02:21:00Z",
                    "count": 0
                  },
                  {
                    "timeStamp": "2017-04-14T02:22:00Z",
                    "count": 0
                  },
                  {
                    "timeStamp": "2017-04-14T02:23:00Z",
                    "count": 1,
                    "average": 245
                  }
                ]
              }
            ]
          }
        ]
      }
- name: Get Metric for metadata
  request:
    uri: GET https://management.azure.com/subscriptions/b324c52b-4073-4807-93af-e07d289c093e/resourceGroups/test/providers/Microsoft.Storage/storageAccounts/larryshoebox/blobServices/default/providers/Microsoft.Insights/metrics?timespan=2017-04-14T02:20:00Z/2017-04-14T04:20:00Z&interval=PT1M&aggregation=Average,count&top=3&orderby=Average asc&$filter=BlobType eq '*'&api-version=2018-01-01&metricnamespace=Microsoft.Storage/storageAccounts/blobServices
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      GET https://management.azure.com/subscriptions/b324c52b-4073-4807-93af-e07d289c093e/resourceGroups/test/providers/Microsoft.Storage/storageAccounts/larryshoebox/blobServices/default/providers/Microsoft.Insights/metrics?timespan=2017-04-14T02:20:00Z/2017-04-14T04:20:00Z&interval=PT1M&aggregation=Average,count&top=3&orderby=Average asc&$filter=BlobType eq '*'&api-version=2018-01-01&metricnamespace=Microsoft.Storage/storageAccounts/blobServices
      ```

      # [JavaScript](#tab/JavaScript)
      ``` js
      const { MonitorClient } = require("@azure/arm-monitor");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to **Lists the metric values for a resource**.
       *
       * @summary **Lists the metric values for a resource**.
       * x-ms-original-file: specification/monitor/resource-manager/Microsoft.Insights/stable/2018-01-01/examples/GetMetricMetadata.json
       */
      async function getMetricForMetadata() {
        const subscriptionId = "00000000-0000-0000-0000-000000000000";
        const resourceUri =
          "subscriptions/b324c52b-4073-4807-93af-e07d289c093e/resourceGroups/test/providers/Microsoft.Storage/storageAccounts/larryshoebox/blobServices/default";
        const timespan = "2017-04-14T02:20:00Z/2017-04-14T04:20:00Z";
        const interval = "PT1M";
        const aggregation = "Average,count";
        const top = 3;
        const orderby = "Average asc";
        const filter = "BlobType eq '*'";
        const metricnamespace = "Microsoft.Storage/storageAccounts/blobServices";
        const options = {
          timespan,
          interval,
          aggregation,
          top,
          orderby,
          filter,
          metricnamespace,
        };
        const credential = new DefaultAzureCredential();
        const client = new MonitorClient(credential, subscriptionId);
        const result = await client.metrics.list(resourceUri, options);
        console.log(result);
      }

      getMetricForMetadata().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-monitor_8.0.0-beta.2/sdk/monitor/arm-monitor/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "timespan": "2017-04-14T02:20:00Z/2017-04-14T04:20:00Z",
        "namespace": "Microsoft.Storage/storageAccounts/blobServices",
        "resourceregion": "eastus2",
        "value": [
          {
            "id": "/subscriptions/b324c52b-4073-4807-93af-e07d289c093e/resourceGroups/test/providers/Microsoft.Storage/storageAccounts/larryshoebox/blobServices/default/providers/Microsoft.Insights/metrics/BlobCapacity",
            "type": "Microsoft.Insights/metrics",
            "name": {
              "value": "BlobCapacity",
              "localizedValue": "Blob Capacity"
            },
            "displayDescription": "The amount of storage used by the storage account’s Blob service in bytes.",
            "unit": "Bytes",
            "timeseries": [
              {
                "metadatavalues": [
                  {
                    "name": {
                      "value": "blobtype",
                      "localizedValue": "blobtype"
                    },
                    "value": "BlockBlob"
                  }
                ]
              },
              {
                "metadatavalues": [
                  {
                    "name": {
                      "value": "blobtype",
                      "localizedValue": "blobtype"
                    },
                    "value": "PageBlob"
                  }
                ]
              }
            ]
          }
        ]
      }
- name: Get Metric with error
  request:
    uri: GET https://management.azure.com/subscriptions/ac41e21f-afd6-4a79-8070-f01eba278f97/resourceGroups/todking/providers/Microsoft.DocumentDb/databaseAccounts/tk-cosmos-mongo/providers/Microsoft.Insights/metrics?timespan=2021-06-07T21:51:00Z/2021-06-08T01:51:00Z&interval=FULL&metricnames=MongoRequestsCount,MongoRequests&aggregation=average&api-version=2018-01-01&metricnamespace=microsoft.documentdb/databaseaccounts
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      GET https://management.azure.com/subscriptions/ac41e21f-afd6-4a79-8070-f01eba278f97/resourceGroups/todking/providers/Microsoft.DocumentDb/databaseAccounts/tk-cosmos-mongo/providers/Microsoft.Insights/metrics?timespan=2021-06-07T21:51:00Z/2021-06-08T01:51:00Z&interval=FULL&metricnames=MongoRequestsCount,MongoRequests&aggregation=average&api-version=2018-01-01&metricnamespace=microsoft.documentdb/databaseaccounts
      ```

      # [JavaScript](#tab/JavaScript)
      ``` js
      const { MonitorClient } = require("@azure/arm-monitor");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to **Lists the metric values for a resource**.
       *
       * @summary **Lists the metric values for a resource**.
       * x-ms-original-file: specification/monitor/resource-manager/Microsoft.Insights/stable/2018-01-01/examples/GetMetricError.json
       */
      async function getMetricWithError() {
        const subscriptionId = "00000000-0000-0000-0000-000000000000";
        const resourceUri =
          "subscriptions/ac41e21f-afd6-4a79-8070-f01eba278f97/resourceGroups/todking/providers/Microsoft.DocumentDb/databaseAccounts/tk-cosmos-mongo";
        const timespan = "2021-06-07T21:51:00Z/2021-06-08T01:51:00Z";
        const interval = "FULL";
        const metricnames = "MongoRequestsCount,MongoRequests";
        const aggregation = "average";
        const metricnamespace = "microsoft.documentdb/databaseaccounts";
        const options = {
          timespan,
          interval,
          metricnames,
          aggregation,
          metricnamespace,
        };
        const credential = new DefaultAzureCredential();
        const client = new MonitorClient(credential, subscriptionId);
        const result = await client.metrics.list(resourceUri, options);
        console.log(result);
      }

      getMetricWithError().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-monitor_8.0.0-beta.2/sdk/monitor/arm-monitor/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "cost": 239,
        "timespan": "2021-06-07T21:51:00Z/2021-06-08T01:51:00Z",
        "interval": "PT4H",
        "value": [
          {
            "id": "/subscriptions/ac41e21f-afd6-4a79-8070-f01eba278f97/resourceGroups/todking/providers/Microsoft.DocumentDb/databaseAccounts/tk-cosmos-mongo/providers/Microsoft.Insights/metrics/MongoRequestsCount",
            "type": "Microsoft.Insights/metrics",
            "name": {
              "value": "MongoRequestsCount",
              "localizedValue": "(deprecated) Mongo Request Rate"
            },
            "unit": "CountPerSecond",
            "timeseries": [],
            "errorMessage": "Sampling type is not found. Metric:CosmosDBCustomer,AzureMonitor,MongoRequests, SamplingType:NullableAverage.",
            "errorCode": "InvalidSamplingType"
          },
          {
            "id": "/subscriptions/ac41e21f-afd6-4a79-8070-f01eba278f97/resourceGroups/todking/providers/Microsoft.DocumentDb/databaseAccounts/tk-cosmos-mongo/providers/Microsoft.Insights/metrics/MongoRequests",
            "type": "Microsoft.Insights/metrics",
            "name": {
              "value": "MongoRequests",
              "localizedValue": "Mongo Requests"
            },
            "displayDescription": "Number of Mongo Requests Made",
            "unit": "Count",
            "timeseries": [
              {
                "metadatavalues": [],
                "data": [
                  {
                    "timeStamp": "2021-06-07T21:51:00Z",
                    "average": 0
                  }
                ]
              }
            ],
            "errorCode": "Success"
          }
        ],
        "namespace": "microsoft.documentdb/databaseaccounts",
        "resourceregion": "westus2"
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: Learn more about Monitor service - **Lists the metric values for a resource**.
errorCodes: []
