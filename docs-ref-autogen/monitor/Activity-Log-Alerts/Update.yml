### YamlMime:RESTOperation
uid: management.azure.com.monitor.activitylogalerts.update
name: Update
service: Monitor
groupName: Activity Log Alerts
apiVersion: 2020-10-01
summary: Updates 'tags' and 'enabled' fields in an existing Alert rule. This method is used to update the Alert rule tags, and to enable or disable the Alert rule. To update other fields use CreateOrUpdate operation.
consumes:
- application/json
produces:
- application/json
paths:
- content: PATCH https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Insights/activityLogAlerts/{activityLogAlertName}?api-version=2020-10-01
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: The ID of the target subscription.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group. The name is case insensitive.
  types:
  - uid: string
- name: activityLogAlertName
  in: path
  isRequired: true
  description: The name of the Activity Log Alert rule.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: The API version to use for this operation.
  types:
  - uid: string
responses:
- name: 200 OK
  description: An existing Activity Log Alert rule was successfully updated.
  types:
  - uid: ActivityLogAlertResource
- name: Other Status Codes
  description: Error response describing why the operation failed.
  types:
  - uid: ErrorResponse
requestBody:
- name: default
  parameters:
  - name: tags
    in: body
    description: The resource tags
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: properties.enabled
    in: body
    description: Indicates whether this Activity Log Alert rule is enabled. If an Activity Log Alert rule is not enabled, then none of its actions will be activated.
    types:
    - uid: boolean
requestHeader: []
definitions:
- name: ActivityLogAlertResource
  description: An Activity Log Alert rule resource.
  kind: object
  properties:
  - name: properties.scopes
    description: A list of resource IDs that will be used as prefixes. The alert will only apply to Activity Log events with resource IDs that fall under one of these prefixes. This list must include at least one item.
    types:
    - uid: string
      isArray: true
  - name: properties.condition
    description: The condition that will cause this alert to activate.
    types:
    - uid: AlertRuleAllOfCondition
  - name: properties.actions
    description: The actions that will activate when the condition is met.
    types:
    - uid: ActionList
  - name: properties.enabled
    description: Indicates whether this Activity Log Alert rule is enabled. If an Activity Log Alert rule is not enabled, then none of its actions will be activated.
    types:
    - uid: boolean
    defaultValue: true
  - name: properties.description
    description: A description of this Activity Log Alert rule.
    types:
    - uid: string
  - name: id
    isReadyOnly: true
    description: The resource Id.
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: The name of the resource.
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: The type of the resource.
    types:
    - uid: string
  - name: location
    description: The location of the resource. Since Azure Activity Log Alerts is a global service, the location of the rules should always be 'global'.
    types:
    - uid: string
    defaultValue: global
  - name: tags
    description: The tags of the resource.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
- name: ErrorResponse
  description: The error response.
  kind: object
  properties:
  - name: code
    isReadyOnly: true
    description: The error code.
    types:
    - uid: string
  - name: message
    isReadyOnly: true
    description: The error message indicating why the operation failed.
    types:
    - uid: string
- name: AlertRulePatchObject
  description: An Activity Log Alert rule object for the body of patch operations.
  kind: object
  properties:
  - name: tags
    description: The resource tags
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: properties.enabled
    description: Indicates whether this Activity Log Alert rule is enabled. If an Activity Log Alert rule is not enabled, then none of its actions will be activated.
    types:
    - uid: boolean
    defaultValue: true
- name: AlertRuleAllOfCondition
  description: An Activity Log Alert rule condition that is met when all its member conditions are met.
  kind: object
  properties:
  - name: allOf
    description: The list of Activity Log Alert rule conditions.
    types:
    - uid: AlertRuleAnyOfOrLeafCondition
      isArray: true
- name: ActionList
  description: A list of Activity Log Alert rule actions.
  kind: object
  properties:
  - name: actionGroups
    description: The list of the Action Groups.
    types:
    - uid: ActionGroup
      isArray: true
- name: AlertRuleAnyOfOrLeafCondition
  description: >
    An Activity Log Alert rule condition that is met when all its member conditions are met.

    Each condition can be of one of the following types:

    __Important__: Each type has its unique subset of properties. Properties from different types CANNOT exist in one condition.
       * __Leaf Condition -__ must contain 'field' and either 'equals' or 'containsAny'.
      _Please note, 'anyOf' should __not__ be set in a Leaf Condition._
      * __AnyOf Condition -__ must contain __only__ 'anyOf' (which is an array of Leaf Conditions).
      _Please note, 'field', 'equals' and 'containsAny' should __not__ be set in an AnyOf Condition._
  kind: object
  properties:
  - name: anyOf
    description: "An Activity Log Alert rule 'anyOf' condition.  \nAn Activity Log Alert rule condition that is met when at least one of its member leaf conditions are met."
    types:
    - uid: AlertRuleLeafCondition
      isArray: true
  - name: field
    description: >-
      The name of the Activity Log event's field that this condition will examine.

      The possible values for this field are (case-insensitive): 'resourceId', 'category', 'caller', 'level', 'operationName', 'resourceGroup', 'resourceProvider', 'status', 'subStatus', 'resourceType', or anything beginning with 'properties'.
    types:
    - uid: string
  - name: equals
    description: The value of the event's field will be compared to this value (case-insensitive) to determine if the condition is met.
    types:
    - uid: string
  - name: containsAny
    description: The value of the event's field will be compared to the values in this array (case-insensitive) to determine if the condition is met.
    types:
    - uid: string
      isArray: true
- name: ActionGroup
  description: A pointer to an Azure Action Group.
  kind: object
  properties:
  - name: actionGroupId
    description: The resource ID of the Action Group. This cannot be null or empty.
    types:
    - uid: string
  - name: webhookProperties
    description: the dictionary of custom properties to include with the post operation. These data are appended to the webhook payload.
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
- name: AlertRuleLeafCondition
  description: >-
    An Activity Log Alert rule condition that is met by comparing the field and value of an Activity Log event.

    This condition must contain 'field' and either 'equals' or 'containsAny'.
  kind: object
  properties:
  - name: field
    description: >-
      The name of the Activity Log event's field that this condition will examine.

      The possible values for this field are (case-insensitive): 'resourceId', 'category', 'caller', 'level', 'operationName', 'resourceGroup', 'resourceProvider', 'status', 'subStatus', 'resourceType', or anything beginning with 'properties'.
    types:
    - uid: string
  - name: equals
    description: The value of the event's field will be compared to this value (case-insensitive) to determine if the condition is met.
    types:
    - uid: string
  - name: containsAny
    description: The value of the event's field will be compared to the values in this array (case-insensitive) to determine if the condition is met.
    types:
    - uid: string
      isArray: true
examples:
- name: Patch an Activity Log Alert rule
  request:
    uri: PATCH https://management.azure.com/subscriptions/187f412d-1758-44d9-b052-169e2564721d/resourceGroups/MyResourceGroup/providers/Microsoft.Insights/activityLogAlerts/SampleActivityLogAlertRule?api-version=2020-10-01
    body: >-
      {
        "tags": {
          "key1": "value1",
          "key2": "value2"
        },
        "properties": {
          "enabled": false
        }
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      PATCH https://management.azure.com/subscriptions/187f412d-1758-44d9-b052-169e2564721d/resourceGroups/MyResourceGroup/providers/Microsoft.Insights/activityLogAlerts/SampleActivityLogAlertRule?api-version=2020-10-01

      {
        "tags": {
          "key1": "value1",
          "key2": "value2"
        },
        "properties": {
          "enabled": false
        }
      }

      ```

      # [Java](#tab/Java)
      ``` java
      import com.azure.core.util.Context;
      import com.azure.resourcemanager.monitor.models.AlertRulePatchObject;
      import java.util.HashMap;
      import java.util.Map;

      /** Samples for ActivityLogAlerts Update. */
      public final class Main {
          /*
           * x-ms-original-file: specification/monitor/resource-manager/Microsoft.Insights/stable/2020-10-01/examples/ActivityLogAlertRule_Update.json
           */
          /**
           * Sample code: Patch an Activity Log Alert rule.
           *
           * @param azure The entry point for accessing resource management APIs in Azure.
           */
          public static void patchAnActivityLogAlertRule(com.azure.resourcemanager.AzureResourceManager azure) {
              azure
                  .diagnosticSettings()
                  .manager()
                  .serviceClient()
                  .getActivityLogAlerts()
                  .updateWithResponse(
                      "MyResourceGroup",
                      "SampleActivityLogAlertRule",
                      new AlertRulePatchObject().withTags(mapOf("key1", "value1", "key2", "value2")).withEnabled(false),
                      Context.NONE);
          }

          @SuppressWarnings("unchecked")
          private static <T> Map<String, T> mapOf(Object... inputs) {
              Map<String, T> map = new HashMap<>();
              for (int i = 0; i < inputs.length; i += 2) {
                  String key = (String) inputs[i];
                  T value = (T) inputs[i + 1];
                  map.put(key, value);
              }
              return map;
          }
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-java/blob/azure-resourcemanager_2.19.0/sdk/resourcemanager/azure-resourcemanager/README.md) on how to add the SDK to your project and authenticate.
      # [Go](#tab/Go)
      ``` go
      package armmonitor_test

      import (
      	"context"
      	"log"

      	"github.com/Azure/azure-sdk-for-go/sdk/azcore/to"
      	"github.com/Azure/azure-sdk-for-go/sdk/azidentity"
      	"github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/monitor/armmonitor"
      )

      // Generated from example definition: https://github.com/Azure/azure-rest-api-specs/tree/main/specification/monitor/resource-manager/Microsoft.Insights/stable/2020-10-01/examples/ActivityLogAlertRule_Update.json
      func ExampleActivityLogAlertsClient_Update() {
      	cred, err := azidentity.NewDefaultAzureCredential(nil)
      	if err != nil {
      		log.Fatalf("failed to obtain a credential: %v", err)
      	}
      	ctx := context.Background()
      	client, err := armmonitor.NewActivityLogAlertsClient("187f412d-1758-44d9-b052-169e2564721d", cred, nil)
      	if err != nil {
      		log.Fatalf("failed to create client: %v", err)
      	}
      	res, err := client.Update(ctx, "MyResourceGroup", "SampleActivityLogAlertRule", armmonitor.AlertRulePatchObject{
      		Properties: &armmonitor.AlertRulePatchProperties{
      			Enabled: to.Ptr(false),
      		},
      		Tags: map[string]*string{
      			"key1": to.Ptr("value1"),
      			"key2": to.Ptr("value2"),
      		},
      	}, nil)
      	if err != nil {
      		log.Fatalf("failed to finish the request: %v", err)
      	}
      	// TODO: use response item
      	_ = res
      }

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-go/blob/sdk%2Fresourcemanager%2Fmonitor%2Farmmonitor%2Fv0.8.0/sdk/resourcemanager/monitor/armmonitor/README.md) on how to add the SDK to your project and authenticate.
      # [JavaScript](#tab/JavaScript)
      ``` js
      const { MonitorClient } = require("@azure/arm-monitor");
      const { DefaultAzureCredential } = require("@azure/identity");

      /**
       * This sample demonstrates how to Updates 'tags' and 'enabled' fields in an existing Alert rule. This method is used to update the Alert rule tags, and to enable or disable the Alert rule. To update other fields use CreateOrUpdate operation.
       *
       * @summary Updates 'tags' and 'enabled' fields in an existing Alert rule. This method is used to update the Alert rule tags, and to enable or disable the Alert rule. To update other fields use CreateOrUpdate operation.
       * x-ms-original-file: specification/monitor/resource-manager/Microsoft.Insights/stable/2020-10-01/examples/ActivityLogAlertRule_Update.json
       */
      async function patchAnActivityLogAlertRule() {
        const subscriptionId = "187f412d-1758-44d9-b052-169e2564721d";
        const resourceGroupName = "MyResourceGroup";
        const activityLogAlertName = "SampleActivityLogAlertRule";
        const activityLogAlertRulePatch = {
          enabled: false,
          tags: { key1: "value1", key2: "value2" },
        };
        const credential = new DefaultAzureCredential();
        const client = new MonitorClient(credential, subscriptionId);
        const result = await client.activityLogAlerts.update(
          resourceGroupName,
          activityLogAlertName,
          activityLogAlertRulePatch
        );
        console.log(result);
      }

      patchAnActivityLogAlertRule().catch(console.error);

      ```
      Read this [SDK documentation](https://github.com/Azure/azure-sdk-for-js/blob/%40azure%2Farm-monitor_8.0.0-beta.2/sdk/monitor/arm-monitor/README.md) on how to add the SDK to your project and authenticate.
  responses:
  - statusCode: "200"
    body: >-
      {
        "id": "/subscriptions/187f412d-1758-44d9-b052-169e2564721d/resourceGroups/MyResourceGroup/providers/microsoft.insights/activityLogAlerts/SampleActivityLogAlertRule",
        "type": "Microsoft.Insights/ActivityLogAlerts",
        "name": "SampleActivityLogAlertRule",
        "location": "Global",
        "tags": {
          "key1": "value1",
          "key2": "value2"
        },
        "properties": {
          "scopes": [
            "/subscriptions/187f412d-1758-44d9-b052-169e2564721d"
          ],
          "condition": {
            "allOf": [
              {
                "field": "category",
                "equals": "Administrative"
              },
              {
                "field": "level",
                "equals": "Error"
              }
            ]
          },
          "actions": {
            "actionGroups": [
              {
                "actionGroupId": "/subscriptions/187f412d-1758-44d9-b052-169e2564721d/resourceGroups/MyResourceGroup/providers/microsoft.insights/actionGroups/SampleActionGroup",
                "webhookProperties": {
                  "sampleWebhookProperty": "SamplePropertyValue"
                }
              }
            ]
          },
          "enabled": false,
          "description": "Description of sample Activity Log Alert rule."
        }
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: Updates 'tags' and 'enabled' fields in an existing Alert rule. This method is used to update the Alert rule tags, and to enable or disable the Alert rule.
errorCodes: []
