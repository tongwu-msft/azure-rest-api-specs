### YamlMime:RESTOperation
uid: management.azure.com.frontdoorservice.azurefrontdoorstandardpremium(preview).routes.create
name: Create
service: Front Door Service
groupName: Routes
apiVersion: 2020-09-01
summary: Creates a new route with the specified route name under the specified subscription, resource group, profile, and AzureFrontDoor endpoint.
consumes:
- application/json
produces:
- application/json
paths:
- content: PUT https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Cdn/profiles/{profileName}/afdEndpoints/{endpointName}/routes/{routeName}?api-version=2020-09-01
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: Azure Subscription ID.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: Name of the Resource group within the Azure subscription.
  types:
  - uid: string
  pattern: ^[-\w\._\(\)]+$
- name: profileName
  in: path
  isRequired: true
  description: Name of the CDN profile which is unique within the resource group.
  types:
  - uid: string
- name: endpointName
  in: path
  isRequired: true
  description: Name of the endpoint under the profile which is unique globally.
  types:
  - uid: string
- name: routeName
  in: path
  isRequired: true
  description: Name of the routing rule.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: Version of the API to be used with the client request. Current version is 2020-09-01.
  types:
  - uid: string
responses:
- name: 200 OK
  description: OK
  types:
  - uid: Route
- name: 201 Created
  description: Created. The request has been fulfilled and a new endpoint has been created.
  types:
  - uid: Route
- name: 202 Accepted
  description: Accepted. The request has been accepted for processing and the operation will complete asynchronously.
  types:
  - uid: Route
- name: Other Status Codes
  description: CDN error response describing why the operation failed.
  types:
  - uid: AfdErrorResponse
requestBody:
- name: default
  parameters:
  - name: properties.customDomains
    in: body
    description: Domains referenced by this endpoint.
    types:
    - uid: ResourceReference
      isArray: true
  - name: properties.originGroup
    in: body
    isRequired: true
    description: A reference to the origin group.
    types:
    - uid: ResourceReference
  - name: properties.originPath
    in: body
    description: A directory path on the origin that AzureFrontDoor can use to retrieve content from, e.g. contoso.cloudapp.net/originpath.
    types:
    - uid: string
  - name: properties.ruleSets
    in: body
    description: rule sets referenced by this endpoint.
    types:
    - uid: ResourceReference
      isArray: true
  - name: properties.supportedProtocols
    in: body
    description: List of supported protocols for this route.
    types:
    - uid: string
      isArray: true
  - name: properties.patternsToMatch
    in: body
    description: The route patterns of the rule.
    types:
    - uid: string
      isArray: true
  - name: properties.compressionSettings
    in: body
    description: compression settings.
    types:
    - uid: CompressionSettings
  - name: properties.queryStringCachingBehavior
    in: body
    description: Defines how CDN caches requests that include query strings. You can ignore any query strings when caching, bypass caching to prevent requests that contain query strings from being cached, or cache every request with a unique URL.
    types:
    - uid: afdQueryStringCachingBehavior
  - name: properties.forwardingProtocol
    in: body
    description: Protocol this rule will use when forwarding traffic to backends.
    types:
    - uid: ForwardingProtocol
  - name: properties.linkToDefaultDomain
    in: body
    description: whether this route will be linked to the default endpoint domain.
    types:
    - uid: LinkToDefaultDomain
  - name: properties.httpsRedirect
    in: body
    description: Whether to automatically redirect HTTP traffic to HTTPS traffic. Note that this is a easy way to set up this rule and it will be the first rule that gets executed.
    types:
    - uid: httpsRedirect
  - name: properties.enabledState
    in: body
    description: Whether to enable use of this rule. Permitted values are 'Enabled' or 'Disabled'
    types:
    - uid: EnabledState
requestHeader: []
definitions:
- name: SystemData
  description: Read only system data
  kind: object
  properties:
  - name: createdBy
    description: An identifier for the identity that created the resource
    types:
    - uid: string
  - name: createdByType
    description: The type of identity that created the resource
    types:
    - uid: IdentityType
  - name: createdAt
    description: The timestamp of resource creation (UTC)
    types:
    - uid: string
  - name: lastModifiedBy
    description: An identifier for the identity that last modified the resource
    types:
    - uid: string
  - name: lastModifiedByType
    description: The type of identity that last modified the resource
    types:
    - uid: IdentityType
  - name: lastModifiedAt
    description: The timestamp of resource last modification (UTC)
    types:
    - uid: string
- name: ResourceReference
  description: Reference to another resource.
  kind: object
  properties:
  - name: id
    description: Resource ID.
    types:
    - uid: string
- name: CompressionSettings
  description: settings for compression.
  kind: object
  properties:
  - name: contentTypesToCompress
    description: List of content types on which compression applies. The value should be a valid MIME type.
    types:
    - uid: string
      isArray: true
  - name: isCompressionEnabled
    description: Indicates whether content compression is enabled on AzureFrontDoor. Default value is false. If compression is enabled, content will be served as compressed if user requests for a compressed version. Content won't be compressed on AzureFrontDoor when requested content is smaller than 1 byte or larger than 1 MB.
    types:
    - uid: boolean
- name: Route
  description: Friendly Routes name mapping to the any Routes or secret related information.
  kind: object
  properties:
  - name: id
    isReadyOnly: true
    description: Resource ID.
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: Resource name.
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: Resource type.
    types:
    - uid: string
  - name: systemData
    isReadyOnly: true
    description: Read only system data
    types:
    - uid: SystemData
  - name: properties.customDomains
    description: Domains referenced by this endpoint.
    types:
    - uid: ResourceReference
      isArray: true
  - name: properties.originGroup
    description: A reference to the origin group.
    types:
    - uid: ResourceReference
  - name: properties.originPath
    description: A directory path on the origin that AzureFrontDoor can use to retrieve content from, e.g. contoso.cloudapp.net/originpath.
    types:
    - uid: string
  - name: properties.ruleSets
    description: rule sets referenced by this endpoint.
    types:
    - uid: ResourceReference
      isArray: true
  - name: properties.supportedProtocols
    description: List of supported protocols for this route.
    types:
    - uid: string
      isArray: true
  - name: properties.patternsToMatch
    description: The route patterns of the rule.
    types:
    - uid: string
      isArray: true
  - name: properties.compressionSettings
    description: compression settings.
    types:
    - uid: CompressionSettings
  - name: properties.queryStringCachingBehavior
    description: Defines how CDN caches requests that include query strings. You can ignore any query strings when caching, bypass caching to prevent requests that contain query strings from being cached, or cache every request with a unique URL.
    types:
    - uid: afdQueryStringCachingBehavior
  - name: properties.forwardingProtocol
    description: Protocol this rule will use when forwarding traffic to backends.
    types:
    - uid: ForwardingProtocol
  - name: properties.linkToDefaultDomain
    description: whether this route will be linked to the default endpoint domain.
    types:
    - uid: LinkToDefaultDomain
  - name: properties.httpsRedirect
    description: Whether to automatically redirect HTTP traffic to HTTPS traffic. Note that this is a easy way to set up this rule and it will be the first rule that gets executed.
    types:
    - uid: httpsRedirect
  - name: properties.enabledState
    description: Whether to enable use of this rule. Permitted values are 'Enabled' or 'Disabled'
    types:
    - uid: EnabledState
  - name: properties.provisioningState
    isReadyOnly: true
    description: Provisioning status
    types:
    - uid: AfdProvisioningState
  - name: properties.deploymentStatus
    isReadyOnly: true
    description: ''
    types:
    - uid: DeploymentStatus
- name: AfdErrorResponse
  description: Error response
  kind: object
  properties:
  - name: error
    description: The error object.
    types:
    - uid: ErrorResponse
- name: IdentityType
  description: The type of identity that creates/modifies resources
  kind: enum
  properties:
  - name: user
    types:
    - uid: string
  - name: application
    types:
    - uid: string
  - name: managedIdentity
    types:
    - uid: string
  - name: key
    types:
    - uid: string
- name: afdQueryStringCachingBehavior
  description: Defines how CDN caches requests that include query strings. You can ignore any query strings when caching, bypass caching to prevent requests that contain query strings from being cached, or cache every request with a unique URL.
  kind: enum
  properties:
  - name: IgnoreQueryString
    types:
    - uid: string
  - name: UseQueryString
    types:
    - uid: string
  - name: NotSet
    types:
    - uid: string
- name: ForwardingProtocol
  description: Protocol this rule will use when forwarding traffic to backends.
  kind: enum
  properties:
  - name: HttpOnly
    types:
    - uid: string
  - name: HttpsOnly
    types:
    - uid: string
  - name: MatchRequest
    types:
    - uid: string
- name: LinkToDefaultDomain
  description: whether this route will be linked to the default endpoint domain.
  kind: enum
  properties:
  - name: Enabled
    types:
    - uid: string
  - name: Disabled
    types:
    - uid: string
- name: httpsRedirect
  description: Whether to automatically redirect HTTP traffic to HTTPS traffic. Note that this is a easy way to set up this rule and it will be the first rule that gets executed.
  kind: enum
  properties:
  - name: Enabled
    types:
    - uid: string
  - name: Disabled
    types:
    - uid: string
- name: EnabledState
  description: Whether to enable use of this rule. Permitted values are 'Enabled' or 'Disabled'
  kind: enum
  properties:
  - name: Enabled
    types:
    - uid: string
  - name: Disabled
    types:
    - uid: string
- name: AfdProvisioningState
  description: Provisioning status
  kind: enum
  properties:
  - name: Succeeded
    types:
    - uid: string
  - name: Failed
    types:
    - uid: string
  - name: Updating
    types:
    - uid: string
  - name: Deleting
    types:
    - uid: string
  - name: Creating
    types:
    - uid: string
- name: DeploymentStatus
  kind: enum
  properties:
  - name: NotStarted
    types:
    - uid: string
  - name: InProgress
    types:
    - uid: string
  - name: Succeeded
    types:
    - uid: string
  - name: Failed
    types:
    - uid: string
- name: ErrorResponse
  description: Error response indicates CDN service is not able to process the incoming request. The reason is provided in the error message.
  kind: object
  properties:
  - name: code
    isReadyOnly: true
    description: Error code.
    types:
    - uid: string
  - name: message
    isReadyOnly: true
    description: Error message indicating why the operation failed.
    types:
    - uid: string
examples:
- name: Routes_Create
  request:
    uri: PUT https://management.azure.com/subscriptions/subid/resourceGroups/RG/providers/Microsoft.Cdn/profiles/profile1/afdEndpoints/endpoint1/routes/route1?api-version=2020-09-01
    body: >-
      {
        "properties": {
          "customDomains": [
            {
              "id": "/subscriptions/subid/resourceGroups/RG/providers/Microsoft.Cdn/profiles/profile1/customDomains/domain1"
            }
          ],
          "originGroup": {
            "id": "/subscriptions/subid/resourceGroups/RG/providers/Microsoft.Cdn/profiles/profile1/originGroups/originGroup1"
          },
          "originPath": null,
          "ruleSets": [
            {
              "id": "/subscriptions/subid/resourceGroups/RG/providers/Microsoft.Cdn/profiles/profile1/ruleSets/ruleSet1"
            }
          ],
          "supportedProtocols": [
            "Https",
            "Http"
          ],
          "patternsToMatch": [
            "/*"
          ],
          "compressionSettings": {
            "contentTypesToCompress": [
              "text/html",
              "application/octet-stream"
            ],
            "isCompressionEnabled": true
          },
          "queryStringCachingBehavior": "IgnoreQueryString",
          "forwardingProtocol": "MatchRequest",
          "linkToDefaultDomain": "Enabled",
          "httpsRedirect": "Enabled",
          "enabledState": "Enabled"
        }
      }
  responses:
  - statusCode: "200"
    body: >-
      {
        "name": "route1",
        "id": "/subscriptions/subid/resourcegroups/RG/providers/Microsoft.Cdn/profiles/profile1/afdendpoints/endpoint1/routes/route1",
        "type": "Microsoft.Cdn/profiles/afdendpoints/routes",
        "properties": {
          "customDomains": [
            {
              "id": "/subscriptions/subid/resourceGroups/RG/providers/Microsoft.Cdn/profiles/profile1/customDomains/domain1"
            }
          ],
          "originGroup": {
            "id": "/subscriptions/subid/resourceGroups/RG/providers/Microsoft.Cdn/profiles/profile1/originGroups/originGroup1"
          },
          "originPath": null,
          "ruleSets": [
            {
              "id": "/subscriptions/subid/resourceGroups/RG/providers/Microsoft.Cdn/profiles/profile1/ruleSets/ruleSet1"
            }
          ],
          "supportedProtocols": [
            "Https",
            "Http"
          ],
          "patternsToMatch": [
            "/*"
          ],
          "compressionSettings": {
            "contentTypesToCompress": [
              "text/html",
              "application/octet-stream"
            ],
            "isCompressionEnabled": true
          },
          "queryStringCachingBehavior": "IgnoreQueryString",
          "forwardingProtocol": "MatchRequest",
          "linkToDefaultDomain": "Enabled",
          "httpsRedirect": "Enabled",
          "enabledState": "Enabled",
          "provisioningState": "Succeeded",
          "deploymentStatus": "NotStarted"
        }
      }
  - statusCode: "201"
    body: >-
      {
        "name": "route1",
        "id": "/subscriptions/subid/resourcegroups/RG/providers/Microsoft.Cdn/profiles/profile1/afdendpoints/endpoint1/routes/route1",
        "type": "Microsoft.Cdn/profiles/afdendpoints/routes",
        "properties": {
          "customDomains": [
            {
              "id": "/subscriptions/subid/resourceGroups/RG/providers/Microsoft.Cdn/profiles/profile1/customDomains/domain1"
            }
          ],
          "originGroup": {
            "id": "/subscriptions/subid/resourceGroups/RG/providers/Microsoft.Cdn/profiles/profile1/originGroups/originGroup1"
          },
          "originPath": null,
          "ruleSets": [
            {
              "id": "/subscriptions/subid/resourceGroups/RG/providers/Microsoft.Cdn/profiles/profile1/ruleSets/ruleSet1"
            }
          ],
          "supportedProtocols": [
            "Https",
            "Http"
          ],
          "patternsToMatch": [
            "/*"
          ],
          "compressionSettings": {
            "contentTypesToCompress": [
              "text/html",
              "application/octet-stream"
            ],
            "isCompressionEnabled": true
          },
          "queryStringCachingBehavior": "IgnoreQueryString",
          "forwardingProtocol": "MatchRequest",
          "linkToDefaultDomain": "Enabled",
          "httpsRedirect": "Enabled",
          "enabledState": "Enabled",
          "provisioningState": "Creating",
          "deploymentStatus": "NotStarted"
        }
      }
  - statusCode: "202"
    body: >-
      {
        "name": "route1",
        "id": "/subscriptions/subid/resourcegroups/RG/providers/Microsoft.Cdn/profiles/profile1/afdendpoints/endpoint1/routes/route1",
        "type": "Microsoft.Cdn/profiles/afdendpoints/routes",
        "properties": {
          "customDomains": [
            {
              "id": "/subscriptions/subid/resourceGroups/RG/providers/Microsoft.Cdn/profiles/profile1/customDomains/domain1"
            }
          ],
          "originGroup": {
            "id": "/subscriptions/subid/resourceGroups/RG/providers/Microsoft.Cdn/profiles/profile1/originGroups/originGroup1"
          },
          "originPath": null,
          "ruleSets": [
            {
              "id": "/subscriptions/subid/resourceGroups/RG/providers/Microsoft.Cdn/profiles/profile1/ruleSets/ruleSet1"
            }
          ],
          "supportedProtocols": [
            "Https",
            "Http"
          ],
          "patternsToMatch": [
            "/*"
          ],
          "compressionSettings": {
            "contentTypesToCompress": [
              "text/html",
              "application/octet-stream"
            ],
            "isCompressionEnabled": true
          },
          "queryStringCachingBehavior": "IgnoreQueryString",
          "forwardingProtocol": "MatchRequest",
          "linkToDefaultDomain": "Enabled",
          "httpsRedirect": "Enabled",
          "enabledState": "Enabled",
          "provisioningState": "Creating",
          "deploymentStatus": "NotStarted"
        }
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow.
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: Creates a new route with the specified route name under the specified subscription, resource group, profile, and AzureFrontDoor endpoint.
errorCodes: []
