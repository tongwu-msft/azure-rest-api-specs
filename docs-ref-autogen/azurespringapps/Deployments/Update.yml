### YamlMime:RESTOperation
uid: management.azure.com.azurespringapps.deployments.update
name: Update
service: Azure Spring Apps
groupName: Deployments
apiVersion: 2022-03-01-preview
summary: Operation to update an exiting Deployment.
consumes:
- application/json
produces:
- application/json
paths:
- content: PATCH https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.AppPlatform/Spring/{serviceName}/apps/{appName}/deployments/{deploymentName}?api-version=2022-03-01-preview
uriParameters:
- name: subscriptionId
  in: path
  isRequired: true
  description: Gets subscription ID which uniquely identify the Microsoft Azure subscription. The subscription ID forms part of the URI for every service call.
  types:
  - uid: string
- name: resourceGroupName
  in: path
  isRequired: true
  description: The name of the resource group that contains the resource. You can obtain this value from the Azure Resource Manager API or the portal.
  types:
  - uid: string
- name: serviceName
  in: path
  isRequired: true
  description: The name of the Service resource.
  types:
  - uid: string
- name: appName
  in: path
  isRequired: true
  description: The name of the App resource.
  types:
  - uid: string
- name: deploymentName
  in: path
  isRequired: true
  description: The name of the Deployment resource.
  types:
  - uid: string
- name: api-version
  in: query
  isRequired: true
  description: The API version to use for this operation.
  types:
  - uid: string
responses:
- name: 200 OK
  description: Success. The response describes the updated Deployment.
  types:
  - uid: DeploymentResource
- name: 202 Accepted
  description: >-
    Accepted. The response indicates the exiting Deployment is now updating and contains a Location

    header to query the operation result.
  types:
  - uid: DeploymentResource
- name: Other Status Codes
  description: Error response describing why the operation failed.
  types:
  - uid: CloudError
requestBody:
- name: default
  parameters:
  - name: properties
    in: body
    description: Properties of the Deployment resource
    types:
    - uid: DeploymentResourceProperties
  - name: sku
    in: body
    description: Sku of the Deployment resource
    types:
    - uid: Sku
requestHeader: []
definitions:
- name: DeploymentResourceProperties
  description: Deployment resource properties payload
  kind: object
  properties:
  - name: source
    description: Uploaded source information of the deployment.
    types:
    - uid: BuildResultUserSourceInfo
    - uid: CustomContainerUserSourceInfo
    typesTitle: UserSourceInfo
  - name: deploymentSettings
    description: Deployment settings of the Deployment
    types:
    - uid: DeploymentSettings
  - name: provisioningState
    isReadyOnly: true
    description: Provisioning state of the Deployment
    types:
    - uid: DeploymentResourceProvisioningState
  - name: status
    isReadyOnly: true
    description: Status of the Deployment
    types:
    - uid: DeploymentResourceStatus
  - name: active
    description: Indicates whether the Deployment is active
    types:
    - uid: boolean
  - name: instances
    isReadyOnly: true
    description: Collection of instances belong to the Deployment
    types:
    - uid: DeploymentInstance
      isArray: true
- name: Sku
  description: Sku of Azure Spring Cloud
  kind: object
  properties:
  - name: name
    description: Name of the Sku
    types:
    - uid: string
  - name: tier
    description: Tier of the Sku
    types:
    - uid: string
  - name: capacity
    description: Current capacity of the target resource
    types:
    - uid: integer
- name: SystemData
  description: Metadata pertaining to creation and last modification of the resource.
  kind: object
  properties:
  - name: createdBy
    description: The identity that created the resource.
    types:
    - uid: string
  - name: createdByType
    description: The type of identity that created the resource.
    types:
    - uid: createdByType
  - name: createdAt
    description: The timestamp of resource creation (UTC).
    types:
    - uid: string
  - name: lastModifiedBy
    description: The identity that last modified the resource.
    types:
    - uid: string
  - name: lastModifiedByType
    description: The type of identity that last modified the resource.
    types:
    - uid: lastModifiedByType
  - name: lastModifiedAt
    description: The timestamp of resource modification (UTC).
    types:
    - uid: string
- name: DeploymentResource
  description: Deployment resource payload
  kind: object
  properties:
  - name: properties
    description: Properties of the Deployment resource
    types:
    - uid: DeploymentResourceProperties
  - name: sku
    description: Sku of the Deployment resource
    types:
    - uid: Sku
  - name: id
    isReadyOnly: true
    description: Fully qualified resource Id for the resource.
    types:
    - uid: string
  - name: name
    isReadyOnly: true
    description: The name of the resource.
    types:
    - uid: string
  - name: type
    isReadyOnly: true
    description: The type of the resource.
    types:
    - uid: string
  - name: systemData
    isReadyOnly: true
    description: Metadata pertaining to creation and last modification of the resource.
    types:
    - uid: SystemData
- name: CloudError
  description: An error response from the service.
  kind: object
  properties:
  - name: error
    description: An error response from the service.
    types:
    - uid: CloudErrorBody
- name: DeploymentSettings
  description: Deployment settings payload
  kind: object
  properties:
  - name: resourceRequests
    description: The requested resource quantity for required CPU and Memory. It is recommended that using this field to represent the required CPU and Memory, the old field cpu and memoryInGB will be deprecated later.
    types:
    - uid: ResourceRequests
  - name: environmentVariables
    description: Collection of environment variables
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: string
  - name: addonConfigs
    description: Collection of addons
    types:
    - uid: object
      isDictionary: true
      additionalTypes:
      - uid: string
      - uid: object
  - name: containerProbeSettings
    description: Container liveness and readiness probe settings
    types:
    - uid: ContainerProbeSettings
- name: DeploymentResourceProvisioningState
  description: Provisioning state of the Deployment
  kind: enum
  properties:
  - name: Creating
    types:
    - uid: string
  - name: Updating
    types:
    - uid: string
  - name: Succeeded
    types:
    - uid: string
  - name: Failed
    types:
    - uid: string
- name: DeploymentResourceStatus
  description: Status of the Deployment
  kind: enum
  properties:
  - name: Stopped
    types:
    - uid: string
  - name: Running
    types:
    - uid: string
- name: DeploymentInstance
  description: Deployment instance payload
  kind: object
  properties:
  - name: name
    isReadyOnly: true
    description: Name of the deployment instance
    types:
    - uid: string
  - name: status
    isReadyOnly: true
    description: Status of the deployment instance
    types:
    - uid: string
  - name: reason
    isReadyOnly: true
    description: Failed reason of the deployment instance
    types:
    - uid: string
  - name: discoveryStatus
    isReadyOnly: true
    description: Discovery status of the deployment instance
    types:
    - uid: string
  - name: startTime
    isReadyOnly: true
    description: Start time of the deployment instance
    types:
    - uid: string
  - name: zone
    isReadyOnly: true
    description: Availability zone information of the deployment instance
    types:
    - uid: string
- name: createdByType
  description: The type of identity that created the resource.
  kind: enum
  properties:
  - name: User
    types:
    - uid: string
  - name: Application
    types:
    - uid: string
  - name: ManagedIdentity
    types:
    - uid: string
  - name: Key
    types:
    - uid: string
- name: lastModifiedByType
  description: The type of identity that last modified the resource.
  kind: enum
  properties:
  - name: User
    types:
    - uid: string
  - name: Application
    types:
    - uid: string
  - name: ManagedIdentity
    types:
    - uid: string
  - name: Key
    types:
    - uid: string
- name: CloudErrorBody
  description: An error response from the service.
  kind: object
  properties:
  - name: code
    description: An identifier for the error. Codes are invariant and are intended to be consumed programmatically.
    types:
    - uid: string
  - name: message
    description: A message describing the error, intended to be suitable for display in a user interface.
    types:
    - uid: string
  - name: target
    description: The target of the particular error. For example, the name of the property in error.
    types:
    - uid: string
  - name: details
    description: A list of additional details about the error.
    types:
    - uid: CloudErrorBody
      isArray: true
- name: BuildResultUserSourceInfo
  description: Reference to a build result
  kind: object
  properties:
  - name: buildResultId
    description: Resource id of an existing succeeded build result under the same Spring instance.
    types:
    - uid: string
  - name: type
    description: Type of the source uploaded
    types:
    - uid: BuildResult
    typesTitle: string
  - name: version
    description: Version of the source
    types:
    - uid: string
- name: CustomContainerUserSourceInfo
  description: Custom container user source info
  kind: object
  properties:
  - name: customContainer
    description: Custom container payload
    types:
    - uid: CustomContainer
  - name: type
    description: Type of the source uploaded
    types:
    - uid: Container
    typesTitle: string
  - name: version
    description: Version of the source
    types:
    - uid: string
- name: ResourceRequests
  description: Deployment resource request payload
  kind: object
  properties:
  - name: cpu
    description: Required CPU. 1 core can be represented by 1 or 1000m. This should be 500m or 1 for Basic tier, and {500m, 1, 2, 3, 4} for Standard tier.
    types:
    - uid: string
  - name: memory
    description: Required memory. 1 GB can be represented by 1Gi or 1024Mi. This should be {512Mi, 1Gi, 2Gi} for Basic tier, and {512Mi, 1Gi, 2Gi, ..., 8Gi} for Standard tier.
    types:
    - uid: string
- name: ContainerProbeSettings
  description: Container liveness and readiness probe settings
  kind: object
  properties:
  - name: disableProbe
    description: Indicates whether disable the liveness and readiness probe
    types:
    - uid: boolean
- name: CustomContainer
  description: Custom container payload
  kind: object
  properties:
  - name: server
    description: The name of the registry that contains the container image
    types:
    - uid: string
  - name: containerImage
    description: Container image of the custom container. This should be in the form of <repository>:<tag> without the server name of the registry
    types:
    - uid: string
  - name: command
    description: Entrypoint array. Not executed within a shell. The docker image's ENTRYPOINT is used if this is not provided.
    types:
    - uid: string
      isArray: true
  - name: args
    description: Arguments to the entrypoint. The docker image's CMD is used if this is not provided.
    types:
    - uid: string
      isArray: true
  - name: imageRegistryCredential
    description: Credential of the image registry
    types:
    - uid: ImageRegistryCredential
  - name: languageFramework
    description: Language framework of the container image uploaded
    types:
    - uid: string
- name: ImageRegistryCredential
  description: Credential of the image registry
  kind: object
  properties:
  - name: username
    description: The username of the image registry credential
    types:
    - uid: string
  - name: password
    description: The password of the image registry credential
    types:
    - uid: string
examples:
- name: Deployments_Update
  request:
    uri: PATCH https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/myResourceGroup/providers/Microsoft.AppPlatform/Spring/myservice/apps/myapp/deployments/mydeployment?api-version=2022-03-01-preview
    body: >-
      {
        "properties": {
          "source": {
            "type": "Source",
            "relativePath": "resources/a172cedcae47474b615c54d510a5d84a8dea3032e958587430b413538be3f333-2019082605-e3095339-1723-44b7-8b5e-31b1003978bc",
            "version": "1.0",
            "artifactSelector": "sub-module-1"
          },
          "instances": null
        }
      }
  responses:
  - statusCode: "200"
    body: >-
      {
        "properties": {
          "source": {
            "type": "Source",
            "relativePath": "resources/a172cedcae47474b615c54d510a5d84a8dea3032e958587430b413538be3f333-2019082605-e3095339-1723-44b7-8b5e-31b1003978bc",
            "version": "1.0",
            "artifactSelector": "sub-module-1"
          },
          "deploymentSettings": {
            "resourceRequests": {
              "cpu": "1000m",
              "memory": "3Gi"
            },
            "environmentVariables": {
              "env": "test"
            }
          },
          "provisioningState": "Succeeded",
          "status": "Running",
          "active": true,
          "instances": [
            {
              "name": "instance1",
              "status": "Running",
              "discoveryStatus": "pending",
              "startTime": "2020-08-26T01:55:02Z"
            }
          ]
        },
        "sku": {
          "name": "S0",
          "tier": "Standard",
          "capacity": 1
        },
        "systemData": {
          "createdBy": "sample-user",
          "createdByType": "User",
          "createdAt": "2021-08-11T03:16:03.944Z",
          "lastModifiedBy": "sample-user",
          "lastModifiedByType": "User",
          "lastModifiedAt": "2021-08-11T03:17:03.944Z"
        },
        "type": "Microsoft.AppPlatform/Spring/apps/deployments",
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/myResourceGroup/providers/Microsoft.AppPlatform/Spring/myservice/apps/myapp/deployments/mydeployment",
        "name": "mydeployment"
      }
  - statusCode: "202"
    headers:
    - name: Location
      value: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/myResourceGroup/providers/Microsoft.AppPlatform/locations/eastus/operationStatus/default/operationId/00000000-0000-0000-0000-000000000000?api-version=2022-03-01-preview
    - name: Azure-AsyncOperation
      value: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/myResourceGroup/providers/Microsoft.AppPlatform/locations/eastus/operationResults/00000000-0000-0000-0000-000000000000/Spring/default?api-version=2022-03-01-preview
    body: >-
      {
        "properties": {
          "source": {
            "type": "Source",
            "relativePath": "resources/a172cedcae47474b615c54d510a5d84a8dea3032e958587430b413538be3f333-2019082605-e3095339-1723-44b7-8b5e-31b1003978bc",
            "version": "1.0",
            "artifactSelector": "sub-module-1"
          },
          "deploymentSettings": {
            "resourceRequests": {
              "cpu": "1000m",
              "memory": "3Gi"
            },
            "environmentVariables": {
              "env": "test"
            }
          },
          "provisioningState": "Updating",
          "status": "Running",
          "active": true,
          "instances": [
            {
              "name": "instance1",
              "status": "Running",
              "discoveryStatus": "pending",
              "startTime": "2020-08-26T01:55:02Z"
            }
          ]
        },
        "sku": {
          "name": "S0",
          "tier": "Standard",
          "capacity": 1
        },
        "systemData": {
          "createdBy": "sample-user",
          "createdByType": "User",
          "createdAt": "2021-08-11T03:16:03.944Z",
          "lastModifiedBy": "sample-user",
          "lastModifiedByType": "User",
          "lastModifiedAt": "2021-08-11T03:17:03.944Z"
        },
        "type": "Microsoft.AppPlatform/Spring/apps/deployments",
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/myResourceGroup/providers/Microsoft.AppPlatform/Spring/myservice/apps/myapp/deployments/mydeployment",
        "name": "mydeployment"
      }
- name: Deployments_Update_CustomContainer
  request:
    uri: PATCH https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/myResourceGroup/providers/Microsoft.AppPlatform/Spring/myservice/apps/myapp/deployments/mydeployment?api-version=2022-03-01-preview
    body: >-
      {
        "properties": {
          "source": {
            "type": "Container",
            "customContainer": {
              "server": "mynewacr.azurecr.io",
              "containerImage": "myNewContainerImage:v1",
              "command": [
                "/bin/sh"
              ],
              "args": [
                "-c",
                "while true; do echo hello; sleep 10;done"
              ],
              "imageRegistryCredential": {
                "username": "myNewUsername",
                "password": "<myNewPassword>"
              }
            }
          },
          "instances": null
        }
      }
  responses:
  - statusCode: "200"
    body: >-
      {
        "properties": {
          "source": {
            "type": "Container",
            "customContainer": {
              "server": "mynewacr.azurecr.io",
              "containerImage": "myNewContainerImage:v1",
              "imageRegistryCredential": {
                "username": "myNewUsername",
                "password": ""
              }
            }
          },
          "deploymentSettings": {
            "resourceRequests": {
              "cpu": "1000m",
              "memory": "3Gi"
            },
            "environmentVariables": {
              "env": "test"
            }
          },
          "provisioningState": "Succeeded",
          "status": "Running",
          "active": false,
          "instances": [
            {
              "name": "instance1",
              "status": "Running",
              "discoveryStatus": "N/A",
              "startTime": "2020-08-26T01:55:02Z"
            }
          ]
        },
        "systemData": {
          "createdBy": "sample-user",
          "createdByType": "User",
          "createdAt": "2021-08-11T03:16:03.944Z",
          "lastModifiedBy": "sample-user",
          "lastModifiedByType": "User",
          "lastModifiedAt": "2021-08-11T03:17:03.944Z"
        },
        "sku": {
          "name": "S0",
          "tier": "Standard",
          "capacity": 1
        },
        "type": "Microsoft.AppPlatform/Spring/apps/deployments",
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/myResourceGroup/providers/Microsoft.AppPlatform/Spring/myservice/apps/myapp/deployments/mydeployment",
        "name": "mydeployment"
      }
  - statusCode: "202"
    headers:
    - name: Location
      value: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/myResourceGroup/providers/Microsoft.AppPlatform/locations/eastus/operationStatus/default/operationId/00000000-0000-0000-0000-000000000000?api-version=2022-03-01-preview
    - name: Azure-AsyncOperation
      value: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/myResourceGroup/providers/Microsoft.AppPlatform/locations/eastus/operationResults/00000000-0000-0000-0000-000000000000/Spring/default?api-version=2022-03-01-preview
    body: >-
      {
        "properties": {
          "source": {
            "type": "Container",
            "customContainer": {
              "server": "mynewacr.azurecr.io",
              "containerImage": "myNewContainerImage:v1",
              "imageRegistryCredential": {
                "username": "myNewUsername",
                "password": ""
              }
            }
          },
          "deploymentSettings": {
            "resourceRequests": {
              "cpu": "1000m",
              "memory": "3Gi"
            },
            "environmentVariables": {
              "env": "test"
            }
          },
          "provisioningState": "Updating",
          "status": "Running",
          "active": false,
          "instances": [
            {
              "name": "instance1",
              "status": "Running",
              "discoveryStatus": "N/A",
              "startTime": "2020-08-26T01:55:02Z"
            }
          ]
        },
        "systemData": {
          "createdBy": "sample-user",
          "createdByType": "User",
          "createdAt": "2021-08-11T03:16:03.944Z",
          "lastModifiedBy": "sample-user",
          "lastModifiedByType": "User",
          "lastModifiedAt": "2021-08-11T03:17:03.944Z"
        },
        "sku": {
          "name": "S0",
          "tier": "Standard",
          "capacity": 1
        },
        "type": "Microsoft.AppPlatform/Spring/apps/deployments",
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/myResourceGroup/providers/Microsoft.AppPlatform/Spring/myservice/apps/myapp/deployments/mydeployment",
        "name": "mydeployment"
      }
security:
- name: azure_auth
  type: oauth2
  description: Azure Active Directory OAuth2 Flow
  flow: implicit
  authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
  scopes:
  - name: user_impersonation
    description: impersonate your user account
metadata:
  description: Learn more about Azure Spring Apps service - Operation to update an exiting Deployment.
errorCodes: []
