### YamlMime:RESTOperation
uid: westcentralus.api.cognitive.microsoft.com.vision.v3.1.computervision.3.1.analyzeimage.analyzeimage
name: Analyze Image
service: Cognitive Services - Computer Vision
groupName: Analyze Image
apiVersion: "3.1"
summary: >-
  This operation extracts a rich set of visual features based on the image content.

  Two input methods are supported -- (1) Uploading an image or (2) specifying an image URL. Within your request, there is an optional parameter to allow you to choose which features to return. By default, image categories are returned in the response.

  A successful response will be returned in JSON. If the request failed, the response will contain an error code and a message to help understand what went wrong.
consumes:
- application/json
produces:
- application/json
paths:
- content: POST {Endpoint}/vision/v3.1/analyze
- content: POST {Endpoint}/vision/v3.1/analyze?visualFeatures={visualFeatures}&details={details}&language={language}&descriptionExclude={descriptionExclude}
  isOptional: true
uriParameters:
- name: Endpoint
  in: path
  isRequired: true
  skipUrlEncoding: true
  description: Supported Cognitive Services endpoints.
  types:
  - uid: string
- name: visualFeatures
  in: query
  description: 'A string indicating what visual feature types to return. Multiple values should be comma-separated. Valid visual feature types include: Categories - categorizes image content according to a taxonomy defined in documentation. Tags - tags the image with a detailed list of words related to the image content. Description - describes the image content with a complete English sentence. Faces - detects if faces are present. If present, generate coordinates, gender and age. ImageType - detects if image is clipart or a line drawing. Color - determines the accent color, dominant color, and whether an image is black&white. Adult - detects if the image is pornographic in nature (depicts nudity or a sex act), or is gory (depicts extreme violence or blood). Sexually suggestive content (aka racy content) is also detected. Objects - detects various objects within an image, including the approximate location. The Objects argument is only available in English. Brands - detects various brands within an image, including the approximate location. The Brands argument is only available in English.'
  types:
  - uid: array
- name: details
  in: query
  description: 'A string indicating which domain-specific details to return. Multiple values should be comma-separated. Valid visual feature types include: Celebrities - identifies celebrities if detected in the image, Landmarks - identifies notable landmarks in the image.'
  types:
  - uid: array
- name: language
  in: query
  description: The desired language for output generation. If this parameter is not specified, the default value is &quot;en&quot;.Supported languages:en - English, Default. es - Spanish, ja - Japanese, pt - Portuguese, zh - Simplified Chinese.
  types:
  - uid: string
- name: descriptionExclude
  in: query
  description: Turn off specified domain models when generating the description.
  types:
  - uid: array
responses:
- name: 200 OK
  description: >-
    The response include the extracted features in JSON format. Here is the definitions for enumeration types:

     ClipartType

     Non - clipart = 0, ambiguous = 1, normal - clipart = 2, good - clipart = 3. LineDrawingTypeNon - LineDrawing = 0, LineDrawing = 1.
  types:
  - uid: ImageAnalysis
- name: Other Status Codes
  description: Error response.
  types:
  - uid: ComputerVisionError
requestBody:
- name: default
  parameters:
  - name: url
    in: body
    isRequired: true
    description: Publicly reachable URL of an image.
    types:
    - uid: string
requestHeader:
- name: Ocp-Apim-Subscription-Key
  in: header
  isRequired: true
  types:
  - uid: string
definitions:
- name: ImageAnalysis
  description: Result of AnalyzeImage operation.
  kind: object
  properties:
  - name: categories
    description: An array indicating identified categories.
    types:
    - uid: Category
      isArray: true
  - name: adult
    description: An object describing whether the image contains adult-oriented content and/or is racy.
    types:
    - uid: AdultInfo
  - name: color
    description: An object providing additional metadata describing color attributes.
    types:
    - uid: ColorInfo
  - name: imageType
    description: An object providing possible image types and matching confidence levels.
    types:
    - uid: ImageType
  - name: tags
    description: A list of tags with confidence level.
    types:
    - uid: ImageTag
      isArray: true
  - name: description
    description: A collection of content tags, along with a list of captions sorted by confidence level, and image metadata.
    types:
    - uid: ImageDescriptionDetails
  - name: faces
    description: An array of possible faces within the image.
    types:
    - uid: FaceDescription
      isArray: true
  - name: objects
    description: Array of objects describing what was detected in the image.
    types:
    - uid: DetectedObject
      isArray: true
  - name: brands
    description: Array of brands detected in the image.
    types:
    - uid: DetectedBrand
      isArray: true
  - name: requestId
    description: Id of the REST API request.
    types:
    - uid: string
  - name: metadata
    description: Image metadata.
    types:
    - uid: ImageMetadata
- name: ComputerVisionError
  description: Details about the API request error.
  kind: object
  properties:
  - name: code
    description: The error code.
    types:
    - uid: ComputerVisionErrorCodes
  - name: message
    description: A message explaining the error reported by the service.
    types:
    - uid: string
  - name: requestId
    description: A unique request identifier.
    types:
    - uid: string
- name: ImageUrl
  kind: object
  properties:
  - name: url
    description: Publicly reachable URL of an image.
    types:
    - uid: string
- name: Category
  description: An object describing identified category.
  kind: object
  properties:
  - name: name
    description: Name of the category.
    types:
    - uid: string
  - name: score
    description: Scoring of the category.
    types:
    - uid: number
  - name: detail
    description: Details of the identified category.
    types:
    - uid: CategoryDetail
- name: AdultInfo
  description: An object describing whether the image contains adult-oriented content and/or is racy.
  kind: object
  properties:
  - name: isAdultContent
    description: A value indicating if the image contains adult-oriented content.
    types:
    - uid: boolean
  - name: isRacyContent
    description: A value indicating if the image is racy.
    types:
    - uid: boolean
  - name: isGoryContent
    description: A value indicating if the image is gory.
    types:
    - uid: boolean
  - name: adultScore
    description: Score from 0 to 1 that indicates how much the content is considered adult-oriented within the image.
    types:
    - uid: number
  - name: racyScore
    description: Score from 0 to 1 that indicates how suggestive is the image.
    types:
    - uid: number
  - name: goreScore
    description: Score from 0 to 1 that indicates how gory is the image.
    types:
    - uid: number
- name: ColorInfo
  description: An object providing additional metadata describing color attributes.
  kind: object
  properties:
  - name: dominantColorForeground
    description: Possible dominant foreground color.
    types:
    - uid: string
  - name: dominantColorBackground
    description: Possible dominant background color.
    types:
    - uid: string
  - name: dominantColors
    description: An array of possible dominant colors.
    types:
    - uid: string
      isArray: true
  - name: accentColor
    description: Possible accent color.
    types:
    - uid: string
  - name: isBWImg
    description: A value indicating if the image is black and white.
    types:
    - uid: boolean
- name: ImageType
  description: An object providing possible image types and matching confidence levels.
  kind: object
  properties:
  - name: clipArtType
    description: Confidence level that the image is a clip art.
    types:
    - uid: integer
  - name: lineDrawingType
    description: Confidence level that the image is a line drawing.
    types:
    - uid: integer
- name: ImageTag
  description: An entity observation in the image, along with the confidence score.
  kind: object
  properties:
  - name: name
    description: Name of the entity.
    types:
    - uid: string
  - name: confidence
    description: The level of confidence that the entity was observed.
    types:
    - uid: number
  - name: hint
    description: Optional hint/details for this tag.
    types:
    - uid: string
- name: ImageDescriptionDetails
  description: A collection of content tags, along with a list of captions sorted by confidence level, and image metadata.
  kind: object
  properties:
  - name: tags
    description: A collection of image tags.
    types:
    - uid: string
      isArray: true
  - name: captions
    description: A list of captions, sorted by confidence level.
    types:
    - uid: ImageCaption
      isArray: true
- name: FaceDescription
  description: An object describing a face identified in the image.
  kind: object
  properties:
  - name: age
    description: Possible age of the face.
    types:
    - uid: integer
  - name: gender
    description: Possible gender of the face.
    types:
    - uid: Gender
  - name: faceRectangle
    description: Rectangle in the image containing the identified face.
    types:
    - uid: FaceRectangle
- name: DetectedObject
  description: An object detected in an image.
  kind: object
  properties:
  - name: rectangle
    isReadyOnly: true
    description: Approximate location of the detected object.
    types:
    - uid: BoundingRect
  - name: object
    description: Label for the object.
    types:
    - uid: string
  - name: confidence
    description: Confidence score of having observed the object in the image, as a value ranging from 0 to 1.
    types:
    - uid: number
  - name: parent
    description: >-
      The parent object, from a taxonomy perspective.

      The parent object is a more generic form of this object.  For example, a 'bulldog' would have a parent of 'dog'.
    types:
    - uid: ObjectHierarchy
- name: DetectedBrand
  description: A brand detected in an image.
  kind: object
  properties:
  - name: name
    isReadyOnly: true
    description: Label for the brand.
    types:
    - uid: string
  - name: confidence
    isReadyOnly: true
    description: Confidence score of having observed the brand in the image, as a value ranging from 0 to 1.
    types:
    - uid: number
  - name: rectangle
    isReadyOnly: true
    description: Approximate location of the detected brand.
    types:
    - uid: BoundingRect
- name: ImageMetadata
  description: Image metadata.
  kind: object
  properties:
  - name: width
    description: Image width, in pixels.
    types:
    - uid: integer
  - name: height
    description: Image height, in pixels.
    types:
    - uid: integer
  - name: format
    description: Image format.
    types:
    - uid: string
- name: ComputerVisionErrorCodes
  description: The error code.
  kind: enum
  properties:
  - name: InvalidImageFormat
    types:
    - uid: string
  - name: UnsupportedMediaType
    types:
    - uid: string
  - name: InvalidImageUrl
    types:
    - uid: string
  - name: NotSupportedFeature
    types:
    - uid: string
  - name: NotSupportedImage
    types:
    - uid: string
  - name: Timeout
    types:
    - uid: string
  - name: InternalServerError
    types:
    - uid: string
  - name: InvalidImageSize
    types:
    - uid: string
  - name: BadArgument
    types:
    - uid: string
  - name: DetectFaceError
    types:
    - uid: string
  - name: NotSupportedLanguage
    types:
    - uid: string
  - name: InvalidThumbnailSize
    types:
    - uid: string
  - name: InvalidDetails
    types:
    - uid: string
  - name: InvalidModel
    types:
    - uid: string
  - name: CancelledRequest
    types:
    - uid: string
  - name: NotSupportedVisualFeature
    types:
    - uid: string
  - name: FailedToProcess
    types:
    - uid: string
  - name: Unspecified
    types:
    - uid: string
  - name: StorageException
    types:
    - uid: string
- name: CategoryDetail
  description: An object describing additional category details.
  kind: object
  properties:
  - name: celebrities
    description: An array of celebrities if any identified.
    types:
    - uid: CelebritiesModel
      isArray: true
  - name: landmarks
    description: An array of landmarks if any identified.
    types:
    - uid: LandmarksModel
      isArray: true
- name: ImageCaption
  description: An image caption, i.e. a brief description of what the image depicts.
  kind: object
  properties:
  - name: text
    description: The text of the caption.
    types:
    - uid: string
  - name: confidence
    description: The level of confidence the service has in the caption.
    types:
    - uid: number
- name: Gender
  description: Possible gender of the face.
  kind: enum
  properties:
  - name: Male
    types:
    - uid: string
  - name: Female
    types:
    - uid: string
- name: FaceRectangle
  description: An object describing face rectangle.
  kind: object
  properties:
  - name: left
    description: X-coordinate of the top left point of the face, in pixels.
    types:
    - uid: integer
  - name: top
    description: Y-coordinate of the top left point of the face, in pixels.
    types:
    - uid: integer
  - name: width
    description: Width measured from the top-left point of the face, in pixels.
    types:
    - uid: integer
  - name: height
    description: Height measured from the top-left point of the face, in pixels.
    types:
    - uid: integer
- name: BoundingRect
  description: A bounding box for an area inside an image.
  kind: object
  properties:
  - name: x
    description: X-coordinate of the top left point of the area, in pixels.
    types:
    - uid: integer
  - name: y
    description: Y-coordinate of the top left point of the area, in pixels.
    types:
    - uid: integer
  - name: w
    description: Width measured from the top-left point of the area, in pixels.
    types:
    - uid: integer
  - name: h
    description: Height measured from the top-left point of the area, in pixels.
    types:
    - uid: integer
- name: ObjectHierarchy
  description: An object detected inside an image.
  kind: object
  properties:
  - name: object
    description: Label for the object.
    types:
    - uid: string
  - name: confidence
    description: Confidence score of having observed the object in the image, as a value ranging from 0 to 1.
    types:
    - uid: number
  - name: parent
    description: >-
      The parent object, from a taxonomy perspective.

      The parent object is a more generic form of this object.  For example, a 'bulldog' would have a parent of 'dog'.
    types:
    - uid: ObjectHierarchy
- name: CelebritiesModel
  description: An object describing possible celebrity identification.
  kind: object
  properties:
  - name: name
    description: Name of the celebrity.
    types:
    - uid: string
  - name: confidence
    description: Confidence level for the celebrity recognition as a value ranging from 0 to 1.
    types:
    - uid: number
  - name: faceRectangle
    description: Location of the identified face in the image.
    types:
    - uid: FaceRectangle
- name: LandmarksModel
  description: A landmark recognized in the image.
  kind: object
  properties:
  - name: name
    description: Name of the landmark.
    types:
    - uid: string
  - name: confidence
    description: Confidence level for the landmark recognition as a value ranging from 0 to 1.
    types:
    - uid: number
examples:
- name: Successful AnalyzeImage request
  request:
    uri: POST https://westus.api.cognitive.microsoft.com/vision/v3.1/analyze?visualFeatures=Categories,Adult,Tags,Description,Faces,Color,ImageType,Objects,Brands&details=Celebrities,Landmarks&language=en
    body: >-
      {
        "url": "{url}"
      }
    codeTab: |+
      # [HTTP](#tab/HTTP)
      ``` http
      POST https://westus.api.cognitive.microsoft.com/vision/v3.1/analyze?visualFeatures=Categories,Adult,Tags,Description,Faces,Color,ImageType,Objects,Brands&details=Celebrities,Landmarks&language=en


      {
        "url": "{url}"
      }

      ```

    headers:
    - name: Ocp-Apim-Subscription-Key
      value: '{API key}'
  responses:
  - statusCode: "200"
    body: >-
      {
        "categories": [
          {
            "name": "abstract_",
            "score": 0.00390625
          },
          {
            "name": "people_",
            "score": 0.83984375,
            "detail": {
              "celebrities": [
                {
                  "name": "Satya Nadella",
                  "faceRectangle": {
                    "left": 597,
                    "top": 162,
                    "width": 248,
                    "height": 248
                  },
                  "confidence": 0.999028444
                }
              ]
            }
          },
          {
            "name": "building_",
            "score": 0.984375,
            "detail": {
              "landmarks": [
                {
                  "name": "Forbidden City",
                  "confidence": 0.9829016923904419
                }
              ]
            }
          }
        ],
        "adult": {
          "isAdultContent": false,
          "isRacyContent": false,
          "isGoryContent": false,
          "adultScore": 0.0934349000453949,
          "racyScore": 0.06861349195241928,
          "goreScore": 0.012872257380997575
        },
        "tags": [
          {
            "name": "person",
            "confidence": 0.9897908568382263
          },
          {
            "name": "man",
            "confidence": 0.9449388980865479
          },
          {
            "name": "outdoor",
            "confidence": 0.938492476940155
          },
          {
            "name": "window",
            "confidence": 0.8951393961906433
          },
          {
            "name": "pangolin",
            "confidence": 0.7250059783791661,
            "hint": "mammal"
          }
        ],
        "description": {
          "tags": [
            "person",
            "man",
            "outdoor",
            "window",
            "glasses"
          ],
          "captions": [
            {
              "text": "Satya Nadella sitting on a bench",
              "confidence": 0.48293603002174407
            }
          ]
        },
        "requestId": "0dbec5ad-a3d3-4f7e-96b4-dfd57efe967d",
        "metadata": {
          "width": 1500,
          "height": 1000,
          "format": "Jpeg"
        },
        "faces": [
          {
            "age": 44,
            "gender": "Male",
            "faceRectangle": {
              "left": 593,
              "top": 160,
              "width": 250,
              "height": 250
            }
          }
        ],
        "color": {
          "dominantColorForeground": "Brown",
          "dominantColorBackground": "Brown",
          "dominantColors": [
            "Brown",
            "Black"
          ],
          "accentColor": "873B59",
          "isBWImg": false
        },
        "imageType": {
          "clipArtType": 0,
          "lineDrawingType": 0
        },
        "objects": [
          {
            "rectangle": {
              "x": 0,
              "y": 0,
              "w": 50,
              "h": 50
            },
            "object": "tree",
            "confidence": 0.9,
            "parent": {
              "object": "plant",
              "confidence": 0.95
            }
          }
        ],
        "brands": [
          {
            "name": "Pepsi",
            "confidence": 0.857,
            "rectangle": {
              "x": 489,
              "y": 79,
              "w": 161,
              "h": 177
            }
          },
          {
            "name": "Coca-Cola",
            "confidence": 0.893,
            "rectangle": {
              "x": 216,
              "y": 55,
              "w": 171,
              "h": 372
            }
          }
        ]
      }
security:
- name: Ocp-Apim-Subscription-Key
  type: apiKey
  in: header
metadata:
  description: >-
    This operation extracts a rich set of visual features based on the image content.

    Two input methods are supported -- (1) Uploading an image or (2) specifying an
errorCodes: []
